<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />



<title>Calculer un âge</title>

<script src="libs/jquery-1.11.0/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.1/css/flatly.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.1/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.1/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.1/shim/respond.min.js"></script>
<link rel="stylesheet" href="./include/analyse-R.css" />
<script type="text/javascript" src="./libs/zeroclipboard-2.2.0/ZeroClipboard.js"></script>
<link rel="stylesheet" href="./libs/colorbox-1.6.1/colorbox.css" />
<script type="text/javascript" src="./libs/colorbox-1.6.1/jquery.colorbox-min.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>



</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img { 
  max-width:100%; 
  height: auto; 
}
</style>
<div class="container-fluid main-container">

<nav>
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href=".">analyse-R</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li><a href="index.html">Accueil</a></li>
        <li class="dropdown">
          <a href="pem" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Prise en main <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="pem_presentation_installation.html">Présentation et Installation</a></li>
            <li><a href="pem_premier_contact.html">Premier contact</a></li>
            <li><a href="pem_premier_travail.html">Premier travail avec des données</a></li>
            <li><a href="pem_stat_univ.html">Statistique univariée</a></li>
            <li><a href="pem_organiser_fichiers.html">Organiser ses fichiers</a></li>
            <li><a href="pem_import_export.html">Import / Export de données</a></li>
            <li><a href="pem_manipulation.html">Manipulation de données</a></li>
            <li><a href="pem_export_graphiques.html">Exporter des graphiques</a></li>
            <li><a href="pem_ou_trouver_aide.html">Où trouver de l'aide ?</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a href="analyses" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Analyses <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="analyses_stat_biv.html">Statistique bivariée</a></li>
            <li><a href="analyses_reglog.html">Régression logistique</a></li>
            <li><a href="analyses_donnees_pond.html">Données pondérées</a></li>
            <li><a href="analyses_acm.html">Analyse des correspondances multiples (ACM)</a></li>
            <li><a href="analyses_cah.html">Classification ascendante hiérarchique (CAH)</a></li>
            <li><a href="analyses_seq.html">Analyse de séquences</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a href="avance" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Avancé <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li class="dropdown-header">Astuces</li>
            <li><a href="avance_age.html">Calculer un âge</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a href="index" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Index <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="index_concepts.html">Index des concepts</a></li>
            <li><a href="index_fonctions.html">Index des fonctions</a></li>
            <li><a href="index_extensions.html">Index des extensions</a></li>
          </ul>
        </li>
        <li><a href="analyse-R.pdf">PDF</a></li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
          <a href="participer" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Participer <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
              <li><a href="https://github.com/larmarange/analyse-R">analyse-R sur GitHub</a></li>
          </ul>
        </li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->
</nav>

<div class="row">

<div class="col-sm-9" role="main">
<article>

<div id="header">
<h1 class="title">Calculer un âge</h1>
</div>

<div id="TOC">
<ul>
<li><a href="#rappel-sur-les-ages">Rappel sur les âges</a></li>
<li><a href="#le-package-lubridate">Le package lubridate</a></li>
<li><a href="#calcul-dun-age-exact">Calcul d’un âge exact</a><ul>
<li><a href="#cas-particulier-des-personnes-nees-un-29-fevrier">Cas particulier des personnes nées un 29 février</a></li>
</ul></li>
<li><a href="#age-revolu-ou-age-au-dernier-anniversaire">Âge révolu ou âge au dernier anniversaire</a></li>
<li><a href="#age-par-difference-de-millesimes">Âge par différence de millésimes</a></li>
</ul>
</div>

<div class="note">
La version originale de cette astuce a été publiée par Joseph Larmarange sur <a href="http://joseph.larmarange.net/?Calculer-proprement-un-age-sous-R" class="uri">http://joseph.larmarange.net/?Calculer-proprement-un-age-sous-R</a>.
</div>
<p>Le calcul d’un âge sous <strong>R</strong> n’est pas forcément aussi trivial qu’il n’y parait.</p>
<div id="rappel-sur-les-ages" class="section level2">
<h2>Rappel sur les âges</h2>
<p>Il convient en premier lieu de rappeler les principaux âges utilisés les démographes :</p>
<blockquote>
<p>L’âge – on précise parfois âge chronologique – est une des caractéristiques fondamentales de la structure des populations. On l’exprime généralement en années, ou en années et mois, voire en mois et jours, pour les enfants en bas âge ; parfois en années et fractions décimales d’année. Les démographes arrondissent d’ordinaire l’âge à l’unité inférieure, l’exprimant ainsi en années révolues, ou années accomplies, le cas échéant en mois révolus, ou mois accomplis. Cet âge est aussi l’âge au dernier anniversaire. On trouve aussi, dans les statistiques, l’âge atteint dans l’année, qui est égal à la différence de millésimes entre l’année considérée et l’année de naissance. […] On est parfois conduit à préciser que l’on considère un âge exact, pour éviter toute confusion avec un âge en années révolues, qui représente en fait une classe d’âges exacts.</p>
<footer>
Source : <a href="http://fr-ii.demopaedia.org/wiki/32#322"><cite>Demopædia</cite> (322)</a>
</footer>
</blockquote>
</div>
<div id="le-package-lubridate" class="section level2">
<h2>Le package lubridate</h2>
<p>Le package <strong class="package">lubridate</strong> est spécialement développé pour faciliter la manipulation et le calcul autour des dates. La version de développement intègre depuis peu une fonction <code data-package="lubridate">time_length</code> adaptée au calcul des âges exacts.</p>
<div class="info">
<p>La fonction <code data-package="lubridate">time_length</code> étant récente, elle n’est pas encore disponible dans la version stable du package. Pour installer la version de développement de <strong class="package">lubridate</strong>, on aura recours au package <strong class="package">devtools</strong> :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(devtools)
<span class="kw">install_github</span>(<span class="st">&quot;hadley/lubridate&quot;</span>)</code></pre>
</div>
<p>Nous noterons <code>naiss</code> la date de naissance et <code>evt</code> la date à laquelle nous calculerons l’âge.</p>
</div>
<div id="calcul-dun-age-exact" class="section level2">
<h2>Calcul d’un âge exact</h2>
<p>Une approche simple consiste à calculer une différence en jours puis à diviser par 365. Or, le souci c’est que toutes les années n’ont pas le même nombre de jours. Regardons par exemple ce qui se passe si l’on calcule l’âge au 31 décembre 1999 d’une personne née le 1<sup>er</sup> janvier 1900.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(lubridate)
naiss &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">&quot;1900-01-01&quot;</span>)
evt &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">&quot;1999-12-31&quot;</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">&quot;days&quot;</span>)</code></pre>
<pre><code>[1] 36523</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">&quot;days&quot;</span>)/<span class="dv">365</span></code></pre>
<pre><code>[1] 100.063</code></pre>
<p>Or, au 31 décembre 1999, cette personne n’a pas encore fêté son centième anniversaire. Le calcul précédent ne prend pas en compte les années bissextiles. Une approche plus correcte serait de considérer que les années durent en moyenne 365,25 jours.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">&quot;days&quot;</span>)/<span class="fl">365.25</span></code></pre>
<pre><code>[1] 99.99452</code></pre>
<p>Si cette approche semble fonctionner avec cet exemple, ce n’est plus le cas dans d’autres situations.</p>
<pre class="sourceCode r"><code class="sourceCode r">evt &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">&quot;1903-01-01&quot;</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">&quot;days&quot;</span>)/<span class="fl">365.25</span></code></pre>
<pre><code>[1] 2.997947</code></pre>
<p>Or, à la date du premier janvier 1903, cette personne a bien fêté son troisième anniversaire.</p>
<p>Pour calculer proprement un âge en années (ou en mois), il est dès lors nécessaire de prendre en compte la date anniversaire et le fait que la durée de chaque année (ou mois) est variable. C’est justement ce que fait la fonction <code data-package="lubridate">time_length</code> appliquée à un objet de type <code data-package="lubridate" data-rdocumentation="Interval-class">Interval</code>. On détermine le dernier et le prochain anniversaire et l’on rajoute, à l’âge atteint au dernier anniversaire, le ratio entre le nombre de jours entre l’événement et le dernier anniversaire par le nombre de jours entre le prochain et le dernier anniversaire.</p>
<pre class="sourceCode r"><code class="sourceCode r">naiss &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">&quot;1900-01-01&quot;</span>)
evt &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">&quot;1999-12-31&quot;</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">&quot;years&quot;</span>)</code></pre>
<pre><code>[1] 99.99726</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">evt &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">&quot;1903-01-01&quot;</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">&quot;years&quot;</span>)</code></pre>
<pre><code>[1] 3</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">evt &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">&quot;1918-11-11&quot;</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">&quot;years&quot;</span>)</code></pre>
<pre><code>[1] 18.86027</code></pre>
<p>Attention, cela n’est valable que si l’on présente à la fonction <code data-package="lubridate">time_length</code> un objet de type <code data-package="lubridate" data-rdocumentation="Interval-class">Interval</code> (pour lequel on connait dès lors la date de début et la date de fin). Si l’on passe une durée (objet de type <code data-package="lubridate" data-rdocumentation="Duration-class">Duration</code>) à la fonction <code data-package="lubridate">time_length</code>, le calcul s’effectuera alors en prenant en compte la durée moyenne d’une année (plus précisément 365 jours).</p>
<pre class="sourceCode r"><code class="sourceCode r">naiss &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">&quot;1900-01-01&quot;</span>)
evt &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">&quot;1999-12-31&quot;</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">&quot;years&quot;</span>)</code></pre>
<pre><code>[1] 99.99726</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">time_length</span>(evt -<span class="st"> </span>naiss, <span class="st">&quot;years&quot;</span>)</code></pre>
<pre><code>[1] 100.063</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">time_length</span>(<span class="kw">as.duration</span>(<span class="kw">interval</span>(naiss, evt)), <span class="st">&quot;years&quot;</span>)</code></pre>
<pre><code>[1] 100.063</code></pre>
<div id="cas-particulier-des-personnes-nees-un-29-fevrier" class="section level3">
<h3>Cas particulier des personnes nées un 29 février</h3>
<p>Pour les personnes nées un 29 février, il existe un certain flou concernant leur date d’anniversaire pour les années non bissextiles. Doit-on considérer qu’il s’agit du 28 février ou du 1<sup>er</sup> mars ?</p>
<p>Au sens strict, on peut considérer que leur anniversaire a lieu entre le 28 février soir à minuit et le 1<sup>er</sup> mars à 0 heure du matin, autrement dit que le 28 février ils n’ont pas encore fêté leur anniversaire. C’est la position adoptée par la fonction <code data-package="lubridate">time_length</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r">naiss &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">&quot;1992-02-29&quot;</span>)
evt &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">&quot;2014-02-28&quot;</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">&quot;years&quot;</span>)</code></pre>
<pre><code>[1] 21.99726</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">evt &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">&quot;2014-03-01&quot;</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">&quot;years&quot;</span>)</code></pre>
<pre><code>[1] 22</code></pre>
<p>Cette approche permets également d’être cohérent avec la manière dont les dates sont prises en compte informatiquement. On considère en effet que lorsque seule la date est précisée (sans mention de l’heure), l’heure correspondante est <code>0:00</code>. Autrement dit, <code>&quot;2014-03-01&quot;</code> est équivalent à <code>&quot;2014-03-01 00:00:00&quot;</code>. L’approche adoptée permet donc d’être cohérent lorsque l’anniversaire est calculé en tenant compte des heures.</p>
<pre class="sourceCode r"><code class="sourceCode r">naiss &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">&quot;1992-02-29&quot;</span>)
evt &lt;-<span class="st"> </span><span class="kw">ymd_hms</span>(<span class="st">&quot;2014-02-28 23:00:00&quot;</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">&quot;years&quot;</span>)</code></pre>
<pre><code>[1] 21.99989</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">evt &lt;-<span class="st"> </span><span class="kw">ymd_hms</span>(<span class="st">&quot;2014-03-01 00:00:00&quot;</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">&quot;years&quot;</span>)</code></pre>
<pre><code>[1] 22</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">evt &lt;-<span class="st"> </span><span class="kw">ymd_hms</span>(<span class="st">&quot;2014-03-01 01:00:00&quot;</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">&quot;years&quot;</span>)</code></pre>
<pre><code>[1] 22.00011</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">naiss &lt;-<span class="st"> </span><span class="kw">ymd_hms</span>(<span class="st">&quot;1992-02-29 12:00:00&quot;</span>)
evt &lt;-<span class="st"> </span><span class="kw">ymd_hms</span>(<span class="st">&quot;2014-03-01 01:00:00&quot;</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">&quot;years&quot;</span>)</code></pre>
<pre><code>[1] 22.00011</code></pre>
</div>
</div>
<div id="age-revolu-ou-age-au-dernier-anniversaire" class="section level2">
<h2>Âge révolu ou âge au dernier anniversaire</h2>
<p>Une fois que l’on sait calculer un âge exact, le calcul d’un âge révolu est assez simple. Il suffit de ne garder que la partie entière de l’âge exact (approche conseillée).</p>
<pre class="sourceCode r"><code class="sourceCode r">naiss &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">&quot;1980-01-09&quot;</span>)
evt &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">&quot;2015-01-01&quot;</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">&quot;years&quot;</span>)</code></pre>
<pre><code>[1] 34.97808</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">trunc</span>(<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">&quot;years&quot;</span>))</code></pre>
<pre><code>[1] 34</code></pre>
<p>Une autre approche consiste à convertir l’intervalle en objet de type <code data-package="lubridate" data-rdocumentation="Period-class">Period</code> et à ne prendre en compte que les années.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as.period</span>(<span class="kw">interval</span>(naiss, evt))</code></pre>
<pre><code>[1] &quot;34y 11m 23d 0H 0M 0S&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as.period</span>(<span class="kw">interval</span>(naiss, evt))@year</code></pre>
<pre><code>[1] 34</code></pre>
</div>
<div id="age-par-difference-de-millesimes" class="section level2">
<h2>Âge par différence de millésimes</h2>
<p>L’âge par différence de millésimes, encore appelé âge atteint dans l’année, s’obtient tout simplement en soustrayant l’année de naissance à l’année de l’événement.</p>
<pre class="sourceCode r"><code class="sourceCode r">naiss &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">&quot;1980-01-09&quot;</span>)
evt &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">&quot;2015-01-01&quot;</span>)
<span class="kw">year</span>(evt) -<span class="st"> </span><span class="kw">year</span>(naiss)</code></pre>
<pre><code>[1] 35</code></pre>
<div class="note">
<p>L’ensemble des fonctions présentées peuvent être appliquées à des vecteurs et, par conséquent, aux colonnes d’un tableau de données (<em>data.frame</em>).</p>
<p>Le package <strong class="package">eeptools</strong> fournit de son côté une fonction <code data-package="eeptools">age_calc</code><a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a> qui permet le calcul des âges exacts et révolus.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(eeptools)</code></pre>
<pre><code>Loading required package: ggplot2
Loading required package: MASS</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">naiss &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="st">&quot;1980-01-09&quot;</span>)
evt &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="st">&quot;2015-01-01&quot;</span>)
<span class="kw">age_calc</span>(naiss, evt, <span class="dt">units =</span> <span class="st">&quot;years&quot;</span>, <span class="dt">precise =</span> <span class="ot">TRUE</span>)</code></pre>
<pre><code>[1] 34.97814</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">&quot;years&quot;</span>)</code></pre>
<pre><code>[1] 34.97808</code></pre>
<p>La méthode utilisée par <code data-package="eeptools">age_calc</code> donne des résultats légèrement différent de ceux de <code data-package="lubridate">time_length</code>. Il est donc conseillé d’utiliser de préférence le package <strong class="package">lubridate</strong>.</p>
<p>En l’absence du package lubridate, il reste facile de calculer une durée en jours avec les fonctions de base de <strong>R</strong>.</p>
<pre class="sourceCode r"><code class="sourceCode r">naiss &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="st">&quot;1900-01-01&quot;</span>)
evt &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="st">&quot;1999-12-31&quot;</span>)
evt -<span class="st"> </span>naiss</code></pre>
<pre><code>Time difference of 36523 days</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as.integer</span>(evt -<span class="st"> </span>naiss)</code></pre>
<pre><code>[1] 36523</code></pre>
</div>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p><a href="https://github.com/jknowles/eeptools/blob/master/R/age_calc.R" class="uri">https://github.com/jknowles/eeptools/blob/master/R/age_calc.R</a><a href="#fnref1">↩</a></p></li>
</ol>
</div>

</article>
</div>

<div class="col-sm-3" role="complementary">
<nav class="hidden-print hidden-xs" id="nav_sidebar">
</nav>
</div>

</div>

<script>
// manage active state of menu based on current page
$(document).ready(function () {

    // active menu
    href = window.location.pathname;
    href = href.substr(href.lastIndexOf('/') + 1);
    if (href=='') href = 'index.html';
    $('a[href="' + href + '"]').parent().addClass('active');

    // manage active menu header
    if (href.startsWith('pem_'))
      $('a[href="' + 'pem' + '"]').parent().addClass('active');
    else if (href.startsWith('analyses_'))
      $('a[href="' + 'analyses' + '"]').parent().addClass('active');
    else if (href.startsWith('avance_'))
      $('a[href="' + 'avance' + '"]').parent().addClass('active');
    else if (href.startsWith('index_'))
      $('a[href="' + 'index' + '"]').parent().addClass('active');

    // élargir la page d'accueil
    if (href=='index.html') $('.col-sm-9').attr('class','col-sm-12');

    // sidebar
    $("#nav_sidebar").append($("#TOC").html());
    $("#nav_sidebar ul").addClass("nav nav-stacked");
    $("#TOC").addClass("visible-xs-block");
    $('body').scrollspy({
      target: '#nav_sidebar',
      offset: 40
    });

    // Identifier les <pre> fermant
    $('pre').next("*:not(pre)").prev().addClass('last'); // Dernier <pre> de chaque groupe contigu de <pre>
    $('pre').parent().each(function (){
      $(this).children('pre').last().addClass('last');
    }); // Si <pre> est le dernier enfant de son parent

    // Ajout liens rdocumentation et tooltip
    $("code[data-package]").each(function( index ) {
      pack = $(this).attr('data-package');
      if ($(this).attr('data-rdocumentation') !== undefined) {
        rdocumentation = $(this).attr('data-rdocumentation');
      } else {
        rdocumentation = $(this).text();
      }
      fonction = $(this).text();
      $(this).wrap('<a href="http://www.rdocumentation.org/packages/'+pack+'/functions/'+rdocumentation+'">');
      $(this).attr('data-toggle','tooltip');
      $(this).attr('data-placement','top');
      $(this).attr('title','package : ' + pack);
      $('[data-toggle="tooltip"]').tooltip();
    });

    $("strong.package").each(function( index ) {
      $(this).wrap('<a href="http://www.rdocumentation.org/packages/'+$(this).text()+'">');
    });

    // Figures
    $("figure").each(function( index ) {
      if ($(this).children("figcaption").length > 0)
        $(this).children("figcaption:first").prepend('<span class="figure-number">Figure '+(index+1)+'.</span> ');
      else
        $(this).append($("<figcaption>").append('<span class="figure-number">Figure '+(index+1)+'</span>'));
    });

    // Colorbox
    jQuery('div img').colorbox({
      maxWidth: '90%',
      maxHeight: '90%',
      rel: 'figures',
      current: "",
      href: function(){
        return $(this).attr('src');
      },
      title: function(){
        return $(this).attr('alt');
      }
    });
    jQuery('div img').css('cursor', 'pointer');
    jQuery('figure img').colorbox({
      maxWidth: '90%',
      maxHeight: '90%',
      rel: 'figures',
      current: "",
      href: function(){
        return $(this).attr('src');
      },
      title: function(){
        return $(this).parent().children("figcaption").text();
      }
    });
    jQuery('figure img').css('cursor', 'pointer');

    // ZeroClipboard
    $('pre.r').parent().each(function(){
      $(this).children('pre.r').first().before('<div class="zero-clipboard hidden-print hidden-xs"><button class="btn-clipboard">Copier</button></div>');
    }); // Il peut arriver que le pre ne soit pas précédé (cf. figures)
    $('*:not(pre):not(.zero-clipboard) + pre.r').before('<div class="zero-clipboard hidden-print hidden-xs"><button class="btn-clipboard">Copier</button></div>');
    $('pre.last').after(function() {
      if ($(this).hasClass("r")) res = $(this).text(); else res = "";
      $(this).prevUntil('*:not(pre)','pre.r').each(function() {
        res = $(this).text() + '\n' + res;
      });
      return '<div class="clipboard">' + res + '</div>';
    });
    $('.zero-clipboard').each(function(index){
      $(this).children('.btn-clipboard').attr('data-clipboard-target','clipboard_'+index);
      $(this).nextAll("div.clipboard").first().attr('id','clipboard_'+index);
    });
    var client = new ZeroClipboard( $(".btn-clipboard") );
    client.on( "ready", function( readyEvent ) {
      // alert( "ZeroClipboard SWF is ready!" );
      client.on( "aftercopy", function( event ) {
        // `this` === `client`
        // `event.target` === the element that was clicked
        //event.target.style.display = "none";
        $(event.target).parent().before('<div class="alert alert-success"><a href="#" class="close" data-dismiss="alert">&times;</a>Le code <strong>R</strong> de l’exemple a été copié dans le presse-papier.</div>');
      } );
    } );

});
</script>

<!-- disqus -->
<div class="row">
  <div id="disqus_thread" class="col-sm-9" role="complementary"></div>
</div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'analyse-r'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Veuillez activer JavaScript pour voir les <a href="http://disqus.com/?ref_noscript">les commentaires gérés avec Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">Les commentaires sont hébergés par <span class="logo-disqus">Disqus</span>.</a>

</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>


</body>
</html>
