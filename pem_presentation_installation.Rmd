---
title: "Présentation et Installation"
---

```{r options_communes, include=FALSE}
source("options_communes.R")
```

## Présentation de R

**R** est un langage orienté vers le traitement de données et l'analyse statistique dérivé du langage **S**.
Il est développé depuis une vingtaine d'années par un groupe de volontaires de différents pays. C'est un
<em class="concept">logiciel libre</em><em class="concept" data-index="libre, logiciel"></em>^[Pour plus
d'informations sur ce qu'est un logiciel libre, voir :
<http://www.gnu.org/philosophy/free-sw.fr.html>.], publié sous licence GNU GPL.

L'utilisation de **R** présente plusieurs avantages :

* c'est un logiciel multiplateforme, qui fonctionne aussi bien sur des sytèmes 
  **Linux**, **Mac OS X** ou **Windows** ;
* c'est un logiciel libre, développé par ses utilisateurs et modifiable par tout un chacun ;
* c'est un logiciel gratuit ;
* c'est un logiciel très puissant, dont les fonctionnalités de base peuvent être étendues à 
  l'aide de plusieurs milliers d'extensions ;
* c'est un logiciel dont le développement est très actif et dont la communauté d'utilisateurs 
  ne cesse de s'élargir ;
* les possibilités de manipulation de données sous **R** sont en général largement supérieures
  à celles des autres logiciels usuels d'analyse statistique ;
* c'est un logiciel avec d'excellentes capacités graphiques et de nombreuses possibilités
  d'export ;
* avec **Rmarkdown***^[Voir <http://rmarkdown.rstudio.com/>.], il est devenu très aisé de
  produire des rapports automatisés dans divers format (**Word**, **PDF**, **HTML**, ...) ;
* **R** est de plus utilisé dans tous les secteurs scientifiques, y compris dans le domaine
  des analyses d'enquêtes et, plus généralement, des sciences sociales.

Comme rien n'est parfait, on peut également trouver quelques inconvénients :

* le logiciel, la documentation de référence et les principales ressources sont en anglais. 
  Il est toutefois parfaitement possible d'utiliser **R** sans spécialement maîtriser cette langue ;
* il n'existe pas encore d'interface graphique pour **R** équivalente à celle d'autres logiciels comme 
  **SPSS** ou **Modalisa**. **R** fonctionne à l'aide de <em class="concept">scripts*</em>
  (des petits programmes) édités et exécutés au fur et à mesure de l'analyse et se 
  rapprocherait davantage de **SAS** dans son utilisation 
  (mais avec une syntaxe et une philosophie très différentes). Ce point, qui peut apparaître comme un 
  gros handicap, s'avère après un temps d'apprentissage être un mode d'utilisation d'une grande souplesse ;
* comme **R** s'apparente davantage à un langage de programmation qu'à un logiciel proprement dit, la
  courbe d'apprentissage peut être un peu « raide », notamment pour ceux n'ayant jamais programmé
  auparavant.

Il est à noter que le développement autour de **R** a été particulièrement actif ces dernières années.
On trouvera dès lors aujourd'hui de nombreuses extensions permettant de se « faciliter la vie » au
quotidien, ce qui n'était pas vraiment encore le cas il y a 5 ans.

## Philosophie de R

Quelques points particuliers dans le fonctionnement de **R** peuvent parfois dérouter les utilisateurs 
habitués à d'autres logiciels :

* Sous **R**, en général, on ne voit pas directement les données sur lesquelles on travaille ;
  on ne dispose pas en permanence d'une vue des données sous forme de tableau^[On verra qu'il est possible
  avec **RStudio** de disposer d'une telle vue.], comme sous **Modalisa ou SPSS**. Ceci peut
  être déroutant au début, mais on se rend vite compte qu'on n'a pas besoin de voir en permanence
  les données pour les analyser.
* Alors qu'avec la plupart des logiciels on réfléchira avec un fichier de données ouvert à la fois,
  sous **R** chaque fichier de données correspondra à un objet différent chargé en mémoire, 
  permettant de manipuler très facilement
  plusieurs objets à la fois (par exemple dans le cadre de fusion de tables^[Voir par exemple la section
  dédiée à ce sujet dans le [chapitre sur la manipulation de données](pem_manipulation.html#fusion_tables).]).
* Avec les autres logiciels, en général la production d'une analyse génère un grand nombre de résultats
  de toutes sortes dans lesquels l'utilisateur est censé retrouver et isoler ceux qui l'intéressent. Avec
  **R**, c'est l'inverse : par défaut l'affichage est réduit au minimum et c'est l'utilisateur qui demande à
  voir des résultats supplémentaires ou plus détaillés.
* Sous **R**, les résultats des analyses sont eux aussi stockés dans des objets et sont dès lors
  manipulables. 

Inhabituel au début, ce fonctionnement permet en fait assez rapidement de gagner du temps dans la
conduite des analyses.

## Présentation de RStudio

L'interface de base de **R** est assez rudimentaire (voir figure ci-après).

<figure>
![Interface de R sous Windows](images/capture_RGui.png)
<figcaption>Interface de R sous Windows</figcaption>
</figure>

**RStudio** est un <em class="concept">environnement de développement</em> intégré 
libre, gratuit, et qui fonctionne sous **Windows**,
**Mac OS X** et **Linux**. Il complète **R** et fournit un <em class="concept">éditeur de script</em>
avec <em class="concept">coloration syntaxique</em>, 
des fonctionnalités pratiques d'édition et d'exécution du code (comme l'<em class="concept">autocomplétion</em>), 
un affichage simultané du code, de la console **R**, des fichiers, graphiques et pages d'aide, 
une gestion des extensions, une intégration avec des systèmes de contrôle de versions comme **git**, etc.
Il intègre de base divers outils comme par exemple la production de rapports au format **Rmarkdown**.
Il est en développement actif et de nouvelles fonctionnalités sont ajoutées régulièrement. 
Son principal défaut est d'avoir une interface uniquement anglophone.

<figure>
![Interface de RStudio sous Windows](images/capture_RStudio.png)
<figcaption>Interface de RStudio sous Windows</figcaption>
</figure>

Pour une présentation plus générale de **RStudio** on pourra se référer au site du projet :
<http://www.rstudio.com/>.

**RStudio** peut tout à fait être utilisé pour découvrir et démarrer avec **R**. Les différents 
chapitres d'**analyse-R** partent du principe que vous utilisez **R** avec **RStudio**. Cependant, 
à part les éléments portant sur l'interface de **RStudio**, l'ensemble du code et des fonctions **R** 
peuvent être utilisés directement dans **R**, même en l'absence de **RStudio**.

La documentation de **RStudio** (en anglais) est disponible en ligne à
<https://support.rstudio.com>. Pour être tenu informé des dernières évolutions de
**RStudio**, mais également de plusieurs extensions développées dans le cadre de ce
projet, vous pouvez suivre le blog dédié <http://blog.rstudio.org/>.

## Installation

Il est préférable de commencer par installer **R** avant d'installer **RStudio**.

### Installation de R

Pour une <em class="concept">installation</em> sous **Windows**, on se rendra sur cette page :
<http://cran.r-project.org/bin/windows/base/> et l'on suivra le premier lien
pour télécharger le programme d'installation. Une fois le programme d'installation
lancé, il suffira d'installer **R** avec les options par défaut^[Dans le cas particulier
où votre ordinateur est situé derrière un <em class="concept">proxy</em>, 
il est préférable de choisir
*Options de démarrage personnalisées* lorsque cela vous sera demandé par le programme
d'installation, puis *Internet2* lorsqu'on vous demandera le mode de connexion
à Internet. Ainsi, **R** utilisera par défaut la configuration internet du navigateur
**Internet Explorer** et prendra ainsi en compte les paramètres du *proxy*.].

Pour **Mac OS X**, les fichiers d'installation sont disponibles à 
<http://cran.r-project.org/bin/macosx/>.

Si vous travaillez sous **Linux**, vous devriez pouvoir trouver **R** via votre
gestionnaire de paquets, cela pouvant dépendre d'une distribution de **Linux**
à une autre.

### Installation de RStudio

Une fois **R** correctement installé, rendez-vous sur
<http://www.rstudio.com/products/rstudio/download/> pour télécharger la dernière
version stable de **RStudio**. Plus précisément, il s'agit de l'édition *Open Source*
de **RStudio Desktop** (en effet, il existe aussi une version serveur).

Choisissez l'installateur correspondant à votre système d'exploitation et suivez
les instructions du programme d'installation.

Si vous voulez tester les dernières fonctionnalités de **RStudio**, vous pouvez
télécharger la version de développement (plus riche en fonctionnalités que la
version stable, mais pouvant contenir des bugs) sur
<http://www.rstudio.com/products/rstudio/download/preview/>.

## Installer des extensions{#installer_extensions}

### Présentation

L'installation par défaut du logiciel **R** contient le cœur du programme ainsi qu'un ensemble de fonctions
de base fournissant un grand nombre d'outils de traitement de données et d'analyse statistiques.

**R** étant un logiciel libre, il bénéficie d'une forte communauté d'utilisateurs qui peuvent librement
contribuer au développement du logiciel en lui ajoutant des fonctionnalités supplémentaires. Ces contributions
prennent la forme d'<em class="concept" data-index="extension">extensions</em> 
(<em class="concept" data-index="package">packages</em>) pouvant être installées par l'utilisateur 
et fournissant alors diverses fonctionnalités supplémentaires.

Il existe un très grand nombre d'extensions (plus de 6500 à ce jour), qui sont diffusées par un réseau
baptisé **CRAN** 
(<em class="concept">Comprehensive R Archive Network</em><em class="concept" data-index="CRAN"></em>).

La liste de toutes les extensions disponibles sur **CRAN** est disponible ici :
<http://cran.r-project.org/web/packages/>.

Pour faciliter un peu le repérage des extensions, il existe un ensemble de regroupements thématiques
(économétrie, finance, génétique, données spatiales...) baptisés 
<em class="concept">Task views</em> :
<http://cran.r-project.org/web/views/>.

On y trouve notamment une *Task view* dédiée aux sciences sociales, listant de nombreuses extensions
potentiellement utiles pour les analyses statistiques dans ce champ disciplinaire :
<http://cran.r-project.org/web/views/SocialSciences.html>.

### Installation depuis CRAN

L'installation d'une extension se fait par la fonction `install.packages`{utils}, 
à qui on fournit le nom de l'extension. Par exemple, si on souhaite installer l'extension **ade4** :

```{r, eval=FALSE}
install.packages("ade4", dep = TRUE)
```

L'option `dep=TRUE` indique à **R** de télécharger et d'installer également toutes les extensions dont
l'extension choisie dépend pour son fonctionnement.

Sous **RStudio**, on pourra également cliquer sur *Install* dans l'onglet *Packages* du quadrant
inférieur droit.

Une fois l'extension installée, elle peut être appelée depuis la console ou un fichier script 
avec la fonction `library`{data-package="base"} ou la fonction 
`require`{data-package="base" data-rdocumentation="library"} :

```{r, eval=FALSE}
library(ade4)
```

À partir de là, on peut utiliser les fonctions de l'extension, consulter leur page d'aide en ligne, accéder
aux jeux de données qu'elle contient, etc.

Pour mettre à jour l'ensemble des extensions installées, 
<em class="index" data-index="mise à jour, extensions"></em>
la fonction `update.packages`{data-package="utils"} suffit :

```{r, eval=FALSE}
update.packages()
```

Sous **RStudio**, on pourra alternativement cliquer sur *Update* dans l'onglet *Packages* du quadrant
inférieur droit.


Si on souhaite désinstaller une extension précédemment installée, on peut utiliser la fonction
`remove.packages`{data-package="utils"} :

```{r, eval=TRUE}
remove.packages("ade4")
```

<div class="important">
Il est important de bien comprendre la différence entre `install.packages`{data-package="utils"} et 
`library`{data-package="base"}. La première va chercher les extensions sur internet et les installe 
en local sur le disque dur de l'ordinateur. On n'a besoin d'effectuer cette opération qu'une seule fois. 
La seconde lit les informations de l'extension sur le disque dur
et les met à disposition de **R**. On a besoin de l'exécuter à chaque début de session ou de script.
</div>

### Installation depuis GitHub

Certains packages sont développés sur [**GitHub**](https://github.com/). Dès lors, la version de
développement sur **GitHub** peut contenir des fonctions qui ne sont pas encore disponibles dans
la version stable disponible sur **CRAN**. Ils arrivent aussi parfois que certains packages ne soient
disponibles que sur **GitHub**.

L'installation d'un package depuis **GitHub** est très facile grâce à la fonction
`install_github`{data-package="devtools"} de l'extension <strong class="package">devtools</strong>
(que l'on aura préalablement installée depuis **CRAN** ;-) ).

## Mise à jour de R sous Windows

Pour mettre à jour **R** sous **Windows**<em class="index" data-index="mise à jour, R"></em>, 
il suffit de télécharger et d'installer la dernière version du programme d'installation.

Petite particularité, la nouvelle version sera installée à côté de l'ancienne version.
Si vous souhaitez faire de la place sur votre disque dur, vous pouvez désinstaller l'ancienne
version en utilisant l'utilitaire *Désinstaller un programme* de **Windows**.

Lorsque plusieurs versions de **R** sont disponibles, **RStudio** choisit par défaut la plus récente.
Il est vous est possible de spécifier à **RStudio** quelle version de **R** utiliser via le menu
*Tools* > *Global Options* > *General*.

Petit défaut, les extensions (*packages*) sont installées par défaut sous **Windows** dans le
répertoire `Documents de l'utilisateur > R > win-library > x.y` avec `x.y` correspondant
au numéro de la version de **R**. Ainsi, si l'on travaillait avec la version 3.0 et que l'on passe
à la version 3.2, les extensions que l'on avait sous l'ancienne version ne sont plus disponibles
pour la nouvelle version. Une astuce consiste à recopier le contenu du répertoire `3.0` dans le répertoire
`3.2`. Puis, on lancera **RStudio** (s'il était déjà ouvert, on le fermera puis relancera) et on mettra à
jour l'ensemble des packages, soit avec la fonction, `update.packages`{data-package="utils"} soit en cliquant
sur *Update* dans l'onglet *Packages* du quadrant inférieur droit.
