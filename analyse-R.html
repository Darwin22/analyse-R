<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<title>analyse-R</title>

<script src="libs/jquery-1.11.0/jquery.min.js"></script>
<link href="include/flatly.print.css" rel="stylesheet" />
<link href="include/analyse-R.css" rel="stylesheet" />

</head>

<body>

<style type = "text/css">
/* CSS gÈnÈrÈes par knitr */

.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}

code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}

code{white-space: pre;}

table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }

pre:not([class]) {
  background-color: white;
}

/* Print CSS */
@media print {
  math {margin: 11px auto;}

  .main-container {margin:0; padding:0; max-width: 100%;}

  @page {
		size: A4;
		margin: 2.5cm; padding: 0;
 		@bottom {content: "\2013\0000a0\0000a0\0000a0\0000a0" counter(page) "\0000a0\0000a0\0000a0\0000a0\2013"; font-size: 9pt; font-family: Lato, 'Helvetica Neue', Helvetica, Arial, sans-serif;}
		@footnotes {
			border-top: solid #999 thin;
			padding-top: 8pt;
			footnote-style-position: inside;
    }
	}
	@page:first {
  	@bottom { content: normal;}
	  @top-left { content:normal;}
		@top-right { content:normal;}
  }
  @page:left{
    @top-left {content: "analyse-R\0000a0\0000a0\2013\0000a0\0000a0" string(titre_doc);
    font-style: italic; font-size: 9pt; font-family: Lato, 'Helvetica Neue', Helvetica, Arial, sans-serif;}
  }
  @page:right{
    @top-right {content: string(titre_chap); font-style: italic; font-size: 9pt; font-family: Lato, 'Helvetica Neue', Helvetica, Arial, sans-serif;}
  }
  @page:blank{
		@bottom { content: normal;}
	  @top-left { content:normal;}
		@top-right { content:normal;}
	}

  article {string-set: titre_chap "";} /* Èviter en-tÍte en dÈbut de chapitre */
	h1 {string-set: titre_chap content();}
	article:first-child .jumbotron h1 {string-set: titre_doc content();}

	body {font-size: 10pt; color: black;}
	pre {font-size: 10pt;}
	h1 {font-size:36pt; margin-top: 3cm; margin-bottom: 1cm; padding:0; color: #2c3e50;}
	article:first-child h1:first-child {margin-top: 0; margin-bottom: .5cm; padding:0; font-size: 48pt;}
	article:first-child .jumbotron h1 {font-size: 32pt;  color: #2c3e50;}
	article:first-child .jumbotron {margin-bottom: 5cm;}
	h2 {font-size: 20pt; margin-top: 1cm; margin-bottom: .5cm; padding:0; color: #2c3e50;}
	h3 {font-size: 16pt; margin-top: 1cm; margin-bottom: .5cm; padding:0; color: #2c3e50;}
	h4 {font-size: 11pt; margin-top: 1cm; margin-bottom: .5cm; padding:0; color: #2c3e50;}
	blockquote p {font-size: 11pt;}
	pre {font-size: 9pt;}

	/* Page-break */
	article, #tdm {page-break-before: right;}
	#presentation {page-break-before: always;}
	article:first-child {page-break-before: auto;}
	h1, h2, h3, h4, heading, caption, pre.r {page-break-after: avoid;}
	figcaption {page-break-before: avoid;}
	figure, table, pre.r {page-break-inside: avoid;}
	div.note, div.important, #licence {page-break-inside: avoid;}

  /* Footnotes */
  .fn {
    float: footnote;
    counter-increment: footnote;
    font-size: 9pt;
  }
  article {counter-reset: footnote;}
  .fn::footnote-call {font-size: 75%; vertical-align: super; line-height: none;}

  /* Liens */
  a[href^="#"] {color: black;}
  a[href^="#"]:after { content: ", page\0000a0" target-counter(attr(href), page);}

  /* Table des matiËres */
  #tdm strong {font-size: 11pt;}
  .list-group-item {padding: 2pt 0; border:none;}
  a.list-group-item::after {content: leader(" . ") target-counter(attr(href), page);}
  .TOC a::after {content: leader(" . ") target-counter(attr(href), page);}
  .TOC a {color: black;}
  .TOC ul {list-style: none; padding:0; margin:0;}
  .TOC ul ul {padding-left: 0.5cm; font-size: 9pt;}
  .TOC {margin-bottom: 1cm;}

  /* Index des fonctions */
  #index_fonctions nav, #index_extensions nav, #index_concepts nav
    {display: none;}
  #index_fonctions_index_fonctions, #index_extensions_index_extensions, #index_concepts_index_concepts
    {column-count: 2; column-rule: thin solid #2c3e50; column-gap: 1cm;}
  #index_fonctions p, #index_extensions p, #index_concepts p
    {page-break-after: avoid; margin: 10px 0 0 0;}
  #index_fonctions ul a[href^="#"],
  #index_extensions ul a[href^="#"],
  #index_concepts ul a[href^="#"]
    {color: black;}
  #index_fonctions ul a[href^="#"]:after,
  #index_extensions ul a[href^="#"]:after,
  #index_concepts ul a[href^="#"]:after
    {content: leader(" . ") target-counter(attr(href), page);}
  #index_fonctions ul, #index_extensions ul, #index_concepts ul
  {
    list-style: none;
    padding: 0; margin: 0;
    font-size: 8pt;
    page-break-inside: avoid;
  }
  #index_fonctions li, #index_extensions li, #index_concepts li
    {padding-left: 0.5cm;}

  dfn {border-bottom: dotted .5pt #AAA;}

  /* Styles des exemples de fusion de tables */
  table.exemple_df td,
  table.exemple_df th {
    text-align: center;
    padding: 3px 10px;
  }
  table.exemple_df th {
    border-bottom: solid 1px #999;
  }

  table.exemple_df td + td,
  table.exemple_df th + th {
    border-left: solid 1px #999;
  }

  table.exemple_operateur td {
    font-size: 3em;
    padding: 20px;
  }

}

</style>

<div class="container-fluid main-container">
<article>

<div class="fluid-row" id="header">


<h1 class="title">analyse-R</h1>

</div>


<div class="jumbotron">
<h1>
Introduction <br/>√† l‚Äôanalyse d‚Äôenqu√™tes <br/>avec R et RStudio
</h1>
<p>
Derni√®re mise √† jour¬†: 4 avril 2016
</p>
</div>
<div id="contributeurs" class="section level2">
<h2>Contributeurs</h2>
<p><strong>Par ordre alphab√©tique¬†:</strong></p>
<p>Julien Barnier, Julien Biaudet, Fran√ßois Briatte, Milan Bouchet-Valat, Fr√©d√©rique Giraud, Jo√´l Gombin, Mayeul Kauffmann, Joseph Larmarange, Nicolas Robette.</p>
<p><strong>Cr√©ation et Maintenance¬†:</strong></p>
<p>Joseph Larmarange ‚Äî <a href="http://joseph.larmarange.net" class="uri">http://joseph.larmarange.net</a></p>
</div>
<div id="presentation" class="section level2">
<h2>Pr√©sentation</h2>
<p>L‚Äôobjectif premier d‚Äô<strong>analyse-R</strong> est de pr√©senter comment r√©aliser des analyses statistiques et diverses op√©rations courantes (comme la manipulation de donn√©es ou la production de graphiques) avec <strong>R</strong>. Il ne s‚Äôagit pas d‚Äôun cours de statistiques¬†: les diff√©rents chapitres pr√©supposent donc que vous avez d√©j√† une connaissance des diff√©rentes techniques pr√©sent√©es. Si vous souhaitez des pr√©cisions th√©oriques / m√©thodologiques √† propos d‚Äôun certain type d‚Äôanalyses, nous vous conseillons d‚Äôutiliser votre moteur de recherche pr√©f√©r√©. En effet, on trouve sur internet de tr√®s nombreux supports de cours (sans compter les nombreux ouvrages sp√©cialis√©s disponibles en libraririe).</p>
<div class="alert alert-warning" style="font-weight: bold;">
<p>
<strong>analyse-R</strong> est en cours de d√©veloppement. La structuration du site et des chapitre sera probablement amen√©e √† √©voluer dans les semaines qui viennent, tout comme les contenus.
</p>
<p>
Les chapitres en cours d‚Äô√©criture et/ou de refonte sont indiqu√©s sur fond jaune orang√© dans le menu situ√© en haut de page.
</p>
<p>
Si vous constatez des incoh√©rences et/ou si vous avez des suggestions d‚Äôam√©liorations, n‚Äôh√©sitez pas √† les signaler sur <a href="https://github.com/larmarange/analyse-R/issues" style="color: white;">https://github.com/larmarange/analyse-R/issues</a>.
</p>
</div>
</div>
<div id="tdm" class="section level2">
<h2>Table des mati√®res</h2>
<p>Si vous d√©butez avec <strong>R</strong> et <strong>RStudio</strong>, nous vous conseillons de parcourir en premier lieu les chapitres suivants¬†:</p>
<ol style="list-style-type: decimal">
<li>Manipuler &gt; Prise en main</li>
<li>Analyser &gt; Statistiques introductives</li>
<li>Manipuler &gt; Manipulations de donn√©es</li>
<li>Analyser &gt; Statistiques interm√©diares</li>
</ol>
<p>puis de compl√©ter votre lecture en fonction de vos besoins.</p>
<div id="manipuler" class="section level3">
<h3>Manipuler</h3>
<div class="row">
<div class="col-md-4">
<p>
<strong>Prise en main</strong>
</p>
<div class="list-group">
<p><a href="#presentation-et-philosophie" class="list-group-item">Pr√©sentation et Philosophie</a> <a href="#installation-de-R-et-RStudio" class="list-group-item">Installation de R et RStudio</a> <a href="#premier-contact" class="list-group-item">Premier contact</a> <a href="#premier-travail-avec-les-donnees" class="list-group-item">Premier travail avec des donn√©es</a> <a href="#extensions" class="list-group-item">Extensions</a> <a href="#vecteurs-indexation-et-assignation" class="list-group-item">Vecteurs, indexation et assignation</a> <a href="#listes-et-tableaux-de-donnes" class="list-group-item">Listes et Tableaux de donn√©es</a> <a href="#facteurs-et-vecteurs-labellises" class="list-group-item">Facteurs et vecteurs labellis√©s</a> <a href="#organiser-ses-fichiers" class="list-group-item">Organiser ses fichiers</a> <a href="#import-de-donnees" class="list-group-item">Import de donn√©es</a> <a href="#recodage" class="list-group-item">Recodage</a> <a href="#ou-trouver-de-l-aide" class="list-group-item">O√π trouver de l‚Äôaide¬†?</a></p>
</div>
</div>
<div class="col-md-4">
<p>
<strong>Manipulation de donn√©es</strong>
</p>
<div class="list-group">
<p><a href="#introduction-a-dplyr" class="list-group-item">Introduction √† dplyr</a> <a href="#introduction-a-data-table" class="list-group-item">Introduction √† data.table</a> <a href="#doublons" class="list-group-item">Doublons</a> <a href="#tris" class="list-group-item">Tris</a> <a href="#sous-ensembles" class="list-group-item">Sous-ensembles</a> <a href="#fusion-de-tables" class="list-group-item">Fusion de tables</a> <a href="#gestion-des-dates" class="list-group-item">Gestion des dates</a> <a href="#aggregation" class="list-group-item">Aggr√©gation</a> <a href="#fonctions-a-fenetre" class="list-group-item">Fonctions √† fen√™tre</a> <a href="#restructuration-de-donnees" class="list-group-item">Restructuration de donn√©es</a> <a href="#manipuler-du-texte" class="list-group-item">Manipuler du texte</a></p>
</div>
</div>
<div class="col-md-4">
<p>
<strong>Exporter</strong>
</p>
<div class="list-group">
<p><a href="#export-de-donnees" class="list-group-item">Export de donn√©es</a> <a href="#export-de-graphiques" class="list-group-item">Export de graphiques</a> <a href="#export-de-tableaux" class="list-group-item">Export de tableaux</a></p>
</div>
</div>
</div>
</div>
<div id="analyser" class="section level3">
<h3>Analyser</h3>
<div class="row">
<div class="col-md-4">
<p>
<strong>Statistiques introductives</strong>
</p>
<div class="list-group">
<p><a href="#statistique-univariee" class="list-group-item">Statistique univari√©e</a> <a href="#graphiques-univaries" class="list-group-item">Graphiques univari√©s</a> <a href="#statistique-bivariee" class="list-group-item">Statistique bivari√©e</a> <a href="#graphiques-bivaries" class="list-group-item">Graphiques bivari√©s</a> <a href="#donnees-ponderees" class="list-group-item">Donn√©es pond√©r√©es</a> <a href="#graphiques-de-donnees-ponderees" class="list-group-item">Graphiques de donn√©es pond√©r√©es</a></p>
</div>
</div>
<div class="col-md-4">
<p>
<strong>Statistiques interm√©diaires</strong>
</p>
<div class="list-group">
<p><a href="#intervalles-de-confiance" class="list-group-item">Intervalles de confiance</a> <a href="#comparaisons-moyennes-et-proportions" class="list-group-item">Comparaisons (moyennes et proportions)</a> <a href="#definir-un-plan-d-echantillonnage-complexe" class="list-group-item">D√©finir un plan d‚Äô√©chantillonnage complexe</a> <a href="#regression-lineaire" class="list-group-item">R√©gression lin√©aire</a> <a href="#regression-logistique" class="list-group-item">R√©gression logistique</a> <a href="#analyse-en-composantes-principales" class="list-group-item">Analyse en composantes principales (ACP)</a> <a href="#analyse-des-correspondances-multiples" class="list-group-item">Analyse des correspondances multiples (ACM)</a> <a href="#classification-ascendante-hierarchique" class="list-group-item">Classification ascendante hi√©rarchique (CAH)</a></p>
</div>
</div>
<div class="col-md-4">
<p>
<strong>Statistiques avanc√©es</strong>
</p>
<div class="list-group">
<p><a href="#modeles-lineaires-a-effets-mixtes" class="list-group-item">Mod√®les lin√©aires √† effets mixtes</a> <a href="#modeles-gee" class="list-group-item">Mod√®les GEE</a> <a href="#series-temporelles" class="list-group-item">S√©ries temporelles</a> <a href="#modeles-a-temps-discret" class="list-group-item">Mod√®les √† temps discret</a> <a href="#analyse-de-survie" class="list-group-item">Analyse de survie</a> <a href="#analyse-de-sequences" class="list-group-item">Analyse de s√©quences</a> <a href="#analyse-de-reseaux" class="list-group-item">Analyse de r√©seaux</a> <a href="#analyse-spatiale" class="list-group-item">Analyse spatiale</a></p>
</div>
</div>
</div>
</div>
<div id="approfondir" class="section level3">
<h3>Approfondir</h3>
<div class="row">
<div class="col-md-4">
<p>
<strong>Graphiques</strong>
</p>
<div class="list-group">
<p><a href="#ggplot2-la-grammaire-des-graphiques" class="list-group-item">ggplot2¬†: la grammaire des graphiques</a> <a href="#etendre-ggplot2" class="list-group-item">√âtendre ggplot2</a> <a href="#lattice-graphiques-et-formules" class="list-group-item">lattice¬†: graphiques et formules</a> <a href="#diagrammes" class="list-group-item">Diagrammes</a> <a href="#representer-des-flux" class="list-group-item">Repr√©senter des flux</a> <a href="#reseaux-dynamiques" class="list-group-item">R√©seaux dynamiques</a> <a href="#ggvis-les-graphiques-interactifs" class="list-group-item">ggvis¬†: les graphiques interactifs</a> <a href="#htmlwidgets-la-puissance-du-javascript" class="list-group-item">htmlwidgets¬†: la puissance de javascript</a> <a href="#cartes" class="list-group-item">Cartes</a></p>
</div>
</div>
<div class="col-md-4">
<p>
<strong>Programmation</strong>
</p>
<div class="list-group">
<p><a href="#formules" class="list-group-item">Formules</a> <a href="#structures-conditionnelles" class="list-group-item">Structures conditionnelles</a> <a href="#expressions-regulieres" class="list-group-item">Expressions r√©guli√®res</a> <a href="#ecrire-ses-propres-fonctions" class="list-group-item">√âcrire ses propres fonctions</a> <a href="#rmarkdown-les-rapports-automatises" class="list-group-item">R Markdown¬†: les rapports automatis√©s</a> <a href="#shiny-les-interfaces-interactives" class="list-group-item">Shiny¬†: les interfaces interactives</a> <a href="#git" class="list-group-item">Git</a> <a href="#developper-un-package" class="list-group-item">D√©velopper un package</a></p>
</div>
</div>
<div class="col-md-4">
<p>
<strong>Divers</strong>
</p>
<div class="list-group">
<p><a href="#calculer-un-age" class="list-group-item">Calculer un √¢ge</a> <a href="#prevR-cartes-de-prevalence" class="list-group-item">prevR¬†: cartes de pr√©valence √† partir des EDS</a></p>
</div>
</div>
</div>
</div>
<div id="index" class="section level3">
<h3>Index</h3>
<div class="list-group">
<p><a href="#index-des-concepts" class="list-group-item">Index des concepts</a> <a href="#index-des-fonctions" class="list-group-item">Index des fonctions</a> <a href="#index-des-extensions" class="list-group-item">Index des extensions</a></p>
</div>
</div>
</div>
<div id="licence" class="section level2">
<h2>Licence</h2>
<p>Le contenu de ce site est diffus√© sous licence <em>Creative Commons Attribution - Pas d‚Äôutilisation commerciale - Partage dans les m√™mes conditions</em> (<a href="https://creativecommons.org/licenses/by-nc-sa/3.0/fr/" class="uri">https://creativecommons.org/licenses/by-nc-sa/3.0/fr/</a>).</p>
<p><img src="images/by-nc-sa.svg" alt="CC by-nc-sa"/></p>
<p>Cela signifie donc que vous √™tes libre de recopier / modifier / redistribuer les contenus d‚Äô<strong>analyse-R</strong>, √† condition que vous citiez la source et que vos modifications soient elle-m√™mes distribu√©es sous la m√™me licence (autorisant ainsi d‚Äôautres √† pouvoir r√©utiliser √† leur tour vos ajouts).</p>
</div>
<div id="contribuer" class="section level2">
<h2>Contribuer</h2>
<p><strong>analyse-R</strong> est d√©velopp√© avec <strong>RStudio</strong> et le code source est librement disponible sur <strong>GitHub</strong>¬†:<br/> <a href="https://github.com/larmarange/analyse-R" class="uri">https://github.com/larmarange/analyse-R</a>.</p>
<p>Ce projet se veut collaboratif. N‚Äôh√©sitez donc pas √† proposer des corrections ou ajouts, voire m√™me √† r√©diger des chapitres additionnels.</p>
</div>

</article>
<article id="presentation-et-philosophie">

<div class="fluid-row" id="presentation-et-philosophie_header">


<h1 class="title">Pr√©sentation et Philosophie</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#presentation-et-philosophie_presentation-de-r">Pr√©sentation de R</a></li>
<li><a href="#presentation-et-philosophie_philosophie-de-r">Philosophie de R</a></li>
<li><a href="#presentation-et-philosophie_presentation-de-rstudio">Pr√©sentation de RStudio</a></li>
</ul>
</div>

<div id="presentation-et-philosophie_presentation-de-r" class="section level2">
<h2>Pr√©sentation de R</h2>
<p><strong>R</strong> est un langage orient√© vers le traitement de donn√©es et l‚Äôanalyse statistique d√©riv√© du langage <strong>S</strong>. Il est d√©velopp√© depuis une vingtaine d‚Äôann√©es par un groupe de volontaires de diff√©rents pays. C‚Äôest un <dfn>logiciel libre</dfn><dfn data-index="libre, logiciel"/><a href="#presentation-et-philosophie_fn1" class="footnoteRef" id="presentation-et-philosophie_fnref1"><sup>1</sup></a>, publi√© sous licence GNU GPL.</p>
<p>L‚Äôutilisation de <strong>R</strong> pr√©sente plusieurs avantages¬†:</p>
<ul>
<li>c‚Äôest un logiciel multiplateforme, qui fonctionne aussi bien sur des syt√®mes <strong>Linux</strong>, <strong>Mac OS X</strong> ou <strong>Windows</strong>¬†;</li>
<li>c‚Äôest un logiciel libre, d√©velopp√© par ses utilisateurs et modifiable par tout un chacun¬†;</li>
<li>c‚Äôest un logiciel gratuit¬†;</li>
<li>c‚Äôest un logiciel tr√®s puissant, dont les fonctionnalit√©s de base peuvent √™tre √©tendues √† l‚Äôaide de plusieurs milliers d‚Äôextensions¬†;</li>
<li>c‚Äôest un logiciel dont le d√©veloppement est tr√®s actif et dont la communaut√© d‚Äôutilisateurs ne cesse de s‚Äô√©largir¬†;</li>
<li>les possibilit√©s de manipulation de donn√©es sous <strong>R</strong> sont en g√©n√©ral largement sup√©rieures √† celles des autres logiciels usuels d‚Äôanalyse statistique¬†;</li>
<li>c‚Äôest un logiciel avec d‚Äôexcellentes capacit√©s graphiques et de nombreuses possibilit√©s d‚Äôexport¬†;</li>
<li>avec <strong>Rmarkdown</strong><a href="#presentation-et-philosophie_fn2" class="footnoteRef" id="presentation-et-philosophie_fnref2"><sup>2</sup></a>, il est devenu tr√®s ais√© de produire des rapports automatis√©s dans divers format (<strong>Word</strong>, <strong>PDF</strong>, <strong>HTML</strong>, ‚Ä¶)¬†;</li>
<li><strong>R</strong> est de plus utilis√© dans tous les secteurs scientifiques, y compris dans le domaine des analyses d‚Äôenqu√™tes et, plus g√©n√©ralement, des sciences sociales.</li>
</ul>
<p>Comme rien n‚Äôest parfait, on peut √©galement trouver quelques inconv√©nients¬†:</p>
<ul>
<li>le logiciel, la documentation de r√©f√©rence et les principales ressources sont en anglais. Il est toutefois parfaitement possible d‚Äôutiliser <strong>R</strong> sans sp√©cialement ma√Ætriser cette langue¬†;</li>
<li>il n‚Äôexiste pas encore d‚Äôinterface graphique pour <strong>R</strong> √©quivalente √† celle d‚Äôautres logiciels comme <strong>SPSS</strong> ou <strong>Modalisa</strong>. <strong>R</strong> fonctionne √† l‚Äôaide de <dfn>scripts</dfn> (des petits programmes) √©dit√©s et ex√©cut√©s au fur et √† mesure de l‚Äôanalyse et se rapprocherait davantage de <strong>SAS</strong> dans son utilisation (mais avec une syntaxe et une philosophie tr√®s diff√©rentes). Ce point, qui peut appara√Ætre comme un gros handicap, s‚Äôav√®re apr√®s un temps d‚Äôapprentissage √™tre un mode d‚Äôutilisation d‚Äôune grande souplesse¬†;</li>
<li>comme <strong>R</strong> s‚Äôapparente davantage √† un langage de programmation qu‚Äô√† un logiciel proprement dit, la courbe d‚Äôapprentissage peut √™tre un peu ¬´¬†raide¬†¬ª, notamment pour ceux n‚Äôayant jamais programm√© auparavant.</li>
</ul>
<p>Il est √† noter que le d√©veloppement autour de <strong>R</strong> a √©t√© particuli√®rement actif ces derni√®res ann√©es. On trouvera d√®s lors aujourd‚Äôhui de nombreuses extensions permettant de se ¬´¬†faciliter la vie¬†¬ª au quotidien, ce qui n‚Äô√©tait pas vraiment encore le cas il y a 5 ans.</p>
</div>
<div id="presentation-et-philosophie_philosophie-de-r" class="section level2">
<h2>Philosophie de R</h2>
<p>Quelques points particuliers dans le fonctionnement de <strong>R</strong> peuvent parfois d√©router les utilisateurs habitu√©s √† d‚Äôautres logiciels¬†:</p>
<ul>
<li>Sous <strong>R</strong>, en g√©n√©ral, on ne voit pas directement les donn√©es sur lesquelles on travaille¬†; on ne dispose pas en permanence d‚Äôune vue des donn√©es sous forme de tableau<a href="#presentation-et-philosophie_fn3" class="footnoteRef" id="presentation-et-philosophie_fnref3"><sup>3</sup></a>, comme sous <strong>Modalisa ou SPSS</strong>. Ceci peut √™tre d√©routant au d√©but, mais on se rend vite compte qu‚Äôon n‚Äôa pas besoin de voir en permanence les donn√©es pour les analyser.</li>
<li>Alors qu‚Äôavec la plupart des logiciels on r√©fl√©chira avec un fichier de donn√©es ouvert √† la fois, sous <strong>R</strong> chaque fichier de donn√©es correspondra √† un objet diff√©rent charg√© en m√©moire, permettant de manipuler tr√®s facilement plusieurs objets √† la fois (par exemple dans le cadre de fusion de tables<a href="#presentation-et-philosophie_fn4" class="footnoteRef" id="presentation-et-philosophie_fnref4"><sup>4</sup></a>).</li>
<li>Avec les autres logiciels, en g√©n√©ral la production d‚Äôune analyse g√©n√®re un grand nombre de r√©sultats de toutes sortes dans lesquels l‚Äôutilisateur est cens√© retrouver et isoler ceux qui l‚Äôint√©ressent. Avec <strong>R</strong>, c‚Äôest l‚Äôinverse¬†: par d√©faut l‚Äôaffichage est r√©duit au minimum et c‚Äôest l‚Äôutilisateur qui demande √† voir des r√©sultats suppl√©mentaires ou plus d√©taill√©s.</li>
<li>Sous <strong>R</strong>, les r√©sultats des analyses sont eux aussi stock√©s dans des objets et sont d√®s lors manipulables.</li>
</ul>
<p>Inhabituel au d√©but, ce fonctionnement permet en fait assez rapidement de gagner du temps dans la conduite des analyses.</p>
</div>
<div id="presentation-et-philosophie_presentation-de-rstudio" class="section level2">
<h2>Pr√©sentation de RStudio</h2>
<p>L‚Äôinterface de base de <strong>R</strong> est assez rudimentaire (voir figure ci-apr√®s).</p>
<figure>
<img src="images/capture_RGui.png" alt="Interface de R sous Windows"/>
<figcaption>
Interface de R sous Windows
</figcaption>
</figure>
<p><strong>RStudio</strong> est un <dfn>environnement de d√©veloppement</dfn> int√©gr√© libre, gratuit, et qui fonctionne sous <strong>Windows</strong>, <strong>Mac OS X</strong> et <strong>Linux</strong>. Il compl√®te <strong>R</strong> et fournit un <dfn>√©diteur de script</dfn> avec <dfn>coloration syntaxique</dfn>, des fonctionnalit√©s pratiques d‚Äô√©dition et d‚Äôex√©cution du code (comme l‚Äô<dfn>autocompl√©tion</dfn>), un affichage simultan√© du code, de la console <strong>R</strong>, des fichiers, graphiques et pages d‚Äôaide, une gestion des extensions, une int√©gration avec des syst√®mes de contr√¥le de versions comme <strong>git</strong>, etc. Il int√®gre de base divers outils comme par exemple la production de rapports au format <strong>Rmarkdown</strong>. Il est en d√©veloppement actif et de nouvelles fonctionnalit√©s sont ajout√©es r√©guli√®rement. Son principal d√©faut est d‚Äôavoir une interface uniquement anglophone.</p>
<figure>
<img src="images/capture_RStudio.png" alt="Interface de RStudio sous Windows"/>
<figcaption>
Interface de RStudio sous Windows
</figcaption>
</figure>
<p>Pour une pr√©sentation plus g√©n√©rale de <strong>RStudio</strong> on pourra se r√©f√©rer au site du projet¬†: <a href="http://www.rstudio.com/" class="uri">http://www.rstudio.com/</a>.</p>
<p><strong>RStudio</strong> peut tout √† fait √™tre utilis√© pour d√©couvrir et d√©marrer avec <strong>R</strong>. Les diff√©rents chapitres d‚Äô<strong>analyse-R</strong> partent du principe que vous utilisez <strong>R</strong> avec <strong>RStudio</strong>. Cependant, √† part les √©l√©ments portant sur l‚Äôinterface de <strong>RStudio</strong>, l‚Äôensemble du code et des fonctions <strong>R</strong> peuvent √™tre utilis√©s directement dans <strong>R</strong>, m√™me en l‚Äôabsence de <strong>RStudio</strong>.</p>
<p>La documentation de <strong>RStudio</strong> (en anglais) est disponible en ligne √† <a href="https://support.rstudio.com" class="uri">https://support.rstudio.com</a>. Pour √™tre tenu inform√© des derni√®res √©volutions de <strong>RStudio</strong>, mais √©galement de plusieurs extensions d√©velopp√©es dans le cadre de ce projet, vous pouvez suivre le blog d√©di√© <a href="http://blog.rstudio.org/" class="uri">http://blog.rstudio.org/</a>.</p>
</div>
<div class="footnotes">
<hr/>
<ol>
<li id="presentation-et-philosophie_fn1"><p>Pour plus d‚Äôinformations sur ce qu‚Äôest un logiciel libre, voir¬†: <a href="http://www.gnu.org/philosophy/free-sw.fr.html" class="uri">http://www.gnu.org/philosophy/free-sw.fr.html</a>.<a href="#presentation-et-philosophie_fnref1">‚Ü©</a></p></li>
<li id="presentation-et-philosophie_fn2"><p>Voir <a href="http://rmarkdown.rstudio.com/" class="uri">http://rmarkdown.rstudio.com/</a>.<a href="#presentation-et-philosophie_fnref2">‚Ü©</a></p></li>
<li id="presentation-et-philosophie_fn3"><p>On verra qu‚Äôil est possible avec <strong>RStudio</strong> de disposer d‚Äôune telle vue.<a href="#presentation-et-philosophie_fnref3">‚Ü©</a></p></li>
<li id="presentation-et-philosophie_fn4"><p>Voir par exemple la section d√©di√©e √† ce sujet dans le <a href="pem_manipulation.html#fusion_tables">chapitre sur la manipulation de donn√©es</a>.<a href="#presentation-et-philosophie_fnref4">‚Ü©</a></p></li>
</ol>
</div>

</article>
<article id="installation-de-R-et-RStudio">

<div class="fluid-row" id="installation-de-R-et-RStudio_header">


<h1 class="title">Installation de R et RStudio</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#installation-de-R-et-RStudio_installation-de-r">Installation de R</a></li>
<li><a href="#installation-de-R-et-RStudio_installation-de-rstudio">Installation de RStudio</a></li>
<li><a href="#installation-de-R-et-RStudio_mise-a-jour-de-r-sous-windows">Mise √† jour de R sous Windows</a></li>
</ul>
</div>

<p>Il est pr√©f√©rable de commencer par installer <strong>R</strong> avant d‚Äôinstaller <strong>RStudio</strong>.</p>
<div id="installation-de-R-et-RStudio_installation-de-r" class="section level2">
<h2>Installation de R</h2>
<p>Pour une <dfn>installation</dfn> sous <strong>Windows</strong>, on se rendra sur cette page¬†: <a href="http://cran.r-project.org/bin/windows/base/" class="uri">http://cran.r-project.org/bin/windows/base/</a> et l‚Äôon suivra le premier lien pour t√©l√©charger le programme d‚Äôinstallation. Une fois le programme d‚Äôinstallation lanc√©, il suffira d‚Äôinstaller <strong>R</strong> avec les options par d√©faut<a href="#installation-de-R-et-RStudio_fn1" class="footnoteRef" id="installation-de-R-et-RStudio_fnref1"><sup>1</sup></a>.</p>
<p>Pour <strong>Mac OS X</strong>, les fichiers d‚Äôinstallation sont disponibles √† <a href="http://cran.r-project.org/bin/macosx/" class="uri">http://cran.r-project.org/bin/macosx/</a>.</p>
<p>Si vous travaillez sous <strong>Linux</strong>, vous devriez pouvoir trouver <strong>R</strong> via votre gestionnaire de paquets, cela pouvant d√©pendre d‚Äôune distribution de <strong>Linux</strong> √† une autre.</p>
</div>
<div id="installation-de-R-et-RStudio_installation-de-rstudio" class="section level2">
<h2>Installation de RStudio</h2>
<p>Une fois <strong>R</strong> correctement install√©, rendez-vous sur <a href="http://www.rstudio.com/products/rstudio/download/" class="uri">http://www.rstudio.com/products/rstudio/download/</a> pour t√©l√©charger la derni√®re version stable de <strong>RStudio</strong>. Plus pr√©cis√©ment, il s‚Äôagit de l‚Äô√©dition <em>Open Source</em> de <strong>RStudio Desktop</strong> (en effet, il existe aussi une version serveur).</p>
<p>Choisissez l‚Äôinstallateur correspondant √† votre syst√®me d‚Äôexploitation et suivez les instructions du programme d‚Äôinstallation.</p>
<p>Si vous voulez tester les derni√®res fonctionnalit√©s de <strong>RStudio</strong>, vous pouvez t√©l√©charger la version de d√©veloppement (plus riche en fonctionnalit√©s que la version stable, mais pouvant contenir des bugs) sur <a href="http://www.rstudio.com/products/rstudio/download/preview/" class="uri">http://www.rstudio.com/products/rstudio/download/preview/</a>.</p>
</div>
<div id="installation-de-R-et-RStudio_mise-a-jour-de-r-sous-windows" class="section level2">
<h2>Mise √† jour de R sous Windows</h2>
<p>Pour mettre √† jour <strong>R</strong> sous <strong>Windows</strong>&lt;dfndata-index=‚Äúmise √† jour, R‚Äù&gt;, il suffit de t√©l√©charger et d‚Äôinstaller la derni√®re version du programme d‚Äôinstallation.</p>
<p>Petite particularit√©, la nouvelle version sera install√©e √† c√¥t√© de l‚Äôancienne version. Si vous souhaitez faire de la place sur votre disque dur, vous pouvez d√©sinstaller l‚Äôancienne version en utilisant l‚Äôutilitaire <em>D√©sinstaller un programme</em> de <strong>Windows</strong>.</p>
<p>Lorsque plusieurs versions de <strong>R</strong> sont disponibles, <strong>RStudio</strong> choisit par d√©faut la plus r√©cente. Il est vous est possible de sp√©cifier √† <strong>RStudio</strong> quelle version de <strong>R</strong> utiliser via le menu <em>Tools</em> &gt; <em>Global Options</em> &gt; <em>General</em>.</p>
<p>Petit d√©faut, les extensions (<em>packages</em>) sont install√©es par d√©faut sous <strong>Windows</strong> dans le r√©pertoire <code>Documents de l'utilisateur &gt; R &gt; win-library &gt; x.y</code> avec <code>x.y</code> correspondant au num√©ro de la version de <strong>R</strong>. Ainsi, si l‚Äôon travaillait avec la version 3.0 et que l‚Äôon passe √† la version 3.2, les extensions que l‚Äôon avait sous l‚Äôancienne version ne sont plus disponibles pour la nouvelle version. Une astuce consiste √† recopier le contenu du r√©pertoire <code>3.0</code> dans le r√©pertoire <code>3.2</code>. Puis, on lancera <strong>RStudio</strong> (s‚Äôil √©tait d√©j√† ouvert, on le fermera puis relancera) et on mettra √† jour l‚Äôensemble des packages, soit avec la fonction, <code data-pkg="utils">update.packages</code> soit en cliquant sur <em>Update</em> dans l‚Äôonglet <em>Packages</em> du quadrant inf√©rieur droit.</p>
</div>
<div class="footnotes">
<hr/>
<ol>
<li id="installation-de-R-et-RStudio_fn1"><p>Dans le cas particulier o√π votre ordinateur est situ√© derri√®re un <dfn>proxy</dfn>, il est pr√©f√©rable de choisir <em>Options de d√©marrage personnalis√©es</em> lorsque cela vous sera demand√© par le programme d‚Äôinstallation, puis <em>Internet2</em> lorsqu‚Äôon vous demandera le mode de connexion √† Internet. Ainsi, <strong>R</strong> utilisera par d√©faut la configuration internet du navigateur <strong>Internet Explorer</strong> et prendra ainsi en compte les param√®tres du <em>proxy</em>.<a href="#installation-de-R-et-RStudio_fnref1">‚Ü©</a></p></li>
</ol>
</div>

</article>
<article id="premier-contact">

<div class="fluid-row" id="premier-contact_header">


<h1 class="title">Premier contact</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#premier-contact_linvite-de-commandes">L‚Äôinvite de commandes</a></li>
<li><a href="#premier-contact_des-objets">Des objets</a><ul>
<li><a href="#premier-contact_objets-simples">Objets simples</a></li>
<li><a href="#premier-contact_vecteurs">Vecteurs</a></li>
</ul></li>
<li><a href="#premier-contact_des-fonctions">Des fonctions</a><ul>
<li><a href="#premier-contact_arguments">Arguments</a></li>
<li><a href="#premier-contact_quelques-fonctions-utiles">Quelques fonctions utiles</a></li>
<li><a href="#premier-contact_aide-sur-une-fonction">Aide sur une fonction</a></li>
<li><a href="#premier-contact_interpretation-des-arguments">Interpr√©tation des arguments</a></li>
<li><a href="#premier-contact_autocompletion">Autocompl√©tion</a></li>
</ul></li>
</ul>
</div>

<div class="note">
<p>Ce chapitre est inspir√© de la section <em>Prise en main</em> du support de cours <a href="https://github.com/juba/intro-r">Introduction √† R</a> r√©alis√© par Julien Barnier.</p>
</div>
<p>Une fois <strong>RStudio</strong> lanc√©, vous devriez obtenir une fen√™tre similaire √† la figure ci-apr√®s.</p>
<figure>
<img src="images/capture_RStudio.png" alt="Interface de RStudio au d√©marrage"/>
<figcaption>
Interface de RStudio au d√©marrage
</figcaption>
</figure>
<p>L‚Äô<dfn>interface</dfn> de <strong>RStudio</strong> est divis√©e en quatre quadrants¬†:</p>
<ul>
<li>le quadrant sup√©rieur gauche est d√©di√© aux diff√©rents fichiers de travail (nous y reviendrons dans le chapitre <a href="#premier-travail-avec-les-donnees">Premier travail avec les donn√©es</a>)¬†;</li>
<li>le quadrant inf√©rieur gauche correspond √† ce que l‚Äôon appelle la <em>console</em>, c‚Äôest-√†-dire √† <strong>R</strong> proprement dit¬†;</li>
<li>le quadrant sup√©rieur droit permet de conna√Ætre
<ul>
<li>la liste des objets en m√©moire ou <dfn>environnement de travail</dfn> (onglet <em>Environment</em>)</li>
<li>ainsi que l‚Äô<dfn>historique des commandes</dfn> saisies dans la console (onglet <em>History</em>)¬†;</li>
</ul></li>
<li>le quadrant inf√©rieur droit affiche
<ul>
<li>la liste des fichiers du r√©pertoire de travail (onglet <em>Files</em>),</li>
<li>les graphiques r√©alis√©s (onglet <em>Plots</em>),</li>
<li>la liste des extensions disponibles (onglet <em>Packages</em>),</li>
<li>l‚Äôaide en ligne (onglet <em>Help</em>)</li>
<li>et un <em>Viewer</em> utilis√© pour visualiser certains types de graphiques au format web.</li>
</ul></li>
</ul>
<p>Inutile de tout retenir pour le moment. Nous aborderons chaque outil en temps utile. Pour l‚Äôheure, concentrons-nous sur la <dfn>console</dfn>, c‚Äôest-√†-dire le quadrant inf√©rieur gauche.</p>
<div id="premier-contact_linvite-de-commandes" class="section level2">
<h2>L‚Äôinvite de commandes</h2>
<p>Au d√©marrage, la console contient un petit texte de bienvenue ressemblant √† peu pr√®s √† ce qui suit¬†:</p>
<pre><code>R version 3.2.0 (2015-04-16) -- "Full of Ingredients"
Copyright (C) 2015 The R Foundation for Statistical Computing
Platform: x86_64-w64-mingw32/x64 (64-bit)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R or R packages in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for an HTML browser interface to help.
Type 'q()' to quit R.

&gt;</code></pre>
<p>suivi d‚Äôune ligne commen√ßant par le caract√®re <code>&gt;</code> et sur laquelle devrait se trouver votre curseur. Cette ligne est appel√©e l‚Äô<dfn>invite de commande</dfn> (ou <dfn>prompt</dfn> en anglais). Elle signifie que <strong>R</strong> est disponible et en attente de votre prochaine commande.</p>
<p>Nous allons tout de suite lui fournir une premi√®re commande. Tapez <code>2 + 3</code> dans la console et validez avec la touche <kbd>Entr√©e</kbd>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">2</span> +<span class="st"> </span><span class="dv">3</span></code></pre></div>
<pre><code>[1] 5</code></pre>
<p>En premier lieu, vous pouvez noter la convention typographique utilis√©e dans ce documents. Les commandes saisies dans la console sont indiqu√©es sur un fond gris et pr√©c√©d√© de <code>R&gt;</code>. Le r√©sultat renvoy√© par <strong>R</strong> est quant √† lui affich√© juste en-dessous sur fond blanc.</p>
<p>Bien, nous savons d√©sormais que <strong>R</strong> sait faire les additions √† un chiffre<a href="#premier-contact_fn1" class="footnoteRef" id="premier-contact_fnref1"><sup>1</sup></a>. Nous pouvons d√©sormais continuer avec d‚Äôautres op√©rations arithm√©tiques de base¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">8</span> -<span class="st"> </span><span class="dv">12</span></code></pre></div>
<pre><code>[1] -4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">14</span> *<span class="st"> </span><span class="dv">25</span></code></pre></div>
<pre><code>[1] 350</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">-<span class="dv">3</span>/<span class="dv">10</span></code></pre></div>
<pre><code>[1] -0.3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">-<span class="fl">0.3</span></code></pre></div>
<pre><code>[1] -0.3</code></pre>
<p>On remarquera que <strong>R</strong> est anglo-saxon. Les nombres sont donc saisies ¬´¬†√† l‚Äôanglaise¬†¬ª, c‚Äôest-√†-dire en utilisant le point (<code>.</code>) comme s√©parateur pour les d√©cimales.</p>
<div class="note">
<p>Une petite astuce tr√®s utile lorsque vous tapez des commandes directement dans la console¬†: en utilisant les fl√®ches Haut et Bas du clavier, vous pouvez naviguer dans l‚Äôhistorique des commandes tap√©es pr√©c√©demment. Vous pouvez alors facilement r√©ex√©cuter ou modifier une commande particuli√®re.</p>
<p>Sous <strong>RStudio</strong>, l‚Äôonglet <em>History</em> du quadrant haut-droite vous permet de consulter l‚Äôhistorique des commandes que vous avez transmises √† <strong>R</strong>.</p>
<p><img src="images/capture_RStudio_onglet_history.png" alt="Onglet History sous RStudio"/></p>
<p>Un double-clic sur une commande la recopiera automatiquement dans la console. Vous pouvez √©galement s√©lectionner une ou plusieurs commandes puis cliquer sur <em>To Console</em>.</p>
<p>Voir √©galement (en anglais)¬†: <a href="https://support.rstudio.com/hc/en-us/articles/200526217-Command-History" class="uri">https://support.rstudio.com/hc/en-us/articles/200526217-Command-History</a>.</p>
</div>
<p>Lorsqu‚Äôon fournit √† <strong>R</strong> une commande incompl√®te, celui-ci nous propose de la compl√©ter en nous pr√©sentant une invite de commande sp√©ciale utilisant les signe <code>+</code>. Imaginons par exemple que nous avons malencontreusement tap√© sur <kbd>Entr√©e</kbd> alors que nous souhaitions calculer <code>4 * 3</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">4</span> *</code></pre></div>
<p>On peut alors compl√©ter la commande en saisissant simplement <code>3</code> :</p>
<pre class="r">4 *
+ 3
</pre>
<pre>
[1] 12
</pre>
<div class="note">
<p>Pour des commandes plus complexes, il arrive parfois qu‚Äôon se retrouve coinc√© avec une invite <code>+</code> sans plus savoir comment compl√©ter la saisie correctement. On peut alors annuler la commande en utilisant la touche <kbd>Echap</kbd> ou <kbd>Esc</kbd> sous <strong>Windows</strong>.</p>
<p>Sous <strong>Linux</strong> on utilise le traditionnel <kbd>Control + C</kbd>.</p>
</div>
<p>√Ä noter que les espaces autour des op√©rateurs n‚Äôont pas d‚Äôimportance lorsque l‚Äôon saisit les commandes dans <strong>R</strong>. Les trois commandes suivantes sont donc √©quivalentes, mais on privil√©gie en g√©n√©ral la deuxi√®me pour des raisons de lisibilit√© du code.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">10+2</span>
<span class="dv">10</span> +<span class="st"> </span><span class="dv">2</span>
<span class="dv">10</span>    +<span class="st">    </span><span class="dv">2</span></code></pre></div>
</div>
<div id="premier-contact_des-objets" class="section level2">
<h2>Des objets</h2>
<div id="premier-contact_objets-simples" class="section level3">
<h3>Objets simples</h3>
<p>Faire des op√©rations arithm√©tiques, c‚Äôest bien, mais sans doute pas totalement suffisant. Notamment, on aimerait pouvoir r√©utiliser le r√©sultat d‚Äôune op√©ration sans avoir √† le resaisir ou √† le copier/coller.</p>
<p>Comme tout langage de programmation, <strong>R</strong> permet de faire cela en utilisant des objets. Prenons tout de suite un exemple¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="dv">2</span></code></pre></div>
<p>Que signifie cette commande¬†? L‚Äôop√©rateur <code data-pkg="base" data-rdoc="assignOps">&lt;-</code> est appel√© <dfn>op√©rateur d‚Äôassignation</dfn><dfn data-index="assignation, op√©rateur"/>. Il prend une valeur quelconque √† droite et la place dans l‚Äôobjet indiqu√© √† gauche. La commande pourrait donc se lire <em>mettre la valeur 2 dans l‚Äôobjet nomm√© <code>x</code></em>.</p>
<div class="important">
<p>Il existe trois op√©rateurs d‚Äôassignation sous <strong>R</strong>. Ainsi les trois √©critures suivantes sont √©quivalentes¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="dv">2</span>
x =<span class="st"> </span><span class="dv">2</span>
x &lt;-<span class="st"> </span><span class="dv">2</span></code></pre></div>
<p>Cependant, pour une meilleure lecture du code, il est conseill√© de n‚Äôutiliser que <code>&lt;-</code>. Ainsi, l‚Äôobjet cr√©√© est syst√©matiquement affich√© √† gauche. De plus, le symbole <code>=</code> sert √©galement pour √©crire des conditions ou √† l‚Äôint√©rieur de fonctions. Il est donc pr√©f√©rable de ne pas l‚Äôutiliser pour assigner une valeur (afin d‚Äô√©viter les confusions).</p>
</div>
<p>On va ensuite pouvoir r√©utiliser cet objet dans d‚Äôautres calculs ou simplement afficher son contenu¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x +<span class="st"> </span><span class="dv">3</span></code></pre></div>
<pre><code>[1] 5</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x</code></pre></div>
<pre><code>[1] 2</code></pre>
<div class="note">
<p>Par d√©faut, si on donne √† <strong>R</strong> seulement le nom d‚Äôun objet, il va se d√©brouiller pour nous pr√©senter son contenu d‚Äôune mani√®re plus ou moins lisible.</p>
</div>
<p>On peut utiliser autant d‚Äôobjets qu‚Äôon veut. Ceux-ci peuvent contenir des nombres, des cha√Ænes de caract√®res (indiqu√©es par des guillemets droits doubles <code>"</code> ou simples <code>'</code>) et bien d‚Äôautres choses encore¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="dv">27</span>
y &lt;-<span class="st"> </span><span class="dv">10</span>
foo &lt;-<span class="st"> </span>x +<span class="st"> </span>y
foo</code></pre></div>
<pre><code>[1] 37</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> "Hello"</span>
foo &lt;-<span class="st"> </span>x
foo</code></pre></div>
<pre><code>[1] "Hello"</code></pre>
<div class="important">
<p>Les noms d‚Äôobjets peuvent contenir des lettres, des chiffres, les symboles <code>.</code> et <code>_</code>. Ils doivent imp√©rativement commencer par une lettre (jamais par un chiffre). <strong>R</strong> fait la diff√©rence entre les majuscules et les minuscules, ce qui signifie que <code>x</code> et <code>X</code> sont deux objets diff√©rents. On √©vitera √©galement d‚Äôutiliser des caract√®res accentu√©s dans les noms d‚Äôobjets. Comme les espaces ne sont pas autoris√©s on pourra les remplacer par un point ou un tiret bas.</p>
<p>Enfin, signalons que certains noms courts sont r√©serv√©s par <strong>R</strong> pour son usage interne et doivent √™tre √©vit√©s. On citera notamment <code>c</code>, <code>q</code>, <code>t</code>, <code>C</code>, <code>D</code>, <code>F</code>, <code>I</code>, <code>T</code>, <code>max</code>, <code>min</code>‚Ä¶</p>
</div>
<p>Dans <strong>RStudio</strong>, l‚Äôonglet <em>Environment</em> dans le quadrant sup√©rieur droit indique la liste des objets que vous avez pr√©c√©demment cr√©√©s, leur type et la taille qu‚Äôils occupent en m√©moire.</p>
<figure>
<img src="images/capture_RStudio_onglet_environment.png" alt="Onglet Environment de RStudio"/>
<figcaption>
Onglet Environment de RStudio
</figcaption>
</figure>
</div>
<div id="premier-contact_vecteurs" class="section level3">
<h3>Vecteurs</h3>
<p>Imaginons maintenant que nous avons interrog√© dix personnes au hasard dans la rue et que nous avons relev√© pour chacune d‚Äôelle sa taille en centim√®tres. Nous avons donc une s√©rie de dix nombres que nous souhaiterions pouvoir r√©unir de mani√®re √† pouvoir travailler sur l‚Äôensemble de nos mesures.</p>
<p>Un ensemble de donn√©es de m√™me nature constituent pour <strong>R</strong> un <dfn>vecteur</dfn> (en anglais <dfn>vector</dfn>) et se construit √† l‚Äôaide d‚Äôune fonction nomm√©e <code data-pkg="base">c</code><a href="#premier-contact_fn2" class="footnoteRef" id="premier-contact_fnref2"><sup>2</sup></a>. On l‚Äôutilise en lui donnant la liste de nos donn√©es, entre parenth√®ses, s√©par√©es par des virgules¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tailles &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">167</span>, <span class="dv">192</span>, <span class="dv">173</span>, <span class="dv">174</span>, <span class="dv">172</span>, <span class="dv">167</span>, <span class="dv">171</span>, <span class="dv">185</span>, 
  <span class="dv">163</span>, <span class="dv">170</span>)</code></pre></div>
<p>Ce faisant, nous avons cr√©√© un objet nomm√© <code>tailles</code> et comprenant l‚Äôensemble de nos donn√©es, que nous pouvons afficher en saisissant simplement son nom¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tailles</code></pre></div>
<pre><code> [1] 167 192 173 174 172 167 171 185 163 170</code></pre>
<p>Que se passe-t-il s‚Äôil on cr√©√© un vecteur plus grand¬†?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(<span class="dv">144</span>, <span class="dv">168</span>, <span class="dv">179</span>, <span class="dv">175</span>, <span class="dv">182</span>, <span class="dv">188</span>, <span class="dv">167</span>, <span class="dv">152</span>, <span class="dv">163</span>, <span class="dv">145</span>, 
  <span class="dv">176</span>, <span class="dv">155</span>, <span class="dv">156</span>, <span class="dv">164</span>, <span class="dv">167</span>, <span class="dv">155</span>, <span class="dv">157</span>, <span class="dv">185</span>, <span class="dv">155</span>, <span class="dv">169</span>, 
  <span class="dv">124</span>, <span class="dv">178</span>, <span class="dv">182</span>, <span class="dv">195</span>, <span class="dv">151</span>, <span class="dv">185</span>, <span class="dv">159</span>, <span class="dv">156</span>, <span class="dv">184</span>, <span class="dv">172</span>)</code></pre></div>
<pre><code> [1] 144 168 179 175 182 188 167 152 163 145 176
[12] 155 156 164 167 155 157 185 155 169 124 178
[23] 182 195 151 185 159 156 184 172</code></pre>
<p>On a bien notre suite de trente tailles, mais on peut remarquer la pr√©sence de nombres entre crochets au d√©but de chaque ligne (<code>[1]</code>, <code>[12]</code> et <code>[23]</code>). En fait ces nombres entre crochets indiquent la position du premier √©l√©ment de la ligne dans notre vecteur. Ainsi, le 155 en d√©but de deuxi√®me ligne est le 12<sup>e</sup> √©l√©ment du vecteur, tandis que le 182 de la troisi√®me ligne est √† la 23<sup>e</sup> position.</p>
<p>On en d√©duira d‚Äôailleurs que lorsque l‚Äôon fait¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">2</span></code></pre></div>
<pre><code>[1] 2</code></pre>
<p><strong>R</strong> consid√®re en fait le nombre 2 comme un vecteur √† un seul √©l√©ment.</p>
<p>On peut appliquer des op√©rations arithm√©tiques simples directement sur des vecteurs¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tailles &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">167</span>, <span class="dv">192</span>, <span class="dv">173</span>, <span class="dv">174</span>, <span class="dv">172</span>, <span class="dv">167</span>, <span class="dv">171</span>, <span class="dv">185</span>, 
  <span class="dv">163</span>, <span class="dv">170</span>)
tailles +<span class="st"> </span><span class="dv">20</span></code></pre></div>
<pre><code> [1] 187 212 193 194 192 187 191 205 183 190</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tailles/<span class="dv">100</span></code></pre></div>
<pre><code> [1] 1.67 1.92 1.73 1.74 1.72 1.67 1.71 1.85 1.63
[10] 1.70</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tailles^<span class="dv">2</span></code></pre></div>
<pre><code> [1] 27889 36864 29929 30276 29584 27889 29241
 [8] 34225 26569 28900</code></pre>
<p>On peut aussi combiner des vecteurs entre eux. L‚Äôexemple suivant calcule l‚Äôindice de masse corporelle √† partir de la taille et du poids¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tailles &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">167</span>, <span class="dv">192</span>, <span class="dv">173</span>, <span class="dv">174</span>, <span class="dv">172</span>, <span class="dv">167</span>, <span class="dv">171</span>, <span class="dv">185</span>, 
  <span class="dv">163</span>, <span class="dv">170</span>)
poids &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">86</span>, <span class="dv">74</span>, <span class="dv">83</span>, <span class="dv">50</span>, <span class="dv">78</span>, <span class="dv">66</span>, <span class="dv">66</span>, <span class="dv">51</span>, <span class="dv">50</span>, <span class="dv">55</span>)
tailles.m &lt;-<span class="st"> </span>tailles/<span class="dv">100</span>
imc &lt;-<span class="st"> </span>poids/(tailles.m^<span class="dv">2</span>)
imc</code></pre></div>
<pre><code> [1] 30.83653 20.07378 27.73230 16.51473 26.36560
 [6] 23.66524 22.57105 14.90139 18.81892 19.03114</code></pre>
<div class="important">
<p>Quand on fait des op√©rations sur les vecteurs, il faut veiller √† soit utiliser un vecteur et un chiffre (dans des op√©rations du type <code>v * 2</code> ou <code>v + 10</code>), soit √† utiliser des vecteurs de m√™me longueur (dans des op√©rations du type <code>u + v</code>).</p>
<p>Si on utilise des vecteurs de longueur diff√©rentes, on peut avoir quelques surprises. Quand <strong>R</strong> effectue une op√©ration avec deux vecteurs de longueurs diff√©rentes, il recopie le vecteur le plus court de mani√®re √† lui donner la m√™me taille que le plus long, ce qui s‚Äôappelle la r√®gle de <dfn>recyclage</dfn> (<dfn lang="en">recycling rule</dfn>). Ainsi, <code>c(1,2) + c(4,5,6,7,8)</code> vaudra l‚Äô√©quivalent de <code>c(1,2,1,2,1) + c(4,5,6,7,8)</code>.</p>
</div>
<p>On a vu jusque-l√† des vecteurs compos√©s de nombres, mais on peut tout √† fait cr√©er des vecteurs compos√©s de cha√Ænes de caract√®res, repr√©sentant par exemple les r√©ponses √† une question ouverte ou ferm√©e¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">reponse &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Bac+2"</span>, <span class="st">"Bac"</span>, <span class="st">"CAP"</span>, <span class="st">"Bac"</span>, <span class="st">"Bac"</span>, <span class="st">"CAP"</span>, 
  <span class="st">"BEP"</span>)
reponse</code></pre></div>
<pre><code>[1] "Bac+2" "Bac"   "CAP"   "Bac"   "Bac"  
[6] "CAP"   "BEP"  </code></pre>
<p>Enfin, notons que l‚Äôon peut acc√©der √† un √©l√©ment particulier du vecteur en faisant suivre le nom du vecteur de crochets contenant le num√©ro de l‚Äô√©l√©ment d√©sir√©. Par exemple¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">reponse &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Bac+2"</span>, <span class="st">"Bac"</span>, <span class="st">"CAP"</span>, <span class="st">"Bac"</span>, <span class="st">"Bac"</span>, <span class="st">"CAP"</span>, 
  <span class="st">"BEP"</span>)
reponse[<span class="dv">2</span>]</code></pre></div>
<pre><code>[1] "Bac"</code></pre>
<p>Cette op√©ration s‚Äôappelle l‚Äô<dfn>indexation</dfn> d‚Äôun vecteur. Il s‚Äôagit ici de sa forme la plus simple, mais il en existe d‚Äôautres beaucoup plus complexes. L‚Äôindexation des vecteurs et des tableaux dans <strong>R</strong> est l‚Äôun des √©l√©ments particuli√®rement souples et puissants du langage (mais aussi l‚Äôun des plus d√©licats √† comprendre et √† ma√Ætriser). Nous en reparlerons dans le chapitre sur la <a href="pem_manipulation.html#indexation">manipulation de donn√©es</a>.</p>
<div class="note">
<p>Sous <strong>RStudio</strong>, vous avez du remarquer que ce dernier effectue une <dfn>coloration syntaxique</dfn>. Lorsque vous tapez une commande, les valeurs num√©riques sont affich√©es dans une certaine couleur, les valeurs textuelles dans une autre et les noms des fonctions dans une troisi√®me. De plus, si vous tapez une parenth√®se ouvrante, <strong>RStudio</strong> va cr√©er automatiquement apr√®s le curseur la parenth√®se fermante correspondante (de m√™me avec les guillements ou les crochets). Si vous placez le curseur juste apr√®s une parenth√®se fermante, la parenth√®se ouvrante correspondante sera surlign√©e, ce qui sera bien pratique lors de la r√©daction de commandes complexes.</p>
</div>
</div>
</div>
<div id="premier-contact_des-fonctions" class="section level2">
<h2>Des fonctions</h2>
<p>Nous savons d√©sormais faire des op√©rations simples sur des nombres et des vecteurs, stocker ces donn√©es et r√©sultats dans des objets pour les r√©utiliser par la suite.</p>
<p>Pour aller un peu plus loin nous allons aborder, apr√®s les objets, l‚Äôautre concept de base de <strong>R</strong>, √† savoir les <dfn data-index="fonction">fonctions</dfn>. Une fonction se caract√©rise de la mani√®re suivante¬†:</p>
<ul>
<li>elle a un nom¬†;</li>
<li>elle accepte des <dfn data-index="argument">arguments</dfn> (qui peuvent avoir un nom ou pas)¬†;</li>
<li>elle retourne un r√©sultat et peut effectuer une action comme dessiner un graphique ou lire un fichier.</li>
</ul>
<p>En fait rien de bien nouveau puisque nous avons d√©j√† utilis√© plusieurs fonctions jusqu‚Äôici, dont la plus visible est la fonction <code data-pkg="&quot;base">c</code>. Dans la ligne suivante¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">reponse &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Bac+2"</span>, <span class="st">"Bac"</span>, <span class="st">"CAP"</span>, <span class="st">"Bac"</span>, <span class="st">"Bac"</span>, <span class="st">"CAP"</span>, 
  <span class="st">"BEP"</span>)</code></pre></div>
<p>on fait appel √† la fonction nomm√©e <code data-pkg="base">c</code>, on lui passe en arguments (entre parenth√®ses et s√©par√©es par des virgules) une s√©rie de cha√Ænes de caract√®res et elle retourne comme r√©sultat un vecteur de cha√Ænes de caract√®res, que nous stockons dans l‚Äôobjet <code>reponse</code>.</p>
<p>Prenons tout de suite d‚Äôautres exemples de fonctions courantes¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tailles &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">167</span>, <span class="dv">192</span>, <span class="dv">173</span>, <span class="dv">174</span>, <span class="dv">172</span>, <span class="dv">167</span>, <span class="dv">171</span>, <span class="dv">185</span>, 
  <span class="dv">163</span>, <span class="dv">170</span>)
<span class="kw">length</span>(tailles)</code></pre></div>
<pre><code>[1] 10</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(tailles)</code></pre></div>
<pre><code>[1] 173.4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">var</span>(tailles)</code></pre></div>
<pre><code>[1] 76.71111</code></pre>
<p>Ici, la fonction <code data-pkg="base">length</code> nous renvoie le nombre d‚Äô√©l√©ments du vecteur, la fonction <code data-pkg="base">mean</code> nous donne la moyenne des √©l√©ments du vecteur et fonction <code data-pkg="stats" data-rdoc="cor">var</code> sa variance.</p>
<div id="premier-contact_arguments" class="section level3">
<h3>Arguments</h3>
<p>Les arguments de la fonction lui sont indiqu√©s entre parenth√®ses, juste apr√®s son nom. En g√©n√©ral les premiers arguments pass√©s √† la fonction sont des donn√©es servant au calcul et les suivants des param√®tres influant sur ce calcul. Ceux-ci sont en g√©n√©ral transmis sous la forme d‚Äôargument nomm√©s.</p>
<p>Reprenons l‚Äôexemple des tailles pr√©c√©dent¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tailles &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">167</span>, <span class="dv">192</span>, <span class="dv">173</span>, <span class="dv">174</span>, <span class="dv">172</span>, <span class="dv">167</span>, <span class="dv">171</span>, <span class="dv">185</span>, 
  <span class="dv">163</span>, <span class="dv">170</span>)</code></pre></div>
<p>Imaginons que le deuxi√®me enqu√™t√© n‚Äôait pas voulu nous r√©pondre. Nous avons alors dans notre vecteur une <dfn>valeur manquante</dfn>. Celle-ci est symbolis√©e dans <strong>R</strong> par le code <code>NA</code><dfn data-index="NA"/>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tailles &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">167</span>, <span class="ot">NA</span>, <span class="dv">173</span>, <span class="dv">174</span>, <span class="dv">172</span>, <span class="dv">167</span>, <span class="dv">171</span>, <span class="dv">185</span>, 
  <span class="dv">163</span>, <span class="dv">170</span>)</code></pre></div>
<p>Recalculons notre taille moyenne¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(tailles)</code></pre></div>
<pre><code>[1] NA</code></pre>
<p>Et oui, par d√©faut, <strong>R</strong> renvoie <code>NA</code> pour un grand nombre de calculs (dont la moyenne) lorsque les donn√©es comportent une valeur manquante. On peut cependant modifier ce comportement en fournissant un param√®tre suppl√©mentaire √† la fonction <code data-pkg="base">mean</code>, nomm√© <code>na.rm</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(tailles, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>[1] 171.3333</code></pre>
<p>Positionner le param√®tre <code>na.rm</code> √† <code>TRUE</code> (vrai) indique √† la fonction <code data-pkg="base">mean</code> de ne pas tenir compte des valeurs manquantes dans le calcul.</p>
<p>Lorsqu‚Äôon passe un argument √† une fonction de cette mani√®re, c‚Äôest-√†-dire sous la forme <code>nom=valeur</code>, on parle d‚Äô<dfn>argument nomm√©</dfn>.</p>
<div class="important">
<p><code>NA</code> signifie <em>not available</em>. Cette valeur particuli√®re peut √™tre utilis√©e pour indiquer une valeur manquante pour tout type de liste (nombres, textes, valeurs logique, etc.).</p>
</div>
</div>
<div id="premier-contact_quelques-fonctions-utiles" class="section level3">
<h3>Quelques fonctions utiles</h3>
<p>R√©capitulons la liste des fonctions que nous avons d√©j√† rencontr√©es¬†:</p>
<table style="width:35%;">
<colgroup>
<col width="15%"/>
<col width="19%"/>
</colgroup>
<thead>
<tr class="header">
<th align="left">Fonction</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code data-pkg="base">c</code></td>
<td align="left">construit un vecteur √† partir d‚Äôune s√©rie de valeurs</td>
</tr>
<tr class="even">
<td align="left"><code data-pkg="base">length</code></td>
<td align="left">nombre d‚Äô√©l√©ments d‚Äôun vecteur</td>
</tr>
<tr class="odd">
<td align="left"><code data-pkg="base">mean</code></td>
<td align="left">moyenne d‚Äôun vecteur de type num√©rique</td>
</tr>
<tr class="even">
<td align="left"><code data-pkg="stats" data-rdoc="cor">var</code></td>
<td align="left">variance d‚Äôun vecteur de type num√©rique</td>
</tr>
<tr class="odd">
<td align="left"><code data-pkg="base" data-rdoc="Arithmetic">+</code>, <code data-pkg="base" data-rdoc="Arithmetic">-</code>, <code data-pkg="base" data-rdoc="Arithmetic">*</code>, <code data-pkg="base" data-rdoc="Arithmetic">/</code></td>
<td align="left">op√©rateurs math√©matiques de base</td>
</tr>
<tr class="even">
<td align="left"><code data-pkg="base" data-rdoc="Arithmetic">ÀÜ</code></td>
<td align="left">passage √† la puissance</td>
</tr>
</tbody>
</table>
<p>On peut rajouter les fonctions de base suivantes¬†:</p>
<table style="width:35%;">
<colgroup>
<col width="15%"/>
<col width="19%"/>
</colgroup>
<thead>
<tr class="header">
<th align="left">Fonction</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code data-pkg="base" data-rdoc="Extremes">min</code></td>
<td align="left">valeur minimale d‚Äôun vecteur num√©rique</td>
</tr>
<tr class="even">
<td align="left"><code data-pkg="base" data-rdoc="Extremes">max</code></td>
<td align="left">valeur maximale d‚Äôun vecteur num√©rique</td>
</tr>
<tr class="odd">
<td align="left"><code data-pkg="stats">sd</code></td>
<td align="left">√©cart-type d‚Äôun vecteur num√©rique</td>
</tr>
<tr class="even">
<td align="left"><code data-pkg="base" data-rdoc="Colon">:</code></td>
<td align="left">g√©n√®re une s√©quence de nombres. <code>1:4</code> √©quivaut √† <code>c(1,2,3,4)</code></td>
</tr>
</tbody>
</table>
</div>
<div id="premier-contact_aide-sur-une-fonction" class="section level3">
<h3>Aide sur une fonction</h3>
<p>Il est tr√®s fr√©quent de ne plus se rappeler quels sont les param√®tres d‚Äôune fonction ou le type de r√©sultat qu‚Äôelle retourne. Dans ce cas on peut tr√®s facilement acc√©der √† l‚Äô<dfn>aide</dfn> d√©crivant une fonction particuli√®re avec <code data-pkg="=&quot;utils&quot;" data-rdoc="=&quot;Question&quot;">?</code> ou <code data-pkg="utils">help</code>. Ainsi, pour obtenir de l‚Äôaide sur la fonction <code data-pkg="base">mean</code>, on saisira l‚Äôune des deux entr√©es √©quivalentes suivantes¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">?mean
<span class="kw">help</span>(<span class="st">"mean"</span>)</code></pre></div>
<div class="note">
<p>L‚Äôutilisation du raccourci <code data-pkg="=&quot;utils&quot;" data-rdoc="=&quot;Question&quot;">?</code> ne fonctionne pas pour certains op√©rateurs comme <code data-pkg="base" data-rdoc="Arithmetic">*</code>. Dans ce cas on pourra utiliser <code>?'*'</code> ou bien simplement <code>help("*")</code>.</p>
</div>
<p>Sous <strong>RStudio</strong>, le fichier d‚Äôaide associ√© apparaitra dans le quadrant inf√©rieur droit sous l‚Äôonglet <em>Help</em>.</p>
<figure>
<img src="images/capture_RStudio_onglet_help.png" alt="Onglet Help de RStudio"/>
<figcaption>
Onglet Help de RStudio
</figcaption>
</figure>
<p>Cette page d√©crit (en anglais) la fonction, ses arguments, son r√©sultat, le tout accompagn√© de diverses notes, r√©f√©rences et exemples. Ces pages d‚Äôaide contiennent √† peu pr√®s tout ce que vous pourrez chercher √† savoir, mais elles ne sont pas toujours d‚Äôune lecture ais√©e.</p>
<p>Un autre cas tr√®s courant dans <strong>R</strong> est de ne pas se souvenir ou de ne pas conna√Ætre le nom de la fonction effectuant une t√¢che donn√©e. Dans ce cas on se reportera aux diff√©rentes mani√®res de trouver de l‚Äôaide d√©crites dans le chapitre <a href="#ou-trouver-de-l-aide">O√π trouver de l‚Äôaide¬†?</a>.</p>
</div>
<div id="premier-contact_interpretation-des-arguments" class="section level3">
<h3>Interpr√©tation des arguments</h3>
<p>Prenons l‚Äôexemple de la fonction <code data-pkg="base">format</code> dont la version de base permet de mettre en forme un nombre. Affichons le fichier d‚Äôaide associ√©.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="st">`</span><span class="dt">?</span><span class="st">`</span>(format)</code></pre></div>
<p>La section <em>Usage</em> pr√©sente les arguments de cette fonction et leur valeur par d√©faut¬†:</p>
<pre>
format(x, trim = FALSE, digits = NULL, nsmall = 0L,
       justify = c("left", "right", "centre", "none"),
       width = NULL, na.encode = TRUE, scientific = NA,
       big.mark = "",   big.interval = 3L,
       small.mark = "", small.interval = 5L,
       decimal.mark = ".", zero.print = NULL,
       drop0trailing = FALSE, ...)
</pre>
<p>Regardons ce que cette fonction peut faire. Passons-lui un vecteur avec deux nombres¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">format</span>(<span class="kw">c</span>(<span class="fl">12.3</span>, <span class="dv">5678</span>))</code></pre></div>
<pre><code>[1] "  12.3" "5678.0"</code></pre>
<p>Elle renvoie un vecteur de cha√Ænes de caract√®res. Le nombre de d√©cimales a √©t√© harmonis√© et des espaces ont √©t√© ajout√©s au d√©but du premier nombre afin que l‚Äôensemble des valeurs soient align√©es vers la droite.</p>
<p>L‚Äôargument <code>trim</code> permet de supprimer les espaces ajout√©s en d√©but de cha√Æne.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">format</span>(<span class="kw">c</span>(<span class="fl">12.3</span>, <span class="dv">5678</span>), <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>[1] "12.3"   "5678.0"</code></pre>
<p>Dans le cas pr√©sent, nous avons saisi les arguments de la fonction sans les nommer. D√®s lors, <strong>R</strong> consid√®re l‚Äôordre dans lesquels nous avons saisi les arguments, ordre qui correspond √† celui du fichier d‚Äôaide. Il a d√®s lors consid√©r√© que <code>c(12.3, 5678)</code> correspond √† la valeur attribu√©e √† <code>x</code> et que <code>TRUE</code> est la valeur attribu√©e √† <code>trim</code>.</p>
<p>L‚Äôargument <code>nsmall</code> permet d‚Äôindiquer le nombre minimum de d√©cimales que l‚Äôon souhaite afficher. Il est en quatri√®me position. D√®s lors, pour pouvoir le renseigner avec des <dfn data-index="argument non nomm√©">arguments non nomm√©s</dfn>, il faut fournir √©galement une valeur pour le troisi√®me argument <code>digits</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">format</span>(<span class="kw">c</span>(<span class="fl">12.3</span>, <span class="dv">5678</span>), <span class="ot">TRUE</span>, <span class="ot">NULL</span>, <span class="dv">2</span>)</code></pre></div>
<pre><code>[1] "12.30"   "5678.00"</code></pre>
<p>Ce n‚Äôest pas forc√©ment ce qu‚Äôil y a de plus pratique. D‚Äôo√π l‚Äôint√©r√™t des <dfn data-index="argument nomm√©">arguments nomm√©s</dfn>. En pr√©cisant <code>nsmall =</code> dans l‚Äôappel de la fonction, on pourra indiquer que l‚Äôon souhaite modifier sp√©cifiquement cet argument. Lorsque l‚Äôon utilise des arguments non nomm√©s, l‚Äôordre n‚Äôimporte plus puisque <strong>R</strong> sera en capacit√© de reconna√Ætre ses petits.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">format</span>(<span class="dt">nsmall =</span> <span class="dv">2</span>, <span class="dt">x =</span> <span class="kw">c</span>(<span class="fl">12.3</span>, <span class="dv">5678</span>))</code></pre></div>
<pre><code>[1] "  12.30" "5678.00"</code></pre>
<p>√Ä l‚Äôusage, on aura le plus souvent recours √† une combinaison d‚Äôarguments non nomm√©s et d‚Äôarguments nomm√©s. On indiquera les premiers arguments (qui correspondent en g√©n√©ral aux donn√©es de d√©part) sans les nommer et on pr√©cisera les options souhait√©es avec des arguments nomm√©s. Par exemple, pour un affichage √† la fran√ßaise¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">format</span>(<span class="kw">c</span>(<span class="fl">12.3</span>, <span class="dv">5678</span>), <span class="dt">decimal.mark =</span> <span class="st">","</span>, <span class="dt">big.mark =</span> <span class="st">" "</span>)</code></pre></div>
<pre><code>[1] "   12,3" "5 678,0"</code></pre>
<p>Lorsque l‚Äôon regarde la section <em>Usage</em> du fichier d‚Äôaide, il apparait que certains arguments, suivi par le symbole <code>=</code>, ont une valeur par d√©faut. Il n‚Äôest donc pas n√©cessaire de les inclure dans l‚Äôappel de la fonction, auquel cas la valeur pas d√©faut sera prise en compte. Par contre, d‚Äôautres arguments, ici <code>x</code>, n‚Äôont pas de valeur par d√©faut et il est donc n√©cessaire de fournir syst√©matiquement une valeur.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">format</span>(<span class="dt">decimal.mark =</span> <span class="st">","</span>)</code></pre></div>
<pre><code>Error in format.default(decimal.mark = ","): l'argument "x" est manquant, avec aucune valeur par d√©faut</code></pre>
<p>Enfin, pour certaines fonctions, on verra parfois appara√Ætre le symbole <code>...</code> Ce dernier correspond √† un nombre ind√©termin√© d‚Äôarguments. Il peut s‚Äôagir, comme dans le cas de <code data-pkg="base">format</code> d‚Äôarguments additionnels qui seront utilis√©s dans certains cas de figure, ou bien d‚Äôarguments qui seront transmis √† une fonction secondaire appel√©e par la fonction principale, ou encore, comme pour le cas de la fonction <code data-pkg="base">c</code>, de la possibilit√© de saisir un nombre ind√©fini de donn√©es sources.</p>
</div>
<div id="premier-contact_autocompletion" class="section level3">
<h3>Autocompl√©tion</h3>
<p><strong>RStudio</strong> fournit un outil bien pratique appel√© <dfn>autocompl√©tion</dfn><a href="#premier-contact_fn3" class="footnoteRef" id="premier-contact_fnref3"><sup>3</sup></a>. Saisissez les premi√®res lettres d‚Äôune fonction, par exemple <code>me</code> puis appuyez sur la touche <kbd>Tabulation</kbd>. <strong>RStudio</strong> affichera la liste des fonctions dont le nom commence par <code>me</code> ainsi qu‚Äôun court descriptif de chacune. Un appui sur la touche <kbd>Entr√©e</kbd> provoquera la saisie du nom complet de la fonction choisie.</p>
<figure>
<img src="images/capture_RStudio_autocompletion.png" alt="Auto-compl√©tion sous RStudio"/>
<figcaption>
Auto-compl√©tion sous RStudio
</figcaption>
</figure>
<p>√Ä l‚Äôint√©rieur des parenth√®ses d‚Äôune fonction, vous pouvez utiliser l‚Äôautocompl√©tion pour retrouver un argument de cette fonction.</p>
<p>Vous pouvez √©galement utiliser l‚Äôautocompl√©tion pour retrouver le nom d‚Äôun objet que vous avez pr√©c√©demment cr√©√©.</p>
<p>Pour plus de d√©tails, voir la documentation officielle de <strong>RStudio</strong> (<a href="https://support.rstudio.com/hc/en-us/articles/205273297-Code-Completion" class="uri">https://support.rstudio.com/hc/en-us/articles/205273297-Code-Completion</a>).</p>
</div>
</div>
<div class="footnotes">
<hr/>
<ol>
<li id="premier-contact_fn1"><p>La pr√©sence du <code>[1]</code> en d√©but de ligne sera expliqu√©e par la suite dans la section sur les <a href="#premier-contact_vecteurs">vecteurs</a>.<a href="#premier-contact_fnref1">‚Ü©</a></p></li>
<li id="premier-contact_fn2"><p><code data-pkg="base">c</code> est l‚Äôabbr√©viation de <em>combine</em>. Le nom de cette fonction est tr√®s court car on l‚Äôutilise tr√®s souvent.<a href="#premier-contact_fnref2">‚Ü©</a></p></li>
<li id="premier-contact_fn3"><p>En bon fran√ßais, il faudrait dire <em>compl√®tement automatique</em>.<a href="#premier-contact_fnref3">‚Ü©</a></p></li>
</ol>
</div>

</article>
<article id="premier-travail-avec-les-donnees">

<div class="fluid-row" id="premier-travail-avec-les-donnees_header">


<h1 class="title">Premier travail avec des donn√©es</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#premier-travail-avec-les-donnees_regrouper-les-commandes-dans-des-scripts">Regrouper les commandes dans des scripts</a></li>
<li><a href="#premier-travail-avec-les-donnees_ajouter-des-commentaires">Ajouter des commentaires</a></li>
<li><a href="#premier-travail-avec-les-donnees_tableaux-de-donnees">Tableaux de donn√©es</a></li>
<li><a href="#premier-travail-avec-les-donnees_inspecter">Inspection visuelle des donn√©es</a></li>
<li><a href="#premier-travail-avec-les-donnees_structure-du-tableau">Structure du tableau</a></li>
<li><a href="#premier-travail-avec-les-donnees_acceder-aux-variables">Acc√©der aux variables</a></li>
<li><a href="#premier-travail-avec-les-donnees_la-fonction-str">La fonction str</a></li>
<li><a href="#premier-travail-avec-les-donnees_quelques-calculs-simples">Quelques calculs simples</a></li>
<li><a href="#premier-travail-avec-les-donnees_nos-premiers-graphiques">Nos premiers graphiques</a></li>
<li><a href="#premier-travail-avec-les-donnees_et-ensuite">Et ensuite¬†?</a></li>
</ul>
</div>

<div class="note">
<p>Ce chapitre est inspir√© de la section <em>Premier travail avec les donn√©es</em> du support de cours <a href="https://github.com/juba/intro-r">Introduction √† R</a> r√©alis√© par Julien Barnier.</p>
</div>
<div id="premier-travail-avec-les-donnees_regrouper-les-commandes-dans-des-scripts" class="section level2">
<h2>Regrouper les commandes dans des scripts</h2>
<p>Jusqu‚Äô√† maintenant nous avons utilis√© uniquement la console pour communiquer avec <strong>R</strong> via l‚Äôinvite de commandes. Le principal probl√®me de ce mode d‚Äôinteraction est qu‚Äôune fois qu‚Äôune commande est tap√©e, elle est pour ainsi dire ¬´¬†perdue¬†¬ª, c‚Äôest-√†-dire qu‚Äôon doit la saisir √† nouveau si on veut l‚Äôex√©cuter une seconde fois. L‚Äôutilisation de la console est donc restreinte aux petites commandes ¬´¬†jetables¬†¬ª, le plus souvent utilis√©es comme test.</p>
<p>La plupart du temps, les commandes seront stock√©es dans un fichier √† part, que l‚Äôon pourra facilement ouvrir, √©diter et ex√©cuter en tout ou partie si besoin. On appelle en g√©n√©ral ce type de fichier un <dfn>script</dfn><dfn data-index="fichier de commandes"/>.</p>
<p>Pour comprendre comment cela fonctionne, dans <strong>RStudio</strong> cliquez sur l‚Äôic√¥ne en haut √† gauche repr√©sentant un fichier avec un signe plus vert, puis choisissez <em>R script</em>.</p>
<figure>
<img src="images/capture_RStudio_new_R_script.png" alt="Cr√©er un nouveau script R dans RStudio"/>
<figcaption>
Cr√©er un nouveau script R dans RStudio
</figcaption>
</figure>
<p>Un nouvel onglet appara√Æt dans le quadrant sup√©rieur gauche.</p>
<figure>
<img src="images/capture_RStudio_onglet_R_script.png" alt="Onglet d‚Äôun script R dans RStudio"/>
<figcaption>
Onglet d‚Äôun script R dans RStudio
</figcaption>
</figure>
<p>Nous pouvons d√©sormais y saisir des commandes. Par exemple, tapez sur la premi√®re ligne la commande suivante¬†: <code>2 + 2</code>. Ensuite, cliquez sur l‚Äôic√¥ne <em>Run</em> (en haut √† droite de l‚Äôonglet du script) ou bien pressez simulat√©ment les touches <kbd>CTRL</kbd> et <kbd>Entr√©e</kbd><a href="#premier-travail-avec-les-donnees_fn1" class="footnoteRef" id="premier-travail-avec-les-donnees_fnref1"><sup>1</sup></a>.</p>
<p>Les lignes suivantes ont d√ª faire leur apparition dans la console¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">2</span> +<span class="st"> </span><span class="dv">2</span></code></pre></div>
<pre><code>[1] 4</code></pre>
<p>Voici donc comment soumettre rapidement √† <strong>R</strong> les commandes saisies dans votre fichier. Vous pouvez d√©sormais l‚Äôenregistrer, l‚Äôouvrir plus tard, et en ex√©cuter tout ou partie. √Ä noter que vous avez plusieurs possibilit√©s pour soumettre des commandes √† <strong>R</strong>¬†:</p>
<ul>
<li>vous pouvez ex√©cuter la ligne sur laquelle se trouve votre curseur en cliquant sur <em>Run</em> ou en pressant simulat√©ment les touches <kbd>CTRL</kbd> et <kbd>Entr√©e</kbd>¬†;</li>
<li>vous pouvez s√©lectionner plusieurs lignes contenant des commandes et les ex√©cuter toutes en une seule fois exactement de la m√™me mani√®re¬†;</li>
<li>vous pouvez ex√©cuter d‚Äôun coup l‚Äôint√©gralit√© de votre fichier en cliquant sur l‚Äôic√¥ne <em>Source</em>.</li>
</ul>
<p>La plupart du travail sous <strong>R</strong> consistera donc √† √©diter un ou plusieurs fichiers de commandes et √† envoyer r√©guli√®rement les commandes saisies √† <strong>R</strong> en utilisant les raccourcis clavier <em>ad hoc</em>.</p>
<p>Pour plus d‚Äôinformation sur l‚Äôutilisation des scripts <strong>R</strong> dans <strong>RStudio</strong>, voir (en anglais)¬†: <a href="https://support.rstudio.com/hc/en-us/articles/200484448-Editing-and-Executing-Code" class="uri">https://support.rstudio.com/hc/en-us/articles/200484448-Editing-and-Executing-Code</a>.</p>
<div class="note">
<p>Quand vous enregistrez un script sous <strong>RStudio</strong>, il est possible qu‚Äôil vous demande de choisir un type d‚Äôencodage des caract√®res (<em>Choose Encoding</em>). Si tel est le cas, utilisez de pr√©f√©rence <strong>UTF-8</strong>.</p>
</div>
</div>
<div id="premier-travail-avec-les-donnees_ajouter-des-commentaires" class="section level2">
<h2>Ajouter des commentaires</h2>
<p>Un <dfn>commentaire</dfn> est une ligne ou une portion de ligne qui sera ignor√©e par <strong>R</strong>. Ceci signifie qu‚Äôon peut y √©crire ce qu‚Äôon veut et qu‚Äôon va les utiliser pour ajouter tout un tas de commentaires √† notre code permettant de d√©crire les diff√©rentes √©tapes du travail, les choses √† se rappeler, les questions en suspens, etc.</p>
<p>Un commentaire sous <strong>R</strong> commence par un ou plusieurs symboles <code>#</code> (qui s‚Äôobtient avec les touches <kbd>Alt¬†Gr</kbd> et <kbd>3</kbd> sur les claviers de type PC). Tout ce qui suit ce symbole jusqu‚Äô√† la fin de la ligne est consid√©r√© comme un commentaire. On peut cr√©er une ligne enti√®re de commentaire en la faisant d√©buter par <code>##</code>. Par exemple¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## Tableau crois√© de la CSP par le nombre de livres
## lus.  Attention au nombre de non r√©ponses !</code></pre></div>
<p>On peut aussi cr√©er des commentaires pour une ligne en cours¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="dv">2</span>  <span class="co"># On met 2 dans x, parce qu'il le vaut bien</span></code></pre></div>
<div class="important">
<p>Dans tous les cas, il est tr√®s important de documenter ses fichiers <strong>R</strong> au fur et √† mesure, faute de quoi on risque de ne plus y comprendre grand chose si on les reprend ne serait-ce que quelques semaines plus tard.</p>
</div>
<p>Avec <strong>RStudio</strong>, vous pouvez √©galement utiliser les commentaires pour cr√©er des <dfn data-index="section">sections</dfn> au sein de votre script et naviguer plus rapidement. Il suffit de faire suivre une ligne de commentaires d‚Äôau moins 4 signes moins (<code>----</code>). Par exemple, si vous saisissez ceci dans votre script¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## Cr√©er les objets ----

x &lt;-<span class="st"> </span><span class="dv">2</span>
y &lt;-<span class="st"> </span><span class="dv">5</span>

## Calculs ----

x +<span class="st"> </span>y</code></pre></div>
<p>Vous verrez appara√Ætre en bas √† gauche de la fen√™tre du script un symbole di√®se orange. Si vous cliquez dessus, un menu de navigation s‚Äôaffichera vous permettant de vous d√©placez rapidement au sein de votre script. Pour plus d‚Äôinformation, voir la documentation de <strong>RStudio</strong> (en anglais)¬†: <a href="https://support.rstudio.com/hc/en-us/articles/200484568-Code-Folding-and-Sections" class="uri">https://support.rstudio.com/hc/en-us/articles/200484568-Code-Folding-and-Sections</a>.</p>
<figure>
<img src="images/capture_RStudio_navigation_script.png" alt="Navigation rapide dans les scripts sous RStudio"/>
<figcaption>
Navigation rapide dans les scripts sous RStudio
</figcaption>
</figure>
<p>Note¬†: on remarquera au passage que le titre de l‚Äôonglet est affich√© en rouge et suivi d‚Äôune ast√©risque (<code>*</code>), nous indiquant ainsi qu‚Äôil y a des modifications non enregistr√©es dans notre fichier.</p>
</div>
<div id="premier-travail-avec-les-donnees_tableaux-de-donnees" class="section level2">
<h2>Tableaux de donn√©es</h2>
<p>Dans cette partie nous allons utiliser un jeu de donn√©es inclus dans l‚Äôextension <code class="pkg">questionr</code>. L‚Äôinstallation d‚Äôextension est d√©crite dans le chapitre <a href="#extensions">Extensions</a>.</p>
<p>Le jeu de donn√©es en question est un extrait de l‚Äôenqu√™te <em>Histoire de vie</em> r√©alis√©e par l‚ÄôINSEE en 2003. Il contient 2000 individus et 20 variables. Pour pouvoir utiliser ces donn√©es, il faut d‚Äôabord charger l‚Äôextension <code class="pkg">questionr</code> (apr√®s l‚Äôavoir install√©e, bien entendu). Le chargement d‚Äôune extension en m√©moire se fait √† l‚Äôaide de la fonction <code data-pkg="base">library</code>. Sous <strong>RStudio</strong>, vous pouvez √©galement charger une extension en allant dans l‚Äôonglet <em>Packages</em> du quadrant inf√©rieur droit qui liste l‚Äôensemble des packages disponibles et en cliquant la case √† cocher situ√©e √† gauche du nom du package d√©sir√©.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)</code></pre></div>
<p>Puis nous allons indiquer √† <strong>R</strong> que nous souhaitons acc√©der au jeu de donn√©es <code data-pkg="questionr">hdv2003</code> √† l‚Äôaide de la fonction <code data-pkg="utils">data</code> :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(hdv2003)</code></pre></div>
<p>Bien. Et maintenant, elles sont o√π mes donn√©es ? Et bien elles se trouvent dans un objet nomm√© <code>hdv2003</code> d√©sormais charg√© en m√©moire et accessible directement. D‚Äôailleurs, cet objet est maintenant visible dans l‚Äôonglet <em>Environment</em> du quadrant sup√©rieur droit.</p>
<p>Essayons de taper son nom √† l‚Äôinvite de commande :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">hdv2003</code></pre></div>
<p>Le r√©sultat (non reproduit ici) ne ressemble pas forc√©ment √† grand-chose‚Ä¶ Il faut se rappeler que par d√©faut, lorsqu‚Äôon lui fournit seulement un nom d‚Äôobjet, <strong>R</strong> essaye de l‚Äôafficher de la mani√®re la meilleure (ou la moins pire) possible. La r√©ponse √† la commande <code>hdv2003</code> n‚Äôest donc rien moins que l‚Äôaffichage des donn√©es brutes contenues dans cet objet.</p>
<p>Ce qui signifie donc que l‚Äôint√©gralit√© de notre jeu de donn√©es est inclus dans l‚Äôobjet nomm√© <code>hdv2003</code> ! En effet, dans <strong>R</strong>, un objet peut tr√®s bien contenir un simple nombre, un vecteur ou bien le r√©sultat d‚Äôune enqu√™te tout entier. Dans ce cas, les objets sont appel√©s des <dfn data-index="data frame" lang="en">data frames</dfn>, ou <dfn data-index="tableau de donn√©e">tableaux de donn√©es</dfn>. Ils peuvent √™tre manipul√©s comme tout autre objet. Par exemple :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d &lt;-<span class="st"> </span>hdv2003</code></pre></div>
<p>va entra√Æner la copie de l‚Äôensemble de nos donn√©es dans un nouvel objet nomm√© <code>d</code>, ce qui peut para√Ætre parfaitement inutile mais a en fait l‚Äôavantage de fournir un objet avec un nom beaucoup plus court, ce qui diminuera la quantit√© de texte √† saisir par la suite.</p>
<p><strong>R√©sumons</strong></p>
<p>Comme nous avons d√©sormais d√©cid√© de saisir nos commandes dans un script et non plus directement dans la console, les premi√®res lignes de notre fichier de travail sur les donn√©es de l‚Äôenqu√™te <em>Histoire de vie</em> pourraient donc ressembler √† ceci :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## Chargement des extensions n√©cessaires ----
<span class="kw">library</span>(questionr)
## Jeu de donn√©es hdv2003 ----
<span class="kw">data</span>(hdv2003)
d &lt;-<span class="st"> </span>hdv2003</code></pre></div>
</div>
<div id="premier-travail-avec-les-donnees_inspecter" class="section level2">
<h2>Inspection visuelle des donn√©es</h2>
<p>La particularit√© de <strong>R</strong> par rapport √† d‚Äôautres logiciels comme <strong>Modalisa</strong> ou <strong>SPSS</strong> est de ne pas proposer, par d√©faut, de vue des donn√©es sous forme de tableau. Ceci peut parfois √™tre un peu d√©stabilisant dans les premiers temps d‚Äôutilisation, m√™me si l‚Äôon perd vite l‚Äôhabitude et qu‚Äôon finit par se rendre compte que ¬´¬†voir¬†¬ª les donn√©es n‚Äôest pas forc√©ment un gage de productivit√© ou de rigueur dans le traitement.</p>
<p>N√©anmoins, <strong>R</strong> propose une interface permettant de visualiser le contenu d‚Äôun tableau de donn√©es √† l‚Äôaide de la fonction <code data-pkg="utils">View</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">View</span>(d)</code></pre></div>
<p>Sous <strong>RStudio</strong>, on peut aussi afficher la <dfn>visionneusee</dfn> (<dfn lang="en">viewer</dfn>) en cliquant sur la petite ic√¥ne en forme de tableau situ√©e √† droite de la ligne d‚Äôun tableau de donn√©es dans l‚Äôonglet <em>Environment</em> du quadrant sup√©rieur droit (cf.¬†figure ci-apr√®s).</p>
<figure>
<img src="images/capture_RStudio_icone_viewer.png" alt="Ic√¥ne pour afficher une vue du contenu d‚Äôun tableau"/>
<figcaption>
Ic√¥ne pour afficher une vue du contenu d‚Äôun tableau
</figcaption>
</figure>
<p>Dans tous les cas, <strong>RStudio</strong> lancera le <em>viewer</em> dans un onglet d√©di√© dans le quadrant sup√©rieur gauche. Le visualiseur de <strong>RStudio</strong> est plus avanc√© que celui-de base fournit par <strong>R</strong>. Il est possible de trier les donn√©es selon une variable en cliquant sur le nom de cette derni√®re. Il y a √©galement un champs de recherche et un bouton <em>Filter</em> donnant acc√®s √† des options de filtrage avanc√©es.</p>
<figure>
<img src="images/capture_RStudio_data_viewer.png" alt="La visionneuse de donn√©es de RStudio"/>
<figcaption>
La visionneuse de donn√©es de RStudio
</figcaption>
</figure>
</div>
<div id="premier-travail-avec-les-donnees_structure-du-tableau" class="section level2">
<h2>Structure du tableau</h2>
<p>Avant de travailler sur les donn√©es, nous allons essayer de comprendre comment elles sont structur√©es. Lors de l‚Äôimport de donn√©es depuis un autre logiciel (que nous aborderons dans un autre <a href="#import-de-donnees">chapitre</a>), il s‚Äôagira souvent de v√©rifier que l‚Äôimportation s‚Äôest bien d√©roul√©e.</p>
<p>Nous avons d√©j√† vu qu‚Äôun tableau de donn√©es est organis√© en lignes et en colonnes, les lignes correspondant aux <dfn data-index="observation">observations</dfn> et les colonnes aux <dfn data-index="variable">variables</dfn>. Les fonctions <code data-pkg="base">nrow</code>, <code data-pkg="base" data-rdoc="nrow">ncol</code> et <code data-pkg="base">dim</code> donnent respectivement le nombre de lignes, le nombre de colonnes et les dimensions de notre tableau. Nous pouvons donc d‚Äôores et d√©j√† v√©rifier que nous avons bien 2000 lignes et 20 colonnes¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">nrow</span>(d)</code></pre></div>
<pre><code>[1] 2000</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ncol</span>(d)</code></pre></div>
<pre><code>[1] 20</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(d)</code></pre></div>
<pre><code>[1] 2000   20</code></pre>
<p>La fonction <code data-pkg="base">names</code> donne les noms des colonnes de notre tableau, c‚Äôest-√†-dire les noms des variables¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(d)</code></pre></div>
<pre><code> [1] "id"            "age"          
 [3] "sexe"          "nivetud"      
 [5] "poids"         "occup"        
 [7] "qualif"        "freres.soeurs"
 [9] "clso"          "relig"        
[11] "trav.imp"      "trav.satisf"  
[13] "hard.rock"     "lecture.bd"   
[15] "peche.chasse"  "cuisine"      
[17] "bricol"        "cinema"       
[19] "sport"         "heures.tv"    </code></pre>
</div>
<div id="premier-travail-avec-les-donnees_acceder-aux-variables" class="section level2">
<h2>Acc√©der aux variables</h2>
<p><code>d</code> repr√©sente donc l‚Äôensemble de notre tableau de donn√©es. Nous avons vu que si l‚Äôon saisit simplement <code>d</code> √† l‚Äôinvite de commandes, on obtient un affichage du tableau en question. Mais comment acc√©der aux variables, c‚Äôest √† dire aux colonnes de notre tableau¬†?</p>
<p>La r√©ponse est simple¬†: on utilise le nom de l‚Äôobjet, suivi de l‚Äôop√©rateur <code data-pkg="base" data-rdoc="Extract">$</code>, suivi du nom de la variable, comme ceci¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$sexe</code></pre></div>
<p>Au regard du r√©sultat (non reproduit ici), on constate alors que <strong>R</strong> a bien acc√©d√© au contenu de notre variable <var>sexe</var> du tableau <code>d</code> et a affich√© son contenu, c‚Äôest-√†-dire l‚Äôensemble des valeurs prises par la variable.</p>
<p>Les fonctions <code data-pkg="utils">head</code> et <code data-pkg="utils" data-rdoc="head">tail</code> permettent d‚Äôafficher seulement les premi√®res (respectivement les derni√®res) valeurs prises par la variable. On peut leur passer en argument le nombre d‚Äô√©l√©ments √† afficher¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(d$nivetud)</code></pre></div>
<pre><code>[1] Enseignement superieur y compris technique superieur
[2] &lt;NA&gt;                                                
[3] Derniere annee d'etudes primaires                   
[4] Enseignement superieur y compris technique superieur
[5] Derniere annee d'etudes primaires                   
[6] Enseignement technique ou professionnel court       
8 Levels: N'a jamais fait d'etudes ...</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tail</span>(d$age, <span class="dv">10</span>)</code></pre></div>
<pre><code> [1] 52 42 50 41 46 45 46 24 24 66</code></pre>
<p>√Ä noter que ces fonctions marchent aussi pour afficher les lignes du tableau <code>d</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(d, <span class="dv">2</span>)</code></pre></div>
<pre><code>  id age  sexe
1  1  28 Femme
2  2  23 Femme
                                               nivetud
1 Enseignement superieur y compris technique superieur
2                                                 &lt;NA&gt;
     poids                 occup  qualif
1 2634.398 Exerce une profession Employe
2 9738.396       Etudiant, eleve    &lt;NA&gt;
  freres.soeurs clso                       relig
1             8  Oui Ni croyance ni appartenance
2             2  Oui Ni croyance ni appartenance
       trav.imp    trav.satisf hard.rock
1 Peu important Insatisfaction       Non
2          &lt;NA&gt;           &lt;NA&gt;       Non
  lecture.bd peche.chasse cuisine bricol cinema
1        Non          Non     Oui    Non    Non
2        Non          Non     Non    Non    Oui
  sport heures.tv
1   Non         0
2   Oui         1</code></pre>
</div>
<div id="premier-travail-avec-les-donnees_la-fonction-str" class="section level2">
<h2>La fonction str</h2>
<p>La fonction <code data-pkg="utils">str</code> est plus compl√®te que <code data-pkg="base">names</code>. Elle liste les diff√©rentes variables, indique leur type et donne le cas √©ch√©ant des informations suppl√©mentaires ainsi qu‚Äôun √©chantillon des premi√®res valeurs prises par cette variable¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(d)</code></pre></div>
<pre><code>'data.frame':   2000 obs. of  20 variables:
 $ id           : int  1 2 3 4 5 6 7 8 9 10 ...
 $ age          : int  28 23 59 34 71 35 60 47 20 28 ...
 $ sexe         : Factor w/ 2 levels "Homme","Femme": 2 2 1 1 2 2 2 1 2 1 ...
 $ nivetud      : Factor w/ 8 levels "N'a jamais fait d'etudes",..: 8 NA 3 8 3 6 3 6 NA 7 ...
 $ poids        : num  2634 9738 3994 5732 4329 ...
 $ occup        : Factor w/ 7 levels "Exerce une profession",..: 1 3 1 1 4 1 6 1 3 1 ...
 $ qualif       : Factor w/ 7 levels "Ouvrier specialise",..: 6 NA 3 3 6 6 2 2 NA 7 ...
 $ freres.soeurs: int  8 2 2 1 0 5 1 5 4 2 ...
 $ clso         : Factor w/ 3 levels "Oui","Non","Ne sait pas": 1 1 2 2 1 2 1 2 1 2 ...
 $ relig        : Factor w/ 6 levels "Pratiquant regulier",..: 4 4 4 3 1 4 3 4 3 2 ...
 $ trav.imp     : Factor w/ 4 levels "Le plus important",..: 4 NA 2 3 NA 1 NA 4 NA 3 ...
 $ trav.satisf  : Factor w/ 3 levels "Satisfaction",..: 2 NA 3 1 NA 3 NA 2 NA 1 ...
 $ hard.rock    : Factor w/ 2 levels "Non","Oui": 1 1 1 1 1 1 1 1 1 1 ...
 $ lecture.bd   : Factor w/ 2 levels "Non","Oui": 1 1 1 1 1 1 1 1 1 1 ...
 $ peche.chasse : Factor w/ 2 levels "Non","Oui": 1 1 1 1 1 1 2 2 1 1 ...
 $ cuisine      : Factor w/ 2 levels "Non","Oui": 2 1 1 2 1 1 2 2 1 1 ...
 $ bricol       : Factor w/ 2 levels "Non","Oui": 1 1 1 2 1 1 1 2 1 1 ...
 $ cinema       : Factor w/ 2 levels "Non","Oui": 1 2 1 2 1 2 1 1 2 2 ...
 $ sport        : Factor w/ 2 levels "Non","Oui": 1 2 2 2 1 2 1 1 1 2 ...
 $ heures.tv    : num  0 1 0 2 3 2 2.9 1 2 2 ...</code></pre>
<p>La premi√®re ligne nous informe qu‚Äôil s‚Äôagit bien d‚Äôun tableau de donn√©es avec 2000 observations et 20 variables. Vient ensuite la liste des variables. La premi√®re se nomme <var>id</var> et est de type <dfn>entier</dfn> (<em>int</em><dfn data-index="integer" lang="en"/>). La seconde se nomme <var>age</var> et est de type <dfn data-index="num√©rique, variable">num√©rique</dfn><dfn data-index="variable num√©rique"/><dfn data-index="numeric" lang="en"/>. La troisi√®me se nomme <var>sexe</var>, il s‚Äôagit d‚Äôun <dfn>facteur</dfn> (<dfn lang="en">factor</dfn>).</p>
<p>Un facteur est une variable pouvant prendre un nombre limit√© de <dfn data-index="modalit√©, facteur">modalit√©s</dfn> (<dfn data-index="level, factor" lang="en">levels</dfn>). Ici notre variable a deux modalit√©s possibles¬†: ¬´¬†Homme¬†¬ª et ¬´¬†Femme¬†¬ª. Ce type de variable est d√©crit plus en d√©tail dans le chapitre sur la <a href="pem_manipulation.html#variables">manipulation de donn√©es</a>.</p>
<div class="important">
<p>La fonction <code data-pkg="utils">str</code> est essentielle √† conna√Ætre et peut s‚Äôappliquer √† n‚Äôimporte quel type d‚Äôobjet. C‚Äôest un excellent moyen de conna√Ætre en d√©tail la <dfn>structure d‚Äôun objet</dfn>. Cependant, les r√©sultats peuvent √™tre parfois trop d√©taill√©s et on lui priviligiera dans certains cas la fonction <code data-pkg="questionr">describe</code> (voir ci-apr√®s), cependant moins g√©n√©rique puisque ne s‚Äôappliquant qu‚Äô√† des tableaux de donn√©es et √† des vecteurs, tandis que <code data-pkg="utils">str</code> peut s‚Äôappliquer √† absolument <strong>tout</strong> objet, y compris des fonctions.</p>
</div>
</div>
<div id="premier-travail-avec-les-donnees_quelques-calculs-simples" class="section level2">
<h2>Quelques calculs simples</h2>
<p>Maintenant que nous savons acc√©der aux variables, effectuons quelques calculs simples comme la moyenne, la m√©diane, le minimum et le maximum, √† l‚Äôaide des fonctions <code data-pkg="base">mean</code>, <code data-pkg="stats">median</code>, <code data-pkg="base" data-rdoc="Extrems">min</code> et <code data-pkg="base" data-rdoc="Extrems">max</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(d$age)</code></pre></div>
<pre><code>[1] 48.157</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">median</span>(d$age)</code></pre></div>
<pre><code>[1] 48</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">min</span>(d$age)</code></pre></div>
<pre><code>[1] 18</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">max</span>(d$age)</code></pre></div>
<pre><code>[1] 97</code></pre>
<div class="note">
<p>Au sens strict, il ne s‚Äôagit pas d‚Äôun v√©ritable √¢ge moyen puisqu‚Äôil faudrait ajouter 0,5 √† cette valeur calcul√©e, un √¢ge moyen se calculant √† partir d‚Äô√¢ges exacts et non √† partir d‚Äô√¢ges r√©volus. Voir le chapitre <a href="#calculer-un-age">Calculer un √¢ge</a>.</p>
</div>
<p>On peut aussi tr√®s facilement obtenir un tri √† plat √† l‚Äôaide la fonction <code data-pkg="base">table</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(d$qualif)</code></pre></div>
<pre><code>
      Ouvrier specialise         Ouvrier qualifie 
                     203                      292 
              Technicien Profession intermediaire 
                      86                      160 
                   Cadre                  Employe 
                     260                      594 
                   Autre 
                      58 </code></pre>
<p>La fonction <code data-pkg="base">summary</code>, bien pratique, permet d‚Äôavoir une vue r√©sum√©e d‚Äôune variable. Elle s‚Äôapplique √† tout type d‚Äôobjets (y compris un tableau de donn√©es entier) et s‚Äôadapte √† celui-ci.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(d$age)</code></pre></div>
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  18.00   35.00   48.00   48.16   60.00   97.00 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(d$qualif)</code></pre></div>
<pre><code>      Ouvrier specialise         Ouvrier qualifie 
                     203                      292 
              Technicien Profession intermediaire 
                      86                      160 
                   Cadre                  Employe 
                     260                      594 
                   Autre                     NA's 
                      58                      347 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(d)</code></pre></div>
<pre><code>       id              age           sexe     
 Min.   :   1.0   Min.   :18.00   Homme: 899  
 1st Qu.: 500.8   1st Qu.:35.00   Femme:1101  
 Median :1000.5   Median :48.00               
 Mean   :1000.5   Mean   :48.16               
 3rd Qu.:1500.2   3rd Qu.:60.00               
 Max.   :2000.0   Max.   :97.00               
                                              
                                                 nivetud   
 Enseignement technique ou professionnel court       :463  
 Enseignement superieur y compris technique superieur:441  
 Derniere annee d'etudes primaires                   :341  
 1er cycle                                           :204  
 2eme cycle                                          :183  
 (Other)                                             :256  
 NA's                                                :112  
     poids                            occup     
 Min.   :   78.08   Exerce une profession:1049  
 1st Qu.: 2221.82   Chomeur              : 134  
 Median : 4631.19   Etudiant, eleve      :  94  
 Mean   : 5535.61   Retraite             : 392  
 3rd Qu.: 7626.53   Retire des affaires  :  77  
 Max.   :31092.14   Au foyer             : 171  
                    Autre inactif        :  83  
                      qualif    freres.soeurs   
 Employe                 :594   Min.   : 0.000  
 Ouvrier qualifie        :292   1st Qu.: 1.000  
 Cadre                   :260   Median : 2.000  
 Ouvrier specialise      :203   Mean   : 3.283  
 Profession intermediaire:160   3rd Qu.: 5.000  
 (Other)                 :144   Max.   :22.000  
 NA's                    :347                   
          clso     
 Oui        : 936  
 Non        :1037  
 Ne sait pas:  27  
                   
                   
                   
                   
                         relig    
 Pratiquant regulier        :266  
 Pratiquant occasionnel     :442  
 Appartenance sans pratique :760  
 Ni croyance ni appartenance:399  
 Rejet                      : 93  
 NSP ou NVPR                : 40  
                                  
                         trav.imp  
 Le plus important           : 29  
 Aussi important que le reste:259  
 Moins important que le reste:708  
 Peu important               : 52  
 NA's                        :952  
                                   
                                   
         trav.satisf  hard.rock  lecture.bd
 Satisfaction  :480   Non:1986   Non:1953  
 Insatisfaction:117   Oui:  14   Oui:  47  
 Equilibre     :451                        
 NA's          :952                        
                                           
                                           
                                           
 peche.chasse cuisine    bricol     cinema    
 Non:1776     Non:1119   Non:1147   Non:1174  
 Oui: 224     Oui: 881   Oui: 853   Oui: 826  
                                              
                                              
                                              
                                              
                                              
 sport        heures.tv     
 Non:1277   Min.   : 0.000  
 Oui: 723   1st Qu.: 1.000  
            Median : 2.000  
            Mean   : 2.247  
            3rd Qu.: 3.000  
            Max.   :12.000  
            NA's   :5       </code></pre>
</div>
<div id="premier-travail-avec-les-donnees_nos-premiers-graphiques" class="section level2">
<h2>Nos premiers graphiques</h2>
<p><strong>R</strong> est tr√®s puissant en termes de repr√©sentations graphiques, notamment gr√¢ce √† des extensions d√©di√©es. Pour l‚Äôheure contentons-nous d‚Äôun premier essai √† l‚Äôaide de la fonction g√©n√©rique <code data-pkg="graphics">plot</code>.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(d$sexe)</code></pre></div>
<img src="graphs/premier-travail-avec-les-donnees/unnamed-chunk-20-1.png" title="" alt="" width="1050"/>
<figcaption>
Nombre d‚Äôobservations par sexe
</figcaption>
</figure>
<p>Essayons avec deux variables¬†:</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(d$hard.rock, d$age)</code></pre></div>
<img src="graphs/premier-travail-avec-les-donnees/unnamed-chunk-21-1.png" title="" alt="" width="1050"/>
<figcaption>
√Çge des enqu√™t√©s selon qu‚Äôils √©coutent ou non du hard rock
</figcaption>
</figure>
<p>Il semblerait bien que les amateurs de hard rock soient plus jeunes.</p>
</div>
<div id="premier-travail-avec-les-donnees_et-ensuite" class="section level2">
<h2>Et ensuite¬†?</h2>
<p>Nous n‚Äôavons qu‚Äôentr‚Äôaper√ßu les possibilit√©s de <strong>R</strong>. Avant de pouvoir nous lancer dans des analyses statisques, il est pr√©f√©rable de revenir un peu aux fondamentaux de <strong>R</strong> (les types d‚Äôobjets, la syntaxe, le recodage de variables‚Ä¶) mais aussi comment installer des extensions, importer des donn√©es, etc. Nous vous conseillons donc de poursuivre la lecture de la section <em>Prise en main</em> puis de vous lancer √† l‚Äôassault de la section <em>Statistique introductive</em>.</p>
</div>
<div class="footnotes">
<hr/>
<ol>
<li id="premier-travail-avec-les-donnees_fn1"><p>Sous <strong>Mac OS X</strong>, on utilise les touches <kbd>Pomme</kbd> et <kbd>Entr√©e</kbd>.<a href="#premier-travail-avec-les-donnees_fnref1">‚Ü©</a></p></li>
</ol>
</div>

</article>
<article id="extensions">

<div class="fluid-row" id="extensions_header">


<h1 class="title">Extensions</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#extensions_presentation">Pr√©sentation</a></li>
<li><a href="#extensions_le-hadleyverse">Le <q>Hadleyverse</q></a></li>
<li><a href="#extensions_installation-depuis-cran">Installation depuis CRAN</a></li>
<li><a href="#extensions_installation-depuis-github">Installation depuis GitHub</a></li>
<li><a href="#extensions_mise-a-jour-des-extensions">Mise √† jour des extensions</a></li>
</ul>
</div>

<div id="extensions_presentation" class="section level2">
<h2>Pr√©sentation</h2>
<p>L‚Äôinstallation par d√©faut du logiciel <strong>R</strong> contient le c≈ìur du programme ainsi qu‚Äôun ensemble de fonctions de base fournissant un grand nombre d‚Äôoutils de traitement de donn√©es et d‚Äôanalyse statistiques.</p>
<p><strong>R</strong> √©tant un logiciel libre, il b√©n√©ficie d‚Äôune forte communaut√© d‚Äôutilisateurs qui peuvent librement contribuer au d√©veloppement du logiciel en lui ajoutant des fonctionnalit√©s suppl√©mentaires. Ces contributions prennent la forme d‚Äô<dfn data-index="extension">extensions</dfn> (<dfn data-index="package" lang="en">packages</dfn>) pouvant √™tre install√©es par l‚Äôutilisateur et fournissant alors diverses fonctionnalit√©s suppl√©mentaires.</p>
<p>Il existe un tr√®s grand nombre d‚Äôextensions (plus de 6500 √† ce jour), qui sont diffus√©es par un r√©seau baptis√© <strong>CRAN</strong> (<dfn lang="en">Comprehensive R Archive Network</dfn><dfn data-index="CRAN"/>).</p>
<p>La liste de toutes les extensions disponibles sur <strong>CRAN</strong> est disponible ici¬†: <a href="http://cran.r-project.org/web/packages/" class="uri">http://cran.r-project.org/web/packages/</a>.</p>
<p>Pour faciliter un peu le rep√©rage des extensions, il existe un ensemble de regroupements th√©matiques (√©conom√©trie, finance, g√©n√©tique, donn√©es spatiales‚Ä¶) baptis√©s <dfn data-index="task view" lang="en">Task views</dfn>¬†: <a href="http://cran.r-project.org/web/views/" class="uri">http://cran.r-project.org/web/views/</a>.</p>
<p>On y trouve notamment une <em>Task view</em> d√©di√©e aux sciences sociales, listant de nombreuses extensions potentiellement utiles pour les analyses statistiques dans ce champ disciplinaire¬†: <a href="http://cran.r-project.org/web/views/SocialSciences.html" class="uri">http://cran.r-project.org/web/views/SocialSciences.html</a>.</p>
</div>
<div id="extensions_le-hadleyverse" class="section level2">
<h2>Le <q>Hadleyverse</q></h2>
<p>Hadley Wickham est professeur associ√© √† l‚Äôuniversit√© de Rice et scientifique en chef √† <strong>Rstudio</strong>. Il a d√©velopp√© de nombreux extensions pour <strong>R</strong> (plus d‚Äôune cinquantaine √† ce jours) qui, pour la plupart, fonctionne de mani√®re harmonis√©e entre elles. Par ailleurs, la plupart s‚Äôint√®gre parfaitement avec <strong>RStudio</strong>. On nomme un peu famili√®rement <q>Hadleyverse</q> l‚Äôensemble constitu√© par les diff√©rentes extensions cr√©es par Hadley Wickham.</p>
<p>Pour certaines t√¢ches, il peut exister plusieurs solutions / extensions diff√©rentes pour les r√©aliser. Dans la mesure o√π il n‚Äôest pas possible d‚Äô√™tre exhaustif, nous avons fait le choix dans le cadre d‚Äô<strong>analyse-R</strong> de choisir en priorit√©, lorsque cela est possible, les extensions propos√©es par Hadley Wickham, en particulier <code class="pkg">haven</code>, <code class="pkg">readr</code> et <code class="pkg">readxl</code> pour l‚Äôimport de donn√©es, <code class="pkg">dplyr</code>, <code class="pkg">tidyr</code> ou <code class="pkg">reshape2</code> pour la manipulation de donn√©es, <code class="pkg">ggplot2</code> pour les graphiques, <code class="pkg">lubridate</code> pour la gestion des dates ou encore <code class="pkg">stringr</code> pour la manipulation de cha√Ænes de caract√®res.</p>
</div>
<div id="extensions_installation-depuis-cran" class="section level2">
<h2>Installation depuis CRAN</h2>
<p>L‚Äôinstallation d‚Äôune extension se fait par la fonction <code>install.packages</code>{utils}, √† qui on fournit le nom de l‚Äôextension. Par exemple, si on souhaite installer l‚Äôextension <strong>ade4</strong>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">"ade4"</span>, <span class="dt">dep =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p>L‚Äôoption <code>dep=TRUE</code> indique √† <strong>R</strong> de t√©l√©charger et d‚Äôinstaller √©galement toutes les extensions dont l‚Äôextension choisie d√©pend pour son fonctionnement.</p>
<p>Sous <strong>RStudio</strong>, on pourra √©galement cliquer sur <em>Install</em> dans l‚Äôonglet <em>Packages</em> du quadrant inf√©rieur droit.</p>
<p>Une fois l‚Äôextension install√©e, elle peut √™tre appel√©e depuis la console ou un fichier script avec la fonction <code data-pkg="base">library</code> ou la fonction <code data-pkg="base" data-rdoc="library">require</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ade4)</code></pre></div>
<p>√Ä partir de l√†, on peut utiliser les fonctions de l‚Äôextension, consulter leur page d‚Äôaide en ligne, acc√©der aux jeux de donn√©es qu‚Äôelle contient, etc.</p>
<p>Pour mettre √† jour l‚Äôensemble des extensions install√©es, &lt;dfndata-index=‚Äúmise √† jour, extensions‚Äù&gt; la fonction <code data-pkg="utils">update.packages</code> suffit¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">update.packages</span>()</code></pre></div>
<p>Sous <strong>RStudio</strong>, on pourra alternativement cliquer sur <em>Update</em> dans l‚Äôonglet <em>Packages</em> du quadrant inf√©rieur droit.</p>
<p>Si on souhaite d√©sinstaller une extension pr√©c√©demment install√©e, on peut utiliser la fonction <code data-pkg="utils">remove.packages</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">remove.packages</span>(<span class="st">"ade4"</span>)</code></pre></div>
<div class="important">
<p>Il est important de bien comprendre la diff√©rence entre <code data-pkg="utils">install.packages</code> et <code data-pkg="base">library</code>. La premi√®re va chercher les extensions sur internet et les installe en local sur le disque dur de l‚Äôordinateur. On n‚Äôa besoin d‚Äôeffectuer cette op√©ration qu‚Äôune seule fois. La seconde lit les informations de l‚Äôextension sur le disque dur et les met √† disposition de <strong>R</strong>. On a besoin de l‚Äôex√©cuter √† chaque d√©but de session ou de script.</p>
</div>
</div>
<div id="extensions_installation-depuis-github" class="section level2">
<h2>Installation depuis GitHub</h2>
<p>Certains packages sont d√©velopp√©s sur <a href="https://github.com/"><strong>GitHub</strong></a>. D√®s lors, la version de d√©veloppement sur <strong>GitHub</strong> peut contenir des fonctions qui ne sont pas encore disponibles dans la version stable disponible sur <strong>CRAN</strong>. Ils arrivent aussi parfois que certains packages ne soient disponibles que sur <strong>GitHub</strong>.</p>
<p>L‚Äôinstallation d‚Äôun package depuis <strong>GitHub</strong> est tr√®s facile gr√¢ce √† la fonction <code data-pkg="devtools">install_github</code> de l‚Äôextension <code class="pkg">devtools</code> (que l‚Äôon aura pr√©alablement install√©e depuis <strong>CRAN</strong> ;-) ).</p>
</div>
<div id="extensions_mise-a-jour-des-extensions" class="section level2">
<h2>Mise √† jour des extensions</h2>
<p>Il est facile de mettre √† jour l‚Äôensemble des extensions install√©es, soit avec la fonction, <code data-pkg="utils">update.packages</code> soit en cliquant sur <em>Update</em> dans l‚Äôonglet <em>Packages</em> du quadrant inf√©rieur droit.</p>
</div>

</article>
<article id="vecteurs-indexation-et-assignation">

<div class="fluid-row" id="vecteurs-indexation-et-assignation_header">


<h1 class="title">Vecteurs, indexation et assignation</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#vecteurs-indexation-et-assignation_presentation-des-vecteurs">Pr√©sentation des vecteurs</a></li>
<li><a href="#vecteurs-indexation-et-assignation_les-principaux-types-de-vecteurs">Les principaux types de vecteurs</a></li>
<li><a href="#vecteurs-indexation-et-assignation_creation">Cr√©ation</a><ul>
<li><a href="#vecteurs-indexation-et-assignation_la-fonction-c">La fonction c</a></li>
<li><a href="#vecteurs-indexation-et-assignation_la-fonction-rep">La fonction rep</a></li>
<li><a href="#vecteurs-indexation-et-assignation_la-fonction-seq">La fonction seq</a></li>
<li><a href="#vecteurs-indexation-et-assignation_loperateur">L‚Äôop√©rateur :</a></li>
</ul></li>
<li><a href="#vecteurs-indexation-et-assignation_longueur-dun-vecteur">Longueur d‚Äôun vecteur</a></li>
<li><a href="#vecteurs-indexation-et-assignation_quelques-vecteurs-remarquables">Quelques vecteurs remarquables</a></li>
<li><a href="#vecteurs-indexation-et-assignation_combiner-des-vecteurs">Combiner des vecteurs</a></li>
<li><a href="#vecteurs-indexation-et-assignation_valeurs-manquantes">Valeurs manquantes</a></li>
<li><a href="#vecteurs-indexation-et-assignation_indexation-par-position">Indexation par position</a></li>
<li><a href="#vecteurs-indexation-et-assignation_des-vecteurs-nommes">Des vecteurs nomm√©s</a></li>
<li><a href="#vecteurs-indexation-et-assignation_indexation-par-nom">Indexation par nom</a></li>
<li><a href="#vecteurs-indexation-et-assignation_indexation-par-condition">Indexation par condition</a></li>
<li><a href="#vecteurs-indexation-et-assignation_assignation-par-indexation">Assignation par indexation</a></li>
<li><a href="#vecteurs-indexation-et-assignation_en-resume">En r√©sum√©</a></li>
</ul>
</div>

<p>Nous allons reprendre plusieurs √©l√©ments de base du langage <strong>R</strong> que nous avons d√©j√† abord√© mais de mani√®re plus formelle. Une bonne compr√©hension des bases du langage, bien qu‚Äôun peu ardue de prime abord, permets de comprendre le sens des commandes que l‚Äôon utilise et de pleinement exploiter la puissance que <strong>R</strong> offre en mati√®re de manipulation de donn√©es.</p>
<p>Dans ce chapitre, nous reviendrons sur les vecteurs, tandis que les listes et les tableaux de donn√©es seront abord√©s dans un <a href="#listes-et-tableaux-de-donnes">chapitre d√©di√©</a>.</p>
<div id="vecteurs-indexation-et-assignation_presentation-des-vecteurs" class="section level2">
<h2>Pr√©sentation des vecteurs</h2>
<p>Les <dfn data-index="vecteur">vecteurs</dfn> sont l‚Äôun des objets de bases de <strong>R</strong> et correspondent √† une <q>liste de valeurs</q>. Leurs propri√©t√©s fondamentales sont¬†:</p>
<ul>
<li>les vecteurs sont unidimensionnels (i.e.¬†c‚Äôest un objet √† une seule dimension, √† la diff√©rence d‚Äôune matrice par exemple)¬†;</li>
<li>toutes les valeurs d‚Äôun vecteur sont d‚Äôun seul et m√™me type¬†;</li>
<li>les vecteurs ont une longueur qui correspond au nombre de valeurs contenues dans le vecteur.</li>
</ul>
</div>
<div id="vecteurs-indexation-et-assignation_les-principaux-types-de-vecteurs" class="section level2">
<h2>Les principaux types de vecteurs</h2>
<p>Dans <strong>R</strong>, il existe quatre types fondamentaux de vecteurs¬†:</p>
<ul>
<li>les <dfn data-index="nombre r√©el">nombres r√©els</dfn><dfn data-index="r√©el, nombre"/> (c‚Äôest-√†-dire les nombres d√©cimaux que nous utilisons au quotidien),</li>
<li>les <dfn data-index="nombre entier">nombres entiers</dfn><dfn data-index="entier, nombre"/>,</li>
<li>les <dfn data-index="cha√Æne de caract√®res">cha√Ænes de carat√®res</dfn><dfn data-index="caract√®res, cha√Æne"/> (qui correspondent √† du <dfn>texte</dfn>) et</li>
<li>les <dfn data-index="valeur logique">valeurs logiques</dfn><dfn data-index="logique, valeur"/> ou <dfn data-index="valeur bool√©enne">valeurs bool√©ennes</dfn><dfn data-index="bool√©enne, valeur"/>, √† savoir <q>vrai</q> ou <q>faux</q>.</li>
</ul>
<p>Pour conna√Ætre la nature d‚Äôun objet, le plus simple est d‚Äôutiliser la fonction <code data-pkg="base">class</code>. Par exemple¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(<span class="fl">12.5</span>)</code></pre></div>
<pre><code>[1] "numeric"</code></pre>
<p>La r√©ponse <code>"numeric"</code> nous indique qu‚Äôil s‚Äôagit d‚Äôun nombre r√©el. Parfois, vous pourrez rencontrer le terme <code>"double"</code> qui d√©signe √©galement les nombres r√©els. Notez que <strong>R</strong> √©tant anglophone, la d√©cimale est indiqu√©e avec un point (<code>.</code>) et non avec une virgule comme c‚Äôest l‚Äôusage en fran√ßais.</p>
<p>Essayons avec un nombre entier¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(<span class="dv">3</span>)</code></pre></div>
<pre><code>[1] "numeric"</code></pre>
<p>Sous <strong>R</strong>, lorsqu‚Äôon l‚Äôon tape un nombre sans autre pr√©cision, il est consid√©r√© par d√©faut comme un nombre r√©el. Pour indiquer sp√©cifiquement que l‚Äôon veut un nombre entier, il faut rajouter le suffixe <code>L</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(3L)</code></pre></div>
<pre><code>[1] "integer"</code></pre>
<p>Au quotidien, il arrive rarement d‚Äôavoir √† utiliser ce suffixe, mais il est tonjour bon de le conna√Ætre au cas o√π vous le rencontriez dans des manuels ou des exemples de code.</p>
<p>Pour saisir une cha√Æne de caract√®res, on aura recours aux doubles guillemets droits (<code>"</code>)¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(<span class="st">"abc"</span>)</code></pre></div>
<pre><code>[1] "character"</code></pre>
<p>Il est √©galement possible d‚Äôutiliser des guillemets simples (<code>'</code>), d√®s lors que l‚Äôon utilise bien le m√™me type de guillemets pour indiquer le d√©but et la fin de la cha√Æne de caract√®res (par exemple <code>'abc'</code>).</p>
<p>Enfin, les valeurs logiques s‚Äôindiquent avec <code>TRUE</code> pour vrai et <code>FALSE</code> pour faux. Il est aussi possible d‚Äôutiliser les raccourcis <code>T</code> et <code>F</code>. Attention √† bien utiliser les majuscules, <strong>R</strong> √©tant sensible √† la casse.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(<span class="ot">TRUE</span>)</code></pre></div>
<pre><code>[1] "logical"</code></pre>
<p>En r√©sum√©, les classes <strong>R</strong> des quatre types fondamentaux de vecteur sont¬†:</p>
<table>
<thead>
<tr class="header">
<th align="left">Exemple</th>
<th align="left">Classe R</th>
<th align="left">Type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>5L</code></td>
<td align="left"><dfn lang="en">integer</dfn></td>
<td align="left">nombre entier</td>
</tr>
<tr class="even">
<td align="left"><code>3.14</code></td>
<td align="left"><dfn lang="en">numeric</dfn></td>
<td align="left">nombre r√©el</td>
</tr>
<tr class="odd">
<td align="left"><code>"abcd"</code></td>
<td align="left"><dfn lang="en">character</dfn></td>
<td align="left">cha√Æne de caract√®res</td>
</tr>
<tr class="even">
<td align="left"><code>TRUE</code></td>
<td align="left"><dfn lang="en">logical</dfn></td>
<td align="left">bool√©enne</td>
</tr>
</tbody>
</table>
<p>En plus des types de base, il existe de nombreuses autres classes de vecteurs dans <strong>R</strong> que nous aborderons ult√©rieurement dans d‚Äôautres chapitres. Les plus courantes sont¬†:</p>
<table style="width:28%;">
<colgroup>
<col width="11%"/>
<col width="16%"/>
</colgroup>
<thead>
<tr class="header">
<th align="left">Classe R</th>
<th align="left">Type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">factor</td>
<td align="left"><a href="#facteurs-et-vecteurs-labellises_facteurs">facteur</a></td>
</tr>
<tr class="even">
<td align="left">labelled</td>
<td align="left"><a href="#facteurs-et-vecteurs-labellises_labelled">vecteur labellis√©</a></td>
</tr>
<tr class="odd">
<td align="left">Date</td>
<td align="left"><a href="#gestion-des-dates">date</a></td>
</tr>
<tr class="even">
<td align="left">POSIXct</td>
<td align="left"><a href="#gestion-des-dates">date et heure</a></td>
</tr>
</tbody>
</table>
</div>
<div id="vecteurs-indexation-et-assignation_creation" class="section level2">
<h2>Cr√©ation</h2>
<div id="vecteurs-indexation-et-assignation_la-fonction-c" class="section level3">
<h3>La fonction c</h3>
<p>Pour cr√©er un vecteur, on utilisera la fonction <code data-pkg="base">c</code>, la lettre <q>c</q> √©tant un raccourci du mot anglais <i lang="en">combine</i> puisque cette fonction permet de combiner des valeurs individuelles dans un vecteur unique. Il suffit de lui passer la liste des valeurs √† combiner¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">taille &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">1.88</span>, <span class="fl">1.65</span>, <span class="fl">1.92</span>, <span class="fl">1.76</span>)
taille</code></pre></div>
<pre><code>[1] 1.88 1.65 1.92 1.76</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(taille)</code></pre></div>
<pre><code>[1] "numeric"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sexe &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"h"</span>, <span class="st">"f"</span>, <span class="st">"h"</span>, <span class="st">"f"</span>)
sexe</code></pre></div>
<pre><code>[1] "h" "f" "h" "f"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(sexe)</code></pre></div>
<pre><code>[1] "character"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">urbain &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>)
urbain</code></pre></div>
<pre><code>[1]  TRUE  TRUE FALSE FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(urbain)</code></pre></div>
<pre><code>[1] "logical"</code></pre>
<p>Nous l‚Äôavons vu, toutes les valeurs d‚Äôun vecteur doivent obligatoirement du m√™me type. D√®s lors, si l‚Äôon essaie de combiner des valeurs de diff√©rents types, <strong>R</strong> essaiera de les convertir au mieux. Par exemple¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">c</span>(2L, <span class="fl">3.14</span>, <span class="st">"a"</span>)
x</code></pre></div>
<pre><code>[1] "2"    "3.14" "a"   </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(x)</code></pre></div>
<pre><code>[1] "character"</code></pre>
<p>Dans le cas pr√©sent, toutes les valeurs ont √©t√© converties en cha√Ænes de caract√®res.</p>
</div>
<div id="vecteurs-indexation-et-assignation_la-fonction-rep" class="section level3">
<h3>La fonction rep</h3>
<p>Dans certaines situations, on peut avoir besoin de cr√©er un vecteur d‚Äôune certaines longeurs mais dont toutes les valeurs sont identiques. Cela se r√©alise facilement avec <code data-pkg="base">rep</code> √† qui l‚Äôon indiquera la valeur √† r√©p√©ter puis le nombre de r√©p√©titions¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rep</span>(<span class="dv">2</span>, <span class="dv">10</span>)</code></pre></div>
<pre><code> [1] 2 2 2 2 2 2 2 2 2 2</code></pre>
<p>On peut aussi lui indiquer plusieurs valeurs qui seront alors r√©p√©t√©es en boucle¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rep</span>(<span class="kw">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>), <span class="dv">3</span>)</code></pre></div>
<pre><code>[1] "a" "b" "a" "b" "a" "b"</code></pre>
</div>
<div id="vecteurs-indexation-et-assignation_la-fonction-seq" class="section level3">
<h3>La fonction seq</h3>
<p>Dans d‚Äôautres situations, on peut avoir besoin de cr√©er un vecteur contenant une suite de valeurs, ce qui se r√©alise ais√©ment avec <code>seq</code>{data-pkg} √† qui l‚Äôon pr√©cisera les arguments <code>from</code> (point de d√©part), <code>to</code> (point d‚Äôarriv√©e) et <code>by</code> (pas). Quelques exemples valent mieux qu‚Äôun long discours¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seq</span>(<span class="dv">1</span>, <span class="dv">10</span>)</code></pre></div>
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seq</span>(<span class="dv">5</span>, <span class="dv">17</span>, <span class="dt">by =</span> <span class="dv">2</span>)</code></pre></div>
<pre><code>[1]  5  7  9 11 13 15 17</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seq</span>(<span class="dv">10</span>, <span class="dv">0</span>)</code></pre></div>
<pre><code> [1] 10  9  8  7  6  5  4  3  2  1  0</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seq</span>(<span class="dv">100</span>, <span class="dv">10</span>, <span class="dt">by =</span> -<span class="dv">10</span>)</code></pre></div>
<pre><code> [1] 100  90  80  70  60  50  40  30  20  10</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seq</span>(<span class="fl">1.23</span>, <span class="fl">5.67</span>, <span class="dt">by =</span> <span class="fl">0.33</span>)</code></pre></div>
<pre><code> [1] 1.23 1.56 1.89 2.22 2.55 2.88 3.21 3.54 3.87
[10] 4.20 4.53 4.86 5.19 5.52</code></pre>
</div>
<div id="vecteurs-indexation-et-assignation_loperateur" class="section level3">
<h3>L‚Äôop√©rateur :</h3>
<p>L‚Äôop√©rateur <code>:</code> est un raccourci de la fonction <code>seq</code> pour cr√©er une suite de nombres entiers. Il s‚Äôutilise ainsi¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">1</span>:<span class="dv">5</span></code></pre></div>
<pre><code>[1] 1 2 3 4 5</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">24</span>:<span class="dv">32</span></code></pre></div>
<pre><code>[1] 24 25 26 27 28 29 30 31 32</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">55</span>:<span class="dv">43</span></code></pre></div>
<pre><code> [1] 55 54 53 52 51 50 49 48 47 46 45 44 43</code></pre>
<p>Nous verrons un peu plus loin que ce raccourci est fort pratique.</p>
</div>
</div>
<div id="vecteurs-indexation-et-assignation_longueur-dun-vecteur" class="section level2">
<h2>Longueur d‚Äôun vecteur</h2>
<p>Un vecteur dispose donc d‚Äôune <dfn data-index="longueur, vecteur">longueur</dfn> qui correspond aux nombres de valeurs qui le compose. Elle s‚Äôobtient avec <code data-pkg="base">length</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(taille)</code></pre></div>
<pre><code>[1] 4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(<span class="kw">c</span>(<span class="st">"a"</span>, <span class="st">"b"</span>))</code></pre></div>
<pre><code>[1] 2</code></pre>
<p>Il est possible de faire un vecteur de longeur nulle avec <code>c()</code>. Bien √©videmment sa longueur est z√©ro.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(<span class="kw">c</span>())</code></pre></div>
<pre><code>[1] 0</code></pre>
</div>
<div id="vecteurs-indexation-et-assignation_quelques-vecteurs-remarquables" class="section level2">
<h2>Quelques vecteurs remarquables</h2>
<p><strong>R</strong> fournit quelques vecteurs particuliers qui sont directement accessibles¬†:</p>
<ul>
<li><code data-pkg="base" data-rdoc="Constants">LETTERS</code>¬†: les 26 lettres de l‚Äôalphabet en majuscules</li>
<li><code data-pkg="base" data-rdoc="Constants">letters</code>¬†: les 26 lettres de l‚Äôalphabet en minuscules</li>
<li><code data-pkg="base" data-rdoc="Constants">month.name</code>¬†: les noms des 12 mois de l‚Äôann√©e en anglais</li>
<li><code data-pkg="base" data-rdoc="Constants">month.abb</code>¬†: la version abr√©g√©e des 12 mois en anglais</li>
<li><code data-pkg="base" data-rdoc="Constants">pi</code>¬†: la constante math√©matique œÄ</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">LETTERS</code></pre></div>
<pre><code> [1] "A" "B" "C" "D" "E" "F" "G" "H" "I" "J" "K"
[12] "L" "M" "N" "O" "P" "Q" "R" "S" "T" "U" "V"
[23] "W" "X" "Y" "Z"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">letters</code></pre></div>
<pre><code> [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k"
[12] "l" "m" "n" "o" "p" "q" "r" "s" "t" "u" "v"
[23] "w" "x" "y" "z"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(letters)</code></pre></div>
<pre><code>[1] 26</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">month.name</code></pre></div>
<pre><code> [1] "January"   "February"  "March"    
 [4] "April"     "May"       "June"     
 [7] "July"      "August"    "September"
[10] "October"   "November"  "December" </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">month.abb</code></pre></div>
<pre><code> [1] "Jan" "Feb" "Mar" "Apr" "May" "Jun" "Jul"
 [8] "Aug" "Sep" "Oct" "Nov" "Dec"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(month.abb)</code></pre></div>
<pre><code>[1] 12</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pi</code></pre></div>
<pre><code>[1] 3.141593</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(pi)</code></pre></div>
<pre><code>[1] 1</code></pre>
</div>
<div id="vecteurs-indexation-et-assignation_combiner-des-vecteurs" class="section level2">
<h2>Combiner des vecteurs</h2>
<p>Pour combiner des vecteurs, rien de plus simple. Il suffit d‚Äôutiliser <code data-pkd="base">c</code>¬†! Les valeurs des diff√©rents vecteurs seront mises bout √† bout pour cr√©er un unique vecteur.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>)
<span class="kw">length</span>(x)</code></pre></div>
<pre><code>[1] 4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">y &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">9</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">6</span>, <span class="dv">3</span>, <span class="dv">0</span>)
<span class="kw">length</span>(y)</code></pre></div>
<pre><code>[1] 6</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">z &lt;-<span class="st"> </span><span class="kw">c</span>(x, y)
z</code></pre></div>
<pre><code> [1] 2 1 3 4 9 1 2 6 3 0</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(z)</code></pre></div>
<pre><code>[1] 10</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">min_maj &lt;-<span class="st"> </span><span class="kw">c</span>(letters, LETTERS)
min_maj</code></pre></div>
<pre><code> [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k"
[12] "l" "m" "n" "o" "p" "q" "r" "s" "t" "u" "v"
[23] "w" "x" "y" "z" "A" "B" "C" "D" "E" "F" "G"
[34] "H" "I" "J" "K" "L" "M" "N" "O" "P" "Q" "R"
[45] "S" "T" "U" "V" "W" "X" "Y" "Z"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(min_maj)</code></pre></div>
<pre><code>[1] 52</code></pre>
</div>
<div id="vecteurs-indexation-et-assignation_valeurs-manquantes" class="section level2">
<h2>Valeurs manquantes</h2>
<p>Lorsque l‚Äôon travaille avec des donn√©es d‚Äôenqu√™tes, il est fr√©quent que certaines donn√©es soient manquantes, en raison d‚Äôun refus du participant de r√©pondre √† une question donn√©e ou d‚Äôun oubli ou d‚Äôun dystonctionnement du mat√©riel de mesure, etc.</p>
<p>Une <dfn>valeur manquante</dfn><dfn data-index="manquante, valeur"> s‚Äôindique sous <strong>R</strong> avec <code>NA</code> (pour <em>not available</em>). Cette valeur peut s‚Äôappliquer √† n‚Äôimporte quel type de vecteur, qu‚Äôil soit num√©rique, textuel ou logique.</dfn></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">taille &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">1.88</span>, <span class="ot">NA</span>, <span class="fl">1.65</span>, <span class="fl">1.92</span>, <span class="fl">1.76</span>, <span class="ot">NA</span>)
sexe &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"h"</span>, <span class="st">"f"</span>, <span class="ot">NA</span>, <span class="st">"h"</span>, <span class="ot">NA</span>, <span class="st">"f"</span>)</code></pre></div>
<p>Les valeurs manquantes sont prises en compte dans le calcul de la longeur du vecteur.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(taille)</code></pre></div>
<pre><code>[1] 6</code></pre>
<p>Il ne faut pas confondre <code data-pkg="base">NA</code> avec un autre objet que l‚Äôon rencontre sous <strong>R</strong> et appel√© <code data-pkg="base">NULL</code> qui repr√©sente l‚Äô<q>objet vide</q>. <code>NULL</code> ne contient absolument rien du tout. La diff√©rence ce comprends mieux lorsque que l‚Äôon essaie de combiner ces objets¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(<span class="ot">NULL</span>, <span class="ot">NULL</span>, <span class="ot">NULL</span>)</code></pre></div>
<pre><code>NULL</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(<span class="kw">c</span>(<span class="ot">NULL</span>, <span class="ot">NULL</span>, <span class="ot">NULL</span>))</code></pre></div>
<pre><code>[1] 0</code></pre>
<p>On peut combiner <code>NULL</code> avec <code>NULL</code>, du vide plus du vide renverra toujours du vide dont la dimension est √©gale √† z√©ro.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(<span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>)</code></pre></div>
<pre><code>[1] NA NA NA</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(<span class="kw">c</span>(<span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>))</code></pre></div>
<pre><code>[1] 3</code></pre>
<p>Par contre, un vecteur compos√© de trois valeurs manquantes a une longueur de 3, m√™me si toutes ses valeurs sont manquantes.</p>
</div>
<div id="vecteurs-indexation-et-assignation_indexation-par-position" class="section level2">
<h2>Indexation par position</h2>
<p>L‚Äô<dfn>indexation</dfn> est l‚Äôune des fonctionnalit√©s les plus puissantes mais aussi les plus difficiles √† ma√Ætriser de<strong>R</strong>. Il s‚Äôagit d‚Äôop√©rations permettant de s√©lectionner des sous-ensembles de valeurs en fonction de diff√©rents crit√®res. Il existe trois types d‚Äôindexation¬†: (i) l‚Äôindexation par position, (ii) l‚Äôindexation par nom et (iii) l‚Äôindexation par condition. Le principe est toujours le m√™me¬†: on indique entre crochets (<code>[]</code>) ce que l‚Äôon souhaite garder ou non.</p>
<p>Pour rappel, les crochets s‚Äôobtiennent sur un clavier fran√ßais de type PC en appuyant sur la touche <kbd>Alt¬†Gr</kbd> et la touche <kbd>(</kbd> ou <kbd>)</kbd>.</p>
<p>Commen√ßons par l‚Äô<dfn>indexation par position</dfn><dfn data-index="position, indexation"/> encore appel√©e <dfn>indexation directe</dfn>. Ce mode le plus simple d‚Äôindexation consiste √† indiquer la position des √©l√©ments √† conserver.</p>
<p>Reprenons notre vecteur <code>taille</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">taille</code></pre></div>
<pre><code>[1] 1.88   NA 1.65 1.92 1.76   NA</code></pre>
<p>Si on souhaite le premier √©l√©ment du vecteur, on peut faire¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">taille[<span class="dv">1</span>]</code></pre></div>
<pre><code>[1] 1.88</code></pre>
<p>Si on souhaite les trois premiers √©l√©ments ou les √©l√©ments 2, 5 et 6¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">taille[<span class="dv">1</span>:<span class="dv">3</span>]</code></pre></div>
<pre><code>[1] 1.88   NA 1.65</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">taille[<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">6</span>)]</code></pre></div>
<pre><code>[1]   NA 1.76   NA</code></pre>
<p>Si on veut le dernier √©l√©ment¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">taille[<span class="kw">length</span>(taille)]</code></pre></div>
<pre><code>[1] NA</code></pre>
<p>Il est tout √† fait possible de s√©lectionner les valeurs dans le d√©sordre¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">taille[<span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">3</span>)]</code></pre></div>
<pre><code>[1] 1.76 1.88 1.92 1.65</code></pre>
<p>Dans le cadre de l‚Äôindexation par position, il est √©galement possible de sp√©cfier des nombres n√©gatifs. Auquel cas, cela signifiera <q>toutes les valeurs sauf celles-l√†</q>. Par exemple¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">taille[<span class="kw">c</span>(-<span class="dv">1</span>, -<span class="dv">5</span>)]</code></pre></div>
<pre><code>[1]   NA 1.65 1.92   NA</code></pre>
<p>√Ä noter, si l‚Äôon indique une position au-del√† de la longueur du vecteur, <strong>R</strong> renverra <code>NA</code>. Par exemple¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">taille[<span class="dv">23</span>:<span class="dv">25</span>]</code></pre></div>
<pre><code>[1] NA NA NA</code></pre>
</div>
<div id="vecteurs-indexation-et-assignation_des-vecteurs-nommes" class="section level2">
<h2>Des vecteurs nomm√©s</h2>
<p>Les diff√©rentes valeurs d‚Äôun vecteur peuvent √™tre nomm√©s. Une premi√®re mani√®re de nommer les √©l√©ments d‚Äôun vecteur est de le faire √† sa cr√©ation¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sexe &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">Michel =</span> <span class="st">"h"</span>, <span class="dt">Anne =</span> <span class="st">"f"</span>, <span class="dt">Dominique =</span> <span class="ot">NA</span>, 
  <span class="dt">Jean =</span> <span class="st">"h"</span>, <span class="dt">Claude =</span> <span class="ot">NA</span>, <span class="dt">Marie =</span> <span class="st">"f"</span>)</code></pre></div>
<p>Lorsque l‚Äôon affiche le vecteur, la pr√©sentation change quelque peu.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sexe</code></pre></div>
<pre><code>   Michel      Anne Dominique      Jean    Claude 
      "h"       "f"        NA       "h"        NA 
    Marie 
      "f" </code></pre>
<p>La liste des noms s‚Äôobient avec <code data-pkg="base">names</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(sexe)</code></pre></div>
<pre><code>[1] "Michel"    "Anne"      "Dominique"
[4] "Jean"      "Claude"    "Marie"    </code></pre>
<p>Pour ajouter ou modifier les noms d‚Äôun vecteur, on doit attribuer un nouveau vecteur de noms¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(sexe) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Michael"</span>, <span class="st">"Anna"</span>, <span class="st">"Dom"</span>, <span class="st">"John"</span>, 
  <span class="st">"Alex"</span>, <span class="st">"Mary"</span>)
sexe</code></pre></div>
<pre><code>Michael    Anna     Dom    John    Alex    Mary 
    "h"     "f"      NA     "h"      NA     "f" </code></pre>
<p>Pour supprimer tout les noms, il y a la fonction <code data-pkg="base">unname</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">anonyme &lt;-<span class="st"> </span><span class="kw">unname</span>(sexe)
anonyme</code></pre></div>
<pre><code>[1] "h" "f" NA  "h" NA  "f"</code></pre>
</div>
<div id="vecteurs-indexation-et-assignation_indexation-par-nom" class="section level2">
<h2>Indexation par nom</h2>
<p>Lorsqu‚Äôun vecteur est nomm√©, il est d√®s lors possible d‚Äôacc√©der √† ses valeurs √† partir de leur nom. Il s‚Äôagit de l‚Äô<dfn>indexation par nom</dfn><dfn data-index="nom, indexation"/>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sexe[<span class="st">"Anna"</span>]</code></pre></div>
<pre><code>Anna 
 "f" </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sexe[<span class="kw">c</span>(<span class="st">"Mary"</span>, <span class="st">"Michael"</span>, <span class="st">"John"</span>)]</code></pre></div>
<pre><code>   Mary Michael    John 
    "f"     "h"     "h" </code></pre>
<p>Par contre il n‚Äôest pas possible d‚Äôutiliser l‚Äôop√©rateur <code>-</code> comme pour l‚Äôindexation directe. Pour exclure un √©l√©ment en fonction de son nom, on doit utiliser une autre forme d‚Äôindexation, l‚Äôindexation par condition, expliqu√©e dans la section suivante. On peut ainsi faire‚Ä¶</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sexe[<span class="kw">names</span>(sexe) !=<span class="st"> "Dom"</span>]</code></pre></div>
<p>‚Ä¶ pour s√©lectionner tous les √©l√©ments sauf celui qui s‚Äôappelle <q>Dom</q>.</p>
</div>
<div id="vecteurs-indexation-et-assignation_indexation-par-condition" class="section level2">
<h2>Indexation par condition</h2>
<p>L‚Äô<dfn>indexation par condition<dfn><dfn data-index="condition, indexation"> consiste √† fournir un vecteur logique indiquant si chaque √©l√©ment doit √™tre inclu (si <code>TRUE</code>) ou exclu (si <code>FALSE</code>). Par exemple¬†:</dfn></dfn></dfn></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sexe</code></pre></div>
<pre><code>Michael    Anna     Dom    John    Alex    Mary 
    "h"     "f"      NA     "h"      NA     "f" </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sexe[<span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>)]</code></pre></div>
<pre><code>Michael    John 
    "h"     "h" </code></pre>
<p>√âcrire manuellement une telle condition n‚Äôest pas tr√®s pratique √† l‚Äôusage. Mais supposons que nous ayons √©galement √† notre disposition les deux vecteurs suivants, √©galement de longueur 6.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">urbain &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>)
poids &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">80</span>, <span class="dv">63</span>, <span class="dv">75</span>, <span class="dv">87</span>, <span class="dv">82</span>, <span class="dv">67</span>)</code></pre></div>
<p>Le vecteur <code>urbain</code> est un vecteur logique. On peut directement l‚Äôutiliser pour avoir le sexe des enqu√™t√©s habitant en milieu urbain¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sexe[urbain]</code></pre></div>
<pre><code>Michael    Alex    Mary 
    "h"      NA     "f" </code></pre>
<p>Supposons que l‚Äôon souhaite maintenant avoir la taille des individus pesant 80 kilogrammes ou plus. Nous pouvons effectuer une comparaison √† l‚Äôaide des <dfn data-index="op√©rateur de comparaison">op√©rateurs de comparaison</dfn><dfn data-index="comparaison, op√©rateur"> suivants¬†:</dfn></p>
<table>
<thead>
<tr class="header">
<th align="left">Op√©rateur de comparaison</th>
<th align="left">Signification</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>==</code></td>
<td align="left">√©gal √†</td>
</tr>
<tr class="even">
<td align="left"><code>!=</code></td>
<td align="left">diff√©rent de</td>
</tr>
<tr class="odd">
<td align="left"><code>&gt;</code></td>
<td align="left">strictement sup√©rieur √†</td>
</tr>
<tr class="even">
<td align="left"><code>&lt;</code></td>
<td align="left">strictement inf√©rieur √†</td>
</tr>
<tr class="odd">
<td align="left"><code>&gt;=</code></td>
<td align="left">sup√©rieur ou √©gal √†</td>
</tr>
<tr class="even">
<td align="left"><code>&lt;=</code></td>
<td align="left">inf√©rieur ou √©gal √†</td>
</tr>
</tbody>
</table>
<p>Voyons tout de suite un exemple¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">poids &gt;=<span class="st"> </span><span class="dv">80</span></code></pre></div>
<pre><code>[1]  TRUE FALSE FALSE  TRUE  TRUE FALSE</code></pre>
<p>Que s‚Äôest-il pass√©¬†? Nous avons fourni √† <strong>R</strong> une condition et il nous a renvoy√© un vecteur logique avec autant d‚Äô√©l√©ments qu‚Äôil y‚Äôa d‚Äôobservations et dont la valeur est <code>TRUE</code> si la condition est remplie et <code>FALSE</code> dans les autres cas. Nous pouvons alors utiliser ce vecteur logique pour obtenir la taille des participants pesant 80 kilogrammes ou plus¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">taille[poids &gt;=<span class="st"> </span><span class="dv">80</span>]</code></pre></div>
<pre><code>[1] 1.88 1.92 1.76</code></pre>
<p>On peut combiner ou modifier des conditions √† l‚Äôaide des <dfn data-index="op√©rateur logique">op√©rateurs logiques</dfn><dfn data-index="logique, op√©rateur"/> habituels¬†:</p>
<table>
<thead>
<tr class="header">
<th align="left">Op√©rateur logique</th>
<th align="left">Signification</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>&amp;</code></td>
<td align="left">et logique</td>
</tr>
<tr class="even">
<td align="left"><code>|</code></td>
<td align="left">ou logique</td>
</tr>
<tr class="odd">
<td align="left"><code>!</code></td>
<td align="left">n√©gation logique</td>
</tr>
</tbody>
</table>
<p>Comment les utilise-t-on¬†? Voyons tout de suite un exemple. Supposons que je veuille identifier les personnes pesant 80 kilogrammes ou plus <strong>et</strong> vivant en milieu urbain¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">poids &gt;=<span class="st"> </span><span class="dv">80</span> &amp;<span class="st"> </span>urbain</code></pre></div>
<p>Les r√©sultats sont tr√®s diff√©rents si je souhaite isoler les personnes pesant 80 kilogrammes ou plus <em>ou</em> vivant milieu urbain¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">poids &gt;=<span class="st"> </span><span class="dv">80</span> &amp;<span class="st"> </span>urbain</code></pre></div>
<p>Une remarque importante¬†: quand l‚Äôun des termes d‚Äôune condition comporte une <dfn>valeur manquante</dfn><dfn data-index="manquante, valeur"/> (<code>NA</code>), le r√©sultat de cette condition n‚Äôest pas toujours <code>TRUE</code> ou <code>FALSE</code>, il peut aussi √™tre √† son tour une valeur manquante.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">taille</code></pre></div>
<pre><code>[1] 1.88   NA 1.65 1.92 1.76   NA</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">taille &gt;<span class="st"> </span><span class="fl">1.8</span></code></pre></div>
<pre><code>[1]  TRUE    NA FALSE  TRUE FALSE    NA</code></pre>
<p>On voit que le test <code>NA &gt; 1.8</code> ne renvoie ni vrai ni faux, mais <code>NA</code>.</p>
<p>Une autre cons√©quence importante de ce comportement est qu‚Äôon ne peut pas utiliser l‚Äôop√©rateur l‚Äôexpression <code>== NA</code> pour tester la pr√©sence de valeurs manquantes. On utilisera √† la place la fonction <em>ad hoc</em> <code data-pkg="base" data-rdoc="NA">is.na</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.na</span>(taille &gt;<span class="st"> </span><span class="fl">1.8</span>)</code></pre></div>
<pre><code>[1] FALSE  TRUE FALSE FALSE FALSE  TRUE</code></pre>
<p>Pour compliquer encore un peu le tout, lorsqu‚Äôon utilise une condition pour l‚Äôindexation, si la condition renvoie <code>NA</code>, <strong>R</strong> ne s√©lectionne pas l‚Äô√©l√©ment mais retourne quand m√™me la valeur <code>NA</code>. Ceci a donc des cons√©quences sur le r√©sultat d‚Äôune indexation par comparaison.</p>
<p>Par exemple si je cherche √† conna√Ætre le poids des personnes mesurant 1,80 m√®tre ou plus¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">taille</code></pre></div>
<pre><code>[1] 1.88   NA 1.65 1.92 1.76   NA</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">poids</code></pre></div>
<pre><code>[1] 80 63 75 87 82 67</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">poids[taille &gt;<span class="st"> </span><span class="fl">1.8</span>]</code></pre></div>
<pre><code>[1] 80 NA 87 NA</code></pre>
<p>Les √©l√©ments pour lesquels la taille n‚Äôest pas connue ont √©t√© transform√©s en <code>NA</code>, ce qui n‚Äôinfluera pas le calcul d‚Äôune moyenne. Par contre, lorsqu‚Äôon utilisera assignation et indexation ensemble, cela peut cr√©er des probl√®mes. Il est donc pr√©f√©rable lorsque l‚Äôon a des valeurs manquantes de les exclure ainsi¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">poids[taille &gt;<span class="st"> </span><span class="fl">1.8</span> &amp;<span class="st"> </span>!<span class="kw">is.na</span>(taille)]</code></pre></div>
<pre><code>[1] 80 87</code></pre>
<p>Pour plus de d√©tails sur les conditions et le calcul logique dans <strong>R</strong>, on pourra se r√©f√©rer au <a href="conditions-et-comparaisons.html">chapitre d√©di√©</a>.</p>
</div>
<div id="vecteurs-indexation-et-assignation_assignation-par-indexation" class="section level2">
<h2>Assignation par indexation</h2>
<p>Dans tous les exemples pr√©c√©dents, on a utilis√© l‚Äôindexation pour extraire une partie d‚Äôun vecteur, en pla√ßant l‚Äôop√©ration d‚Äôindexation √† droite de l‚Äôop√©rateur <code>&lt;-</code>.</p>
<p>Mais l‚Äôindexation peut √©galement √™tre plac√©e √† gauche de cet op√©rateur d‚Äô<dfn>assignation</dfn>. Dans ce cas, les √©l√©ments s√©lectionn√©s par l‚Äôindexation sont alors remplac√©s par les valeurs indiqu√©es √† droite de l‚Äôop√©rateur <code>&lt;-</code>.</p>
<p>Prenons donc un exemple simple¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">v &lt;-<span class="st"> </span><span class="dv">1</span>:<span class="dv">5</span>
v</code></pre></div>
<pre><code>[1] 1 2 3 4 5</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">v[<span class="dv">1</span>] &lt;-<span class="st"> </span><span class="dv">3</span>
v</code></pre></div>
<pre><code>[1] 3 2 3 4 5</code></pre>
<p>Cette fois, au lieu d‚Äôutiliser quelque chose comme <code>x &lt;- v[1]</code>, qui aurait plac√© la valeur du premier √©l√©ment de <code>v</code> dans <code>x</code>, on a utilis√© <code>v[1] &lt;- 3</code>, ce qui a mis √† jour le premier √©l√©ment de <code>v</code> avec la valeur 3. Ceci fonctionne √©galement pour les tableaux de donn√©es et pour les diff√©rents types d‚Äôindexation √©voqu√©s pr√©c√©demment¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sexe[<span class="st">"Alex"</span>] &lt;-<span class="st"> "f"</span></code></pre></div>
<p>Enfin on peut modifier plusieurs √©l√©ments d‚Äôun seul coup soit en fournissant un vecteur, soit en profitant du m√©canisme de <dfn>recyclage</dfn>. Les deux commandes suivantes sont ainsi rigoureusement √©quivalentes¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sexe[<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>)] &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Homme"</span>, <span class="st">"Homme"</span>, <span class="st">"Homme"</span>)
sexe[<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>)] &lt;-<span class="st"> "Homme"</span></code></pre></div>
<p>L‚Äôassignation par indexation peut aussi √™tre utilis√©e pour ajouter une ou plusieurs valeurs √† un vecteur¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(sexe)</code></pre></div>
<pre><code>[1] 6</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sexe[<span class="dv">7</span>] &lt;-<span class="st"> "f"</span>
sexe</code></pre></div>
<pre><code>Michael    Anna     Dom    John    Alex    Mary 
"Homme"     "f" "Homme" "Homme"     "f"     "f" 
        
    "f" </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(sexe)</code></pre></div>
<pre><code>[1] 7</code></pre>
<p>On commence √† voir comment l‚Äôutilisation de l‚Äôindexation par conditions et de l‚Äôassignation va nous permettre de faire des recodages (que nous aborderons plus en d√©tail dans un <a href="#recodage">chapitre d√©di√©</a>).</p>
</div>
<div id="vecteurs-indexation-et-assignation_en-resume" class="section level2">
<h2>En r√©sum√©</h2>
<ul>
<li>Un vecteur est un objet unidimensionnel contenant une liste de valeurs qui sont toutes du m√™me type (enti√®res, num√©riques, textuelles ou logiques).</li>
<li>La fonction <code data-pkg="base">class</code> permets de conna√Ætre le type de vecteur et la fonction <code data-pkg="base">length</code> sa longueur, c‚Äôest-√†-dire le nombre d‚Äô√©l√©ments du vecteur.</li>
<li>La fonction <code data-pkg="base">c</code> sert √† cr√©er et √† combiner des vecteurs.</li>
<li>Les valeurs manquantes sont repr√©sent√©es avec <code>NA</code>. Un vecteur peut √™tre nomm√©, c‚Äôest-√†-dire qu‚Äôun nom textuel a √©t√© associ√© √† chaque √©l√©ment. Cela peut se faire lors da sa cr√©ation ou avec la fonction <code data-pkg="base">names</code>.</li>
<li>L‚Äôindexation consiste √† extraire certains √©l√©ments d‚Äôun vecteur. Pour cela, on indique ce que l‚Äôon souhaite extraire entre crochets (<code>[]</code>) juste apr√®s le nom du vecteur. Le type d‚Äôindexation d√©pend du type d‚Äôinformation transmise.</li>
<li>S‚Äôil s‚Äôagit de nombres entiers, c‚Äôest l‚Äôindexation par position¬†: les nombres repr√©sent la position dans le vecteur des √©l√©ments que l‚Äôon souhaite extraire. Un nombre n√©gatif s‚Äôinterpr√®te comme <q>tous les √©l√©ments sauf celui-l√†</q>.</li>
<li>Si l‚Äôon indique des cha√Ænes de caract√®res, c‚Äôest l‚Äôindexation par nom¬†: on indique le nom des √©l√©ments que l‚Äôon souhaite extraire. Cette forme d‚Äôindexation ne fonctionne que si le vecteur est nomm√©.</li>
<li>Si l‚Äôon transmets des valeurs logiques, le plus souvent sous la forme d‚Äôune condition, c‚Äôest l‚Äôindexation par condition¬†: <code>TRUE</code> indique les √©l√©ments √† extraire et <code>FALSE</code> les √©l√©ments √† exclure. Il faut √™tre vigilant aux valeurs manquantes (<code>NA</code>) dans ce cas pr√©cis.</li>
<li>Enfin, il est possible de modifier que certains √©l√©ments d‚Äôun vecteur en ayant recours √† la fois √† l‚Äôindexation (<code>[]</code>) et √† l‚Äôassignation (<code>&lt;-</code>).</li>
</ul>
</div>

</article>
<article id="listes-et-tableaux-de-donnes">

<div class="fluid-row" id="listes-et-tableaux-de-donnes_header">


<h1 class="title">Listes et Tableaux de donn√©es</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#listes-et-tableaux-de-donnes_listes">Listes</a><ul>
<li><a href="#listes-et-tableaux-de-donnes_proprietes-et-creation">Propri√©t√©s et cr√©ation</a></li>
<li><a href="#listes-et-tableaux-de-donnes_indexation">Indexation</a></li>
</ul></li>
<li><a href="#listes-et-tableaux-de-donnes_tableaux-de-donnees">Tableaux de donn√©es</a><ul>
<li><a href="#listes-et-tableaux-de-donnes_proprietes-et-creation-1">Propri√©t√©s et cr√©ation</a></li>
<li><a href="#listes-et-tableaux-de-donnes_indexation-1">Indexation</a></li>
<li><a href="#listes-et-tableaux-de-donnes_afficher-les-donnees">Afficher les donn√©es</a></li>
</ul></li>
<li><a href="#listes-et-tableaux-de-donnes_en-resume">En r√©sum√©</a></li>
</ul>
</div>

<div class="note">
<p>Il est pr√©f√©rable d‚Äôavoir d√©j√† lu le chapitre <a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a> avant d‚Äôaborder celui-ci.</p>
</div>
<div id="listes-et-tableaux-de-donnes_listes" class="section level2">
<h2>Listes</h2>
<p>Par nature, les vecteurs ne peuvent contenir que des valeurs de m√™me type (num√©riques, textuels ou logique). Or, on peut avoir besoin de repr√©senter des objets plus complexes compos√©s d‚Äô√©l√©ments disparates. C‚Äôest ce que permettent les <dfn data-index="liste">listes</dfn>.</p>
<div id="listes-et-tableaux-de-donnes_proprietes-et-creation" class="section level3">
<h3>Propri√©t√©s et cr√©ation</h3>
<p>Une liste se cr√©√©e tout simplement avec la fonction <code data-pkg="base">list</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">l1 &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dv">1</span>:<span class="dv">5</span>, <span class="st">"abc"</span>)
l1</code></pre></div>
<pre><code>[[1]]
[1] 1 2 3 4 5

[[2]]
[1] "abc"</code></pre>
<p>Une liste est un ensemble d‚Äôobjets, quels qu‚Äôils soient, chaque √©l√©ment d‚Äôune liste pouvant avoir ses propres dimensions. Dans notre exemple pr√©c√©dent, nous avons cr√©√©e une liste <code>l1</code> compos√©e de deux √©lements¬†: un vecteur d‚Äôentiers de longeur 5 et un vecteur textuel de longueur 1. La longueur d‚Äôune liste correspond aux nombres d‚Äô√©l√©ments qu‚Äôelle contient et s‚Äôobtient avec <code data-pkg="base">length</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(l1)</code></pre></div>
<pre><code>[1] 2</code></pre>
<p>Comme les vecteurs, une liste peut √™tre nomm√©es et les noms des √©l√©ments d‚Äôune liste accessibles avec <code data-pkg="base">names</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">l2 &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">minuscules =</span> letters, <span class="dt">majuscules =</span> LETTERS, 
  <span class="dt">mois =</span> month.name)
l2</code></pre></div>
<pre><code>$minuscules
 [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k"
[12] "l" "m" "n" "o" "p" "q" "r" "s" "t" "u" "v"
[23] "w" "x" "y" "z"

$majuscules
 [1] "A" "B" "C" "D" "E" "F" "G" "H" "I" "J" "K"
[12] "L" "M" "N" "O" "P" "Q" "R" "S" "T" "U" "V"
[23] "W" "X" "Y" "Z"

$mois
 [1] "January"   "February"  "March"    
 [4] "April"     "May"       "June"     
 [7] "July"      "August"    "September"
[10] "October"   "November"  "December" </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(l2)</code></pre></div>
<pre><code>[1] 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(l2)</code></pre></div>
<pre><code>[1] "minuscules" "majuscules" "mois"      </code></pre>
<p>Que se passe-t-il maintenant si l‚Äôon effectue la commande suivante¬†?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">l &lt;-<span class="st"> </span><span class="kw">list</span>(l1, l2)</code></pre></div>
<p>√Ä votre avis, quelle est la longueur de cette nouvelle liste <code>l</code>¬†? 5¬†?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(l)</code></pre></div>
<pre><code>[1] 2</code></pre>
<p>Et bien non¬†! Elle est de longeur 2, car nous avons cr√©√© une liste compos√©e de deux √©l√©ments qui sont eux-m√™mes des listes. Cela est plus lisible si l‚Äôon fait appel √† la fonction <code data-pkg="utils">str</code> qui permet de visualiser la structure d‚Äôun objet.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(l)</code></pre></div>
<pre><code>List of 2
 $ :List of 2
  ..$ : int [1:5] 1 2 3 4 5
  ..$ : chr "abc"
 $ :List of 3
  ..$ minuscules: chr [1:26] "a" "b" "c" "d" ...
  ..$ majuscules: chr [1:26] "A" "B" "C" "D" ...
  ..$ mois      : chr [1:12] "January" "February" "March" "April" ...</code></pre>
<p>Une liste peut contenir tout type d‚Äôobjets, y compris d‚Äôautres listes. Pour combiner les √©l√©ments d‚Äôune liste, il fait utiliser la fonction <code data-pkg="base">append</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">l &lt;-<span class="st"> </span><span class="kw">append</span>(l1, l2)
<span class="kw">length</span>(l)</code></pre></div>
<pre><code>[1] 5</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(l)</code></pre></div>
<pre><code>List of 5
 $           : int [1:5] 1 2 3 4 5
 $           : chr "abc"
 $ minuscules: chr [1:26] "a" "b" "c" "d" ...
 $ majuscules: chr [1:26] "A" "B" "C" "D" ...
 $ mois      : chr [1:12] "January" "February" "March" "April" ...</code></pre>
<p>On peut noter en passant qu‚Äôune liste peut tout √† fait n‚Äô√™tre que partiellement nomm√©e.</p>
</div>
<div id="listes-et-tableaux-de-donnes_indexation" class="section level3">
<h3>Indexation</h3>
<p>Les crochets simples (<code>[]</code>) fonctionnent comme pour les vecteurs. On peut utiliser √† la fois l‚Äô<dfn>indexation par position<dfn><dfn data-index="position, indexation"/>, l‚Äô<dfn>indexation par nom</dfn><dfn data-index="nom, indexation"/> et l‚Äô<dfn>indexation par condition</dfn><dfn data-index="condition, indexation"/>.</dfn></dfn></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">l</code></pre></div>
<pre><code>[[1]]
[1] 1 2 3 4 5

[[2]]
[1] "abc"

$minuscules
 [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k"
[12] "l" "m" "n" "o" "p" "q" "r" "s" "t" "u" "v"
[23] "w" "x" "y" "z"

$majuscules
 [1] "A" "B" "C" "D" "E" "F" "G" "H" "I" "J" "K"
[12] "L" "M" "N" "O" "P" "Q" "R" "S" "T" "U" "V"
[23] "W" "X" "Y" "Z"

$mois
 [1] "January"   "February"  "March"    
 [4] "April"     "May"       "June"     
 [7] "July"      "August"    "September"
[10] "October"   "November"  "December" </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">l[<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>)]</code></pre></div>
<pre><code>[[1]]
[1] 1 2 3 4 5

$minuscules
 [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k"
[12] "l" "m" "n" "o" "p" "q" "r" "s" "t" "u" "v"
[23] "w" "x" "y" "z"

$majuscules
 [1] "A" "B" "C" "D" "E" "F" "G" "H" "I" "J" "K"
[12] "L" "M" "N" "O" "P" "Q" "R" "S" "T" "U" "V"
[23] "W" "X" "Y" "Z"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">l[<span class="kw">c</span>(<span class="st">"majuscules"</span>, <span class="st">"minuscules"</span>)]</code></pre></div>
<pre><code>$majuscules
 [1] "A" "B" "C" "D" "E" "F" "G" "H" "I" "J" "K"
[12] "L" "M" "N" "O" "P" "Q" "R" "S" "T" "U" "V"
[23] "W" "X" "Y" "Z"

$minuscules
 [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k"
[12] "l" "m" "n" "o" "p" "q" "r" "s" "t" "u" "v"
[23] "w" "x" "y" "z"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">l[<span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>)]</code></pre></div>
<pre><code>[[1]]
[1] 1 2 3 4 5

[[2]]
[1] "abc"

$mois
 [1] "January"   "February"  "March"    
 [4] "April"     "May"       "June"     
 [7] "July"      "August"    "September"
[10] "October"   "November"  "December" </code></pre>
<p>M√™me si l‚Äôon extrait un seul √©l√©ment, l‚Äôextraction obtenue avec les crochets simples renvoie toujours une liste, ici compos√©e d‚Äôun seul √©l√©ment¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(l[<span class="dv">1</span>])</code></pre></div>
<pre><code>List of 1
 $ : int [1:5] 1 2 3 4 5</code></pre>
<p>Supposons que je souhaite calculer la moyenne des valeurs du premier √©l√©ment de ma liste. Essayons la commande suivante¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(l[<span class="dv">1</span>])</code></pre></div>
<pre><code>Warning in mean.default(l[1]): argument is not
numeric or logical: returning NA</code></pre>
<pre><code>[1] NA</code></pre>
<p>Nous obtenons un message d‚Äôerreur. En effet, <strong>R</strong> ne sait pas calculer une moyenne √† partir d‚Äôune liste. Ce qu‚Äôil lui faut, c‚Äôest un vecteur de valeurs num√©riques. Autrement dit, ce que nous cherchons √† obtenir c‚Äôest le contenu m√™me du premier √©l√©ment de notre liste et non une liste √† un seul √©l√©ment.</p>
<p>C‚Äôest ici que les doubles crochets (<code>[[]]</code>) vont rentrer en jeu. Pour ces derniers, nous pourrons utiliser l‚Äôindexation par position ou l‚Äôindexation par nom, mais pas l‚Äôindexation par condition. De plus, le crit√®re que l‚Äôon indiquera doit indiquer un et un seul √©l√©ment de notre liste. Au lieu de renvoyer une liste √† un √©l√©ment, les doubles crochets vont renvoyer l‚Äô√©l√©ment d√©sign√©. Vite, un exemple¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(l[<span class="dv">1</span>])</code></pre></div>
<pre><code>List of 1
 $ : int [1:5] 1 2 3 4 5</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(l[[<span class="dv">1</span>]])</code></pre></div>
<pre><code> int [1:5] 1 2 3 4 5</code></pre>
<p>Maintenant, nous pouvons calculer notre moyenne¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(l[[<span class="dv">1</span>]])</code></pre></div>
<pre><code>[1] 3</code></pre>
<p>Nous pouvons aussi tester l‚Äôindexation par nom,</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">l[[<span class="st">"mois"</span>]]</code></pre></div>
<pre><code> [1] "January"   "February"  "March"    
 [4] "April"     "May"       "June"     
 [7] "July"      "August"    "September"
[10] "October"   "November"  "December" </code></pre>
<p>mais il faut avouer que cette √©criture avec doubles crochets et guillemets est un peu lourde. Heuresement, un nouvel acteur entre en sc√®ne¬†: le symbole dollar (<code>$</code>). C‚Äôest un raccourci des doubles crochets pour l‚Äôindexation par nom. Que l‚Äôon utilise ainsi¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">l$mois</code></pre></div>
<pre><code> [1] "January"   "February"  "March"    
 [4] "April"     "May"       "June"     
 [7] "July"      "August"    "September"
[10] "October"   "November"  "December" </code></pre>
<p>Les √©critures <code>l$mois</code> et <code>l[["mois"]]</code> sont √©quivalentes. Attention¬†! Cela ne fonctionne que pour l‚Äôindexation par nom.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">l$<span class="dv">1</span></code></pre></div>
<pre><code>Error: unexpected numeric constant in "l$1"</code></pre>
<p>L‚Äô<dfn>assignation par indexation</dfn><dfn data-index="indexation, assignation"/> fonctionne √©galement avec les doubles crochets ou le signe dollar¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">l[[<span class="dv">2</span>]] &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="kw">c</span>(<span class="st">"un"</span>, <span class="st">"vecteur"</span>, <span class="st">"textuel"</span>))
l$mois &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Janvier"</span>, <span class="st">"F√©vrier"</span>, <span class="st">"Mars"</span>)
l</code></pre></div>
<pre><code>[[1]]
[1] 1 2 3 4 5

[[2]]
[[2]][[1]]
[1] "un"      "vecteur" "textuel"


$minuscules
 [1] "a" "b" "c" "d" "e" "f" "g" "h" "i" "j" "k"
[12] "l" "m" "n" "o" "p" "q" "r" "s" "t" "u" "v"
[23] "w" "x" "y" "z"

$majuscules
 [1] "A" "B" "C" "D" "E" "F" "G" "H" "I" "J" "K"
[12] "L" "M" "N" "O" "P" "Q" "R" "S" "T" "U" "V"
[23] "W" "X" "Y" "Z"

$mois
[1] "Janvier" "F√©vrier" "Mars"   </code></pre>
</div>
</div>
<div id="listes-et-tableaux-de-donnes_tableaux-de-donnees" class="section level2">
<h2>Tableaux de donn√©es</h2>
<p>Il y a un type d‚Äôobjets que nous avons d√©j√† abord√© dans le chapitre <a href="#premier-travail-avec-les-donnees">Premier travail avec les donn√©es</a>, il s‚Äôagit du <dfn>tableau de donn√©es</dfn><dfn data-index="donn√©es, tableau"> ou <dfn lang="en">data frame</dfn> en anglais.</dfn></p>
<div id="listes-et-tableaux-de-donnes_proprietes-et-creation-1" class="section level3">
<h3>Propri√©t√©s et cr√©ation</h3>
<p>Dans <strong>R</strong>, les tableaux de donn√©es sont tout simplement des listes avec quelques propri√©t√©s sp√©ficiques¬†:</p>
<ul>
<li>les tableaux de donn√©es ne peuvent contenir que des vecteurs¬†;</li>
<li>tous les vecteurs d‚Äôun tableau de donn√©es ont la m√™me longueur¬†;</li>
<li>tous les √©l√©ments d‚Äôun tableau de donn√©es sont nomm√©s et ont chacun un nom unique.</li>
</ul>
<p>D√®s lors, un tableau de donn√©es correspond aux fichiers de donn√©es que l‚Äôon a l‚Äôhabitude de manipuler dans d‚Äôautres logiciels de statistiques comme <strong>SPSS</strong> ou <strong>Stata</strong>. Les variables sont organis√©es en colonnes et les observations en lignes.</p>
<p>On peut un tableau de donn√©es avec la fonction <code data-pkg="base">data.frame</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">sexe =</span> <span class="kw">c</span>(<span class="st">"f"</span>, <span class="st">"f"</span>, <span class="st">"h"</span>, <span class="st">"h"</span>), <span class="dt">age =</span> <span class="kw">c</span>(<span class="dv">52</span>, 
  <span class="dv">31</span>, <span class="dv">29</span>, <span class="dv">35</span>), <span class="dt">blond =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>))
df</code></pre></div>
<pre><code>  sexe age blond
1    f  52 FALSE
2    f  31  TRUE
3    h  29  TRUE
4    h  35 FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(df)</code></pre></div>
<pre><code>'data.frame':   4 obs. of  3 variables:
 $ sexe : Factor w/ 2 levels "f","h": 1 1 2 2
 $ age  : num  52 31 29 35
 $ blond: logi  FALSE TRUE TRUE FALSE</code></pre>
<p>La fonction <code data-pkg="base">data.frame</code> a un gros d√©faut¬†: si on ne d√©sactive pas l‚Äôoption <code>stringsAsFactors = FALSE</code> elle transforme les cha√Ænes de caract√®res, ici la variable <var>sexe</var> en facteurs (un type de vecteur que nous aborderons plus en d√©tail dans un <a href="#facteurs-et-vecteurs-labellises">prochain chapitre</a>).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">sexe =</span> <span class="kw">c</span>(<span class="st">"f"</span>, <span class="st">"f"</span>, <span class="st">"h"</span>, <span class="st">"h"</span>), <span class="dt">age =</span> <span class="kw">c</span>(<span class="dv">52</span>, 
  <span class="dv">31</span>, <span class="dv">29</span>, <span class="dv">35</span>), <span class="dt">blond =</span> <span class="kw">c</span>(<span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>), 
  <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)
df</code></pre></div>
<pre><code>  sexe age blond
1    f  52 FALSE
2    f  31  TRUE
3    h  29  TRUE
4    h  35 FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(df)</code></pre></div>
<pre><code>'data.frame':   4 obs. of  3 variables:
 $ sexe : chr  "f" "f" "h" "h"
 $ age  : num  52 31 29 35
 $ blond: logi  FALSE TRUE TRUE FALSE</code></pre>
<p>Un tableau de donn√©es √©tant une liste, la fonction <code data-pkg="base">length</code> renverra le nombre d‚Äô√©l√©ments de la liste, donc dans le cas pr√©sent le nombre de variables et <code>names</code> leurs noms¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(df)</code></pre></div>
<pre><code>[1] 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(df)</code></pre></div>
<pre><code>[1] "sexe"  "age"   "blond"</code></pre>
<p>Comme tous les √©l√©ments d‚Äôun tableau d‚Äôun tableau de donn√©es ont la m√™me longeur, cet objet peut √™tre vu comme bidimensionnel. Les fonctions <code data-pkg="base">nrow</code>, <code data-pkg="base" data-rdoc="nrow">ncol</code> et <code data-pkg="base">dim</code> donnent respectivement le nombre de lignes, le nombre de colonnes et les dimensions de notre tableau.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">nrow</span>(df)</code></pre></div>
<pre><code>[1] 4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ncol</span>(df)</code></pre></div>
<pre><code>[1] 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(df)</code></pre></div>
<pre><code>[1] 4 3</code></pre>
<p>De plus, tout comme les colonnes ont un nom, il est aussi possible de nommer les lignes avec <code data-pkg="base">row.names</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">row.names</span>(df) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Anna"</span>, <span class="st">"Mary-Ann"</span>, <span class="st">"Michael"</span>, <span class="st">"John"</span>)
df</code></pre></div>
<pre><code>         sexe age blond
Anna        f  52 FALSE
Mary-Ann    f  31  TRUE
Michael     h  29  TRUE
John        h  35 FALSE</code></pre>
</div>
<div id="listes-et-tableaux-de-donnes_indexation-1" class="section level3">
<h3>Indexation</h3>
<p>Les tableaux de donn√©es √©tant des listes, nous pouvons donc utiliser les crochets simples (<code>[]</code>), les crochets (<code>[[]]</code>) et le symbole dollar (<code>$</code>) pour extraire des parties de notre tableau, de la m√™me mani√®re que pour n‚Äôimporte quelle liste.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df[<span class="dv">1</span>]</code></pre></div>
<pre><code>         sexe
Anna        f
Mary-Ann    f
Michael     h
John        h</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df[[<span class="dv">1</span>]]</code></pre></div>
<pre><code>[1] "f" "f" "h" "h"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df$sexe</code></pre></div>
<pre><code>[1] "f" "f" "h" "h"</code></pre>
<p>Cependant, un tableau de donn√©es √©tant un objet bidimensionnel, il est √©galement possible d‚Äôextraire des donn√©es sur deux dimensions, √† savoir un premier crit√®re portant sur les lignes et un second portant sur les colonnes. Pour cela, nous utiliserons les crochets simples (<code>[]</code>) en s√©parant nos deux crit√®res par une virgule (<code>,</code>).</p>
<p>Un premier exemple¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df</code></pre></div>
<pre><code>         sexe age blond
Anna        f  52 FALSE
Mary-Ann    f  31  TRUE
Michael     h  29  TRUE
John        h  35 FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df[<span class="dv">3</span>, <span class="dv">2</span>]</code></pre></div>
<pre><code>[1] 29</code></pre>
<p>Cette premi√®re commande indique que nous souhaitons la troisi√®me observation et la seconde valeur, autrement dit l‚Äô√¢ge de Michael. Le m√™me r√©sultat peut √™tre obtenu avec l‚Äôindexation par nom, l‚Äôindexation par condition, ou un m√©lange de tout √ßa.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df[<span class="st">"Michael"</span>, <span class="st">"age"</span>]</code></pre></div>
<pre><code>[1] 29</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df[<span class="kw">c</span>(F, F, T, F), <span class="kw">c</span>(<span class="kw">c</span>(F, T, F))]</code></pre></div>
<pre><code>[1] 29</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df[<span class="dv">3</span>, <span class="st">"age"</span>]</code></pre></div>
<pre><code>[1] 29</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df[<span class="st">"Michael"</span>, <span class="dv">2</span>]</code></pre></div>
<pre><code>[1] 29</code></pre>
<p>Il est √©galement possible de ne pr√©ciser qu‚Äôun seul crit√®re. Par exemple, si je souhaite les deux premi√®res observations, ou les variables <var>sexe</var> et <var>blond</var>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df[<span class="dv">1</span>:<span class="dv">2</span>, ]</code></pre></div>
<pre><code>         sexe age blond
Anna        f  52 FALSE
Mary-Ann    f  31  TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df[, <span class="kw">c</span>(<span class="st">"sexe"</span>, <span class="st">"blond"</span>)]</code></pre></div>
<pre><code>         sexe blond
Anna        f FALSE
Mary-Ann    f  TRUE
Michael     h  TRUE
John        h FALSE</code></pre>
<p>Il a suffit de laisser un espace vide avant ou apr√®s la virgule. ATTENTION¬†! Il est cependant imp√©ratif de laisser la virgule pour indiquer √† <strong>R</strong> que l‚Äôon souhaite effectuer une indexation √† deux dimensions. Si l‚Äôon oublie la virgule, cela nous ram√®ne au mode de fonctionnement des listes. Et le r√©sultat n‚Äôest pas forc√©ment le m√™me¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df[<span class="dv">2</span>, ]</code></pre></div>
<pre><code>         sexe age blond
Mary-Ann    f  31  TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df[, <span class="dv">2</span>]</code></pre></div>
<pre><code>[1] 52 31 29 35</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df[<span class="dv">2</span>]</code></pre></div>
<pre><code>         age
Anna      52
Mary-Ann  31
Michael   29
John      35</code></pre>
<div class="note">
<p>Au passage, on pourra noter quelques subtilit√©s sur le r√©sultat renvoy√©.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(df[<span class="dv">2</span>, ])</code></pre></div>
<pre><code>'data.frame':   1 obs. of  3 variables:
 $ sexe : chr "f"
 $ age  : num 31
 $ blond: logi TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(df[, <span class="dv">2</span>])</code></pre></div>
<pre><code> num [1:4] 52 31 29 35</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(df[<span class="dv">2</span>])</code></pre></div>
<pre><code>'data.frame':   4 obs. of  1 variable:
 $ age: num  52 31 29 35</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(df[[<span class="dv">2</span>]])</code></pre></div>
<pre><code> num [1:4] 52 31 29 35</code></pre>
<p><code>df[2, ]</code> signifie que l‚Äôon veut toutes les variables pour le second individu. Le r√©sultat est un tableau de donn√©es √† une ligne et trois colonnes. <code>df[2]</code> correspond au mode d‚Äôextraction des listes et renvoie donc une liste √† un √©l√©ment, en l‚Äôoccurence un tableau de donn√©es √† quatre observations et une variable. <code>df[[2]]</code> quant √† lui renvoie le contenu de cette variable, soit un vecteur num√©rique de longeur quatre. Reste <code>df[, 2]</code> qui signifie renvoie toutes les observations pour la seconde colonne. Or l‚Äô<dfn>indexation bidimensionnelle</dfn> a un fonctionnement un peu particulier¬†: par d√©faut cela renvoie un tableau de donn√©es mais s‚Äôil n‚Äôy a qu‚Äôune seule variable dans l‚Äôextraction, c‚Äôest un vecteur qui est renvoy√©. Pour plus de d√©tails, on pourra consulter l‚Äôentr√©e d‚Äôaide de <code data-pkg="base" data-rdoc="Extract.data.frame">[.data.frame</code>.</p>
</div>
</div>
<div id="listes-et-tableaux-de-donnes_afficher-les-donnees" class="section level3">
<h3>Afficher les donn√©es</h3>
<p>Prenons un tableau de donn√©es un peu plus cons√©quent, en l‚Äôoccurence un jeu de donn√©es disponible dans l‚Äôextension <code class="pkg">questionr</code> et correspondant √† un extrait de l‚Äôenqu√™te <em>Histoire de vie</em> r√©alis√©e par l‚ÄôINSEE en 2003. Il contient 2000 individus et 20 variables.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">data</span>(hdv2003)
d &lt;-<span class="st"> </span>hdv2003</code></pre></div>
<p>Si l‚Äôon demande √† afficher l‚Äôobjet <code>d</code> dans la console (r√©sultat non reproduit ici), <strong>R</strong> va afficher l‚Äôensemble du contenu de <code>d</code> √† l‚Äô√©cran ce qui, sur un tableau de cette taille, ne sera pas tr√®s lisible. Pour une exploration visuelle, le plus simple est souvent d‚Äôutiliser la <dfn>visonneuse</dfn> int√©gr√©e √† <strong>RStudio</strong> que l‚Äôon peut appeller avec la fonction <code data-pkg="utils">View</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">View</span>(d)</code></pre></div>
<p>Les fonctions <code data-pkg="utils">head</code> et <code data-pkg="utils" data-rdoc="head">tail</code>, qui marchent √©galement sur les vecteurs, permettent d‚Äôafficher seulement les premi√®res (respectivement les derni√®res) lignes d‚Äôun tableau de donn√©es¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(d)</code></pre></div>
<pre><code>  id age  sexe
1  1  28 Femme
2  2  23 Femme
3  3  59 Homme
4  4  34 Homme
5  5  71 Femme
6  6  35 Femme
                                               nivetud
1 Enseignement superieur y compris technique superieur
2                                                 &lt;NA&gt;
3                    Derniere annee d'etudes primaires
4 Enseignement superieur y compris technique superieur
5                    Derniere annee d'etudes primaires
6        Enseignement technique ou professionnel court
     poids                 occup     qualif
1 2634.398 Exerce une profession    Employe
2 9738.396       Etudiant, eleve       &lt;NA&gt;
3 3994.102 Exerce une profession Technicien
4 5731.662 Exerce une profession Technicien
5 4329.094              Retraite    Employe
6 8674.699 Exerce une profession    Employe
  freres.soeurs clso                       relig
1             8  Oui Ni croyance ni appartenance
2             2  Oui Ni croyance ni appartenance
3             2  Non Ni croyance ni appartenance
4             1  Non  Appartenance sans pratique
5             0  Oui         Pratiquant regulier
6             5  Non Ni croyance ni appartenance
                      trav.imp    trav.satisf
1                Peu important Insatisfaction
2                         &lt;NA&gt;           &lt;NA&gt;
3 Aussi important que le reste      Equilibre
4 Moins important que le reste   Satisfaction
5                         &lt;NA&gt;           &lt;NA&gt;
6            Le plus important      Equilibre
  hard.rock lecture.bd peche.chasse cuisine
1       Non        Non          Non     Oui
2       Non        Non          Non     Non
3       Non        Non          Non     Non
4       Non        Non          Non     Oui
5       Non        Non          Non     Non
6       Non        Non          Non     Non
  bricol cinema sport heures.tv
1    Non    Non   Non         0
2    Non    Oui   Oui         1
3    Non    Non   Oui         0
4    Oui    Oui   Oui         2
5    Non    Non   Non         3
6    Non    Oui   Oui         2</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tail</span>(d, <span class="dv">2</span>)</code></pre></div>
<pre><code>       id age  sexe
1999 1999  24 Femme
2000 2000  66 Femme
                                           nivetud
1999 Enseignement technique ou professionnel court
2000  Enseignement technique ou professionnel long
         poids                 occup  qualif
1999 13740.810 Exerce une profession Employe
2000  7709.513              Au foyer Employe
     freres.soeurs clso
1999             2  Non
2000             3  Non
                          relig
1999 Appartenance sans pratique
2000 Appartenance sans pratique
                         trav.imp trav.satisf
1999 Moins important que le reste   Equilibre
2000                         &lt;NA&gt;        &lt;NA&gt;
     hard.rock lecture.bd peche.chasse cuisine
1999       Non        Non          Non     Non
2000       Non        Oui          Non     Oui
     bricol cinema sport heures.tv
1999    Non    Oui   Non       0.3
2000    Non    Non   Non       0.0</code></pre>
<p>L‚Äôextension <code class="pkg">dplyr</code>, que nous n‚Äôaborderons en d√©tails que <a href="#introduction-a-dplyr">plus tard</a>, propose une fonction <code data-pkg="dplyr">glimpse</code> (ce qui signifie <q>aper√ßu</q> en anglais) qui permet de visualiser rapidement et de mani√®re condens√©e le contenu d‚Äôun tableau de donn√©es.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dplyr)
<span class="kw">glimpse</span>(d)</code></pre></div>
<pre><code>Observations: 2000
Variables:
$ id            (int) 1, 2, 3, 4, 5, 6, 7, 8,...
$ age           (int) 28, 23, 59, 34, 71, 35,...
$ sexe          (fctr) Femme, Femme, Homme, H...
$ nivetud       (fctr) Enseignement superieur...
$ poids         (dbl) 2634.3982, 9738.3958, 3...
$ occup         (fctr) Exerce une profession,...
$ qualif        (fctr) Employe, NA, Technicie...
$ freres.soeurs (int) 8, 2, 2, 1, 0, 5, 1, 5,...
$ clso          (fctr) Oui, Oui, Non, Non, Ou...
$ relig         (fctr) Ni croyance ni apparte...
$ trav.imp      (fctr) Peu important, NA, Aus...
$ trav.satisf   (fctr) Insatisfaction, NA, Eq...
$ hard.rock     (fctr) Non, Non, Non, Non, No...
$ lecture.bd    (fctr) Non, Non, Non, Non, No...
$ peche.chasse  (fctr) Non, Non, Non, Non, No...
$ cuisine       (fctr) Oui, Non, Non, Oui, No...
$ bricol        (fctr) Non, Non, Non, Oui, No...
$ cinema        (fctr) Non, Oui, Non, Oui, No...
$ sport         (fctr) Non, Oui, Oui, Oui, No...
$ heures.tv     (dbl) 0.0, 1.0, 0.0, 2.0, 3.0...</code></pre>
<p>L‚Äôextension <code class="pkg">questionr</code> propose une fonction <code data-pkg="questionr">lookfor</code> qui permet de lister les diff√©rentes variables d‚Äôun fichier de donn√©es¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">lookfor</span>(d)</code></pre></div>
<pre><code>        variable
1             id
2            age
3           sexe
4        nivetud
5          poids
6          occup
7         qualif
8  freres.soeurs
9           clso
10         relig
11      trav.imp
12   trav.satisf
13     hard.rock
14    lecture.bd
15  peche.chasse
16       cuisine
17        bricol
18        cinema
19         sport
20     heures.tv</code></pre>
<p>Lorsque l‚Äôon a un gros tableau de donn√©es avec de nombreuses variables, il peut √™tre difficile de retrouver la ou les variables d‚Äôint√©r√™t. Il est possible d‚Äôindiquer √† <code data-pkg="questionr">lookfor</code> un mot-cl√© pour limiter la recherche. Par exemple¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">lookfor</span>(d, <span class="st">"trav"</span>)</code></pre></div>
<pre><code>      variable
11    trav.imp
12 trav.satisf</code></pre>
<p>Il est √† noter que si la recherche n‚Äôest pas sensible √† la casse (i.e.¬†aux majuscules et aux minuscules), elle est sensible aux accents.</p>
<p>La m√©thode <code data-pkg="base">summary</code> qui fonctionne sur tout type d‚Äôobjet permet d‚Äôavoir quelques statistiques de base sur les diff√©rentes variables de notre tableau, les statistiques affich√©es d√©pendant du type de variable.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(d)</code></pre></div>
<pre><code>       id              age           sexe     
 Min.   :   1.0   Min.   :18.00   Homme: 899  
 1st Qu.: 500.8   1st Qu.:35.00   Femme:1101  
 Median :1000.5   Median :48.00               
 Mean   :1000.5   Mean   :48.16               
 3rd Qu.:1500.2   3rd Qu.:60.00               
 Max.   :2000.0   Max.   :97.00               
                                              
                                                 nivetud   
 Enseignement technique ou professionnel court       :463  
 Enseignement superieur y compris technique superieur:441  
 Derniere annee d'etudes primaires                   :341  
 1er cycle                                           :204  
 2eme cycle                                          :183  
 (Other)                                             :256  
 NA's                                                :112  
     poids                            occup     
 Min.   :   78.08   Exerce une profession:1049  
 1st Qu.: 2221.82   Chomeur              : 134  
 Median : 4631.19   Etudiant, eleve      :  94  
 Mean   : 5535.61   Retraite             : 392  
 3rd Qu.: 7626.53   Retire des affaires  :  77  
 Max.   :31092.14   Au foyer             : 171  
                    Autre inactif        :  83  
                      qualif    freres.soeurs   
 Employe                 :594   Min.   : 0.000  
 Ouvrier qualifie        :292   1st Qu.: 1.000  
 Cadre                   :260   Median : 2.000  
 Ouvrier specialise      :203   Mean   : 3.283  
 Profession intermediaire:160   3rd Qu.: 5.000  
 (Other)                 :144   Max.   :22.000  
 NA's                    :347                   
          clso     
 Oui        : 936  
 Non        :1037  
 Ne sait pas:  27  
                   
                   
                   
                   
                         relig    
 Pratiquant regulier        :266  
 Pratiquant occasionnel     :442  
 Appartenance sans pratique :760  
 Ni croyance ni appartenance:399  
 Rejet                      : 93  
 NSP ou NVPR                : 40  
                                  
                         trav.imp  
 Le plus important           : 29  
 Aussi important que le reste:259  
 Moins important que le reste:708  
 Peu important               : 52  
 NA's                        :952  
                                   
                                   
         trav.satisf  hard.rock  lecture.bd
 Satisfaction  :480   Non:1986   Non:1953  
 Insatisfaction:117   Oui:  14   Oui:  47  
 Equilibre     :451                        
 NA's          :952                        
                                           
                                           
                                           
 peche.chasse cuisine    bricol     cinema    
 Non:1776     Non:1119   Non:1147   Non:1174  
 Oui: 224     Oui: 881   Oui: 853   Oui: 826  
                                              
                                              
                                              
                                              
                                              
 sport        heures.tv     
 Non:1277   Min.   : 0.000  
 Oui: 723   1st Qu.: 1.000  
            Median : 2.000  
            Mean   : 2.247  
            3rd Qu.: 3.000  
            Max.   :12.000  
            NA's   :5       </code></pre>
<p>On peut √©galement appliquer <code data-pkg="base">summary</code> √† une variable particuli√®re.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(d$sexe)</code></pre></div>
<pre><code>Homme Femme 
  899  1101 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(d$age)</code></pre></div>
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  18.00   35.00   48.00   48.16   60.00   97.00 </code></pre>
<p>L‚Äôextension <code class="pkg">questionr</code> fournit √©galement une fonction bien pratique pour d√©crire les diff√©rentes variables d‚Äôun tableau de donn√©es. Il s‚Äôagit de <code data-pkg="questionr">describe</code>. Faisons de suite un essai¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">describe</span>(d)</code></pre></div>
<pre><code>[2000 obs. x 20 variables] data.frame

$id: 
integer: 1 2 3 4 5 ...
min: 1 - max: 2000 - NAs: 0 (0%) - 2000 unique values

$age: 
integer: 28 23 59 34 71 ...
min: 18 - max: 97 - NAs: 0 (0%) - 78 unique values

$sexe: 
nominal factor: "Femme" "Femme" "Homme" "Homme" "Femme" ...
2 levels: Homme | Femme
NAs: 0 (0%)

$nivetud: 
nominal factor: "Enseignement superieur y compris technique superieur" NA "Derniere annee d'etudes primaires" "Enseignement superieur y compris technique superieur" "Derniere annee d'etudes primaires" ...
8 levels: N'a jamais fait d'etudes | A arrete ses etudes, avant la derniere annee d'etudes primaires | Derniere annee d'etudes primaires | 1er cycle | 2eme cycle | Enseignement technique ou professionnel court | Enseignement technique ou professionnel long | Enseignement superieur y compris technique superieur
NAs: 112 (0.1%)

$poids: 
numeric: 2634.3982157 9738.3957759 3994.1024587 5731.6615081 4329.0940022 ...
min: 78.0783403 - max: 31092.14132 - NAs: 0 (0%) - 1877 unique values

$occup: 
nominal factor: "Exerce une profession" "Etudiant, eleve" "Exerce une profession" "Exerce une profession" "Retraite" ...
7 levels: Exerce une profession | Chomeur | Etudiant, eleve | Retraite | Retire des affaires | Au foyer | Autre inactif
NAs: 0 (0%)

$qualif: 
nominal factor: "Employe" NA "Technicien" "Technicien" "Employe" ...
7 levels: Ouvrier specialise | Ouvrier qualifie | Technicien | Profession intermediaire | Cadre | Employe | Autre
NAs: 347 (0.2%)

$freres.soeurs: 
integer: 8 2 2 1 0 ...
min: 0 - max: 22 - NAs: 0 (0%) - 19 unique values

$clso: 
nominal factor: "Oui" "Oui" "Non" "Non" "Oui" ...
3 levels: Oui | Non | Ne sait pas
NAs: 0 (0%)

$relig: 
nominal factor: "Ni croyance ni appartenance" "Ni croyance ni appartenance" "Ni croyance ni appartenance" "Appartenance sans pratique" "Pratiquant regulier" ...
6 levels: Pratiquant regulier | Pratiquant occasionnel | Appartenance sans pratique | Ni croyance ni appartenance | Rejet | NSP ou NVPR
NAs: 0 (0%)

$trav.imp: 
nominal factor: "Peu important" NA "Aussi important que le reste" "Moins important que le reste" NA ...
4 levels: Le plus important | Aussi important que le reste | Moins important que le reste | Peu important
NAs: 952 (0.5%)

$trav.satisf: 
nominal factor: "Insatisfaction" NA "Equilibre" "Satisfaction" NA ...
3 levels: Satisfaction | Insatisfaction | Equilibre
NAs: 952 (0.5%)

$hard.rock: 
nominal factor: "Non" "Non" "Non" "Non" "Non" ...
2 levels: Non | Oui
NAs: 0 (0%)

$lecture.bd: 
nominal factor: "Non" "Non" "Non" "Non" "Non" ...
2 levels: Non | Oui
NAs: 0 (0%)

$peche.chasse: 
nominal factor: "Non" "Non" "Non" "Non" "Non" ...
2 levels: Non | Oui
NAs: 0 (0%)

$cuisine: 
nominal factor: "Oui" "Non" "Non" "Oui" "Non" ...
2 levels: Non | Oui
NAs: 0 (0%)

$bricol: 
nominal factor: "Non" "Non" "Non" "Oui" "Non" ...
2 levels: Non | Oui
NAs: 0 (0%)

$cinema: 
nominal factor: "Non" "Oui" "Non" "Oui" "Non" ...
2 levels: Non | Oui
NAs: 0 (0%)

$sport: 
nominal factor: "Non" "Oui" "Oui" "Oui" "Non" ...
2 levels: Non | Oui
NAs: 0 (0%)

$heures.tv: 
numeric: 0 1 0 2 3 ...
min: 0 - max: 12 - NAs: 5 (0%) - 30 unique values</code></pre>
<p>Comme on le voit sur cet exemple, <code data-pkg="questionr">describe</code> nous affiche le type des variables, les premi√®res valeurs de chacune, le nombre de valeurs manquantes, le nombre de valeurs diff√©rentes (uniques) ainsi que quelques autres informations suivant le type de variables.</p>
<p>Il est possible de restreindre l‚Äôaffichage √† seulement quelques variables en indiquant le nom de ces derni√®res.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">describe</span>(d, <span class="st">"age"</span>, <span class="st">"trav.satisf"</span>)</code></pre></div>
<pre><code>[2000 obs. x 20 variables] data.frame

$age: 
integer: 28 23 59 34 71 ...
min: 18 - max: 97 - NAs: 0 (0%) - 78 unique values

$trav.satisf: 
nominal factor: "Insatisfaction" NA "Equilibre" "Satisfaction" NA ...
3 levels: Satisfaction | Insatisfaction | Equilibre
NAs: 952 (0.5%)</code></pre>
<p>On peut √©galement transmettre juste une variable¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">describe</span>(d$sexe)</code></pre></div>
<pre><code>[2000 obs.] 
nominal factor: "Femme" "Femme" "Homme" "Homme" "Femme" ...
2 levels: Homme | Femme
NAs: 0 (0%)</code></pre>
</div>
</div>
<div id="listes-et-tableaux-de-donnes_en-resume" class="section level2">
<h2>En r√©sum√©</h2>
<p><strong>Les Listes</strong></p>
<ul>
<li>Les listes sont des objets unidimensionnels peuvant contenir tout type d‚Äôobjets, y compris d‚Äôautres listes.</li>
<li>Elles ont une longueur que l‚Äôobtient avec <code data-pkg="base">length</code>.</li>
<li>On cr√©√© une liste avec <code data-pkg="base">list</code> et on peut fusionner des listes avec <code data-pkg="base">append</code>.</li>
<li>Tout comme les vecteurs, les listes peuvent √™tre nomm√©es et les noms des √©l√©ments s‚Äôobtiennent avec <code data-pkg="base">names</code>.</li>
<li>Les crochets simples (<code>[]</code>) permettent de s√©lectionner les √©l√©ments d‚Äôune liste, en utilisant l‚Äôindexation par position, l‚Äôindexation par nom ou l‚Äôindexation par condition. Cela renvoie toujours une autre liste.</li>
<li>Les doubles crochets (<code>[[]]</code>) renvoient directement le contenu d‚Äôun √©l√©ment de la liste que l‚Äôon aura s√©lectionn√© par position ou par nom.</li>
<li>Le symbole <code>$</code> est un raccourci pour facilement s√©lectionner un √©l√©ment par son nom, <code>liste$nom</code> √©tant √©quivalent √† <code>liste[["nom"]]</code>.</li>
</ul>
<p><strong>Les Tableaux de donn√©es</strong></p>
<ul>
<li>Les tableaux de donn√©es sont des listes avec des propri√©t√©s particuli√®res¬†:
<ol style="list-style-type: lower-roman">
<li>tous les √©l√©ments sont des vecteurs¬†;</li>
<li>tous les vecteurs ont la m√™me longueur¬†;</li>
<li>tous les vecteurs ont un nom et ce nom est unique.</li>
</ol></li>
<li>On peut cr√©er un tableau de donn√©es avec <code data-pkg="base">data.frame</code>.</li>
<li>Les tableaux de donn√©es correspondent aux fichiers de donn√©es que l‚Äôon utilise usuellement dans d‚Äôautres logiciels de statistiques¬†: les variables sont repr√©sent√©es en colonnes et les observations en ligne.</li>
<li>Ce sont des objets bidimensionnels¬†: <code data-pkg="base" data-rdoc="nrow">ncol</code> renvoit le nombre de colonnes et <code data-pkg="base">nrow</code> le nombre de lignes.</li>
<li>Les doubles crochets (<code>[[]]</code>) et le symbole dollar (<code>$</code>) fonctionnent comme pour les listes et permettent d‚Äôacc√©der aux variables.</li>
<li>Il est possible d‚Äôutiliser des coordonn√©es bidimensionnelles avec les crochets simples (<code>[]</code>) en indiquant un crit√®re sur les lignes puis un crit√®re sur les colonnes, s√©par√©s par une virgule (<code>,</code>).</li>
</ul>
</div>

</article>
<article id="facteurs-et-vecteurs-labellises">

<div class="fluid-row" id="facteurs-et-vecteurs-labellises_header">


<h1 class="title">Facteurs et vecteurs labellis√©s</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#facteurs-et-vecteurs-labellises_facteurs">Facteurs</a></li>
<li><a href="#facteurs-et-vecteurs-labellises_labelled">Vecteurs labellis√©s</a><ul>
<li><a href="#facteurs-et-vecteurs-labellises_les-etiquettes-de-variables">Les √©tiquettes de variables</a></li>
<li><a href="#facteurs-et-vecteurs-labellises_les-etiquettes-de-valeur">Les √©tiquettes de valeur</a></li>
<li><a href="#facteurs-et-vecteurs-labellises_assignation-et-condition">Assignation et condition</a></li>
<li><a href="#facteurs-et-vecteurs-labellises_definir-des-valeurs-manquantes">D√©finir des valeurs manquantes</a></li>
<li><a href="#facteurs-et-vecteurs-labellises_quelques-fonctions-supplementaires">Quelques fonctions suppl√©mentaires</a></li>
</ul></li>
</ul>
</div>

<p>Dans le chapire sur les <a href="#vecteurs-indexation-et-assignation">vecteurs</a>, nous avons abord√© les types fondementaux de vecteurs (num√©riques, textuels, logiques). Mais il existe de nombreux autres classes de vecteurs afin de repr√©senter des donn√©es diverses (comme les dates). Dans ce chapitre, nous nous int√©ressons plus particuli√®rement aux <dfn data-index="variable cat√©gorielle">variables cat√©gorielles</dfn><dfn data-index="cat√©gorielle, variable"/>.</p>
<p>Les <dfn data-index="facteur">facteurs</dfn> (ou <dfn data-index="factor" lang="en">factors</dfn> an anglais) sont un type de vecteur g√©r√© nativement par <strong>R</strong> et utilis√©s dans de nombreux domaines (mod√®les statistiques, repr√©sentations graphiques, ‚Ä¶).</p>
<p>Les facteurs sont souvent mis en regard des <dfn data-index="donn√©e labeliss√©e">donn√©es labellis√©es</dfn><dfn data-index="labellis√©e, donn√©e"/><dfn data-index="labelled data"/> telles qu‚Äôelles sont utilis√©es dans d‚Äôautres logiciels comme <strong>SPSS</strong> ou <strong>Stata</strong>. Or, les limites propres aux facteurs font qu‚Äôils ne sont pas adpat√©s pour rendre compte des diff√©rents usages qui sont fait des donn√©es labellis√©es. Plusieurs extensions (telles que <code class="pkg">memisc</code> ou <code class="pkg">Hmisc</code>) ont propos√© leur propre solution qui, bien qu‚Äôelles apportaient un plus pour la gestion des donn√©es labellis√©es, ne permettaient que celles-ci soient utilis√©es en dehors de ces extensions ou des extensions compatibles. Nous aborderons ici une nouvelle classe de vecteurs, la classe <code data-pkg="labelled">labelled</code>, introduite par l‚Äôextension <code class="pkg">haven</code> (que nous aborderons dans le cadre de l‚Äô<a href="#import-de-donnees">import de donn√©es</a>) et qui peut √™tre manipul√©e avec l‚Äôextension homonyme <code class="pkg">labelled</code>.</p>
<div id="facteurs-et-vecteurs-labellises_facteurs" class="section level2">
<h2>Facteurs</h2>
<p>Dans ce qui suit on travaillera sur le jeu de donn√©es tir√© de l‚Äôenqu√™te <em>Histoire de vie</em>, fourni avec l‚Äôextension <code class="pkg">questionr</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">data</span>(hdv2003)
d &lt;-<span class="st"> </span>hdv2003</code></pre></div>
<p>Jetons un ≈ìil √† la liste des variables de <code>d</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(d)</code></pre></div>
<pre><code>'data.frame':   2000 obs. of  20 variables:
 $ id           : int  1 2 3 4 5 6 7 8 9 10 ...
 $ age          : int  28 23 59 34 71 35 60 47 20 28 ...
 $ sexe         : Factor w/ 2 levels "Homme","Femme": 2 2 1 1 2 2 2 1 2 1 ...
 $ nivetud      : Factor w/ 8 levels "N'a jamais fait d'etudes",..: 8 NA 3 8 3 6 3 6 NA 7 ...
 $ poids        : num  2634 9738 3994 5732 4329 ...
 $ occup        : Factor w/ 7 levels "Exerce une profession",..: 1 3 1 1 4 1 6 1 3 1 ...
 $ qualif       : Factor w/ 7 levels "Ouvrier specialise",..: 6 NA 3 3 6 6 2 2 NA 7 ...
 $ freres.soeurs: int  8 2 2 1 0 5 1 5 4 2 ...
 $ clso         : Factor w/ 3 levels "Oui","Non","Ne sait pas": 1 1 2 2 1 2 1 2 1 2 ...
 $ relig        : Factor w/ 6 levels "Pratiquant regulier",..: 4 4 4 3 1 4 3 4 3 2 ...
 $ trav.imp     : Factor w/ 4 levels "Le plus important",..: 4 NA 2 3 NA 1 NA 4 NA 3 ...
 $ trav.satisf  : Factor w/ 3 levels "Satisfaction",..: 2 NA 3 1 NA 3 NA 2 NA 1 ...
 $ hard.rock    : Factor w/ 2 levels "Non","Oui": 1 1 1 1 1 1 1 1 1 1 ...
 $ lecture.bd   : Factor w/ 2 levels "Non","Oui": 1 1 1 1 1 1 1 1 1 1 ...
 $ peche.chasse : Factor w/ 2 levels "Non","Oui": 1 1 1 1 1 1 2 2 1 1 ...
 $ cuisine      : Factor w/ 2 levels "Non","Oui": 2 1 1 2 1 1 2 2 1 1 ...
 $ bricol       : Factor w/ 2 levels "Non","Oui": 1 1 1 2 1 1 1 2 1 1 ...
 $ cinema       : Factor w/ 2 levels "Non","Oui": 1 2 1 2 1 2 1 1 2 2 ...
 $ sport        : Factor w/ 2 levels "Non","Oui": 1 2 2 2 1 2 1 1 1 2 ...
 $ heures.tv    : num  0 1 0 2 3 2 2.9 1 2 2 ...</code></pre>
<p>Nous voyons que de nombreuses variables de ce tableau de donn√©es, telles que <var>sexe</var> ou <var>nivetud</var>, sont du type facteur.</p>
<p>Les facteurs prennent leurs valeurs dans un ensemble de modalit√©s pr√©d√©finies et ne peuvent en prendre d‚Äôautres. La liste des valeurs possibles est donn√©e par la fonction <code data-pkg="base">levels</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">levels</span>(d$sexe)</code></pre></div>
<pre><code>[1] "Homme" "Femme"</code></pre>
<p>Si on veut modifier la valeur du sexe du premier individu de notre tableau de donn√©es avec une valeur non autoris√©e, on obient un message d‚Äôerreur et une valeur manquante est utilis√©e √† la place¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$sexe[<span class="dv">1</span>] &lt;-<span class="st"> "Chihuahua"</span></code></pre></div>
<pre><code>Warning in `[&lt;-.factor`(`*tmp*`, 1, value =
structure(c(NA, 2L, 1L, 1L, : invalid factor
level, NA generated</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$sexe[<span class="dv">1</span>]</code></pre></div>
<pre><code>[1] &lt;NA&gt;
Levels: Homme Femme</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$sexe[<span class="dv">1</span>] &lt;-<span class="st"> "Homme"</span>
d$sexe[<span class="dv">1</span>]</code></pre></div>
<pre><code>[1] Homme
Levels: Homme Femme</code></pre>
<p>On peut tr√®s facilement cr√©er un facteur √† partir d‚Äôune variable textuelle avec la fonction <code data-pkg="base">factor</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">v &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">"H"</span>, <span class="st">"H"</span>, <span class="st">"F"</span>, <span class="st">"H"</span>))
v</code></pre></div>
<pre><code>[1] H H F H
Levels: F H</code></pre>
<p>Par d√©faut, les niveaux d‚Äôun facteur nouvellement cr√©√©s sont l‚Äôensemble des valeurs de la variable textuelle, ordonn√©es par ordre alphab√©tique. Cette ordre des niveaux est utilis√© √† chaque fois qu‚Äôon utilise des fonctions comme <code data-pkg="base">table</code>, par exemple¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(v)</code></pre></div>
<pre><code>v
F H 
1 3 </code></pre>
<p>On peut modifier cet ordre au moment de la cr√©ation du facteur en utilisant l‚Äôoption <code>levels</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">v &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="kw">c</span>(<span class="st">"H"</span>, <span class="st">"H"</span>, <span class="st">"F"</span>, <span class="st">"H"</span>), <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">"H"</span>, 
  <span class="st">"F"</span>))
<span class="kw">table</span>(v)</code></pre></div>
<pre><code>v
H F 
3 1 </code></pre>
<p>On peut aussi modifier l‚Äôordre des niveaux d‚Äôune variable d√©j√† existante¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$qualif &lt;-<span class="st"> </span><span class="kw">factor</span>(d$qualif, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">"Ouvrier specialise"</span>, 
  <span class="st">"Ouvrier qualifie"</span>, <span class="st">"Employe"</span>, <span class="st">"Technicien"</span>, <span class="st">"Profession intermediaire"</span>, 
  <span class="st">"Cadre"</span>, <span class="st">"Autre"</span>))
<span class="kw">table</span>(d$qualif)</code></pre></div>
<pre><code>
      Ouvrier specialise         Ouvrier qualifie 
                     203                      292 
                 Employe               Technicien 
                     594                       86 
Profession intermediaire                    Cadre 
                     160                      260 
                   Autre 
                      58 </code></pre>
<div class="note">
<p>L‚Äôextension <code class="pkg">questionr</code> propose une <em>interface interactive</em> pour le r√©ordonnancement des niveaux d‚Äôun facteur. Cette fonction, nomm√©e <code data-pkg="questionr">iorder</code>, vous permet de r√©ordonner les modalit√©s de mani√®re graphique et de g√©n√©rer le code <strong>R</strong> correspondant.</p>
<p>Dans l‚Äôexemple pr√©c√©dant, si vous ex√©cutez¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">iorder</span>(d, <span class="st">"qualif"</span>)</code></pre></div>
<p><strong>RStudio</strong> devrait ouvrir une fen√™tre semblable √† celle de la figure ci-dessous.</p>
<p><img src="images/capture_iorder.png" alt="Interface de la commande iorder"/></p>
<p>Vous pouvez alors d√©placer les modalit√©s par glisser-d√©poser, v√©rifier le r√©sultat dans l‚Äôonglet <em>V√©rification</em> et, une fois le r√©sultat satisfaisant, r√©cup√©rer le code g√©n√©r√© pour l‚Äôinclure dans votre script.</p>
</div>
<p>On peut √©galement modifier les niveaux eux-m√™mes. Imaginons que l‚Äôon souhaite cr√©er une nouvelle variable <em>qualif.abr</em> contenant les noms abr√©g√©s des cat√©gories socioprofessionnelles de <em>qualif</em>. On peut alors proc√©der comme suit¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$qualif.abr &lt;-<span class="st"> </span><span class="kw">factor</span>(d$qualif, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">"Ouvrier specialise"</span>, 
  <span class="st">"Ouvrier qualifie"</span>, <span class="st">"Employe"</span>, <span class="st">"Technicien"</span>, <span class="st">"Profession intermediaire"</span>, 
  <span class="st">"Cadre"</span>, <span class="st">"Autre"</span>), <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">"OS"</span>, <span class="st">"OQ"</span>, <span class="st">"Empl"</span>, 
  <span class="st">"Tech"</span>, <span class="st">"Interm"</span>, <span class="st">"Cadre"</span>, <span class="st">"Autre"</span>))
<span class="kw">table</span>(d$qualif.abr)</code></pre></div>
<pre><code>
    OS     OQ   Empl   Tech Interm  Cadre  Autre 
   203    292    594     86    160    260     58 </code></pre>
<p>Dans ce qui pr√©c√®de, le param√®tre <code>levels</code> de <code data-pkg="base">factor</code> permet de sp√©cifier quels sont les niveaux retenus dans le facteur r√©sultat, ainsi que leur ordre. Le param√®tre <code>labels</code>, lui, permet de modifier les noms de ces niveaux dans le facteur r√©sultat. Il est donc capital d‚Äôindiquer les noms de <code>labels</code> exactement dans le m√™me ordre que les niveaux de <code>levels</code>. Pour s‚Äôassurer de ne pas avoir commis d‚Äôerreur, il est recommand√© d‚Äôeffectuer un tableau crois√© entre l‚Äôancien et le nouveau facteur¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(d$qualif, d$qualif.abr)</code></pre></div>
<pre><code>                          
                            OS  OQ Empl Tech
  Ouvrier specialise       203   0    0    0
  Ouvrier qualifie           0 292    0    0
  Employe                    0   0  594    0
  Technicien                 0   0    0   86
  Profession intermediaire   0   0    0    0
  Cadre                      0   0    0    0
  Autre                      0   0    0    0
                          
                           Interm Cadre Autre
  Ouvrier specialise            0     0     0
  Ouvrier qualifie              0     0     0
  Employe                       0     0     0
  Technicien                    0     0     0
  Profession intermediaire    160     0     0
  Cadre                         0   260     0
  Autre                         0     0    58</code></pre>
<p>On a donc ici un premier moyen d‚Äôeffectuer un recodage des modalit√©s d‚Äôune variable de type facteur. D‚Äôautres m√©thodes existent, que nous aborderons dans le chapitre <a href="#recodage">Recodage</a>.</p>
<p>√Ä noter que par d√©faut, les valeurs manquantes ne sont pas consid√©r√©es comme un niveau de facteur. On peut cependant les transformer en niveau en utilisant la fonction <code data-pkg="base" data-rdoc="factor">addNA</code>. Ceci signifie cependant qu‚Äôelle ne seront plus consid√©r√©es comme manquantes par <strong>R</strong> mais comme une modalit√© √† part enti√®re¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(d$trav.satisf)</code></pre></div>
<pre><code>  Satisfaction Insatisfaction      Equilibre 
           480            117            451 
          NA's 
           952 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(<span class="kw">addNA</span>(d$trav.satisf))</code></pre></div>
<pre><code>  Satisfaction Insatisfaction      Equilibre 
           480            117            451 
          &lt;NA&gt; 
           952 </code></pre>
<p>La fonction <code data-pkg="questionr">addNAstr</code> de l‚Äôextension <code class="pkg">questionr</code> fait la m√™me chose mais permet de sp√©cifier l‚Äô√©tiquette de la modalit√© des valeurs manquantes.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">summary</span>(<span class="kw">addNAstr</span>(d$trav.satisf, <span class="st">"Manquant"</span>))</code></pre></div>
<pre><code>  Satisfaction Insatisfaction      Equilibre 
           480            117            451 
      Manquant 
           952 </code></pre>
</div>
<div id="facteurs-et-vecteurs-labellises_labelled" class="section level2">
<h2>Vecteurs labellis√©s</h2>
<p>Nous abordons ici une nouvelle classe de vecteurs, la classe <code data-pkg="labelled">labelled</code>, introduite r√©cemment par l‚Äôextension <code class="pkg">haven</code> (que nous aborderons dans le cadre de l‚Äô<a href="#import-de-donnees">import de donn√©es</a>) et qui peut √™tre manipul√©e avec l‚Äôextension homonyme <code class="pkg">labelled</code>.</p>
<p>Pour cette section, nous allons utiliser d‚Äôautres donn√©es d‚Äôexemple, √©galement disponibles dans l‚Äôextension <code class="pkg">questionr</code>. Il s‚Äôagit d‚Äôun ensemble de trois tableaux de donn√©es (<code>menages</code>, <code>femmes</code> et <code>enfants</code>) contenant les donn√©es d‚Äôune enqu√™te de f√©condit√©. Commen√ßons par les charger en m√©moire¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">data</span>(fecondite)</code></pre></div>
<p>Pour ailleurs, nous allons avoir besoin de l‚Äôextension <code class="pkg">labelled</code> qui permet de manipuler ces donn√©es labellis√©es.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(labelled)</code></pre></div>
<div id="facteurs-et-vecteurs-labellises_les-etiquettes-de-variables" class="section level3">
<h3>Les √©tiquettes de variables</h3>
<p>Les <dfn data-index="√©tiquette de variable">√©tiquettes de variables</dfn><dfn data-index="variable, √©tiquette"/> permettent de donner un nom long, plus explicite, aux diff√©rentes colonnes d‚Äôun tableau de donn√©es (ou encore directement √† un vecteur autonome).</p>
<p>La visonneuse de donn√©es de <strong>RStudio</strong> sait reconna√Ætre et afficher ces √©tiquettes de variables lorsqu‚Äôelles existent. Essayez par exemple la commande suivante¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">View</span>(femmes)</code></pre></div>
<p>Les fonctions <code data-pkg="questionr">lookfor</code> et <code data-pkg="questionr">describe</code> de l‚Äôextension <code class="pkg">questionr</code> affichent √©galement les √©tiquettes de variables lorsqu‚Äôelles existent.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">lookfor</span>(femmes)</code></pre></div>
<pre><code>         variable
1        id_femme
2       id_menage
3           poids
4  date_entretien
5  date_naissance
6             age
7          milieu
8          region
9            educ
10        travail
11          matri
12       religion
13        journal
14          radio
15             tv
16   nb_enf_ideal
17           test
                                                            label
1                                       Identifiant de l'enqu√™t√©e
2                                           Identifiant du m√©nage
3                                               Poids statistique
4                              Date de passation du questionnaire
5                                               Date de naissance
6  √Çge r√©volu (en ann√©es) √† la date de passation du questionnaire
7                                             Milieu de r√©sidence
8                                             R√©gion de r√©sidence
9                                              Niveau d'√©ducation
10                                                  A un emploi ?
11                                             Statut matrimonial
12                                                       Religion
13                                                Lit la presse ?
14                                              Ecoute la radio ?
15                                        Regarde la t√©l√©vision ?
16                                         Nombre id√©al d'enfants
17                      A d√©j√† fait un test de d√©pistage du VIH ?</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">describe</span>(femmes$id_femme)</code></pre></div>
<pre><code>[2000 obs.] Identifiant de l'enqu√™t√©e
integer: 391 1643 85 881 1981 ...
min: 1 - max: 2000 - NAs: 0 (0%) - 2000 unique values</code></pre>
<p>Pour manipuler les √©tiquettes de variable, il suffit d‚Äôutiliser la fonction <code data-pkg="labelled">var_label</code> de l‚Äôextension <code class="pkg">labelled</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">var_label</span>(femmes)</code></pre></div>
<pre><code>$id_femme
[1] "Identifiant de l'enqu√™t√©e"

$id_menage
[1] "Identifiant du m√©nage"

$poids
[1] "Poids statistique"

$date_entretien
[1] "Date de passation du questionnaire"

$date_naissance
[1] "Date de naissance"

$age
[1] "√Çge r√©volu (en ann√©es) √† la date de passation du questionnaire"

$milieu
[1] "Milieu de r√©sidence"

$region
[1] "R√©gion de r√©sidence"

$educ
[1] "Niveau d'√©ducation"

$travail
[1] "A un emploi ?"

$matri
[1] "Statut matrimonial"

$religion
[1] "Religion"

$journal
[1] "Lit la presse ?"

$radio
[1] "Ecoute la radio ?"

$tv
[1] "Regarde la t√©l√©vision ?"

$nb_enf_ideal
[1] "Nombre id√©al d'enfants"

$test
[1] "A d√©j√† fait un test de d√©pistage du VIH ?"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">var_label</span>(femmes$id_menage)</code></pre></div>
<pre><code>[1] "Identifiant du m√©nage"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">var_label</span>(femmes$id_menage) &lt;-<span class="st"> "ID du m√©nage √† laquelle est appartient"</span>
<span class="kw">var_label</span>(femmes$id_menage)</code></pre></div>
<pre><code>[1] "ID du m√©nage √† laquelle est appartient"</code></pre>
<p>On utilisera la valeur <code>NULL</code> pour supprimer une √©tiquette¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">v &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">1</span>)
<span class="kw">var_label</span>(v)</code></pre></div>
<pre><code>NULL</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">var_label</span>(v) &lt;-<span class="st"> "Ma variable"</span>
<span class="kw">var_label</span>(v)</code></pre></div>
<pre><code>[1] "Ma variable"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">var_label</span>(v) &lt;-<span class="st"> </span><span class="ot">NULL</span>
<span class="kw">var_label</span>(v)</code></pre></div>
<pre><code>NULL</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">var_label</span>(v) &lt;-<span class="st"> "Une autre √©tiquette"</span>
<span class="kw">var_label</span>(v)</code></pre></div>
<pre><code>[1] "Une autre √©tiquette"</code></pre>
<p>Le fait d‚Äôajouter une √©tiquette √† un vecteur ne modifie en rien son type. Regardons la structure de notre objet <code>v</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(v)</code></pre></div>
<pre><code> atomic [1:5] 1 5 2 4 1
 - attr(*, "label")= chr "Une autre √©tiquette"</code></pre>
<p>Que voit-on¬†? Notre vecteur poss√®de maintenant ce qu‚Äôon appelle un <dfn>attribut</dfn>, c‚Äôest-√†-dire une information suppl√©mentaire qui lui est attach√©e. Un objet peut avoir plusieurs attributs. Ici, notre √©tiquette de variable est strock√© dans un attribut nomm√© <code>"label"</code>. Cela ne modifie en rien sa nature. Il ne s‚Äôagit que d‚Äôinformation en plus. Toutes les fonctions ne tiennent pas compte des √©tiquettes de variable. Peu importe¬†! La pr√©sence d‚Äôun attribut ne les emp√™chera de fonctionner. De m√™me, m√™me si l‚Äôextension <code class="pkg">labelled</code> n‚Äôest pas install√©e sur votre machine, vous pourrez toujours manipuler vos donn√©es comme si de rien n‚Äô√©tait.</p>
<p>On peut associer une √©tiquette √† n‚Äôimporte quel type de variable, qu‚Äôelle soit num√©rique, textuelle, un facteur ou encore des dates.</p>
</div>
<div id="facteurs-et-vecteurs-labellises_les-etiquettes-de-valeur" class="section level3">
<h3>Les √©tiquettes de valeur</h3>
<p>Les <dfn data-index="√©tiquette de valeur">√©tiquettes de valeur</dfn><dfn data-index="valeur, √©tiquette"/> consistent √† attribuer une √©tiquette textuelle √† certaines valeurs d‚Äôun vecteur. Elles ne peuvent s‚Äôappliquer qu‚Äôaux vecteurs num√©riques ou textuels.</p>
<p>Lorsqu‚Äôun vecteur poss√®de des √©tiquettes de valeur, sa classe change et devient <code data-pkg="labelled">labelled</code>. Regardons d√©j√† quelques exemples. Tout d‚Äôabord, jetons un apercu contenu de l‚Äôobjet <code>femmes</code> grace √† la fonction <code data-pkg="dplyr">glimpse</code> de l‚Äôextension <code class="pkg">dplyr</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dplyr)
<span class="kw">glimpse</span>(femmes)</code></pre></div>
<pre><code>Observations: 2,000
Variables: 17
$ id_femme       (int) 391, 1643, 85, 881, 19...
$ id_menage      (int) 381, 1515, 85, 844, 17...
$ poids          (dbl) 1.803150, 1.803150, 1....
$ date_entretien (date) 2012-05-05, 2012-01-2...
$ date_naissance (date) 1997-03-07, 1982-01-0...
$ age            (dbl) 15, 30, 33, 43, 25, 18...
$ milieu         (lbll) 2, 2, 2, 2, 2, 2, 2, ...
$ region         (lbll) 4, 4, 4, 4, 4, 3, 3, ...
$ educ           (lbll) 0, 0, 0, 0, 1, 0, 0, ...
$ travail        (lbll) 1, 1, 0, 1, 1, 0, 1, ...
$ matri          (lbll) 0, 2, 2, 2, 1, 0, 1, ...
$ religion       (lbll) 1, 3, 2, 3, 2, 2, 3, ...
$ journal        (lbll) 0, 0, 0, 0, 0, 0, 0, ...
$ radio          (lbll) 0, 1, 1, 0, 0, 1, 1, ...
$ tv             (lbll) 0, 0, 0, 0, 0, 1, 0, ...
$ nb_enf_ideal   (lbll) 4, 4, 4, 4, 4, 5, 10,...
$ test           (lbll) 0, 9, 0, 0, 1, 0, 0, ...</code></pre>
<p>Il appara√Æt que la variable <var>region est de type <code data-pkg="labelled">labelled</code>. On peut le confirmer avec <code data-pkg="base">class</code>.</var></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(femmes$region)</code></pre></div>
<pre><code>[1] "labelled"</code></pre>
<p>Regardons les premi√®res valeurs prises par cette variable.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(femmes$region)</code></pre></div>
<pre><code>&lt;Labelled double&gt; 
[1] 4 4 4 4 4 3

Labels:
 value label is_na
     1  Nord FALSE
     2   Est FALSE
     3   Sud FALSE
     4 Ouest FALSE</code></pre>
<p>Nous voyons que quatre √©tiquettes de valeurs ont √©t√© associ√©es √† notre variable. Le code 1 correspond ainsi √† la r√©gion <q>Nord</q>, le code 2 √† la r√©gion <q>Est</q>, etc. Laissons de c√¥t√© pour le moment la colonne <code>is_na</code> que nous aborderons dans une prochaine section.</p>
<p>La liste des √©tiquettes est √©galement renvoy√©e par la fonction <code data-pkg="questionr">describe</code> de <code class="pkg">questionr</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">describe</span>(femmes$region)</code></pre></div>
<pre><code>[2000 obs.] R√©gion de r√©sidence
labelled numeric: 4 4 4 4 4 ...
min: 1 - max: 4 - NAs: 0 (0%) - 4 unique values
4 value labels: [1] Nord [2] Est [3] Sud [4] Ouest</code></pre>
<p>L‚Äôextension <code class="pkg">labelled</code> fournit la fonction <code data-pkg="labelled">val_labels</code> qui renvoie la liste des √©tiquettes de valeurs d‚Äôune variable sous la forme d‚Äôun vecteur nomm√© et la fonction <code data-pkg="labelled" data-rdoc="val_labels">val_label</code> (notez l‚Äôabsence de ‚Äòs‚Äô) qui renvoie l‚Äô√©tiquette associ√©e √† une valeur particuli√®re. S‚Äôil n‚Äôy a pas d‚Äô√©tiquette de valeur, ces fonctions renvoient <code>NULL</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">val_labels</span>(femmes$region)</code></pre></div>
<pre><code> Nord   Est   Sud Ouest 
    1     2     3     4 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">val_label</span>(femmes$region, <span class="dv">2</span>)</code></pre></div>
<pre><code>[1] "Est"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">val_label</span>(femmes$region, <span class="dv">6</span>)</code></pre></div>
<pre><code>NULL</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">val_labels</span>(femmes$age)</code></pre></div>
<pre><code>NULL</code></pre>
<p>Re-regardons d‚Äôun peu plus pr√®s les premi√®res valeurs de notre variable <var>region</var>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(femmes$region)</code></pre></div>
<pre><code>&lt;Labelled double&gt; 
[1] 4 4 4 4 4 3

Labels:
 value label is_na
     1  Nord FALSE
     2   Est FALSE
     3   Sud FALSE
     4 Ouest FALSE</code></pre>
<p>On s‚Äôaper√ßoit qu‚Äôil s‚Äôagit de valeurs num√©riques. Et l‚Äôaffichage indique que notre variable est plus pr√©cis√©ment du type <code>labelled double</code>. Pour rappel, <code>double</code> est synonyme de <code>numeric</code>. Autrement dit, la classe <code data-pkg="labelled">labelled</code> ne modifie pas le type sous-jacent d‚Äôun vecteur, que l‚Äôon peut toujours obtenir avec la fonction <code data-pkg="base">typeof</code>. Nous pouvons √©galement tester si notre variable est num√©rique avec la fonction <code data-pkg="base" data-rdoc="numeric">is.numeric</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">typeof</span>(femmes$region)</code></pre></div>
<pre><code>[1] "double"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">is.numeric</span>(femmes$region)</code></pre></div>
<pre><code>[1] TRUE</code></pre>
<p>√Ä la diff√©rence des facteurs, le type original d‚Äôune variable labellis√©e n‚Äôest pas modifi√© par la pr√©sence d‚Äô√©tiquettes de valeur. Ainsi, il reste possible de calculer une moyenne √† partir de notre variable <var>region</var> (m√™me si cela n‚Äôest pas pertinent ici d‚Äôun point de vue s√©mantique).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(femmes$region)</code></pre></div>
<pre><code>[1] 2.412</code></pre>
<p>Avec un vecteur, nous aurions eu un bon message d‚Äôerreur.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(d$nivetud)</code></pre></div>
<pre><code>Warning in mean.default(d$nivetud): argument is
not numeric or logical: returning NA</code></pre>
<pre><code>[1] NA</code></pre>
<p>Nous allons voir qu‚Äôil est aussi possible d‚Äôassocier des √©tiquettes de valeurs √† des vecteurs textuels. Cr√©ons tout d‚Äôabord un vecteur textuel qui nous servira d‚Äôexemple.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">v &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"f"</span>, <span class="st">"f"</span>, <span class="st">"h"</span>, <span class="st">"f"</span>, <span class="st">"h"</span>)
v</code></pre></div>
<pre><code>[1] "f" "f" "h" "f" "h"</code></pre>
<p>Le plus facile pour lui associer des √©tiquettes de valeur est d‚Äôutiliser <code data-pkg="labelled" data-rdoc="val_labels">val_label</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">val_label</span>(v, <span class="st">"f"</span>) &lt;-<span class="st"> "femmes"</span>
<span class="kw">val_label</span>(v, <span class="st">"h"</span>) &lt;-<span class="st"> "hommes"</span>
v</code></pre></div>
<pre><code>&lt;Labelled character&gt; 
[1] "f" "f" "h" "f" "h"

Labels:
 value  label is_na
     f femmes FALSE
     h hommes FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">typeof</span>(v)</code></pre></div>
<pre><code>[1] "character"</code></pre>
<p>Notre vecteur <code>v</code> a automatiquement transform√© en un vecteur de la classe <code>labelled</code>. Mais son type sous-jacent est rest√© <code>"character"</code>. Par ailleurs, les donn√©es elle-m√™me n‚Äôont pas √©t√© modifi√©es et ont conserv√© leurs valeurs originales.</p>
<p>Il est √©galement possible de d√©finir/modifier/supprimer l‚Äôensemble des √©tiquettes de valeur d‚Äôune variable avec <code data-pkg="labelled">val_labels</code> en lui assignant un vecteur nomm√©.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">val_labels</span>(v) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">Homme =</span> <span class="st">"h"</span>, <span class="dt">Femme =</span> <span class="st">"f"</span>, <span class="st">`</span><span class="dt">Valeur ind√©termin√©e</span><span class="st">`</span> =<span class="st"> "i"</span>)
v</code></pre></div>
<pre><code>&lt;Labelled character&gt; 
[1] "f" "f" "h" "f" "h"

Labels:
 value               label is_na
     h               Homme FALSE
     f               Femme FALSE
     i Valeur ind√©termin√©e FALSE</code></pre>
<p>Comme pr√©c√©demment, on utilisera <code>NULL</code> pour supprimer une ou toutes les √©tiquettes.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">val_label</span>(v, <span class="st">"i"</span>) &lt;-<span class="st"> </span><span class="ot">NULL</span>
v</code></pre></div>
<pre><code>&lt;Labelled character&gt; 
[1] "f" "f" "h" "f" "h"

Labels:
 value label is_na
     h Homme FALSE
     f Femme FALSE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">val_labels</span>(v) &lt;-<span class="st"> </span><span class="ot">NULL</span>
v</code></pre></div>
<pre><code>[1] "f" "f" "h" "f" "h"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">class</span>(v)</code></pre></div>
<pre><code>[1] "character"</code></pre>
<p>Si l‚Äôon supprime toutes les √©tiquettes de valeur, alors notre vecteur retrouve sa classe initiale.</p>
<p>Les √©tiquettes de valeur sont plus souples que les facteurs, en ce sens qu‚Äôil n‚Äôest pas obligatoire d‚Äôindiquer une √©tiquette pour chaque valeur prise par une variable. Alors qu‚Äôil n‚Äôest pas possible avec un facteur d‚Äôassigner une valeur qui n‚Äôa pas √©t√© pr√©alablement d√©finie comme une des modalit√©s possibles du facteur, nous n‚Äôavons pas cette limite avec les vecteurs labellis√©s.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">femmes$milieu[<span class="dv">3</span>] &lt;-<span class="st"> </span><span class="dv">5</span></code></pre></div>
<p>Important¬†: quand on assigne une valeur √† un facteur, on doit transmettre le texte correspondant √† la modalit√©, alors que pour un vecteur labellis√© on transmettra le code sous-jacent (pour rappel, les √©tiquettes de valeur ne sont qu‚Äôune information additionnelle).</p>
<p>De plus, nous avons vu que les donn√©es initiales n‚Äô√©taient pas modifi√©es par l‚Äôajout ou la suppression d‚Äô√©tiquettes de valeur, alors que pour les facteurs ce n‚Äôest pas vrai. Pour mieux comprendre, essayons la commande suivante¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">unclass</span>(<span class="kw">factor</span>(v))</code></pre></div>
<pre><code>[1] 1 1 2 1 2
attr(,"levels")
[1] "f" "h"</code></pre>
<p>Un facteur stocke de mani√®re interne les valeurs sous la forme d‚Äôune suite d‚Äôentiers, d√©marrant toujours par 1 et forc√©ments cons√©cutifs, et dont les valeurs d√©pendent de l‚Äôordre des facteurs. Pour s‚Äôen rendre compte¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">unclass</span>(<span class="kw">factor</span>(v, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">"h"</span>, <span class="st">"f"</span>)))</code></pre></div>
<pre><code>[1] 2 2 1 2 1
attr(,"levels")
[1] "h" "f"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">unclass</span>(<span class="kw">factor</span>(v, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">"f"</span>, <span class="st">"h"</span>)))</code></pre></div>
<pre><code>[1] 1 1 2 1 2
attr(,"levels")
[1] "f" "h"</code></pre>
</div>
<div id="facteurs-et-vecteurs-labellises_assignation-et-condition" class="section level3">
<h3>Assignation et condition</h3>
<p>Les √©tiquettes de valeur sont plus souples que les facteurs, en ce sens qu‚Äôil n‚Äôest pas obligatoire d‚Äôindiquer une √©tiquette pour chaque valeur prise par une variable. Alors qu‚Äôil n‚Äôest pas possible avec un facteur d‚Äôassigner une valeur qui n‚Äôa pas √©t√© pr√©alablement d√©finie comme une des modalit√©s possibles du facteur, nous n‚Äôavons pas cette limite avec les vecteurs labellis√©s.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">femmes$region[<span class="dv">3</span>] &lt;-<span class="st"> </span><span class="dv">5</span></code></pre></div>
<p>Important¬†: quand on assigne une valeur √† un facteur, on doit transmettre le texte correspondant √† la modalit√©, alors que pour un vecteur labellis√© on transmettra le code sous-jacent (pour rappel, les √©tiquettes de valeur ne sont qu‚Äôune information additionnelle).</p>
<p>De plus, nous avons vu que les donn√©es initiales n‚Äô√©taient pas modifi√©es par l‚Äôajout ou la suppression d‚Äô√©tiquettes de valeur, alors que pour les facteurs ce n‚Äôest pas vrai. Pour mieux comprendre, essayons la commande suivante¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">unclass</span>(<span class="kw">factor</span>(v))</code></pre></div>
<pre><code>[1] 1 1 2 1 2
attr(,"levels")
[1] "f" "h"</code></pre>
<p>Un facteur stocke de mani√®re interne les valeurs sous la forme d‚Äôune suite d‚Äôentiers, d√©marrant toujours par 1 et forc√©ments cons√©cutifs, et dont les valeurs d√©pendent de l‚Äôordre des facteurs. Pour s‚Äôen rendre compte¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">unclass</span>(<span class="kw">factor</span>(v, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">"h"</span>, <span class="st">"f"</span>)))</code></pre></div>
<pre><code>[1] 2 2 1 2 1
attr(,"levels")
[1] "h" "f"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">unclass</span>(<span class="kw">factor</span>(v, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">"f"</span>, <span class="st">"h"</span>)))</code></pre></div>
<pre><code>[1] 1 1 2 1 2
attr(,"levels")
[1] "f" "h"</code></pre>
<p>Ce qui importe pour un facteur ce sont les modalit√©s de ce dernier tandis que pour un vecteur labellis√© ce sont les valeurs du vecteur elles-m√™mes. Cela reste vrai pour l‚Äô√©criture de conditions.</p>
<p>Prenons un premier exemple avec un facteur¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">describe</span>(d$sexe)</code></pre></div>
<pre><code>[2000 obs.] 
nominal factor: "Homme" "Femme" "Homme" "Homme" "Femme" ...
2 levels: Homme | Femme
NAs: 0 (0%)</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(d$sexe ==<span class="st"> "Homme"</span>)</code></pre></div>
<pre><code>
FALSE  TRUE 
 1100   900 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(d$sexe ==<span class="st"> </span><span class="dv">1</span>)</code></pre></div>
<pre><code>
FALSE 
 2000 </code></pre>
<p>La condition valide est celle utilisant <code>"Homme"</code> qui est la valeur de la modalit√© du facteur.</p>
<p>Et avec un vecteur labellis√©¬†?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">describe</span>(femmes$milieu)</code></pre></div>
<pre><code>[2000 obs.] Milieu de r√©sidence
labelled numeric: 2 2 5 2 2 ...
min: 1 - max: 5 - NAs: 0 (0%) - 3 unique values
2 value labels: [1] urbain [2] rural</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(femmes$milieu ==<span class="st"> "urbain"</span>)</code></pre></div>
<pre><code>
FALSE 
 2000 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(femmes$milieu ==<span class="st"> </span><span class="dv">1</span>)</code></pre></div>
<pre><code>
FALSE  TRUE 
 1088   912 </code></pre>
<p>Ici, pour √™tre valide, la condition doit porter sur les valeurs de la variable elle-m√™me et non sur les √©tiquette.</p>
</div>
<div id="facteurs-et-vecteurs-labellises_definir-des-valeurs-manquantes" class="section level3">
<h3>D√©finir des valeurs manquantes</h3>
<p>Nous avons que sous <strong>R</strong> nous pouvions indiquer des valeurs manquantes avec <code>NA</code>. Or, dans le domaine des enqu√™tes, il arrive fr√©quemment que l‚Äôon ait besoin de pouvoir sp√©cifier plusieurs types de valeurs manquantes. En effet, le fait que l‚Äôenqu√™t√© ne sache pas quoi r√©pondre √† une question n‚Äôest pas la m√™me chose qu‚Äôun refus de r√©pondre ou encore qu‚Äôun oubli de r√©pondre (i.e.¬†aucune case n‚Äôa √©t√© coch√©e sur le questionnaire papier). Il est alors fr√©quent dans ces enqu√™tes d‚Äôutiliser diff√©rents codes pour indiquer ces cas de figure. Les habitu√©s de <strong>SPSS</strong> savent qu‚Äôil est possible dans ce logiciel d‚Äôindiquer quelles valeurs sp√©cifiques doivent √™tre consid√©r√©es comme manquantes.</p>
<p>La fonction <code data-pkg="labelled">missing_val</code> de l‚Äôextension <code class="pkg">labelled</code> permet de sp√©cifier quelles valeurs doivent √™tre consid√©r√©es comme manquantes. Prenons un exemple¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">v &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">8</span>, <span class="dv">3</span>, <span class="dv">9</span>)
<span class="kw">val_labels</span>(v) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">oui =</span> <span class="dv">1</span>, <span class="st">`</span><span class="dt">peut-√™tre</span><span class="st">`</span> =<span class="st"> </span><span class="dv">2</span>, <span class="dt">non =</span> <span class="dv">3</span>, 
  <span class="st">`</span><span class="dt">ne sait pas</span><span class="st">`</span> =<span class="st"> </span><span class="dv">8</span>, <span class="dt">refus =</span> <span class="dv">9</span>)
v</code></pre></div>
<pre><code>&lt;Labelled double&gt; 
[1] 1 2 1 8 3 9

Labels:
 value       label is_na
     1         oui FALSE
     2   peut-√™tre FALSE
     3         non FALSE
     8 ne sait pas FALSE
     9       refus FALSE</code></pre>
<p>√Ä ce stade, aucune valeur manquante n‚Äôa encore √©t√© d√©finie. Ce que l‚Äôon peut voir dans la colonne <code>is_na</code> qui ne contient que <code>FALSE</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">missing_val</span>(v) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">8</span>, <span class="dv">9</span>)
v</code></pre></div>
<pre><code>&lt;Labelled double&gt; 
[1] 1 2 1 8 3 9

Labels:
 value       label is_na
     1         oui FALSE
     2   peut-√™tre FALSE
     3         non FALSE
     8 ne sait pas  TRUE
     9       refus  TRUE</code></pre>
<p>Nous avons maintenant indiqu√© que 8 et 9 doivent √™tre consid√©r√©es comme manquantes. La classe <code data-pkg="labelled">labelled</code> impose qu‚Äôune valeur manquante ait une √©tiquette de valeur. Si l‚Äôon essaie d‚Äôattribuer une valeur manquante qui n‚Äôa pas d‚Äô√©tiquette, on obtient un message d‚Äôerreur.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">missing_val</span>(v) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>)</code></pre></div>
<pre><code>Error: no value label found for 7, please specify `force`</code></pre>
<p>On peut indiquer avec l‚Äôargument <code>force</code> ce que l‚Äôon souhaite faire dans ces cas-l√†¬†: <code>FALSE</code> si l‚Äôon souhaite ne pas tenir compte des valeurs manquantes qui n‚Äôont pas d‚Äô√©tiquette (et ne seront donc pas consid√©r√©es comme maquantes) ou <code>TRUE</code> pour cr√©er automatiquement une √©tiquette √† ces valeurs qui n‚Äôen ont pas encore une.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">missing_val</span>(v, <span class="dt">force =</span> <span class="ot">FALSE</span>) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>)
v</code></pre></div>
<pre><code>&lt;Labelled double&gt; 
[1] 1 2 1 8 3 9

Labels:
 value       label is_na
     1         oui FALSE
     2   peut-√™tre FALSE
     3         non FALSE
     8 ne sait pas  TRUE
     9       refus  TRUE</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">missing_val</span>(v, <span class="dt">force =</span> <span class="ot">TRUE</span>) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>)
v</code></pre></div>
<pre><code>&lt;Labelled double&gt; 
[1] 1 2 1 8 3 9

Labels:
 value       label is_na
     1         oui FALSE
     2   peut-√™tre FALSE
     3         non FALSE
     8 ne sait pas  TRUE
     9       refus  TRUE
     7           7  TRUE</code></pre>
<p>√Ä cette √©tape, nous n‚Äôavons fait qu‚Äôindiquer que ces valeurs devraient √™tre consid√©r√©es comme manquantes. Pour autant, elles sont toujours pr√©sentes dans notre vecteur et consid√©r√©es comme des valeurs valides par les fonctions statistiques de <strong>R</strong>.</p>
<p>Prenons un nouvel exemple¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">notes &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">12</span>, <span class="dv">16</span>, <span class="dv">99</span>, <span class="dv">14</span>, <span class="dv">17</span>)
<span class="kw">val_label</span>(notes, <span class="dv">99</span>) &lt;-<span class="st"> "absent le jour de l'examen"</span>
<span class="kw">missing_val</span>(notes) &lt;-<span class="st"> </span><span class="dv">99</span>
notes</code></pre></div>
<pre><code>&lt;Labelled double&gt; 
[1] 12 16 99 14 17

Labels:
 value                      label is_na
    99 absent le jour de l'examen  TRUE</code></pre>
<p>Calculons la moyenne de la classe¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(notes)</code></pre></div>
<pre><code>Warning in mean.labelled(notes): x has self-
defined missing values and missing_to_na is not
specified</code></pre>
<pre><code>[1] 31.6</code></pre>
<p>Hmmm¬†! Ce r√©sultat n‚Äôest certainement pas le bon. Cela vient de notre valeur 99. Elle a √©t√© prise en compte lors du calcul de notre moyenne. Lorsque l‚Äôon travaille avec des vecteurs labellis√©s, m√™me si l‚Äôon a sp√©cifi√© des valeurs manquantes, c‚Äôest √† l‚Äôutilisateur de de dire explicitement si pour une analyse donn√©e ces valeurs sp√©cifi√©es comme manquantes doivent √™tre transform√©es en <code>NA</code>. Cela se fait √† l‚Äôaide de la fonction <code data-pkg="labelled">missing_to_na</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(<span class="kw">missing_to_na</span>(notes), <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>[1] 14.75</code></pre>
<p>La m√©thode <code data-pkg="labelled" data-rdoc="mean.labelled">mean</code> ayant √©t√© d√©finie pour les vecturs labellis√©es dans l‚Äôextension <strong class="pkg">labelled</strong>, il est √©galement possible de faire directement¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(notes, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>, <span class="dt">missing_to_na =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>[1] 14.75</code></pre>
<p>Cette fois-ci, notre valeur 99 a bien √©t√© exclue du calcul de la moyenne de la classe.</p>
</div>
<div id="facteurs-et-vecteurs-labellises_quelques-fonctions-supplementaires" class="section level3">
<h3>Quelques fonctions suppl√©mentaires</h3>
<p>L‚Äôextension <code class="pkg">labelled</code> fournit quelques fonctions suppl√©mentaires qui peuvent s‚Äôav√©rer utiles¬†:</p>
<ul>
<li><code data-pkg="labelled">labelled</code> pour cr√©er directement des vecteurs labellis√©s¬†;</li>
<li><code data-pkg="labelled">nolabel_to_na</code> pour convertir les valeurs n‚Äôayant pas d‚Äô√©tiquette en <code>NA</code>¬†;</li>
<li><code data-pkg="labelled">val_labels_to_na</code> qui, √† l‚Äôinverse, converti les valeurs avec √©tiquette en <code>NA</code>¬†;</li>
<li><code data-pkg="labelled">sort_val_labels</code> pour trier l‚Äôordre des √©tiquettes de valeurs.</li>
</ul>
<p>On pourra se r√©ferrer √† l‚Äôaide de chacune de ces fonctions.</p>
<p>L‚Äô<a href="#import-de-donnees">import de donn√©es labellis√©es</a> et le <a href="#recodage">recodage de variables</a> (dont la conversion d‚Äôun vecteur labellis√© en facteur) seront quant √† eux abord√©s dans de prochains chapitres.</p>
</div>
</div>

</article>
<article id="organiser-ses-fichiers">

<div class="fluid-row" id="organiser-ses-fichiers_header">


<h1 class="title">Organiser ses fichiers</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#organiser-ses-fichiers_le-repertoire-de-travail">Le r√©pertoire de travail</a></li>
<li><a href="#organiser-ses-fichiers_les-projets-dans-rstudio">Les projets dans RStudio</a><ul>
<li><a href="#organiser-ses-fichiers_creer-un-nouveau-projet">Cr√©er un nouveau projet</a></li>
<li><a href="#organiser-ses-fichiers_fonctionnement-par-defaut-des-projets">Fonctionnement par d√©faut des projets</a></li>
<li><a href="#organiser-ses-fichiers_options-des-projets">Options des projets</a></li>
<li><a href="#organiser-ses-fichiers_naviguer-dun-projet-a-un-autre">Naviguer d‚Äôun projet √† un autre</a></li>
<li><a href="#organiser-ses-fichiers_voir-aussi">Voir aussi</a></li>
</ul></li>
<li><a href="#organiser-ses-fichiers_appeler-un-script-depuis-un-autre-script">Appeler un script depuis un autre script</a></li>
</ul>
</div>

<div id="organiser-ses-fichiers_le-repertoire-de-travail" class="section level2">
<h2>Le r√©pertoire de travail</h2>
<p>√Ä chaque fois que l‚Äôon demandera √† <strong>R</strong> de charger ou d‚Äôenregistrer un fichier (en particulier lorsque l‚Äôon cherchera √† importer des donn√©es, voir le <a href="#import-de-donnees">chapitre d√©di√©</a>), <strong>R</strong> √©valuera le nom du fichier qu‚Äôon lui a transmis par rapport au <dfn>r√©pertoire de travail</dfn> actuellement d√©fini, qui correspond au r√©pertoire dans lequel <strong>R</strong> est actuellement en train de s‚Äôex√©cuter.</p>
<p>Pour conna√Ætre de le r√©pertoire de travail actuel, on pourra utiliser la fonction <code data-pkg="base">getwd</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">getwd</span>()</code></pre></div>
<p>Lorsque l‚Äôon travaille sous <strong>RStudio</strong>, le r√©pertoire de travail est √©galement affich√© dans le quadrant inf√©rieur droit, en gris, √† la droite du mot <em>Console</em> (voir la capture d‚Äô√©cran ci-apr√®s).</p>
<figure>
<img src="images/capture_RStudio_workingdir.png" alt="Affichage du r√©pertoire de travail sous RStudio"/>
<figcaption>
Affichage du r√©pertoire de travail sous RStudio
</figcaption>
</figure>
<p>Le symbole <code>~</code> correspond dans ce cas-l√† au r√©pertoire utilisateur syst√®me, dont l‚Äôemplacement d√©pend du syst√®me d‚Äôexploitation. Sous <strong>Windows</strong>, il s‚Äôagit du r√©pertoire <em>Mes documents</em> ou <em>Documents</em> (le nom varie suivant la version de <strong>Windows</strong>).</p>
<p>Le r√©pertoire de travail peut √™tre modifi√© avec la fonction <code data-pkg="base" data-rdoc="getwd">setwd</code> ou, sous <strong>RStudio</strong>, via le menu <em>Session &gt; Set Working Directory</em>. Cependant, nous allons voir que nous n‚Äôaurons en pratique presque jamais besoin de le faire si l‚Äôon travaille avec <strong>RStudio</strong>.</p>
</div>
<div id="organiser-ses-fichiers_les-projets-dans-rstudio" class="section level2">
<h2>Les projets dans RStudio</h2>
<p><strong>RStudio</strong> dispose d‚Äôune fonctionnalit√© tr√®s pratique pour organiser son travail en diff√©rents <dfn date-inedx="projet, RStudio">projets</dfn>.</p>
<p>L‚Äôid√©e principale est de r√©unir tous les fichiers / documents relatifs √† un m√™me projet (que ce soit les donn√©es, les scripts, les rapports automatis√©s‚Ä¶) dans un r√©pertoire d√©di√©<a href="#organiser-ses-fichiers_fn1" class="footnoteRef" id="organiser-ses-fichiers_fnref1"><sup>1</sup></a>.</p>
<p>Le menu <em>Projects</em> est accessible via une ic√¥ne d√©di√©e situ√©e tout en haut √† droite (voir la capture d‚Äô√©cran ci-apr√®s).</p>
<figure>
<img src="images/capture_RStudio_icone_projet.png" alt="Acc√®s au menu Projects sous RStudio"/>
<figcaption>
Acc√®s au menu Projects sous RStudio
</figcaption>
</figure>
<div id="organiser-ses-fichiers_creer-un-nouveau-projet" class="section level3">
<h3>Cr√©er un nouveau projet</h3>
<p>Dans le menu <em>Projects</em> on s√©lectionnera l‚Äôoption <em>New project</em>. <strong>RStudio</strong> nous demandera dans un premier temps si l‚Äôon souhaite cr√©er un projet (i) dans un nouveau r√©pertoire, (ii) dans un r√©pertoire d√©j√† existant ou bien (iii) √† partir d‚Äôun <dfn>gestionnaire de versions</dfn> (<strong>Git</strong> ou <strong>SVN</strong>).</p>
<figure>
<img src="images/capture_RStudio_nouveau_projet.png" alt="Options de cr√©ation de projet sous RStudio"/>
<figcaption>
Options de cr√©ation de projet sous RStudio
</figcaption>
</figure>
<p>Si vous d√©butez avec <strong>R</strong>, laissez de c√¥t√© pour le moment les gestionnaires de versions qui sont destin√©s aux utilisateurs avanc√©s (et pr√©sent√©s dans le chapitre <a href="#git">Git</a>). Dans le cadre d‚Äôun usage courant, on aura recours √† <em>New Directory</em>.</p>
<p><strong>RStudio</strong> nous demande alors le type de projet que l‚Äôon souhaite cr√©er¬†: (i) un projet vide, (ii) une extension <strong>R</strong> ou (iii) une application <strong>Shiny</strong>.</p>
<figure>
<img src="images/capture_RStudio_types_projet.png" alt="Les diff√©rents types de projet sous RStudio"/>
<figcaption>
Les diff√©rents types de projet sous RStudio
</figcaption>
</figure>
<p>Il est encore un peu t√¥t pour se lancer dans la cr√©ation de sa propre extension pour <strong>R</strong> (voir le chapitre <a href="#developper-un-package">D√©velopper un package</a>). Les applications <strong>Shiny</strong> (voir le <a href="#shiny-les-interfaces-interactives">chapitre d√©di√©</a>) sont des applications webs interactives. L√† encore, on attendra une meilleure ma√Ætrise de <strong>R</strong> pour se lancer dans ce type de projets. Dans un contexte d‚Äôanalyse d‚Äôenqu√™tes, on choisira d√®s lors <em>Empty project</em>.</p>
<figure>
<img src="images/capture_RStudio_create_new_project.png" alt="Cr√©ation d‚Äôun projet dans un nouveau r√©pertoire avec RStudio"/>
<figcaption>
Cr√©ation d‚Äôun projet dans un nouveau r√©pertoire avec RStudio
</figcaption>
</figure>
<p>En premier lieu, on indiquera le nom de notre projet, qui sera √©galement le nom du r√©pertoire qui sera cr√©√© pour stocker les donn√©es du projet. Puis, on indiquera le r√©pertoire parent, c‚Äôest-√†-dire le r√©pertoire dans lequel le r√©pertoire de notre projet sera cr√©√©.</p>
<p>Les deux options suivantes concernent que les utilisateurs avanc√©s. <strong>RStudio</strong> nous demande s‚Äôil on veut activer <strong>Git</strong> sur ce projet (<strong>Git</strong> √©tant un gestionnaire de versions, l‚Äôoption n‚Äô√©tant affich√©e que si <strong>Git</strong> est install√© sur votre PC) et s‚Äôil on souhaite utiliser l‚Äôextension <code class="pkg">packrat</code> sur ce projet. <code class="pkg">packrat</code> permet une gestion des extensions utilis√©es, projet par projet, ce qui n‚Äôest vraiment utile que dans le cadre d‚Äôanalyses bien sp√©cifiques.</p>
<p>Il ne nous reste plus qu‚Äô√† cliquer sur <em>Create Project</em>.</p>
</div>
<div id="organiser-ses-fichiers_fonctionnement-par-defaut-des-projets" class="section level3">
<h3>Fonctionnement par d√©faut des projets</h3>
<p>Lorsque l‚Äôon ouvre un projet, <strong>RStudio</strong> effectue diff√©rentes actions¬†:</p>
<ul>
<li>le nom du projet est affich√© en haut √† droite √† c√¥t√© de l‚Äôic√¥ne projets¬†;</li>
<li>une nouvelle session <strong>R</strong> est ex√©cut√©e (ainsi s‚Äôil on passe d‚Äôun projet √† un autre, les objets du projet qu‚Äôon vient de fermer ne sont plus en m√©moire)¬†;</li>
<li>le r√©pertoire de travail de <strong>R</strong> est d√©fini comme √©tant le r√©pertoire du projet (d‚Äôo√π le fait que l‚Äôon n‚Äôa pas √† se pr√©occuper de d√©finir le r√©pertoire de travail lorsque l‚Äôon travaille avec des projets <strong>RStudio</strong>)¬†;</li>
<li>les objets cr√©√©s (et sauvegard√©s dans le fichier <code>.Rdata</code>) lors d‚Äôune pr√©c√©dente s√©ance de travail sont charg√©s en m√©moire¬†;</li>
<li>l‚Äôhistorique des commandes saisies lors de nos pr√©c√©dentes s√©ances de travail sont charg√©es dans l‚Äôonglet <em>History</em>¬†;</li>
<li>les scripts ouverts lors d‚Äôune pr√©c√©dente s√©ance de travail sont automatiquement ouverts¬†;</li>
<li>divers param√®tres de <strong>RStudio</strong> sont restaur√©s dans l‚Äô√©tat dans lequel ils √©taient la derni√®re fois que l‚Äôon a travaill√© sur ce projet.</li>
</ul>
<p>Autrement dit, lorsque l‚Äôon ouvre un projet <strong>RStudio</strong>, on revient √† l‚Äô√©tat de notre projet tel qu‚Äôil √©tait la derni√®re fois que l‚Äôon a travaill√© dessus. Pratique, non¬†?</p>
<p>Petite pr√©cision toutefois, les extensions que l‚Äôon avait charg√©es en m√©moire avec la fonction <code data-pkg="base">library</code> ne sont pas syst√©matiquement recharg√©es en m√©moire. Il faudra donc les appeler √† nouveau lors de notre s√©ance de travail.</p>
</div>
<div id="organiser-ses-fichiers_options-des-projets" class="section level3">
<h3>Options des projets</h3>
<p>Via le menu <em>Projects &gt; Projects options</em> (accessible via l‚Äôic√¥ne projets en haut √† droite), il est possible de personnaliser plusieurs options sp√©cifiquement pour ce projet.</p>
<p>On retiendra surtout les 3 options principales de l‚Äôonglet <em>General</em>¬†:</p>
<ul>
<li>√† l‚Äôouverture du projet, doit-on charger en m√©moire les objets sauvegard√©s lors d‚Äôune pr√©c√©dente s√©ance de travail¬†?</li>
<li>√† la fermeture du projet, doit-son sauvegarder (dans le fichier <code>.Rdata</code>) les diff√©rents objets en m√©moire¬†? Si l‚Äôon choisit l‚Äôoption <em>Ask</em>, alors une fen√™tre vous demandera s‚Äôil faut faire cette sauvegarde chaque fois que vous fermerez le projet.</li>
<li>√† la fermeture du projet, faut-il sauver l‚Äôhistorique des commandes¬†?</li>
</ul>
</div>
<div id="organiser-ses-fichiers_naviguer-dun-projet-a-un-autre" class="section level3">
<h3>Naviguer d‚Äôun projet √† un autre</h3>
<p><strong>RStudio</strong> se souvient des derniers projets sur lesquels vous avez travaill√©. Lorsque vous cliquez sur le menu projets, vous verrez une liste de ces diff√©rents projets. Il suffit de cliquer sur le nom du projet d√©sir√© pour fermer automatiquement le projet en cours et ouvrir le projet d√©sir√©.</p>
<p>Votre projet n‚Äôapparait pas dans la liste¬†? Pas de panique. Il suffit de s√©lectionner <em>Open project</em> puis de parcourir vos r√©pertoires pour indiquer √† <strong>RStudio</strong> le projet √† ouvrir.</p>
<p>Vous pouvez noter au passage une option <em>Open project in new window</em> qui permet d‚Äôouvrir un projet dans une nouvelle fen√™tre. En effet, il est tout √† fait possible d‚Äôavoir plusieurs projets ouverts en m√™me temps. Dans ce cas l√†, chaque projet aura sa propre session <strong>R</strong>. Les objets charg√©s en m√©moire pour le projet A ne seront pas accessibles dans le cadre du projet B et inversement.</p>
</div>
<div id="organiser-ses-fichiers_voir-aussi" class="section level3">
<h3>Voir aussi</h3>
<p>On pourra se r√©f√©rer √† la documentation officielle de <strong>RStudio</strong>¬†: <a href="https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects" class="uri">https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects</a>.</p>
</div>
</div>
<div id="organiser-ses-fichiers_appeler-un-script-depuis-un-autre-script" class="section level2">
<h2>Appeler un script depuis un autre script</h2>
<p>Au sein d‚Äôun m√™me projet, on peut avoir plusieurs <dfn data-index="script">scripts <strong>R</strong></dfn>. Cela permet de mieux organiser son code. Par exemple, on pourra avoir un premier script charg√© d‚Äôimporter les donn√©es, un second d√©di√© √† la cr√©ation de nouvelles variables et un troisi√®me d√©di√© aux analyses statistiques.</p>
<p>Il est possible d‚Äôappeler un script au sein d‚Äôun autre script √† l‚Äôaide de la fonction <code data-pkg="base">source</code> √† laquelle on pr√©cisera le nom de fichier du script en question.</p>
<p>Supposons par exemple que l‚Äôon ait pr√©par√© un script <code>preparation.R</code> charg√© d‚Äôimporter les donn√©es et de les mettre en forme. Au debut de notre script <code>analyses.R</code>, on pourra indiquer¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">source</span>(<span class="st">"preparation.R"</span>)</code></pre></div>
<p>Si l‚Äôon ex√©cute notre script <code>analyses.R</code>, au moment de l‚Äôappel √† <code>source("preparation.R")</code>, le fichier <code>preparation.R</code> sera charg√© en m√©moire et ex√©cut√©, puis le programme continuera avec les commandes suivant du fichier <code>analyses.R</code>.</p>
<p>Ici, on a indiqu√© √† <code data-pkg="base">source</code> le fichier <code>preparation.R</code> sans mention de r√©pertoire. D√®s lors, <strong>R</strong> va aller chercher ce fichier dans le r√©pertoire de travail. Sur un gros projet, on peut √™tre amen√© √† organiser ses fichiers en plusieurs sous-r√©pertoires pour une meilleure lisibilit√©. D√®s lors, il faudra indiquer le <dfn>chemin relatif</dfn> pour acc√©der √† un fichier, c‚Äôest-√†-dire le chemin √† partir du r√©pertoire de travail. Supposons que notre fichier <code>preparation.R</code> est enregistr√© dans un sous-r√©pertoire <code>import</code>. Dans ce cas-l√†, on appelera notre fichier ainsi¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">source</span>(<span class="st">"import/preparation.R"</span>)</code></pre></div>
<div class="note">
<p>On remarquera qu‚Äôon a utilis√© une barre oblique ou <em>slash</em> (<code>/</code>) entre le nom du r√©pertoire et le nom du fichier, ce qui est l‚Äôusage courant sous <strong>Linux</strong> et <strong>Mac OS X</strong>, tandis que sous <strong>Windows</strong> on utilise d‚Äôordinaire une barre oblique invers√©e ou <em>antislash</em> (<code>\</code>). Sous <strong>R</strong>, on utilisera toujours la barre oblique simple (<code>/</code>), <strong>R</strong> sachant ¬´¬†retrouver ses petits¬†¬ª selon le syst√®me d‚Äôexploitation.</p>
<p>Par ailleurs, l‚Äô<dfn>autocompl√©tion</dfn> de <strong>RStudio</strong> fonctionne aussi pour les noms de fichiers. Essayez par exemple d‚Äôappuyer sur la touche <kbd>Tab</kbd> apr√®s avoir taper les premi√®res lettres du nom de votre fichier.</p>
</div>
</div>
<div class="footnotes">
<hr/>
<ol>
<li id="organiser-ses-fichiers_fn1"><p>Dans lequel il sera possible de cr√©er des sous-r√©pertoires.<a href="#organiser-ses-fichiers_fnref1">‚Ü©</a></p></li>
</ol>
</div>

</article>
<article id="import-de-donnees">

<div class="fluid-row" id="import-de-donnees_header">


<h1 class="title">Import de donn√©es</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#import-de-donnees_importer-des-fichiers-texte">Importer des fichiers texte</a><ul>
<li><a href="#import-de-donnees_structure-dun-fichier-texte">Structure d‚Äôun fichier texte</a></li>
<li><a href="#import-de-donnees_read_table">La fonction read.table</a></li>
<li><a href="#import-de-donnees_interface-graphique-avec-rstudio">Interface graphique avec RStudio</a></li>
</ul></li>
<li><a href="#import-de-donnees_importer-depuis-des-logiciels-de-statistique">Importer depuis des logiciels de statistique</a><ul>
<li><a href="#import-de-donnees_spss">SPSS</a></li>
<li><a href="#import-de-donnees_sas">SAS</a></li>
<li><a href="#import-de-donnees_stata">Stata</a></li>
<li><a href="#import-de-donnees_excel">Excel</a></li>
<li><a href="#import-de-donnees_dbase">dBase</a></li>
</ul></li>
<li><a href="#import-de-donnees_donnees-spatiales">Donn√©es spatiales</a><ul>
<li><a href="#import-de-donnees_shapefile">Shapefile</a></li>
<li><a href="#import-de-donnees_rasters">Rasters</a></li>
</ul></li>
<li><a href="#import-de-donnees_autres-sources">Autres sources</a></li>
<li><a href="#import-de-donnees_sauver-ses-donnees">Sauver ses donn√©es</a></li>
</ul>
</div>

<p><dfn data-index="donn√©es, exporter"/><dfn data-index="exporter des donn√©es"/></p>
<div class="important">
<p>Importer des donn√©es est souvent l‚Äôune des premi√®re op√©rations que l‚Äôon effectue lorsque l‚Äôon d√©bute sous <strong>R</strong>, et ce n‚Äôest pas la moins compliqu√©e. En cas de probl√®me il ne faut donc pas h√©siter √† demander de l‚Äôaide par les diff√©rents moyens disponibles (voir le chapitre <a href="#ou-trouver-de-l-aide">O√π trouver de l‚Äôaide¬†?</a>) avant de se d√©courager.</p>
<p>N‚Äôh√©sitez donc pas √† relire r√©guli√®rement ce chapitre en fonction de vos besoins.</p>
<p>Avant toute chose, il est imp√©ratif de bien organiser ses diff√©rents fichiers (voir le <a href="#organiser-ses-fichiers">chapitre d√©di√©</a>). Concernant les donn√©es sources que l‚Äôon utilisera pour ses analyses, je vous recommande de les placer dans un sous-r√©pertoire d√©di√© de votre projet.</p>
<p>Lorsque l‚Äôon importe des donn√©es, il est √©galement imp√©ratif de v√©rifier que l‚Äôimport s‚Äôest correctement d√©roul√© (voir la section <a href="#premier-travail-avec-les-donnees_inspecter">Inspecter les donn√©es</a> du chapitre <em>Premier travail avec les donn√©es</em>).</p>
</div>
<div id="import-de-donnees_importer-des-fichiers-texte" class="section level2">
<h2>Importer des fichiers texte</h2>
<p>Les <dfn data-index="fichier texte">fichiers texte</dfn><dfn data-index="texte, fichier"/> constituent un des formats les plus largement support√©s par la majorit√© des logiciels statistiques. Presque tous permettent d‚Äôexporter des donn√©es dans un format texte, y compris les tableurs comme <strong>Libre Office</strong>, <strong>Open Office</strong> ou <strong>Excel</strong>.</p>
<p>Cependant, il existe une grande vari√©t√©s de format texte, qui peuvent prendre diff√©rents noms selon les outils, tels que <dfn data-index="texte tabul√©, fichier">texte tabul√©</dfn> ou <em>texte (s√©parateur¬†: tabulation)</em>, <strong>CSV</strong> <dfn data-index="CSV, fichier"/> (pour <em>comma-separated value</em>, sachant que suivant les logiciels le s√©parateur peut √™tre une virgule ou un point-virgule).</p>
<div id="import-de-donnees_structure-dun-fichier-texte" class="section level3">
<h3>Structure d‚Äôun fichier texte</h3>
<p>D√®s lors, avant d‚Äôimporter un fichier texte dans <strong>R</strong>, il est indispensable de regarder comment ce dernier est structur√©. Pour cela, il faut tout d‚Äôabord l‚Äôouvrir avec un √©diteur de texte pour voir comment les donn√©es se pr√©sentent.</p>
<p>Pour l‚Äôexemple, t√©l√©chargez le fichier <a href="http://larmarange.github.io/analyse-R/data/exemple_texte_tabule.txt" class="uri">http://larmarange.github.io/analyse-R/data/exemple_texte_tabule.txt</a> et copiez-le dans un sous-r√©pertoire <code>data</code> de votre projet. Nous pouvons directement ouvrir ce fichier avec <strong>RStudio</strong>, soit via le menu <em>File &gt; Open file</em>, soit en cliquant sur ce fichier dans l‚Äôonglet <em>Files</em> du quadrant inf√©rieur droit.</p>
<p>Le fichier appara√Æt d√®s lors dans un onglet d√©di√© du quadrant sup√©rieur gauche. Cependant, par d√©faut, on peut pas voir la diff√©rence entre un espace, une tabulation ou un retour √† la ligne, c‚Äôest-√†-dire entre les caract√®res qui sont invisibles √† l‚Äô√©cran. Pour les afficher, il faut se rendre dans le menu <em>Tools &gt; Global options &gt; Code &gt; Display</em> et activer l‚Äôoption <em>Show whitespaces characters</em>. D√®s lors, les espaces sont indiqu√©s par un petit point gris, les tabulations par une petite fl√®che et les retours √† la ligne par une sorte de ¬´¬†tiret pli√© √† droite vers le bas¬†¬ª.</p>
<figure>
<img src="images/capture_RStudio_visualisation_fichier_texte.png" alt="Visualisation d‚Äôun fichier texte sous RStudio"/>
<figcaption>
Visualisation d‚Äôun fichier texte sous RStudio
</figcaption>
</figure>
<p>Il importe de prendre note des √©l√©ments suivants¬†:</p>
<ul>
<li>La premi√®re ligne contient-elle le nom des variables¬†? Ici c‚Äôest le cas.</li>
<li>Quel est le caract√®re s√©parateur entre les diff√©rentes variables (encore appel√© <dfn>s√©parateur de champs</dfn>)¬†? Ici, <strong>RStudio</strong> affiche une petite fl√®che. Il s‚Äôagit donc d‚Äôune tabulation. Dans le cadre d‚Äôun fichier <strong>CSV</strong>, il aurait pu s‚Äôagir d‚Äôune virgule ou d‚Äôun point-virgule.</li>
<li>Quel est le caract√®re utilis√© pour indiquer les d√©cimales (le <dfn>s√©parateur d√©cimal</dfn>)¬†? Il s‚Äôagit en g√©n√©ral d‚Äôun point (√† l‚Äôanglo-saxonne) ou d‚Äôune virgule (√† la fran√ßaise). Ici, c‚Äôest la virgule qui est utilis√©e.</li>
<li>Les valeurs textuelles sont-elles encadr√©es par des guillemets et, si oui, s‚Äôagit-il de guillements simple (<code>'</code>) ou de guillemets doubles (<code>"</code>)¬†? Ici, il s‚Äôagit de guillemets simples.</li>
<li>Pour les variables textuelles, y a-t-il des <dfn data-index="valeur manquante">valeurs manquantes</dfn> <dfn data-index="manquante, valeur"/>et si oui comment sont-elles indiqu√©es¬†? Par exemple, le texte <code>NA</code> est parfois utilis√©. Dans notre exemple, il s‚Äôagit de la cha√Æne de caract√®res vide (que l‚Äôon note <code>""</code> sous <strong>R</strong>) qui est utilis√©e pour indiquer une valeur manquante.</li>
</ul>
</div>
<div id="import-de-donnees_read_table" class="section level3">
<h3>La fonction read.table</h3>
<p>La fonction de base permettant d‚Äôimporter un fichier texte est la fonction <code data-pkg="utils">read.table</code>. Elle accepte de tr√®s nombreuses options. Pour toutes les afficher, on aura recours √† <code>?read.table</code>. Les plus importantes sont¬†:</p>
<table style="width:28%;">
<colgroup>
<col width="15%"/>
<col width="12%"/>
</colgroup>
<thead>
<tr class="header">
<th align="left">Argument</th>
<th align="left">D√©tail</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>header</code></td>
<td align="left"><code>TRUE</code> ou <code>FALSE</code>¬†: indique si la premi√®re ligne du fichier contient le nom des variables</td>
</tr>
<tr class="even">
<td align="left"><code>sep</code></td>
<td align="left">le s√©parateur de champs¬†: s‚Äôil s‚Äôagit d‚Äôune virgule on indiquera <code>","</code>, pour une tabulation on entrera <code>"\t"</code></td>
</tr>
<tr class="odd">
<td align="left"><code>quote</code></td>
<td align="left">les guillemets utilis√©s autour des variables textes (si c‚Äôest le cas)¬†: on saisira <code>""</code> si pas de guillemets, <code>"'"</code> pour des guillemets simples et <code>"\""</code> pour des guillemets doubles</td>
</tr>
<tr class="even">
<td align="left"><code>dec</code></td>
<td align="left">le s√©parateur d√©cimal, usuellement <code>"."</code> ou <code>","</code></td>
</tr>
<tr class="odd">
<td align="left"><code>na.strings</code></td>
<td align="left">les valeurs textuelles qui doivent √™tre interpr√©t√©es comme manquantes</td>
</tr>
<tr class="even">
<td align="left"><code>stringsAsFactors</code></td>
<td align="left"><code>TRUE</code> ou <code>FALSE</code>¬†: les variables textuelles doivent-elles √™tre converties en facteurs¬†?</td>
</tr>
</tbody>
</table>
<div class="note">
<p>Certains caract√®res sont parfois pr√©c√©d√©s d‚Äôune barre oblique invers√©e ou <em>antislash</em> (<code>\</code>). Cela correspond √† des caract√®res sp√©ciaux. En effet, <code>"</code> est utilis√© pour d√©limiter dans le code le d√©but et la fin d‚Äôune cha√Æne de caract√®res. Comment indiquer √† <strong>R</strong> le caract√®re <code>"</code> proprement dit. Et bien avec <code>\"</code>. De m√™me, <code>\t</code> sera interpr√©t√© comme une tabulation et non comme la lettre <code>t</code>.</p>
<p>Pour une liste compl√®te des caract√®res sp√©ciaux, voir <code>?Quotes</code>.</p>
</div>
<p>Pour en revenir √† notre exemple, on l‚Äôimportera donc ainsi¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="st">"data/exemple_texte_tabule.txt"</span>, <span class="dt">header =</span> <span class="ot">TRUE</span>, 
  <span class="dt">sep =</span> <span class="st">"</span><span class="ch">\t</span><span class="st">"</span>, <span class="dt">quote =</span> <span class="st">"'"</span>, <span class="dt">dec =</span> <span class="st">","</span>, <span class="dt">na.strings =</span> <span class="st">""</span>)
d</code></pre></div>
<pre><code>  Sexe Age Taille     Etudes
1    F  45   1.67   primaire
2    H  32   1.83       &lt;NA&gt;
3    H  24   1.72 sup√É¬©rieur
4    F  36   1.64 secondaire
5    F  23   1.54 sup√É¬©rieur
6    H  18   1.62   primaire
7    F  34   1.68 secondaire</code></pre>
<p>A√Øe¬†! Que s‚Äôest-il pass√©¬†? Au lieu d‚Äôafficher <code>sup√©rieur</code>, <strong>R</strong> affiche <code>sup√É¬©rieur</code>. C‚Äôest un probl√®me classique d‚Äô<dfn>encodage</dfn> quand il y a des accents dans nos donn√©es. En effet, il y a de nombreuses mani√®res diff√©rentes en informatique de coder les diff√©rents caract√®res<a href="#import-de-donnees_fn1" class="footnoteRef" id="import-de-donnees_fnref1"><sup>1</sup></a>. La premi√®re chose √† faire est donc de v√©rifier la documentation associ√©e √† votre source de donn√©es. Il est possible que soit pr√©cis√© l‚Äôencodage des caract√®res.</p>
<p>Si ce n‚Äôest pas le cas, il est fort probable que vos donn√©es aient √©t√© encod√©es soit en <strong>latin1</strong> (langues europ√©ennes occidentales), soit en <strong>UTF-8</strong> (unicode). On pourra donc essayer ces deux encodages et regarder le r√©sultat obtenu. L‚Äôencodage peut √™tre pr√©cis√© avec l‚Äôargument <code>encoding</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="st">"data/exemple_texte_tabule.txt"</span>, <span class="dt">header =</span> <span class="ot">TRUE</span>, 
  <span class="dt">sep =</span> <span class="st">"</span><span class="ch">\t</span><span class="st">"</span>, <span class="dt">quote =</span> <span class="st">"'"</span>, <span class="dt">dec =</span> <span class="st">","</span>, <span class="dt">na.strings =</span> <span class="st">""</span>, 
  <span class="dt">encoding =</span> <span class="st">"latin1"</span>)
d</code></pre></div>
<pre><code>  Sexe Age Taille     Etudes
1    F  45   1.67   primaire
2    H  32   1.83       &lt;NA&gt;
3    H  24   1.72 sup√É¬©rieur
4    F  36   1.64 secondaire
5    F  23   1.54 sup√É¬©rieur
6    H  18   1.62   primaire
7    F  34   1.68 secondaire</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="st">"data/exemple_texte_tabule.txt"</span>, <span class="dt">header =</span> <span class="ot">TRUE</span>, 
  <span class="dt">sep =</span> <span class="st">"</span><span class="ch">\t</span><span class="st">"</span>, <span class="dt">quote =</span> <span class="st">"'"</span>, <span class="dt">dec =</span> <span class="st">","</span>, <span class="dt">na.strings =</span> <span class="st">""</span>, 
  <span class="dt">encoding =</span> <span class="st">"UTF-8"</span>)
d</code></pre></div>
<pre><code>  Sexe Age Taille     Etudes
1    F  45   1.67   primaire
2    H  32   1.83       &lt;NA&gt;
3    H  24   1.72  sup√©rieur
4    F  36   1.64 secondaire
5    F  23   1.54  sup√©rieur
6    H  18   1.62   primaire
7    F  34   1.68 secondaire</code></pre>
<p>Notre fichier √©tait encod√© en <strong>UTF-8</strong>. Probl√®me r√©solu¬†!</p>
<p><strong>R</strong> propose quelques fonctions qui sont des raccourcis de <code data-pkg="utils">read.table</code> correspondant aux situations les plus courantes¬†:</p>
<table style="width:28%;">
<colgroup>
<col width="6%"/>
<col width="6%"/>
<col width="6%"/>
<col width="6%"/>
</colgroup>
<thead>
<tr class="header">
<th align="left">Fonction</th>
<th align="center">S√©parateur de champs</th>
<th align="center">S√©parateur de d√©cimale</th>
<th align="center">Guillemets</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code data-pkg="utils" data-rdoc="read.table">read.csv</code></td>
<td align="center">virgule</td>
<td align="center">point</td>
<td align="center">doubles</td>
</tr>
<tr class="even">
<td align="left"><code data-pkg="utils" data-rdoc="read.table">read.csv2</code></td>
<td align="center">point-virgule</td>
<td align="center">point</td>
<td align="center">doubles</td>
</tr>
<tr class="odd">
<td align="left"><code data-pkg="utils" data-rdoc="read.table">read.delim</code></td>
<td align="center">tabulation</td>
<td align="center">point</td>
<td align="center">doubles</td>
</tr>
<tr class="even">
<td align="left"><code data-pkg="utils" data-rdoc="read.table">read.delim2</code></td>
<td align="center">tabulation</td>
<td align="center">virgule</td>
<td align="center">doubles</td>
</tr>
</tbody>
</table>
<div class="note">
<p>Une extension d√©di√©e √† l‚Äôimport de fichiers texte est en cours de d√©velopemment¬†: <code class="pkg">readr</code>. Elle permet notamment de sp√©cifier les colonnes correspondant des <dfn data-index="date, variable">variables date</dfn> afin qu‚Äôelles soient converties dans un format appropri√© √† l‚Äôimport.</p>
</div>
</div>
<div id="import-de-donnees_interface-graphique-avec-rstudio" class="section level3">
<h3>Interface graphique avec RStudio</h3>
<p><strong>RStudio</strong> fournit une interface graphique pour faciliter l‚Äôimport d‚Äôun fichier texte. Pour cela, il suffit d‚Äôaller dans le menu <em>Tools &gt; Import Dataset</em> et de choisir l‚Äôoption <em>From Text File</em> si le fichier est pr√©sent sur votre disque dur ou <em>From Web URL</em> si le fichier source est disponible sur Internet.</p>
<figure>
<img src="images/capture_RStudio_import_dataset.png" alt="Importer un fichier texte avec RStudio"/>
<figcaption>
Importer un fichier texte avec RStudio
</figcaption>
</figure>
<p>L‚Äôinterface de <strong>RStudio</strong> vous pr√©sente sous <em>Input File</em> les donn√©es telles qu‚Äôelles sont stock√©es dans le fichier. Dans la colonne de gauche, vous pouvez specifier le nom de l‚Äôobjet √† cr√©er et diff√©rentes options d‚Äôimport. En temps r√©el, vous pouvez pr√©visualiser le r√©sulat sous <em>Data Frame</em>.</p>
<p>Une fois que vous avez cliqu√© sur <em>Import</em>, le code n√©cessaire √† l‚Äôimport sera automatiquement copi√© dans la console et <strong>RStudio</strong> ouvrira le visualiseur de donn√©es afin que vous puissiez contr√¥ler le r√©sultat obtenu.</p>
</div>
</div>
<div id="import-de-donnees_importer-depuis-des-logiciels-de-statistique" class="section level2">
<h2>Importer depuis des logiciels de statistique</h2>
<p>Plusieurs extensions existent pour importer des fichiers de donn√©es issus d‚Äôautres logiciels de statistiques. En premier lieu, il y a <code class="pkg">foreign</code>, install√©e par d√©faut avec <strong>R</strong> et d√©crite en d√©tails dans le manuel <cite>R Data Import/Export</cite> disponible sur <a href="http://cran.r-project.org/manuals.html" class="uri">http://cran.r-project.org/manuals.html</a>. Un des soucis majeurs de cette extension r√©side dans la mani√®re dont elle traite les <dfn data-index="m√©tadonn√©e">m√©tadonn√©es</dfn> utilis√©es en particulier dans les fichiers <strong>SAS</strong>, <strong>SPSS</strong> et <strong>Stata</strong>, √† savoir les <dfn data-index="√©tiquette de variable">√©tiquettes de variable</dfn><dfn data-index="variable, √©tiquette"/>, les <dfn data-index="√©tiquette de valeur">√©tiquettes de valeur</dfn><dfn data-index="valeur, √©tiquette"/> et les <dfn data-index="valeur manquante d√©clar√©e">valeurs manquantes d√©clar√©es</dfn><dfn data-index="manquante, valeur"/>. En effet, chaque fonction va importer ces m√©tadonn√©es sous la forme d‚Äô<dfn data-index="attribut">attributs</dfn> dont le nom diff√®re d‚Äôune fonction √† l‚Äôautre. Par ailleurs, selon les options retenues, les <dfn data-index="variable labellis√©e">variables labellis√©es</dfn><dfn data-index="labellis√©e, variable"/> seront parfois transform√©es ou non en <dfn data-index="facteur">facteurs</dfn>. Enfin, <code class="pkg">foreign</code> ne sait pas toujours importer les diff√©rents types de variables repr√©sentant des dates et des heures.</p>
<p>L‚Äôextension <code class="pkg">haven</code> (qui fait partie du <q lang="en">Hadleyverse</q>) tente de rem√©dier √† plusieurs des limitations rencontr√©es avec <code class="pkg">foreign</code>¬†:</p>
<ul>
<li>le format des m√©tadonn√©es import√© est uniforme, quel que soit le type de fichier source (<strong>SAS</strong>, <strong>SPSS</strong> ou <strong>Stata</strong>)¬†;</li>
<li>les variables labellis√©es ne sont pas transform√©es en facteurs, mais h√©ritent d‚Äôune nouvelle classe <code data-pkg="haven">labelled</code>, la valeur initiale restant inchang√©e¬†;</li>
<li>les diff√©rents formats de date sont convertis dans des classes <strong>R</strong> appropri√©es, utilisables en particulier avec <code class="pkg">lubridate</code>¬†;</li>
<li><code class="pkg">haven</code> peut lire les fichiers <strong>SAS natifs</strong> (extension <code>.sas7bdat</code>) ce que ne peut pas faire <code class="pkg">foreign</code>¬†;</li>
<li><code class="pkg">haven</code> peut lire les fichiers <strong>Stata</strong> 13 et 14, alors que <code class="pkg">foreign</code> ne sait lire ces fichiers que jusqu‚Äô√† la version 12¬†;</li>
<li>les tableaux de donn√©es produits ont directement la classe <code data-pkg="dplyr">tbl_df</code> ce qui permets d‚Äôutiliser directement les fonctionnalit√©s de l‚Äôextension <code class="pkg">dplyr</code>.</li>
</ul>
<p>Cependant, <code class="pkg">haven</code> est encore une extension r√©cente. Plusieurs bugs ont √©t√© identifi√©s dans la version 0.2.0 disponible sur <strong>CRAN</strong> (en particulier concernant l‚Äôimportation des dates). Il est donc pr√©f√©rable d‚Äôutiliser la version de d√©veloppement disponible sur <strong>GitHub</strong> (qui g√®re correctement les dates).</p>
<p>Pour cela, vous pouvez utiliser le code ci-dessous¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">if (!<span class="kw">require</span>(devtools)) <span class="kw">install.packages</span>(<span class="st">"devtools"</span>)
devtools::<span class="kw">install_github</span>(<span class="st">"hadley\haven"</span>)</code></pre></div>
<div id="import-de-donnees_spss" class="section level3">
<h3>SPSS</h3>
<p>Les fichiers g√©n√©r√©s par <strong>SPSS</strong><dfn data-index="SPSS, fichier"/> sont de deux types¬†: les fichiers <strong>SPSS natifs</strong> natifs (extension <code>.sav</code>) et les fichiers au format <strong>SPSS export</strong> (extension <code>.por</code>).</p>
<p>Dans les deux cas, on aura recours √† la fonction <code data-pkg="haven">read_spss</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(haven)
donnees &lt;-<span class="st"> </span><span class="kw">read_spss</span>(<span class="st">"data/fichier.sav"</span>)</code></pre></div>
<div class="note">
<p>Si vous pr√©f√©rez utiliser l‚Äôextension <code class="pkg">foreign</code>, la fonction correspondante est <code data-kg="foreign">read.spss</code>. On indiquera √† la fonction de renvoyer un tableau de donn√©es avec l‚Äôargument <code>to.data.frame = TRUE</code>.</p>
<p>Par d√©faut, les variables num√©riques pour lesquelles des <dfn data-inndex="√©tiquette de valeur">√©tiquettes de valeurs</dfn><dfn data-index="valeur, √©tiquette"/> ont √©t√© d√©finies sont transform√©es en variables de type <dfn>facteur</dfn>, les √©tiquettes d√©finies dans <strong>SPSS</strong> √©tant utilis√©es comme <em>labels</em> du facteur. De m√™me, si des <dfn data-index="valeur manquante">valeurs manquantes</dfn> ont √©t√© d√©finies dans <strong>SPSS</strong>, ces derni√®res seront toutes transform√©es en <code>NA</code> (<strong>R</strong> ne permettant pas de g√©rer plusieurs types de valeurs manquantes). Ce comportement peut √™tre modifi√© avec <code>use.value.labels</code> et <code>use.missings</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(foreign)
donnees &lt;-<span class="st"> </span><span class="kw">read.spss</span>(<span class="st">"data/fichier.sav"</span>, <span class="dt">to.data.frame =</span> <span class="ot">TRUE</span>, 
  <span class="dt">use.value.labels =</span> <span class="ot">FALSE</span>, <span class="dt">use.missings =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p>Il est important de noter que <code data-pkg="foreign">read.spss</code> de l‚Äôextension <code class="pkg">foreign</code> ne sait pas importer les dates. Ces derni√®res sont donc automatiquement transform√©es en valeurs num√©riques.</p>
<p><strong>SPSS</strong> stocke les dates sous la forme du nombre de secondes depuis le d√©but du calendrier gr√©gorien, √† savoir le 14 octobre 1582. D√®s lors, si l‚Äôon des dates dans un fichier <strong>SPSS</strong> et que ces derni√®res ont √©t√© converties en valeurs num√©riques, on pourra essayer la commande suivante¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">donnees$date &lt;-<span class="st"> </span><span class="kw">as.POSIXlt</span>(donnees$date, <span class="dt">origin =</span> <span class="st">"1582-10-14"</span>)</code></pre></div>
</div>
</div>
<div id="import-de-donnees_sas" class="section level3">
<h3>SAS</h3>
<p>Les <dfn data-index="SAS, fichier">fichiers <strong>SAS</strong></dfn> se pr√©sentent en g√©n√©ral sous deux format¬†: format <strong>SAS export</strong> (extension <code>.xport</code> ou <code>.xpt</code>) ou format <strong>SAS natif</strong> (extension <code>.sas7bdat</code>).</p>
<p>Les fichiers <strong>SAS natifs</strong> peuvent √™tre import√©es directement avec <code data-pkg="haven">read_sas</code> de l‚Äôextension <code class="pkg">haven</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(haven)
donnees &lt;-<span class="st"> </span><span class="kw">read_sas</span>(<span class="st">"data/fichier.sas7bdat"</span>)</code></pre></div>
<p>Au besoin, on pourra pr√©ciser en deuxi√®me argument le nom d‚Äôun fichier <strong>SAS catalogue</strong> (extension <code>.sas7bcat</code>) contenant les m√©tadonn√©es du fichier de donn√©es.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(haven)
donnees &lt;-<span class="st"> </span><span class="kw">read_sas</span>(<span class="st">"data/fichier.sas7bdat"</span>, <span class="st">"data/fichier.sas7bcat"</span>)</code></pre></div>
<p>Les fichiers au format <strong>SAS export</strong> peuvent √™tre import√©s via la fonction <code data-pkg="foreign">read.xport</code> de l‚Äôextension <code class="pkg">foreign</code>. Celle-ci s‚Äôutilise tr√®s simplement, en lui passant le nom du fichier en argument¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(foreign)
donnees &lt;-<span class="st"> </span><span class="kw">read.xport</span>(<span class="st">"data/fichier.xpt"</span>)</code></pre></div>
</div>
<div id="import-de-donnees_stata" class="section level3">
<h3>Stata</h3>
<p>Pour les <dfn data-index="Stata, fichier">fichiers <strong>Stata</strong></dfn> (extension <code>.dta</code>), on aura recours aux fonctions <code data-pkg="haven">read_dta</code> et <code data-pkg="haven" data-rdoc="read_dta">read_stata</code> de l‚Äôextension <code class="pkg">haven</code>. Ces deux fonctions sont identiques.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(haven)
donnees &lt;-<span class="st"> </span><span class="kw">read_dta</span>(<span class="st">"data/fichier.dta"</span>)</code></pre></div>
<div class="note">
<p>Si l‚Äôon pr√©f√®re utiliser l‚Äôextension <code class="pkg">foreign</code>, on aura recours √† la fonction <code data-pkg="foreign">read.dta</code>.</p>
<p>L‚Äôoption <code>convert.factors</code> indique si les variables labellis√©es doit √™tre converties automatiquement en facteurs. Pour un r√©sultat similaire √† celui de <code class="pkg">haven</code>, on choisira donc¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(foreign)
donnees &lt;-<span class="st"> </span><span class="kw">read.dta</span>(, <span class="dt">convert.factors =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p>L‚Äôoption <code>convert.dates</code> permet de convertir les dates du format <strong>Stata</strong> dans un format de dates g√©r√© par <strong>R</strong>. Cependant, cela ne marche pas toujours. Dans ces cas l√†, l‚Äôop√©ration suivante peut fonctionner. Sans garantie n√©anmoins, il est toujours vivement conseill√© de v√©rifier le r√©sultat obtenu¬†!</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">donnees$date &lt;-<span class="st"> </span><span class="kw">as.Date</span>(donnees$Date, <span class="dt">origin =</span> <span class="st">"1960-01-01"</span>)</code></pre></div>
</div>
</div>
<div id="import-de-donnees_excel" class="section level3">
<h3>Excel</h3>
<p>Une premi√®re approche pour importer des donn√©es <strong>Excel</strong> dans <strong>R</strong> consiste √† les exporter depuis <strong>Excel</strong> dans un fichier texte (texte tabul√© ou <strong>CSV</strong>) puis de suivre la proc√©dure d‚Äôimportation d‚Äôun fichier texte.</p>
<p>Une feuille <strong>Excel</strong> peut √©galement √™tre import√©e directement avec l‚Äôextension <code class="pkg">readxl</code> qui appartient √† la m√™me famille que <code class="pkg">haven</code> et <code class="pkg">readr</code>.</p>
<p>La fonction <code data-pkg="readxl">read_excel</code> permet d‚Äôimporter √† la fois des fichiers <code>.xls</code> (<strong>Excel</strong> 2003 et pr√©c√©dents) et <code>.xlsx</code> (<strong>Excel</strong> 2007 et suivants).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(readxl)
donnees &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="st">"data/fichier.xlsx"</span>)</code></pre></div>
<p>Une seule feuille de calculs peut √™tre import√©e √† la fois. On pourra pr√©ciser la feuille d√©sir√©e avec <code>sheet</code> en indiquant soit le nom de la feuille, soit sa position (premi√®re, seconde, ‚Ä¶).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">donnees &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="st">"data/fichier.xlsx"</span>, <span class="dt">sheet =</span> <span class="dv">3</span>)
donnees &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="st">"data/fichier.xlsx"</span>, <span class="dt">sheet =</span> <span class="st">"mes_donnees"</span>)</code></pre></div>
<p>On pourra pr√©ciser avec <code>col_names</code> si la premi√®re ligne contient le nom des variables.</p>
<p>Par d√©faut, <code data-pkg="readxl">read_excel</code> va essayer de deviner le type (num√©rique, textuelle, date) de chaque colonne. Au besoin, on pourra indiquer le type souhait√© de chaque colonne avec <code>col_types</code>.</p>
<div class="note">
<p>Une alternative est l‚Äôextension <code class="pkg">xlsx</code> qui propose deux fonctions diff√©rentes pour importer des fichiers <strong>Excel</strong>¬†: <code data-pkg="xlsx">read.xlsx</code> et <code data-pkg="xlsx" data-rdoc="read.xlsx">read.xlsx2</code>. La finalit√© est la m√™me mais leur fonctionnement interne est diff√©rent. En cas de difficult√©s d‚Äôimport, on pourra tester l‚Äôautre pour voir si le r√©sultat est diff√©rent. Il est imp√©ratif de sp√©cifier la position de la feuille de calculs que l‚Äôon souhaite importer.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(xlsx)
donnees &lt;-<span class="st"> </span><span class="kw">read.xlsx</span>(<span class="st">"data/fichier.xlsx"</span>, <span class="dv">1</span>)</code></pre></div>
</div>
</div>
<div id="import-de-donnees_dbase" class="section level3">
<h3>dBase</h3>
<p>L‚ÄôInsee diffuse ses fichiers depuis son site Web au format <strong>dBase</strong> (extension <code>.dbf</code>). Ceux-ci sont directement lisibles dans <strong>R</strong> avec la fonction <code data-pkg="foreign">read.dbf</code> de l‚Äôextension <code class="pkg">foreign</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(foreign)
donnees &lt;-<span class="st"> </span><span class="kw">read.dbf</span>(<span class="st">"data/fichier.dbf"</span>)</code></pre></div>
<p>La principale limitation des <dfn data-index="dBase, fichier">fichiers <strong>dBase</strong></dfn> est de ne pas g√©rer plus de 256 colonnes. Les tables des enqu√™tes de l‚ÄôInsee sont donc parfois d√©coup√©es en plusieurs fichiers <code>.dbf</code> qu‚Äôil convient de fusionner avec la fonction <code data-pkg="base">merge</code>. L‚Äôutilisation de cette fonction est d√©taill√©e dans le chapitre sur la <a href="pem_manipulation.html#fusion_tables">manipulation de donn√©es</a>.</p>
</div>
</div>
<div id="import-de-donnees_donnees-spatiales" class="section level2">
<h2>Donn√©es spatiales</h2>
<div id="import-de-donnees_shapefile" class="section level3">
<h3>Shapefile</h3>
<p>Les <dfn date-index="shapefile, fichier">fichiers <strong>Shapefile</strong></dfn> sont couramment utilis√©s pour √©changer des donn√©es g√©or√©f√©renc√©es. La majorit√© des logiciels de <strong>SIG</strong> (syst√®mes d‚Äôinformations g√©ographiques) sont en capacit√© d‚Äôimporter et d‚Äôexporter des donn√©es dans ce format.</p>
<p>Un <strong>shapefile</strong> contient toute l‚Äôinformation li√©e √† la g√©om√©trie des objets d√©crits, qui peuvent √™tre¬†:</p>
<ul>
<li>des points</li>
<li>des lignes</li>
<li>des polygones</li>
</ul>
<p>Son extension est classiquement <code>.shp</code> et il est toujours accompagn√© de deux autres fichiers de m√™me nom et d‚Äôextensions¬†:</p>
<ul>
<li>un fichier <code>.dbf</code>, qui contient les donn√©es attributaires relatives aux objets contenus dans le <strong>shapefile</strong></li>
<li>un fichier <code>.shx</code>, qui stocke l‚Äôindex de la g√©om√©trie</li>
</ul>
<p>D‚Äôautres fichiers peuvent √™tre √©galement fournis¬†:</p>
<ul>
<li><code>.sbn</code> et <code>.sbx</code> - index spatial des formes.</li>
<li><code>.fbn</code> et <code>.fbx</code> - index spatial des formes pour les shapefile en lecture seule</li>
<li><code>.ain</code> et <code>.aih</code> - index des attributs des champs actifs dans une table ou dans une table d‚Äôattributs du th√®me</li>
<li><code>.prj</code> - information sur le syst√®me de coordonn√©es</li>
<li><code>.shp.xml</code> - m√©tadonn√©es du shapefile.</li>
<li><code>.atx</code> - fichier d‚Äôindex des attributs pour le fichier <code>.dbf</code></li>
<li><code>.qix</code></li>
</ul>
<p>En premier lieu, il importe que tous les fichiers qui compose un m√™me <strong>shapefile</strong> soit situ√©s dans le m√™me r√©pertoire et aient le m√™me nom (seule l‚Äôextension √©tant diff√©rente).</p>
<p>L‚Äôextension <code class="pkg">maptools</code> fournit les fonctions permettant d‚Äôimporter un <strong>shapefile</strong> dans <strong>R</strong>. Le r√©sultat obtenu utilisera l‚Äôune des diff√©rentes classes spatiales fournies par l‚Äôextension <code class="pkg">sp</code>.</p>
<p>La fonction g√©n√©rique d‚Äôimport est <code data-pkg="maptools">readShapeSpatial</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(maptools)
donnees_spatiales &lt;-<span class="st"> </span><span class="kw">readShapeSpatial</span>(<span class="st">"data/fichier.shp"</span>)</code></pre></div>
<p>Si l‚Äôon connait d√©j√† le type de donn√©es du <strong>shapefile</strong> (points, lignes ou polygones), on pourra utiliser directement <code data-pkg="maptools">readShapePoints</code>, <code data-pkg="maptools">readShapeLines</code> ou <code data-pkg="maptools">readShapePoly</code>.</p>
</div>
<div id="import-de-donnees_rasters" class="section level3">
<h3>Rasters</h3>
<p>Il existe de multiples formats pour stocker des donn√©es matricielles spatiales. L‚Äôun des plus communs est le format <strong>ASCII grid</strong> aussi connu sous le nom de <strong>Arc/Info ASCII grid</strong> ou <strong>ESRI grid</strong>. L‚Äôextension de ce format n‚Äôest pas toujours uniforme. On trouve parfois <code>.asc</code> ou encore <code>.ag</code> voir m√™me <code>.txt</code>.</p>
<p>Pour importer ce type de fichier, on pourra avoir recours √† la fonction <code data-pkg="maptools">readAsciiGrid</code> de l‚Äôextension <code class="pkg">maptools</code>. Le r√©sultat sera, par d√©faut, au format <code data-pkg="sp" data-rdoc="SpatialGridDataFrame-class">SpatialGridDataFrame</code> de l‚Äôextension <code class="pkg">sp</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(maptools)
donnees_spatiales &lt;-<span class="st"> </span><span class="kw">readAsciiGrid</span>(<span class="st">"data/fichier.asc"</span>)</code></pre></div>
<p>L‚Äôextension <code class="pkg">raster</code> permet d‚Äôeffectuer de multiples manipulations sur les donn√©es du type <dfn data-index="raster, fichier">raster</dfn>. Elle est en capacit√© d‚Äôimporter des donn√©es depuis diff√©rents formats (plus pr√©cis√©ment les formats pris en charge par la librairie <strong>GDAL</strong>).</p>
<p>De plus, les fichiers raster pouvant √™tre particuli√®rement volumineux (jusqu‚Äô√† plusieurs Go de donn√©es), l‚Äôextension <code class="pkg">raster</code> est capable de travailler sur un fichier raster sans avoir √† le charger int√©gralement en m√©moire.</p>
<p>Pour plus d‚Äôinformations, voir les fonctions <code data-pkg="raster">raster</code> et <code data-pkg="raster">getValues</code>.</p>
</div>
</div>
<div id="import-de-donnees_autres-sources" class="section level2">
<h2>Autres sources</h2>
<p><strong>R</strong> offre de tr√®s nombreuses autres possibilit√©s pour acc√©der aux donn√©es. Il est ainsi possible d‚Äôimporter des donn√©es depuis d‚Äôautres applications qui n‚Äôont pas √©t√© √©voqu√©es (<strong>Epi Info</strong>, <strong>S-Plus</strong>, etc.), de se connecter √† un syst√®me de base de donn√©es relationelle type <strong>MySQL</strong>, de lire des donn√©es via <strong>ODBC</strong> ou des connexions r√©seau, etc.</p>
<p>Pour plus d‚Äôinformations on consultera le manuel <em>R Data Import/Export</em>¬†:<br/> <a href="http://cran.r-project.org/manuals.html" class="uri">http://cran.r-project.org/manuals.html</a>.</p>
</div>
<div id="import-de-donnees_sauver-ses-donnees" class="section level2">
<h2>Sauver ses donn√©es</h2>
<p><strong>R</strong> dispose √©galement de son propre format pour sauvegarder et √©changer des donn√©es. On peut sauver n‚Äôimporte quel objet cr√©√© avec <strong>R</strong> et il est possible de sauver plusieurs objets dans un m√™me fichier. L‚Äôusage est d‚Äôutiliser l‚Äôextension <code>.RData</code> pour les fichiers de donn√©es <strong>R</strong>. La fonction √† utiliser s‚Äôappelle tout simplement <code data-pkg="base">save</code>.</p>
<p>Par exemple, si l‚Äôon souhaite sauvegarder son tableau de donn√©es <code>d</code> ainsi que les objets <code>tailles</code> et <code>poids</code> dans un fichier <code>export.RData</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">save</span>(d, tailles, poids, <span class="dt">file =</span> <span class="st">"export.RData"</span>)</code></pre></div>
<p>√Ä tout moment, il sera toujours possible de recharger ces donn√©es en m√©moire √† l‚Äôaide de la fonction <code data-pkg="base">load</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">load</span>(<span class="st">"export.RData"</span>)</code></pre></div>
<div class="important">
<p>Si entre temps vous aviez modifi√© votre tableau <code>d</code>, vos modifications seront perdues. En effet, si lors du chargement de donn√©es, un objet du m√™me nom existe en m√©moire, ce dernier sera remplac√© par l‚Äôobjet import√©.</p>
</div>
<p>La fonction <code data-pkg="base" data-rdoc="save">save.image</code> est un raccourci pour sauvergarder tous les objets de la session de travail dans le fichier <code>.RData</code> (un fichier un peu √©trange car il n‚Äôa pas de nom mais juste une extension). Lors de la fermeture de <strong>RStudio</strong>, il vous sera demand√© si vous souhaitez enregistrer votre session. Si vous r√©pondez <em>Oui</em>, c‚Äôest cette fonction <code data-pkg="base" data-rdoc="save">save.image</code> qui sera appliqu√©e.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">save.image</span>()</code></pre></div>
</div>
<div class="footnotes">
<hr/>
<ol>
<li id="import-de-donnees_fn1"><p>Pour plus de d√©tails, ne pas h√©siter √† aller lire la page <strong>Wikipedia</strong> <a href="http://fr.wikipedia.org/wiki/Codage_des_caract%C3%A8res">Codage des caract√®res</a>. Historiquement, les premiers syst√®mes d‚Äôencodage de caract√®res ne permettaient pas de coder les lettres non accentu√©s, ce qui convient tr√®s bien en anglais, mais pose tout un tas de probl√®mes pour les autres langues. D√®s lors, de nombreux syst√®mes ont √©t√© d√©velopp√©s, plus ou moins diff√©rents pour chaque langue. Depuis les ann√©es 1990, un projet appel√© <em>Unicode</em> vise √† d√©finir une norme universelle permettant de rendre compte de l‚Äôensemble des langues humaines. Le format <strong>UTF-8</strong> issu du projet <em>Unicode</em> est aujourd‚Äôhui le format le plus employ√© sur Internet.<a href="#import-de-donnees_fnref1">‚Ü©</a></p></li>
</ol>
</div>

</article>
<article id="recodage">

<div class="fluid-row" id="recodage_header">


<h1 class="title">Recodage</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#recodage_renommer-des-variables">Renommer des variables</a></li>
<li><a href="#recodage_convertir-une-variable">Convertir une variable</a></li>
<li><a href="#recodage_decouper_en_classes">D√©couper une variable num√©rique en classes</a></li>
<li><a href="#recodage_regrouper_modalites">Regrouper les modalit√©s d‚Äôune variable</a></li>
<li><a href="#recodage_variables-calculees">Variables calcul√©es</a></li>
<li><a href="#recodage_combiner-plusieurs-variables">Combiner plusieurs variables</a></li>
<li><a href="#recodage_variables-scores">Variables scores</a></li>
<li><a href="#recodage_verification-des-recodages">V√©rification des recodages</a></li>
</ul>
</div>

<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>
<div class="note">
<p>La version originale de ce chapitre a √©t√© √©crite par Julien Barnier dans le cadre du support de cours <a href="https://github.com/juba/intro-r">Introduction √† R</a>.</p>
</div>
<p>Le <dfn>recodage de variables</dfn><dfn data-index="variable, recodage"/> est une op√©ration extr√™mement fr√©quente lors du traitement d‚Äôenqu√™te. Celui-ci utilise soit l‚Äôune des formes d‚Äôindexation d√©crites pr√©c√©demment, soit des fonctions <em>ad hoc</em> de <strong>R</strong>.</p>
<p>On passe ici en revue diff√©rents types de recodage parmi les plus courants. Les exemples s‚Äôappuient, comme pr√©c√©demment, sur l‚Äôextrait de l‚Äôenqu√™te <em>Histoire de vie</em>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">data</span>(hdv2003)
d &lt;-<span class="st"> </span>hdv2003</code></pre></div>
<div id="recodage_renommer-des-variables" class="section level2">
<h2>Renommer des variables</h2>
<p>Une op√©ration courante lorsqu‚Äôon a import√© des variables depuis une source de donn√©es externe consiste √† renommer les variables import√©es. Sous <strong>R</strong> les noms de variables doivent √™tre √† la fois courts et explicites.</p>
<div class="important">
<p>Les noms de variables peuvent contenir des lettres, des chiffres (mais ils ne peuvent pas commencer par un chiffre), les symboles <code>.</code> et <code>_</code> et doivent commencer par une lettre. <strong>R</strong> fait la diff√©rence entre les majuscules et les minuscules, ce qui signifie que <em>x</em> et <em>X</em> sont deux noms de variable diff√©rents. On √©vitera √©galement d‚Äôutiliser des caract√®res accentu√©s dans les noms de variable. Comme les espaces ne sont pas autoris√©s, on pourra les remplacer par un point ou un tiret bas.</p>
</div>
<p>On peut lister les noms des variables d‚Äôun tableau de donn√©es (<em>data.frame</em>) √† l‚Äôaide de la fonction <code data-pkg="base">names</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(d)</code></pre></div>
<pre><code> [1] "id"            "age"          
 [3] "sexe"          "nivetud"      
 [5] "poids"         "occup"        
 [7] "qualif"        "freres.soeurs"
 [9] "clso"          "relig"        
[11] "trav.imp"      "trav.satisf"  
[13] "hard.rock"     "lecture.bd"   
[15] "peche.chasse"  "cuisine"      
[17] "bricol"        "cinema"       
[19] "sport"         "heures.tv"    </code></pre>
<p>Cette fonction peut √©galement √™tre utilis√©e pour renommer l‚Äôensemble des variables. Si par exemple on souhaitait passer les noms de toutes les variables en majuscules, on pourrait faire¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d.maj &lt;-<span class="st"> </span>d
<span class="kw">names</span>(d.maj) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"ID"</span>, <span class="st">"AGE"</span>, <span class="st">"SEXE"</span>, <span class="st">"NIVETUD"</span>, <span class="st">"POIDS"</span>, 
  <span class="st">"OCCUP"</span>, <span class="st">"QUALIF"</span>, <span class="st">"FRERES.SOEURS"</span>, <span class="st">"CLSO"</span>, <span class="st">"RELIG"</span>, 
  <span class="st">"TRAV.IMP"</span>, <span class="st">"TRAV.SATISF"</span>, <span class="st">"HARD.ROCK"</span>, <span class="st">"LECTURE.BD"</span>, 
  <span class="st">"PECHE.CHASSE"</span>, <span class="st">"CUISINE"</span>, <span class="st">"BRICOL"</span>, <span class="st">"CINEMA"</span>, 
  <span class="st">"SPORT"</span>, <span class="st">"HEURES.TV"</span>)
<span class="kw">summary</span>(d.maj$SEXE)</code></pre></div>
<pre><code>Homme Femme 
  899  1101 </code></pre>
<p>Ce type de renommage peut √™tre utile lorsqu‚Äôon souhaite passer en revue tous les noms de variables d‚Äôun fichier import√© pour les corriger le cas √©ch√©ant. Pour faciliter un peu ce travail pas forc√©ment passionant, on peut utiliser la fonction <code data-pkg="base">dput</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dput</span>(<span class="kw">names</span>(d))</code></pre></div>
<pre><code>c("id", "age", "sexe", "nivetud", "poids", "occup", "qualif", 
"freres.soeurs", "clso", "relig", "trav.imp", "trav.satisf", 
"hard.rock", "lecture.bd", "peche.chasse", "cuisine", "bricol", 
"cinema", "sport", "heures.tv")</code></pre>
<p>On obtient en r√©sultat la liste des variables sous forme de vecteur d√©clar√©. On n‚Äôa plus alors qu‚Äô√† copier/coller cette cha√Æne, rajouter <code>names(d) &lt;-</code> devant et modifier un √† un les noms des variables.</p>
<p>Si on souhaite seulement modifier le nom d‚Äôune variable, on peut utiliser la fonction <code data-pkg="questionr">rename.variable</code> de l‚Äôextension <code class="pkg">questionr</code>. Celle-ci prend en argument le tableau de donn√©es, le nom actuel de la variable et le nouveau nom. Par exemple, si on veut renommer la variable <em>bricol</em> du tableau de donn√©es <code>d</code> en <em>bricolage</em>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d &lt;-<span class="st"> </span><span class="kw">rename.variable</span>(d, <span class="st">"bricol"</span>, <span class="st">"bricolage"</span>)
<span class="kw">table</span>(d$bricolage)</code></pre></div>
<pre><code>
 Non  Oui 
1147  853 </code></pre>
</div>
<div id="recodage_convertir-une-variable" class="section level2">
<h2>Convertir une variable</h2>
<p>Il peut arriver qu‚Äôon veuille transformer une variable d‚Äôun type dans un autre.</p>
<p>Par exemple, on peut consid√©rer que la variable num√©rique <em>freres.soeurs</em> est une ¬´¬†fausse¬†¬ª variable num√©rique et qu‚Äôune repr√©sentation sous forme de facteur serait plus ad√©quate. Dans ce cas il suffit de faire appel √† la fonction <code data-pkg="base">factor</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$fs.fac &lt;-<span class="st"> </span><span class="kw">factor</span>(d$freres.soeurs)
<span class="kw">levels</span>(d$fs.fac)</code></pre></div>
<pre><code> [1] "0"  "1"  "2"  "3"  "4"  "5"  "6"  "7"  "8" 
[10] "9"  "10" "11" "12" "13" "14" "15" "16" "18"
[19] "22"</code></pre>
<p>La conversion d‚Äôune variable caract√®res en facteur se fait de la m√™me mani√®re.</p>
<p>La conversion d‚Äôun facteur ou d‚Äôune variable num√©rique en variable caract√®res peut se faire √† l‚Äôaide de la fonction <code data-pkg="base" data-rdoc="character">as.character</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$fs.char &lt;-<span class="st"> </span><span class="kw">as.character</span>(d$freres.soeurs)
d$qualif.char &lt;-<span class="st"> </span><span class="kw">as.character</span>(d$qualif)</code></pre></div>
<p>La conversion d‚Äôun facteur en caract√®res est fr√©quemment utilis√© lors des recodages du fait qu‚Äôil est impossible d‚Äôajouter de nouvelles modalit√©s √† un facteur de cette mani√®re. Par exemple, la premi√®re des commandes suivantes g√©n√®re un message d‚Äôavertissement, tandis que les deux autres fonctionnent¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d.temp &lt;-<span class="st"> </span>d
d.temp$qualif[d.temp$qualif ==<span class="st"> "Ouvrier specialise"</span>] &lt;-<span class="st"> "Ouvrier"</span></code></pre></div>
<pre><code>Warning in `[&lt;-.factor`(`*tmp*`, d.temp$qualif ==
"Ouvrier specialise", : invalid factor level, NA
generated</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$qualif.char &lt;-<span class="st"> </span><span class="kw">as.character</span>(d$qualif)
d$qualif.char[d$qualif.char ==<span class="st"> "Ouvrier specialise"</span>] &lt;-<span class="st"> "Ouvrier"</span></code></pre></div>
<p>Dans le premier cas, le message d‚Äôavertissement indique que toutes les modalit√©s ¬´¬†Ouvrier specialise¬†¬ª de notre variable <em>qualif</em> ont √©t√© remplac√©es par des valeurs manquantes <code>NA</code>.</p>
<p>Enfin, une variable de type caract√®res dont les valeurs seraient des nombres peut √™tre convertie en variable num√©rique avec la fonction <code data-pkg="base" data-rdoc="numeric">as.numeric</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">v &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"1"</span>, <span class="st">"3.1415"</span>, <span class="st">"4"</span>, <span class="st">"5.6"</span>, <span class="st">"1"</span>, <span class="st">"4"</span>)
v</code></pre></div>
<pre><code>[1] "1"      "3.1415" "4"      "5.6"    "1"     
[6] "4"     </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as.numeric</span>(v)</code></pre></div>
<pre><code>[1] 1.0000 3.1415 4.0000 5.6000 1.0000 4.0000</code></pre>
<div class="important">
<p>Lorsque l‚Äôon convertit un facteur avec <code data-pkg="base" data-rdoc="numeric">as.numeric</code>, on obtient le num√©ro de chaque facteur (premi√®re modalit√©, seconde modalit√©, etc.). Si la valeur num√©rique qui nous int√©resse est en fait contenu dans le nom des modalit√©s, il faut connvertir au pr√©alable notre facteur en variable textuelle.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">vf &lt;-<span class="st"> </span><span class="kw">factor</span>(v)
vf</code></pre></div>
<pre><code>[1] 1      3.1415 4      5.6    1      4     
Levels: 1 3.1415 4 5.6</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as.numeric</span>(vf)</code></pre></div>
<pre><code>[1] 1 2 3 4 1 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as.numeric</span>(<span class="kw">as.character</span>(vf))</code></pre></div>
<pre><code>[1] 1.0000 3.1415 4.0000 5.6000 1.0000 4.0000</code></pre>
</div>
</div>
<div id="recodage_decouper_en_classes" class="section level2">
<h2>D√©couper une variable num√©rique en classes</h2>
<p>Le premier type de recodage consiste √† d√©couper une variable de type num√©rique en un certain nombre de classes. On utilise pour cela la fonction <code data-pkg="base">cut</code>.</p>
<p>Celle-ci prend, outre la variable √† d√©couper, un certain nombre d‚Äôarguments¬†:</p>
<ul>
<li><code>breaks</code> indique soit le nombre de classes souhait√©, soit, si on lui fournit un vecteur, les limites des classes¬†;</li>
<li><code>labels</code> permet de modifier les noms de modalit√©s attribu√©s aux classes¬†;</li>
<li><code>include.lowest</code> et <code>right</code> influent sur la mani√®re dont les valeurs situ√©es √† la fronti√®re des classes seront inclues ou exclues¬†;</li>
<li><code>dig.lab</code> indique le nombre de chiffres apr√®s la virgule √† conserver dans les noms de modalit√©s.</li>
</ul>
<p>Prenons tout de suite un exemple et tentons de d√©couper notre variable <em>age</em> en cinq classes et de placer le r√©sultat dans une nouvelle variable nomm√©e <em>age5cl</em>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$age5cl &lt;-<span class="st"> </span><span class="kw">cut</span>(d$age, <span class="dv">5</span>)
<span class="kw">table</span>(d$age5cl)</code></pre></div>
<pre><code>
(17.9,33.8] (33.8,49.6] (49.6,65.4] (65.4,81.2] 
        454         628         556         319 
(81.2,97.1] 
         43 </code></pre>
<p>Par d√©faut <strong>R</strong> nous a bien cr√©√© cinq classes d‚Äôamplitudes √©gales. La premi√®re classe va de 16,9 √† 32,2 ans (en fait de 17 √† 32), etc.</p>
<p>Les fronti√®res de classe seraient plus pr√©sentables si elles utilisaient des nombres ronds. On va donc sp√©cifier manuellement le d√©coupage souhait√©, par tranches de 20 ans¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$age20 &lt;-<span class="st"> </span><span class="kw">cut</span>(d$age, <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">20</span>, <span class="dv">40</span>, <span class="dv">60</span>, <span class="dv">80</span>, <span class="dv">100</span>))
<span class="kw">table</span>(d$age20)</code></pre></div>
<pre><code>
  (0,20]  (20,40]  (40,60]  (60,80] (80,100] 
      72      660      780      436       52 </code></pre>
<p>On aurait pu tenir compte des √¢ges extr√™mes pour la premi√®re et la derni√®re valeur¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">range</span>(d$age)</code></pre></div>
<pre><code>[1] 18 97</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$age20 &lt;-<span class="st"> </span><span class="kw">cut</span>(d$age, <span class="kw">c</span>(<span class="dv">18</span>, <span class="dv">20</span>, <span class="dv">40</span>, <span class="dv">60</span>, <span class="dv">80</span>, <span class="dv">97</span>))
<span class="kw">table</span>(d$age20)</code></pre></div>
<pre><code>
(18,20] (20,40] (40,60] (60,80] (80,97] 
     55     660     780     436      52 </code></pre>
<p>Les symboles dans les noms attribu√©s aux classes ont leur importance¬†: <code>(</code> signifie que la fronti√®re de la classe est exclue, tandis que <code>[</code> signifie qu‚Äôelle est incluse. Ainsi, <code>(20,40]</code> signifie ¬´¬†strictement sup√©rieur √† 20 et inf√©rieur ou √©gal √† 40¬†¬ª.</p>
<p>On remarque que du coup, dans notre exemple pr√©c√©dent, la valeur minimale, 18, est exclue de notre premi√®re classe, et qu‚Äôune observation est donc absente de ce d√©coupage. Pour r√©soudre ce probl√®me on peut soit faire commencer la premi√®re classe √† 17, soit utiliser l‚Äôoption <code>include.lowest=TRUE</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$age20 &lt;-<span class="st"> </span><span class="kw">cut</span>(d$age, <span class="kw">c</span>(<span class="dv">17</span>, <span class="dv">20</span>, <span class="dv">40</span>, <span class="dv">60</span>, <span class="dv">80</span>, <span class="dv">97</span>))
<span class="kw">table</span>(d$age20)</code></pre></div>
<pre><code>
(17,20] (20,40] (40,60] (60,80] (80,97] 
     72     660     780     436      52 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$age20 &lt;-<span class="st"> </span><span class="kw">cut</span>(d$age, <span class="kw">c</span>(<span class="dv">18</span>, <span class="dv">20</span>, <span class="dv">40</span>, <span class="dv">60</span>, <span class="dv">80</span>, <span class="dv">97</span>), <span class="dt">include.lowest =</span> <span class="ot">TRUE</span>)
<span class="kw">table</span>(d$age20)</code></pre></div>
<pre><code>
[18,20] (20,40] (40,60] (60,80] (80,97] 
     72     660     780     436      52 </code></pre>
<p>On peut √©galement modifier le sens des intervalles avec l‚Äôoption <code>right=FALSE</code>, et indiquer manuellement les noms des modalit√©s avec <code>labels</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$age20 &lt;-<span class="st"> </span><span class="kw">cut</span>(d$age, <span class="kw">c</span>(<span class="dv">18</span>, <span class="dv">20</span>, <span class="dv">40</span>, <span class="dv">60</span>, <span class="dv">80</span>, <span class="dv">97</span>), <span class="dt">right =</span> <span class="ot">FALSE</span>, 
  <span class="dt">include.lowest =</span> <span class="ot">TRUE</span>)
<span class="kw">table</span>(d$age20)</code></pre></div>
<pre><code>
[18,20) [20,40) [40,60) [60,80) [80,97] 
     48     643     793     454      62 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$age20 &lt;-<span class="st"> </span><span class="kw">cut</span>(d$age, <span class="kw">c</span>(<span class="dv">18</span>, <span class="dv">20</span>, <span class="dv">40</span>, <span class="dv">60</span>, <span class="dv">80</span>, <span class="dv">97</span>), <span class="dt">include.lowest =</span> <span class="ot">TRUE</span>, 
  <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">"&lt;20ans"</span>, <span class="st">"21-40 ans"</span>, <span class="st">"41-60ans"</span>, <span class="st">"61-80ans"</span>, 
    <span class="st">"&gt;80ans"</span>))
<span class="kw">table</span>(d$age20)</code></pre></div>
<pre><code>
   &lt;20ans 21-40 ans  41-60ans  61-80ans    &gt;80ans 
       72       660       780       436        52 </code></pre>
<div class="note">
<p>L‚Äôextension <code class="pkg">questionr</code> propose une interface interactive √† la fonction <code data-pkg="base">cut</code>, nomm√©e <code data-pkg="questionr">icut</code>. Elle s‚Äôutilise de la mani√®re suivante¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">icut</span>(d, age)</code></pre></div>
<p><strong>RStudio</strong> devrait ouvrir une fen√™tre semblable √† l‚Äôimage ci-dessous.</p>
<p><img src="images/capture_icut.png" alt="Capture d‚Äô√©cran d‚Äôicut"/></p>
<p>Vous pouvez alors indiquer les limites de vos classes ainsi que quelques options compl√©mentaires. Ces limites sont repr√©sent√©es graphiquement sur l‚Äôhistogramme de la variable d‚Äôorigine.</p>
<p>L‚Äôonglet <em>V√©rification</em> affiche un tri √† plat et un graphique en barres de la nouvelle variable. Une fois le r√©sultat satisfaisant, vous pouvez r√©cup√©rer le code g√©n√©r√© pour l‚Äôinclure dans votre script.</p>
<p>L‚Äôextension <code class="pkg">questionr</code> propose aussi une fonction <code data-pkg="questionr">quant.cut</code> permettant de d√©couper une variable num√©rique en un nombre de classes donn√© ayant des efffectifs semblables. Il suffit de lui passer le nombre de classes en argument¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$age6cl &lt;-<span class="st"> </span><span class="kw">quant.cut</span>(d$age, <span class="dv">6</span>)
<span class="kw">table</span>(d$age6cl)</code></pre></div>
<pre><code>
    [18,30)     [30,39)     [39,48) [48,55.667) 
        302         337         350         344 
[55.667,66)     [66,97] 
        305         362 </code></pre>
<p><code data-pkg="questionr">quant.cut</code> admet les m√™mes autres options que <code data-pkg="base">cut</code> (<code>include.lowest</code>, <code>right</code>, <code>labels</code>‚Ä¶ ).</p>
</div>
</div>
<div id="recodage_regrouper_modalites" class="section level2">
<h2>Regrouper les modalit√©s d‚Äôune variable</h2>
<p>Pour regrouper les modalit√©s d‚Äôune variable qualitative (d‚Äôun facteur le plus souvent), on peut utiliser directement l‚Äôindexation.</p>
<p>Ainsi, si on veut recoder la variable <em>qualif</em> dans une variable <em>qualif.reg</em> plus ¬´ compacte ¬ª, on peut utiliser¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(d$qualif)</code></pre></div>
<pre><code>
      Ouvrier specialise         Ouvrier qualifie 
                     203                      292 
              Technicien Profession intermediaire 
                      86                      160 
                   Cadre                  Employe 
                     260                      594 
                   Autre 
                      58 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$qualif.reg[d$qualif ==<span class="st"> "Ouvrier specialise"</span>] &lt;-<span class="st"> "Ouvrier"</span>
d$qualif.reg[d$qualif ==<span class="st"> "Ouvrier qualifie"</span>] &lt;-<span class="st"> "Ouvrier"</span>
d$qualif.reg[d$qualif ==<span class="st"> "Employe"</span>] &lt;-<span class="st"> "Employe"</span>
d$qualif.reg[d$qualif ==<span class="st"> "Profession intermediaire"</span>] &lt;-<span class="st"> "Intermediaire"</span>
d$qualif.reg[d$qualif ==<span class="st"> "Technicien"</span>] &lt;-<span class="st"> "Intermediaire"</span>
d$qualif.reg[d$qualif ==<span class="st"> "Cadre"</span>] &lt;-<span class="st"> "Cadre"</span>
d$qualif.reg[d$qualif ==<span class="st"> "Autre"</span>] &lt;-<span class="st"> "Autre"</span>
<span class="kw">table</span>(d$qualif.reg)</code></pre></div>
<pre><code>
        Autre         Cadre       Employe 
           58           260           594 
Intermediaire       Ouvrier 
          246           495 </code></pre>
<p>On aurait pu repr√©senter ce recodage de mani√®re plus compacte, notamment en commen√ßant par copier le contenu de <em>qualif</em> dans <em>qualif.reg</em>, ce qui permet de ne pas s‚Äôoccuper de ce qui ne change pas.</p>
<p>Il est cependant n√©cessaire de ne pas copier <em>qualif</em> sous forme de facteur, sinon on ne pourrait ajouter de nouvelles modalit√©s. On copie donc la version caract√®res de <em>qualif</em> gr√¢ce √† la fonction <code data-pkg="base" data-rdoc="character">as.character</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$qualif.reg &lt;-<span class="st"> </span><span class="kw">as.character</span>(d$qualif)
d$qualif.reg[d$qualif ==<span class="st"> "Ouvrier specialise"</span>] &lt;-<span class="st"> "Ouvrier"</span>
d$qualif.reg[d$qualif ==<span class="st"> "Ouvrier qualifie"</span>] &lt;-<span class="st"> "Ouvrier"</span>
d$qualif.reg[d$qualif ==<span class="st"> "Profession intermediaire"</span>] &lt;-<span class="st"> "Intermediaire"</span>
d$qualif.reg[d$qualif ==<span class="st"> "Technicien"</span>] &lt;-<span class="st"> "Intermediaire"</span>
<span class="kw">table</span>(d$qualif.reg)</code></pre></div>
<pre><code>
        Autre         Cadre       Employe 
           58           260           594 
Intermediaire       Ouvrier 
          246           495 </code></pre>
<p>On peut faire une version encore plus compacte en utilisant l‚Äôop√©rateur logique <em>ou</em> (<code>|</code>)¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$qualif.reg &lt;-<span class="st"> </span><span class="kw">as.character</span>(d$qualif)
d$qualif.reg[d$qualif ==<span class="st"> "Ouvrier specialise"</span> |<span class="st"> </span>d$qualif ==<span class="st"> </span>
<span class="st">  "Ouvrier qualifie"</span>] &lt;-<span class="st"> "Ouvrier"</span>
d$qualif.reg[d$qualif ==<span class="st"> "Profession intermediaire"</span> |<span class="st"> </span>
<span class="st">  </span>d$qualif ==<span class="st"> "Technicien"</span>] &lt;-<span class="st"> "Intermediaire"</span>
<span class="kw">table</span>(d$qualif.reg)</code></pre></div>
<pre><code>
        Autre         Cadre       Employe 
           58           260           594 
Intermediaire       Ouvrier 
          246           495 </code></pre>
<p>Enfin, pour terminer ce petit tour d‚Äôhorizon, on peut √©galement remplacer l‚Äôop√©rateur <code>|</code> par <code>%in%</code>, qui peut parfois √™tre plus lisible¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$qualif.reg &lt;-<span class="st"> </span><span class="kw">as.character</span>(d$qualif)
d$qualif.reg[d$qualif %in%<span class="st"> </span><span class="kw">c</span>(<span class="st">"Ouvrier specialise"</span>, 
  <span class="st">"Ouvrier qualifie"</span>)] &lt;-<span class="st"> "Ouvrier"</span>
d$qualif.reg[d$qualif %in%<span class="st"> </span><span class="kw">c</span>(<span class="st">"Profession intermediaire"</span>, 
  <span class="st">"Technicien"</span>)] &lt;-<span class="st"> "Intermediaire"</span>
<span class="kw">table</span>(d$qualif.reg)</code></pre></div>
<pre><code>
        Autre         Cadre       Employe 
           58           260           594 
Intermediaire       Ouvrier 
          246           495 </code></pre>
<p>Dans tous les cas le r√©sultat obtenu est une variable de type caract√®re. On pourra la convertir en facteur par un simple¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$qualif.reg &lt;-<span class="st"> </span><span class="kw">factor</span>(d$qualif.reg)</code></pre></div>
<p>Si on souhaite recoder les valeurs manquantes, il suffit de faire appel √† la fonction <code data-pkg="base" data-rdoc="NA">is.na</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(d$trav.satisf)</code></pre></div>
<pre><code>
  Satisfaction Insatisfaction      Equilibre 
           480            117            451 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$trav.satisf.reg &lt;-<span class="st"> </span><span class="kw">as.character</span>(d$trav.satisf)
d$trav.satisf.reg[<span class="kw">is.na</span>(d$trav.satisf)] &lt;-<span class="st"> "Manquant"</span>
<span class="kw">table</span>(d$trav.satisf.reg)</code></pre></div>
<pre><code>
     Equilibre Insatisfaction       Manquant 
           451            117            952 
  Satisfaction 
           480 </code></pre>
<div class="note">
<p><code class="pkg">questionr</code> propose une interface interactive pour le recodage d‚Äôune variable qualitative (renommage et regroupement de modalit√©s). Cette fonction, nomm√©e <code data-pkg="questionr">irec</code>, s‚Äôutilise de la mani√®re suivante¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">irec</span>(d, qualif)</code></pre></div>
<p><strong>RStudio</strong> va alors ouvrir une fen√™tre semblable √† l‚Äôimage ci-dessous¬†:</p>
<p><img src="images/capture_irec.png" alt="Capture de irec"/></p>
<p>Vous pouvez alors s√©lectionner diff√©rentes options, et pour chaque ancienne modalit√©, indiquer la nouvelle valeur correspondante. Pour regrouper des modalit√©s, il suffit de leur assigner des nouvelles valeurs identiques. Dans tous les cas n‚Äôh√©sitez pas √† exp√©rimenter, l‚Äôinterface se contente de g√©n√©rer du code <strong>R</strong> √† copier/coller dans votre script mais ne l‚Äôex√©cute pas, et ne modifie donc jamais vos donn√©es¬†!</p>
<p>L‚Äôonglet <em>V√©rification</em> affiche un tri crois√© de l‚Äôancienne et de la nouvelle variable pour v√©rifier que le recodage est correct. Une fois le r√©sultat satisfaisant, vous pouvez r√©cup√©rer le code g√©n√©r√© dans l‚Äôonglet <em>Code</em> pour l‚Äôinclure dans votre script.</p>
</div>
</div>
<div id="recodage_variables-calculees" class="section level2">
<h2>Variables calcul√©es</h2>
<p>La cr√©ation d‚Äôune variable num√©rique √† partir de calculs sur une ou plusieurs autres variables num√©riques se fait tr√®s simplement.</p>
<p>Supposons que l‚Äôon souhaite calculer une variable indiquant l‚Äô√©cart entre le nombre d‚Äôheures pass√©es √† regarder la t√©l√©vision et la moyenne globale de cette variable. On pourrait alors faire¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">range</span>(d$heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>[1]  0 12</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(d$heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>[1] 2.246566</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$ecart.heures.tv &lt;-<span class="st"> </span>d$heures.tv -<span class="st"> </span><span class="kw">mean</span>(d$heures.tv, 
  <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)
<span class="kw">range</span>(d$ecart.heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>[1] -2.246566  9.753434</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(d$ecart.heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>[1] 4.714578e-17</code></pre>
<p>Autre exemple tir√© du jeu de donn√©es <code>rp99</code>¬†: si on souhaite calculer le pourcentage d‚Äôactifs dans chaque commune, on peut diviser la population active <em>pop.act</em> par la population totale <em>pop.tot</em>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(<span class="st">"rp99"</span>)
rp99$part.actifs &lt;-<span class="st"> </span>rp99$pop.act/rp99$pop.tot *<span class="st"> </span><span class="dv">100</span></code></pre></div>
</div>
<div id="recodage_combiner-plusieurs-variables" class="section level2">
<h2>Combiner plusieurs variables</h2>
<p>La combinaison de plusieurs variables se fait √† l‚Äôaide des techniques d‚Äôindexation d√©j√† d√©crites pr√©c√©demment. Le plus compliqu√© est d‚Äôarriver √† formuler des conditions parfois complexes de mani√®re rigoureuse.</p>
<p>On peut ainsi vouloir combiner plusieurs variables qualitatives en une seule¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$act.manuelles &lt;-<span class="st"> </span><span class="ot">NA</span>
d$act.manuelles[d$cuisine ==<span class="st"> "Oui"</span> &amp;<span class="st"> </span>d$bricol ==<span class="st"> "Oui"</span>] &lt;-<span class="st"> "Cuisine et Bricolage"</span>
d$act.manuelles[d$cuisine ==<span class="st"> "Oui"</span> &amp;<span class="st"> </span>d$bricol ==<span class="st"> "Non"</span>] &lt;-<span class="st"> "Cuisine seulement"</span>
d$act.manuelles[d$cuisine ==<span class="st"> "Non"</span> &amp;<span class="st"> </span>d$bricol ==<span class="st"> "Oui"</span>] &lt;-<span class="st"> "Bricolage seulement"</span>
d$act.manuelles[d$cuisine ==<span class="st"> "Non"</span> &amp;<span class="st"> </span>d$bricol ==<span class="st"> "Non"</span>] &lt;-<span class="st"> "Ni cuisine ni bricolage"</span>
<span class="kw">table</span>(d$act.manuelles)</code></pre></div>
<pre><code>
    Bricolage seulement    Cuisine et Bricolage 
                    437                     416 
      Cuisine seulement Ni cuisine ni bricolage 
                    465                     682 </code></pre>
<p>On peut √©galement combiner variables qualitatives et variables quantitatives¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$age.sexe &lt;-<span class="st"> </span><span class="ot">NA</span>
d$age.sexe[d$sexe ==<span class="st"> "Homme"</span> &amp;<span class="st"> </span>d$age &lt;<span class="st"> </span><span class="dv">40</span>] &lt;-<span class="st"> "Homme moins de 40 ans"</span>
d$age.sexe[d$sexe ==<span class="st"> "Homme"</span> &amp;<span class="st"> </span>d$age &gt;=<span class="st"> </span><span class="dv">40</span>] &lt;-<span class="st"> "Homme plus de 40 ans"</span>
d$age.sexe[d$sexe ==<span class="st"> "Femme"</span> &amp;<span class="st"> </span>d$age &lt;<span class="st"> </span><span class="dv">40</span>] &lt;-<span class="st"> "Femme moins de 40 ans"</span>
d$age.sexe[d$sexe ==<span class="st"> "Femme"</span> &amp;<span class="st"> </span>d$age &gt;=<span class="st"> </span><span class="dv">40</span>] &lt;-<span class="st"> "Femme plus de 40 ans"</span>
<span class="kw">table</span>(d$age.sexe)</code></pre></div>
<pre><code>
Femme moins de 40 ans  Femme plus de 40 ans 
                  376                   725 
Homme moins de 40 ans  Homme plus de 40 ans 
                  315                   584 </code></pre>
<p>Les combinaisons de variables un peu complexes n√©cessitent parfois un petit travail de r√©flexion. En particulier, l‚Äôordre des commandes de recodage a parfois une influence dans le r√©sultat final.</p>
</div>
<div id="recodage_variables-scores" class="section level2">
<h2>Variables scores</h2>
<p>Une variable score est une variable calcul√©e en additionnant des poids accord√©s aux modalit√©s d‚Äôune s√©rie de variables qualitatives.</p>
<p>Pour prendre un exemple tout √† fait arbitraire, imaginons que nous souhaitons calculer un score d‚Äôactivit√©s ext√©rieures. Dans ce score on consid√®re que le fait d‚Äôaller au cin√©ma ¬´¬†p√®se¬†¬ª 10, celui de p√™cher ou chasser vaut 30 et celui de faire du sport vaut 20. On pourrait alors calculer notre score de la mani√®re suivante¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$score.ext &lt;-<span class="st"> </span><span class="dv">0</span>
d$score.ext[d$cinema ==<span class="st"> "Oui"</span>] &lt;-<span class="st"> </span>d$score.ext[d$cinema ==<span class="st"> </span>
<span class="st">  "Oui"</span>] +<span class="st"> </span><span class="dv">10</span>
d$score.ext[d$peche.chasse ==<span class="st"> "Oui"</span>] &lt;-<span class="st"> </span>d$score.ext[d$peche.chasse ==<span class="st"> </span>
<span class="st">  "Oui"</span>] +<span class="st"> </span><span class="dv">30</span>
d$score.ext[d$sport ==<span class="st"> "Oui"</span>] &lt;-<span class="st"> </span>d$score.ext[d$sport ==<span class="st"> </span>
<span class="st">  "Oui"</span>] +<span class="st"> </span><span class="dv">20</span>
<span class="kw">table</span>(d$score.ext)</code></pre></div>
<pre><code>
  0  10  20  30  40  50  60 
800 342 229 509  31  41  48 </code></pre>
<p>Cette notation √©tant un peu lourde, on peut l‚Äôall√©ger un peu en utilisant la fonction <code data-pkg="base">ifelse</code>. Celle-ci prend en argument une condition et deux valeurs. Si la condition est vraie elle retourne la premi√®re valeur, sinon elle retourne la seconde.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$score.ext &lt;-<span class="st"> </span><span class="dv">0</span>
d$score.ext &lt;-<span class="st"> </span><span class="kw">ifelse</span>(d$cinema ==<span class="st"> "Oui"</span>, <span class="dv">10</span>, <span class="dv">0</span>) +<span class="st"> </span><span class="kw">ifelse</span>(d$peche.chasse ==<span class="st"> </span>
<span class="st">  "Oui"</span>, <span class="dv">30</span>, <span class="dv">0</span>) +<span class="st"> </span><span class="kw">ifelse</span>(d$sport ==<span class="st"> "Oui"</span>, <span class="dv">20</span>, <span class="dv">0</span>)
<span class="kw">table</span>(d$score.ext)</code></pre></div>
<pre><code>
  0  10  20  30  40  50  60 
800 342 229 509  31  41  48 </code></pre>
</div>
<div id="recodage_verification-des-recodages" class="section level2">
<h2>V√©rification des recodages</h2>
<p>Il est tr√®s important de v√©rifier, notamment apr√®s les recodages les plus complexes, qu‚Äôon a bien obtenu le r√©sultat escompt√©. Les deux points les plus sensibles √©tant les valeurs manquantes et les erreurs dans les conditions.</p>
<p>Pour v√©rifier tout cela, le plus simple est sans doute de faire des tableaux crois√©s entre la variable recod√©e et celles ayant servi au recodage, √† l‚Äôaide des fonctions <code data-pkg="base">table</code> ou <code data-pkg="stats">xtabs</code>, et de v√©rifier le nombre de valeurs manquantes dans la variable recod√©e avec <code data-pkg="base">summary</code>, <code data-pkg="questionr">freq</code> ou <code data-pkg="base">table</code>.</p>
<p>Par exemple¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$act.manuelles &lt;-<span class="st"> </span><span class="ot">NA</span>
d$act.manuelles[d$cuisine ==<span class="st"> "Oui"</span> &amp;<span class="st"> </span>d$bricol ==<span class="st"> "Oui"</span>] &lt;-<span class="st"> "Cuisine et Bricolage"</span>
d$act.manuelles[d$cuisine ==<span class="st"> "Oui"</span> &amp;<span class="st"> </span>d$bricol ==<span class="st"> "Non"</span>] &lt;-<span class="st"> "Cuisine seulement"</span>
d$act.manuelles[d$cuisine ==<span class="st"> "Non"</span> &amp;<span class="st"> </span>d$bricol ==<span class="st"> "Oui"</span>] &lt;-<span class="st"> "Bricolage seulement"</span>
d$act.manuelles[d$cuisine ==<span class="st"> "Non"</span> &amp;<span class="st"> </span>d$bricol ==<span class="st"> "Non"</span>] &lt;-<span class="st"> "Ni cuisine ni bricolage"</span>
<span class="kw">table</span>(d$act.manuelles, d$cuisine)</code></pre></div>
<pre><code>                         
                          Non Oui
  Bricolage seulement     437   0
  Cuisine et Bricolage      0 416
  Cuisine seulement         0 465
  Ni cuisine ni bricolage 682   0</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(d$act.manuelles, d$bricol)</code></pre></div>
<pre><code>                         
                          Non Oui
  Bricolage seulement       0 437
  Cuisine et Bricolage      0 416
  Cuisine seulement       465   0
  Ni cuisine ni bricolage 682   0</code></pre>
</div>

</article>
<article id="ou-trouver-de-l-aide">

<div class="fluid-row" id="ou-trouver-de-l-aide_header">


<h1 class="title">O√π trouver de l‚Äôaide¬†?</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#ou-trouver-de-l-aide_aide-en-ligne">Aide en ligne</a><ul>
<li><a href="#ou-trouver-de-l-aide_aide-sur-une-fonction">Aide sur une fonction</a></li>
<li><a href="#ou-trouver-de-l-aide_naviguer-dans-laide">Naviguer dans l‚Äôaide</a></li>
</ul></li>
<li><a href="#ou-trouver-de-l-aide_ressources-sur-le-web">Ressources sur le Web</a><ul>
<li><a href="#ou-trouver-de-l-aide_moteur-de-recherche">Moteur de recherche</a></li>
<li><a href="#ou-trouver-de-l-aide_aide-en-ligne-1">Aide en ligne</a></li>
<li><a href="#ou-trouver-de-l-aide_ressources-officielles">Ressources officielles</a></li>
<li><a href="#ou-trouver-de-l-aide_revue">Revue</a></li>
<li><a href="#ou-trouver-de-l-aide_ressources-francophones">Ressources francophones</a></li>
<li><a href="#ou-trouver-de-l-aide_rstudio">RStudio</a></li>
<li><a href="#ou-trouver-de-l-aide_antiseches-cheatsheet">Antis√®ches (cheatsheet)</a></li>
</ul></li>
<li><a href="#ou-trouver-de-l-aide_ou-poser-des-questions">O√π poser des questions¬†?</a><ul>
<li><a href="#ou-trouver-de-l-aide_les-forums-danalyse-r">Les forums d‚Äôanalyse-R</a></li>
<li><a href="#ou-trouver-de-l-aide_liste-r-soc">Liste R-soc</a></li>
<li><a href="#ou-trouver-de-l-aide_stackoverflow">StackOverflow</a></li>
<li><a href="#ou-trouver-de-l-aide_forum-web-en-francais">Forum Web en fran√ßais</a></li>
<li><a href="#ou-trouver-de-l-aide_canaux-irc-chat">Canaux IRC (chat)</a></li>
<li><a href="#ou-trouver-de-l-aide_listes-de-discussion-officielles">Listes de discussion officielles</a></li>
</ul></li>
</ul>
</div>

<div class="note">
<p>La version originale de ce chapitre a √©t√© √©crite par Julien Barnier dans le cadre du support de cours <a href="https://github.com/juba/intro-r">Introduction √† R</a>.</p>
</div>
<div id="ou-trouver-de-l-aide_aide-en-ligne" class="section level2">
<h2>Aide en ligne</h2>
<p><strong>R</strong> dispose d‚Äôune <dfn>aide en ligne</dfn> tr√®s compl√®te, mais dont l‚Äôusage n‚Äôest pas forc√©ment tr√®s simple. D‚Äôune part car elle est int√©gralement en anglais, d‚Äôautre part car son organisation prend un certain temps √† √™tre ma√Ætris√©e.</p>
<div id="ou-trouver-de-l-aide_aide-sur-une-fonction" class="section level3">
<h3>Aide sur une fonction</h3>
<p>La fonction la plus utile est sans doute <code data-pkg="utils">help</code> (ou son √©quivalent <code data-pkg="utils" data-rdoc="Question">?</code>) qui permet d‚Äôafficher la page d‚Äôaide li√©e √† une ou plusieurs fonctions. Celle-ci permet de lister les arguments de la fonction, d‚Äôavoir des informations d√©taill√©es sur son fonctionnement, les r√©sultats qu‚Äôelle retourne, etc.</p>
<p>Pour acc√©der √† l‚Äôaide de la fonction <code data-pkg="base">mean</code>, par exemple, il vous suffit de saisir directement¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">?mean</code></pre></div>
<p>ou bien</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">help</span>(<span class="st">"mean"</span>)</code></pre></div>
<p>Sous <strong>RStudio</strong>, la page d‚Äôaide correspondante s‚Äôaffichera sous l‚Äôonglet <em>Help</em> dans le quadrant inf√©rieur droit.</p>
<p>Chaque page d‚Äôaide comprend plusieurs sections, en particulier¬†:</p>
<table style="width:14%;">
<colgroup>
<col width="6%"/>
<col width="6%"/>
</colgroup>
<thead>
<tr class="header">
<th align="left">Section</th>
<th align="left">Contenu</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><em>Description</em></td>
<td align="left">donne un r√©sum√© en une phrase de ce que fait la fonction</td>
</tr>
<tr class="even">
<td align="left"><em>Usage</em></td>
<td align="left">indique la ou les mani√®res de l‚Äôutiliser</td>
</tr>
<tr class="odd">
<td align="left"><em>Arguments</em></td>
<td align="left">d√©taille tous les arguments possibles et leur signification</td>
</tr>
<tr class="even">
<td align="left"><em>Value</em></td>
<td align="left">indique la forme du r√©sultat renvoy√© par la fonction</td>
</tr>
<tr class="odd">
<td align="left"><em>Details</em></td>
<td align="left">apporte des pr√©cisions sur le fonctionnement de la fonction</td>
</tr>
<tr class="even">
<td align="left"><em>Note</em></td>
<td align="left">pour des remarques √©ventuelles</td>
</tr>
<tr class="odd">
<td align="left"><em>References</em></td>
<td align="left">pour des r√©f√©rences bibliographiques ou des URL associ√©es</td>
</tr>
<tr class="even">
<td align="left"><em>See Also</em></td>
<td align="left">tr√®s utile, renvoie vers d‚Äôautres fonctions semblables ou li√©es, ce qui peut √™tre tr√®s utile pour d√©couvrir ou retrouver une fonction dont on a oubli√© le nom</td>
</tr>
<tr class="odd">
<td align="left"><em>Examples</em></td>
<td align="left">s√©rie d‚Äôexemples d‚Äôutilisation</td>
</tr>
</tbody>
</table>
<p>Les exemples peuvent √™tre directement ex√©cut√©s en utilisant la fonction <code data-pkg="utils">example</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">example</span>(mean)</code></pre></div>
<pre><code>
mean&gt; x &lt;- c(0:10, 50)

mean&gt; xm &lt;- mean(x)

mean&gt; c(xm, mean(x, trim = 0.10))
[1] 8.75 5.50</code></pre>
</div>
<div id="ou-trouver-de-l-aide_naviguer-dans-laide" class="section level3">
<h3>Naviguer dans l‚Äôaide</h3>
<p>La fonction <code data-pkg="utils">help.start</code> permet d‚Äôafficher le sommaire de l‚Äôaide en ligne. Saisissez simplement¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">help.start</span>()</code></pre></div>
<p>Si vous souhaitez rechercher quelque chose dans le contenu de l‚Äôaide, vous pouvez utiliser la fonction <code data-pkg="utils">help.search</code> (ou <code data-pkg="utils" data-rdoc="help.search">??</code> qui est √©quivalente) qui renvoie une liste des pages d‚Äôaide contenant les termes recherch√©s.</p>
<p>Par exemple¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">help.search</span>(<span class="st">"logistic"</span>)</code></pre></div>
<p>ou</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">??logistic</code></pre></div>
<p>pour rechercher les pages de l‚Äôaide qui contiennent le terme <em>logistic</em>.</p>
</div>
</div>
<div id="ou-trouver-de-l-aide_ressources-sur-le-web" class="section level2">
<h2>Ressources sur le Web</h2>
<p>De nombreuses ressources existent en ligne, mais la plupart sont en anglais.</p>
<div id="ou-trouver-de-l-aide_moteur-de-recherche" class="section level3">
<h3>Moteur de recherche</h3>
<p>Le fait que le logiciel s‚Äôappelle <strong>R</strong> ne facilite malheureusement pas les recherches sur le Web‚Ä¶ La solution √† ce probl√®me a √©t√© trouv√©e gr√¢ce √† la constitution d‚Äôun moteur de recherche <em>ad hoc</em> √† partir de <strong>Google</strong>, nomm√© <strong>Rseek</strong>¬†:<br/><a href="http://www.rseek.org/" class="uri">http://www.rseek.org/</a>.</p>
<p>Les requ√™tes saisies dans <strong>Rseek</strong> sont ex√©cut√©es dans des corpus pr√©d√©finis li√©s √† <strong>R</strong>, notamment les documents et manuels, les listes de discussion ou le code source du programme.</p>
<p>Les requ√™tes devront cependant √™tre formul√©es en anglais.</p>
</div>
<div id="ou-trouver-de-l-aide_aide-en-ligne-1" class="section level3">
<h3>Aide en ligne</h3>
<p>Le site <strong>R documentation</strong> propose un acc√®s clair et rapide √† la documentation de <strong>R</strong> et des extensions h√©berg√©es sur le <strong>CRAN</strong> (ainsi que certaines extensions h√©berg√©es sur <strong>GitHub</strong>). Il permet notamment de rechercher et naviguer facilement entre les pages des diff√©rentes fonctions¬†:<br/> <a href="http://www.rdocumentation.org/" class="uri">http://www.rdocumentation.org/</a>.</p>
</div>
<div id="ou-trouver-de-l-aide_ressources-officielles" class="section level3">
<h3>Ressources officielles</h3>
<p>La documentation officielle de <strong>R</strong> est accessible en ligne depuis le site du projet¬†:<br/> <a href="http://www.r-project.org/" class="uri">http://www.r-project.org/</a>.</p>
<p>Les liens de l‚Äôentr√©e <em>Documentation</em> du menu de gauche vous permettent d‚Äôacc√©der √† diff√©rentes ressources.</p>
<div id="ou-trouver-de-l-aide_manuels" class="section level4">
<h4>Manuels</h4>
<p>Les <em>manuels</em> sont des documents complets de pr√©sentation de certains aspects de <strong>R</strong>. Ils sont accessibles en ligne, ou t√©l√©chargeables au format <strong>PDF</strong>¬†:<br/><a href="http://cran.r-project.org/manuals.html" class="uri">http://cran.r-project.org/manuals.html</a>.</p>
<p>On notera plus particuli√®rement <em>An introduction to R</em>, normalement destin√© aux d√©butants, mais qui n√©cessite quand m√™me un minimum d‚Äôaisance en informatique et en statistiques¬†:<br/> <a href="http://cran.r-project.org/doc/manuals/R-intro.html" class="uri">http://cran.r-project.org/doc/manuals/R-intro.html</a>.</p>
<p><em>R Data Import/Export</em> explique notamment comment importer des donn√©es depuis d‚Äôautres logiciels¬†:<br/> <a href="http://cran.r-project.org/doc/manuals/R-data.html" class="uri">http://cran.r-project.org/doc/manuals/R-data.html</a>.</p>
</div>
<div id="ou-trouver-de-l-aide_faq" class="section level4">
<h4>FAQ</h4>
<p>Les <em>FAQ</em> (<em>frequently asked questions</em>) regroupent des questions fr√©quemment pos√©es et leurs r√©ponses. √Ä lire donc ou, au moins, √† parcourir avant toute chose¬†:<br/><a href="http://cran.r-project.org/faqs.html" class="uri">http://cran.r-project.org/faqs.html</a>.</p>
<p>La FAQ la plus utile est la FAQ g√©n√©raliste sur <strong>R</strong>¬†:<br/> <a href="http://cran.r-project.org/doc/FAQ/R-FAQ.html" class="uri">http://cran.r-project.org/doc/FAQ/R-FAQ.html</a>.</p>
<p>Mais il existe √©galement une FAQ d√©di√©e aux questions li√©es √† <strong>Windows</strong> et une autre √† la plateforme <strong>Mac OS X</strong>.</p>
<div class="note">
<p>Les manuels et les FAQ sont accessibles m√™me si vous n‚Äôavez pas d‚Äôacc√®s √† Internet en utilisant la fonction <code data-pkg="utils">help.start</code> d√©crite pr√©c√©demment.</p>
</div>
</div>
<div id="ou-trouver-de-l-aide_r-announce" class="section level4">
<h4>R-announce</h4>
<p><strong>R-announce</strong> est la liste de diffusion √©lectronique officielle du projet. Elle ne comporte qu‚Äôun nombre r√©duit de messages (quelques-uns par mois tout au plus) et diffuse les annonces concernant de nouvelles versions de R ou d‚Äôautres informations particuli√®rement importantes. On peut s‚Äôy abonner √† l‚Äôadresse suivante¬†:<br/><a href="https://stat.ethz.ch/mailman/listinfo/r-announce" class="uri">https://stat.ethz.ch/mailman/listinfo/r-announce</a></p>
</div>
<div id="ou-trouver-de-l-aide_r-journal" class="section level4">
<h4>R Journal</h4>
<p><strong>R Journal</strong> est la ¬´¬†revue¬†¬ª officielle du projet <strong>R</strong>, qui a succ√©d√© d√©but 2009 √† la lettre de nouvelles <strong>R News</strong>. Elle para√Æt entre deux et cinq fois par an et contient des informations sur les nouvelles versions du logiciel, des articles pr√©sentant des extensions, des exemples d‚Äôanalyse‚Ä¶ Les parutions sont annonc√©es sur la liste de diffusion <strong>R-announce</strong> et les num√©ros sont t√©l√©chargeables √† l‚Äôadresse suivante¬†:<br/> <a href="http://journal.r-project.org/" class="uri">http://journal.r-project.org/</a>.</p>
</div>
<div id="ou-trouver-de-l-aide_autres-documents" class="section level4">
<h4>Autres documents</h4>
<p>On trouvera de nombreux documents dans diff√©rentes langues, en g√©n√©ral au format <strong>PDF</strong>, dans le r√©pertoire suivant¬†:<br/><a href="http://cran.r-project.org/doc/contrib/" class="uri">http://cran.r-project.org/doc/contrib/</a>.</p>
<p>Parmi ceux-ci, les cartes de r√©f√©rence peuvent √™tre tr√®s utiles, ce sont des aides-m√©moire recensant les fonctions les plus courantes¬†:<br/><a href="http://cran.r-project.org/doc/contrib/Short-refcard.pdf" class="uri">http://cran.r-project.org/doc/contrib/Short-refcard.pdf</a></p>
<p>On notera √©galement un document d‚Äôintroduction en anglais progressif et s‚Äôappuyant sur des m√©thodes statistiques relativement simples¬†:<br/><a href="http://cran.r-project.org/doc/contrib/Verzani-SimpleR.pdf" class="uri">http://cran.r-project.org/doc/contrib/Verzani-SimpleR.pdf</a></p>
<p>Pour les utilisateurs d√©j√† habitu√©s √† <strong>SAS</strong> ou <strong>SPSS</strong>, le livre <em>R for SAS and SPSS Users</em> et le document gratuit qui en est tir√© peuvent √™tre de bonnes ressources, tout comme le site web <strong>Quick-R</strong>¬†:<br/> <a href="http://rforsasandspssusers.com/" class="uri">http://rforsasandspssusers.com/</a> et <a href="http://www.statmethods.net/" class="uri">http://www.statmethods.net/</a>.</p>
</div>
</div>
<div id="ou-trouver-de-l-aide_revue" class="section level3">
<h3>Revue</h3>
<p>La revue <em>Journal of Statistical Software</em> est une revue √©lectronique anglophone, dont les articles sont en acc√®s libre, et qui traite de l‚Äôutilisation de logiciels d‚Äôanalyse de donn√©es dans un grand nombre de domaines. De nombreux articles (la majorit√©) sont consacr√©s √† <strong>R</strong> et √† la pr√©sentation d‚Äôextensions plus ou moins sp√©cialis√©es.</p>
<p>Les articles qui y sont publi√©s prennent souvent la forme de tutoriels plus ou moins accessibles mais qui fournissent souvent une bonne introduction et une ressource riche en informations et en liens.</p>
<p>Adresse de la revue¬†:<br/><a href="http://www.jstatsoft.org/" class="uri">http://www.jstatsoft.org/</a></p>
</div>
<div id="ou-trouver-de-l-aide_ressources-francophones" class="section level3">
<h3>Ressources francophones</h3>
<p>Il existe des ressources en fran√ßais sur l‚Äôutilisation de <strong>R</strong>, mais peu sont r√©ellement destin√©es aux d√©butants, elles n√©cessitent en g√©n√©ral des bases √† la fois en informatique et en statistique.</p>
<p>Le document le plus abordable et le plus complet est sans doute <em>R pour les d√©butants</em>, d‚ÄôEmmanuel Paradis, accessible au format <strong>PDF</strong>¬†:<br/><a href="http://cran.r-project.org/doc/contrib/Paradis-rdebuts_fr.pdf" class="uri">http://cran.r-project.org/doc/contrib/Paradis-rdebuts_fr.pdf</a>.</p>
<p>La somme de documentation en fran√ßais la plus importante li√©e √† <strong>R</strong> est sans nulle doute celle mise √† disposition par le P√¥le bioinformatique lyonnais. Leur site propose des cours complets de statistique utilisant <strong>R</strong>¬†:<br/><a href="http://pbil.univ-lyon1.fr/R/enseignement.html" class="uri">http://pbil.univ-lyon1.fr/R/enseignement.html</a>.</p>
<p>La plupart des documents sont assez pointus niveau math√©matique et plut√¥t orient√©s biostatistique, mais on trouvera des documents plus introductifs ici¬†:<br/><a href="http://pbil.univ-lyon1.fr/R/html/cours1" class="uri">http://pbil.univ-lyon1.fr/R/html/cours1</a>.</p>
<p>Dans tous les cas la somme de travail et de connaissances mise √† disposition librement est impressionnante‚Ä¶ Enfin, le site de Vincent Zoonekynd (<a href="http://zoonek2.free.fr/UNIX/48_R_2004/all.html" class="uri">http://zoonek2.free.fr/UNIX/48_R_2004/all.html</a>) comprend de nombreuses notes prises au cours de sa d√©couverte du logiciel. On notera cependant que l‚Äôauteur est normalien et docteur en math√©matiques‚Ä¶</p>
</div>
<div id="ou-trouver-de-l-aide_rstudio" class="section level3">
<h3>RStudio</h3>
<p>La documentation officielle de <strong>RStudio</strong> est disponible sur <a href="https://support.rstudio.com" class="uri">https://support.rstudio.com</a> (cat√©gorie <em>Documentation</em> disponible en milieu de page).</p>
</div>
<div id="ou-trouver-de-l-aide_antiseches-cheatsheet" class="section level3">
<h3>Antis√®ches (cheatsheet)</h3>
<p>On peut trouver un peu partout sur internet des antis√®ches (<em>cheatsheets</em> en anglais) qui sont en g√©n√©ral un fichier <strong>PDF</strong> r√©sumant les principales fonctions d‚Äôune extension ou d‚Äôune probl√©matique donn√©e. Ces antis√®ches peuvent √™tre imprim√©es afin de les avoir facilement √† porter de main.</p>
<p>Pour les trouver, il suffit d‚Äôeffectuer une recherche <strong>Google</strong> avec les mots-cl√©s <code>R cheatsheet</code> ou <code>&lt;pkg&gt; cheatsheet</code> en remplacant <code>&lt;pkg&gt;</code> par le nom du package qui nous int√©resse.</p>
</div>
</div>
<div id="ou-trouver-de-l-aide_ou-poser-des-questions" class="section level2">
<h2>O√π poser des questions¬†?</h2>
<p>La communaut√© des utilisateurs de <strong>R</strong> est tr√®s active et en g√©n√©ral tr√®s contente de pouvoir r√©pondre aux questions (nombreuses) des d√©butants et √† celles (tout aussi nombreuses) des utilisateurs plus exp√©riment√©s. Dans tous les cas, les r√®gles de base √† respecter avant de poser une question sont toujours les m√™mes¬†: avoir cherch√© soi-m√™me la r√©ponse auparavant, notamment dans les FAQ et dans l‚Äôaide en ligne, et poser sa question de la mani√®re la plus claire possible, de pr√©f√©rence avec un exemple de code posant probl√®me.</p>
<div id="ou-trouver-de-l-aide_les-forums-danalyse-r" class="section level3">
<h3>Les forums d‚Äôanalyse-R</h3>
<p>En premier lieu (autopromotion oblige), chaque chapitre du site d‚Äô<strong>analyse-R</strong> (<a href="http://larmarange.github.io/analyse-R/" class="uri">http://larmarange.github.io/analyse-R/</a>) comporte en bas de page une fonctionnalit√© permettant de laisser des commentaires. On peut donc y poser une question en lien avec le chapitre concern√©.</p>
</div>
<div id="ou-trouver-de-l-aide_liste-r-soc" class="section level3">
<h3>Liste R-soc</h3>
<p>Une liste de discussion a √©t√© cr√©√©e sp√©cialement pour permettre aide et √©changes autour de l‚Äôutilisation de <strong>R</strong> en sciences sociales. Elle est h√©berg√©e par le CRU et on peut s‚Äôy abonner √† l‚Äôadresse suivante¬†: <br/><a href="https://listes.cru.fr/sympa/subscribe/r-soc" class="uri">https://listes.cru.fr/sympa/subscribe/r-soc</a>.</p>
<p>Gr√¢ce aux services offerts par le site <strong>gmane.org</strong>, la liste est √©galement disponible sous d‚Äôautres formes (forum Web, blog, <strong>NNTP</strong>, flux <strong>RSS</strong>) permettant de lire et de poster sans avoir √† s‚Äôinscrire et √† recevoir les messages sous forme de courrier √©lectronique. Pour plus d‚Äôinformations¬†:<br/> <a href="http://dir.gmane.org/gmane.comp.lang.r.user.french" class="uri">http://dir.gmane.org/gmane.comp.lang.r.user.french</a>.</p>
</div>
<div id="ou-trouver-de-l-aide_stackoverflow" class="section level3">
<h3>StackOverflow</h3>
<p>Le site <strong>StackOverflow</strong> (qui fait partie de la famille des sites <strong>StackExchange</strong>) comprend une section (anglophone) d√©di√©e √† <strong>R</strong> qui permet de poser des questions et en g√©n√©ral d‚Äôobtenir des r√©ponses assez rapidement¬†:<br/><a href="http://stackoverflow.com/questions/tagged/r" class="uri">http://stackoverflow.com/questions/tagged/r</a>.</p>
<p>La premi√®re chose √† faire, √©videmment, est de v√©rifier que sa question n‚Äôa pas d√©j√† √©t√© pos√©e.</p>
</div>
<div id="ou-trouver-de-l-aide_forum-web-en-francais" class="section level3">
<h3>Forum Web en fran√ßais</h3>
<p>Le Cirad a mis en ligne un forum d√©di√© aux utilisateurs de <strong>R</strong>, tr√®s actif¬†:<br/> <a href="http://forums.cirad.fr/logiciel-R/index.php" class="uri">http://forums.cirad.fr/logiciel-R/index.php</a>.</p>
<p>Les questions diverses et vari√©es peuvent √™tre pos√©es dans la rubrique <em>Questions en cours</em>¬†:<br/> <a href="http://forums.cirad.fr/logiciel-R/viewforum.php?f=3" class="uri">http://forums.cirad.fr/logiciel-R/viewforum.php?f=3</a>.</p>
<p>Il est tout de m√™me conseill√© de faire une recherche rapide sur le forum avant de poser une question, pour voir si la r√©ponse ne s‚Äôy trouverait pas d√©j√†.</p>
</div>
<div id="ou-trouver-de-l-aide_canaux-irc-chat" class="section level3">
<h3>Canaux IRC (chat)</h3>
<p>L‚Äô<strong>IRC</strong>, ou <em>Internet Relay Chat</em> est le v√©n√©rable anc√™tre toujours tr√®s actif des messageries instantan√©es actuelles. Un canal (en anglais) est notamment d√©di√© aux √©changes autour de <strong>R</strong> (<code>#R</code>).</p>
<p>Si vous avez d√©j√† l‚Äôhabitude d‚Äôutiliser <strong>IRC</strong>, il vous suffit de pointer votre client pr√©f√©r√© sur <strong>Freenode</strong> (<code>irc.freenode.net</code>) puis de rejoindre l‚Äôun des canaux en question.</p>
<p>Sinon, le plus simple est certainement d‚Äôutiliser l‚Äôinterface web de <strong>Mibbit</strong>, accessible √† l‚Äôadresse <a href="http://www.mibbit.com/" class="uri">http://www.mibbit.com/</a>.</p>
<p>Dans le champ <em>Connect to IRC</em>, s√©lectionnez <em>Freenode.net</em>, puis saisissez un pseudonyme dans le champ <em>Nick</em> et <code>#R</code> dans le champ <em>Channel</em>. Vous pourrez alors discuter directement avec les personnes pr√©sentes.</p>
<p>Le canal #R est normalement peupl√© de personnes qui seront tr√®s heureuses de r√©pondre √† toutes les questions, et en g√©n√©ral l‚Äôambiance y est tr√®s bonne. Une fois votre question pos√©e, n‚Äôh√©sitez pas √† √™tre patient et √† attendre quelques minutes, voire quelques heures, le temps qu‚Äôun des habitu√©s vienne y faire un tour.</p>
</div>
<div id="ou-trouver-de-l-aide_listes-de-discussion-officielles" class="section level3">
<h3>Listes de discussion officielles</h3>
<p>La liste de discussion d‚Äôentraide (par courrier √©lectronique) officielle du logiciel <strong>R</strong> s‚Äôappelle <strong>R-help</strong>. On peut s‚Äôy abonner √† l‚Äôadresse suivante, mais il s‚Äôagit d‚Äôune liste avec de nombreux messages¬†:<br/> <a href="https://stat.ethz.ch/mailman/listinfo/r-help" class="uri">https://stat.ethz.ch/mailman/listinfo/r-help</a>.</p>
<p>Pour une consultation ou un envoi ponctuels, le mieux est sans doute d‚Äôutiliser les interfaces Web fournies par <strong>gmane.org</strong>¬†:<br/><a href="http://blog.gmane.org/gmane.comp.lang.r.general" class="uri">http://blog.gmane.org/gmane.comp.lang.r.general</a>.</p>
<p><strong>R-help</strong> est une liste avec de nombreux messages, suivie par des sp√©cialistes de <strong>R</strong>, dont certains des d√©veloppeurs principaux. Elle est cependant √† r√©server aux questions particuli√®rement techniques qui n‚Äôont pas trouv√© de r√©ponses par d‚Äôautres biais.</p>
<p>Dans tous les cas, il est n√©cessaire avant de poster sur cette liste de bien avoir pris connaissance du <em>posting guide</em> correspondant¬†:<br/><a href="http://www.r-project.org/posting-guide.html" class="uri">http://www.r-project.org/posting-guide.html</a>.</p>
<p>Plusieurs autres listes plus sp√©cialis√©es existent √©galement, elles sont list√©es √† l‚Äôadresse suivante¬†: <br/><a href="http://www.r-project.org/mail.html" class="uri">http://www.r-project.org/mail.html</a>.</p>
</div>
</div>

</article>
<article id="introduction-a-dplyr">

<div class="fluid-row" id="introduction-a-dplyr_header">


<h1 class="title">Introduction √† dplyr</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>

</article>
<article id="introduction-a-data-table">

<div class="fluid-row" id="introduction-a-data-table_header">


<h1 class="title">Introduction √† data.table</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>

</article>
<article id="doublons">

<div class="fluid-row" id="doublons_header">


<h1 class="title">Doublons</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>

</article>
<article id="tris">

<div class="fluid-row" id="tris_header">


<h1 class="title">Tris</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#tris_fonctions-r-de-base">Fonctions R de base</a></li>
<li><a href="#tris_extension-dplyr">Extension dplyr</a></li>
<li><a href="#tris_extension-data.table">Extension data.table</a></li>
</ul>
</div>

<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>
<p>Dans ce qui suit on travaillera sur le jeu de donn√©es tir√© de l‚Äôenqu√™te <em>Histoire de vie</em>, fourni avec l‚Äôextension <code class="pkg">questionr</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">data</span>(hdv2003)
d &lt;-<span class="st"> </span>hdv2003</code></pre></div>
<div id="tris_fonctions-r-de-base" class="section level2">
<h2>Fonctions R de base</h2>
<p>La fonction <code data-pkg="base">sort</code> permet de <dfn data-index="tri de tables">trier</dfn><dfn data-index="tableau de donn√©es, tri"/> les √©l√©ments d‚Äôun vecteur.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sort</span>(<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">1</span>, <span class="dv">8</span>))</code></pre></div>
<pre><code>[1] 1 2 5 6 8</code></pre>
<p>On peut appliquer cette fonction √† une variable, mais celle-ci ne permet que d‚Äôordonner les valeurs de cette variable, et pas l‚Äôensemble du tableau de donn√©es dont elle fait partie. Pour cela nous avons besoin d‚Äôune autre fonction, nomm√©e <code data-pkg="base">order</code>. Celle-ci ne renvoie pas les valeurs du vecteur tri√©es, mais les emplacements de ces valeurs.</p>
<p>Un exemple pour comprendre¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">order</span>(<span class="kw">c</span>(<span class="dv">15</span>, <span class="dv">20</span>, <span class="dv">10</span>))</code></pre></div>
<pre><code>[1] 3 1 2</code></pre>
<p>Le r√©sultat renvoy√© signifie que la plus petite valeur est la valeur situ√©e en 3<sup>e</sup> position, suivie de celle en 1<sup>√®re</sup> position et de celle en 2<sup>e</sup> position. Tout cela ne para√Æt pas passionnant √† premi√®re vue, mais si on m√©lange ce r√©sultat avec un peu d‚Äôindexation directe, √ßa devient int√©ressant‚Ä¶</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(<span class="kw">order</span>(d$age))</code></pre></div>
<pre><code>[1] 162 215 346 377 511 646</code></pre>
<p>Ce que cette fonction renvoie, c‚Äôest l‚Äôordre dans lequel on doit placer les √©l√©ments de <em>age</em>, et donc par extension les lignes de <code>d</code>, pour que la variable soit tri√©e par ordre croissant. Par cons√©quent, si on fait¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d.tri &lt;-<span class="st"> </span>d[<span class="kw">order</span>(d$age), ]</code></pre></div>
<p>Alors on a tri√© les lignes de d par ordre d‚Äô√¢ge croissant¬†! Et si on fait un petit¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(d.tri, <span class="dv">3</span>)</code></pre></div>
<pre><code>     id age  sexe nivetud    poids
162 162  18 Homme    &lt;NA&gt; 4982.964
215 215  18 Homme    &lt;NA&gt; 4631.188
346 346  18 Femme    &lt;NA&gt; 1725.410
              occup qualif freres.soeurs clso
162 Etudiant, eleve   &lt;NA&gt;             2  Non
215 Etudiant, eleve   &lt;NA&gt;             2  Oui
346 Etudiant, eleve   &lt;NA&gt;             9  Non
                          relig trav.imp
162  Appartenance sans pratique     &lt;NA&gt;
215 Ni croyance ni appartenance     &lt;NA&gt;
346         Pratiquant regulier     &lt;NA&gt;
    trav.satisf hard.rock lecture.bd peche.chasse
162        &lt;NA&gt;       Non        Non          Non
215        &lt;NA&gt;       Non        Non          Non
346        &lt;NA&gt;       Non        Non          Non
    cuisine bricol cinema sport heures.tv
162     Non    Non    Non   Oui         3
215     Oui    Non    Oui   Oui         2
346     Non    Non    Oui   Non         2</code></pre>
<p>On a les caract√©ristiques des trois enqu√™t√©s les plus jeunes.</p>
<p>On peut √©videmment trier par ordre d√©croissant en utilisant l‚Äôoption <code>decreasing=TRUE</code>. On peut donc afficher les caract√©ristiques des trois individus les plus √¢g√©s avec¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(d[<span class="kw">order</span>(d$age, <span class="dt">decreasing =</span> <span class="ot">TRUE</span>), ], <span class="dv">3</span>)</code></pre></div>
<pre><code>       id age  sexe
1916 1916  97 Femme
270   270  96 Femme
1542 1542  93 Femme
                               nivetud    poids
1916 Derniere annee d'etudes primaires 2162.835
270  Derniere annee d'etudes primaires 9993.020
1542 Derniere annee d'etudes primaires 7107.841
                   occup qualif freres.soeurs
1916       Autre inactif  Autre             5
270             Retraite   &lt;NA&gt;             1
1542 Retire des affaires   &lt;NA&gt;             7
     clso                       relig trav.imp
1916  Non      Pratiquant occasionnel     &lt;NA&gt;
270   Oui Ni croyance ni appartenance     &lt;NA&gt;
1542  Non      Pratiquant occasionnel     &lt;NA&gt;
     trav.satisf hard.rock lecture.bd
1916        &lt;NA&gt;       Non        Non
270         &lt;NA&gt;       Non        Non
1542        &lt;NA&gt;       Non        Non
     peche.chasse cuisine bricol cinema sport
1916          Non     Non    Non    Non   Non
270           Non     Non    Non    Non   Non
1542          Non     Non    Non    Oui   Non
     heures.tv
1916         3
270          6
1542         3</code></pre>
<p>On peut √©galement trier selon plusieurs variables. Ainsi, si l‚Äôon souhaite trier le tableau par <em>sexe</em> puis, au sein de chaque sexe, par <em>age</em>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d.tri &lt;-<span class="st"> </span>d[<span class="kw">order</span>(d$sexe, d$age), ]</code></pre></div>
<div class="note">
<p>Si l‚Äôon transmets une variable textuelle, le tri sera r√©alis√© de mani√®re alphab√©tique alors que si l‚Äôon transmets un facteur, le tri sera effectu√© selon l‚Äôordre des facteurs (que l‚Äôon peut visualiser avec <code data-pkg="base">levels</code>).</p>
</div>
</div>
<div id="tris_extension-dplyr" class="section level2">
<h2>Extension dplyr</h2>
</div>
<div id="tris_extension-data.table" class="section level2">
<h2>Extension data.table</h2>
</div>

</article>
<article id="sous-ensembles">

<div class="fluid-row" id="sous-ensembles_header">


<h1 class="title">Sous-ensembles</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#sous-ensembles_par-indexation">Par indexation</a></li>
<li><a href="#sous-ensembles_subset">Fonction subset</a></li>
<li><a href="#sous-ensembles_tapply">Fonction tapply</a></li>
<li><a href="#sous-ensembles_extension-dplyr">Extension dplyr</a></li>
<li><a href="#sous-ensembles_extension-data.table">Extension data.table</a></li>
</ul>
</div>

<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>
<p>Dans ce qui suit on travaillera sur le jeu de donn√©es tir√© de l‚Äôenqu√™te <em>Histoire de vie</em>, fourni avec l‚Äôextension <code class="pkg">questionr</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">data</span>(hdv2003)
d &lt;-<span class="st"> </span>hdv2003</code></pre></div>
<div id="sous-ensembles_par-indexation" class="section level2">
<h2>Par indexation</h2>
<p>La premi√®re mani√®re de construire des sous-populations est d‚Äôutiliser l‚Äôindexation par conditions. On peut ainsi facilement s√©lectionner une partie des observations suivant un ou plusieurs crit√®res et placer le r√©sultat dans un nouveau tableau de donn√©es.</p>
<p>Par exemple si l‚Äôon souhaite isoler les hommes et les femmes¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dh &lt;-<span class="st"> </span>d[d$sexe ==<span class="st"> "Homme"</span>, ]
df &lt;-<span class="st"> </span>d[d$sexe ==<span class="st"> "Femme"</span>, ]
<span class="kw">table</span>(d$sexe)</code></pre></div>
<pre><code>
Homme Femme 
  899  1101 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(dh)</code></pre></div>
<pre><code>[1] 899  20</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(df)</code></pre></div>
<pre><code>[1] 1101   20</code></pre>
<p>On a √† partir de l√† trois tableaux de donn√©es, <code>d</code> comportant la population totale, <code>dh</code> seulement les hommes et <code>df</code> seulement les femmes.</p>
<p>On peut √©videmment combiner plusieurs crit√®res¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dh<span class="fl">.25</span> &lt;-<span class="st"> </span>d[d$sexe ==<span class="st"> "Homme"</span> &amp;<span class="st"> </span>d$age &lt;=<span class="st"> </span><span class="dv">25</span>, ]
<span class="kw">dim</span>(dh<span class="fl">.25</span>)</code></pre></div>
<pre><code>[1] 86 20</code></pre>
<p>Si on utilise directement l‚Äôindexation, il convient cependant d‚Äô√™tre extr√™mement prudent avec les valeurs manquantes. Comme indiqu√© pr√©c√©demment, la pr√©sence d‚Äôune valeur manquante dans une condition fait que celle-ci est √©valu√©e en <code>NA</code> et qu‚Äôau final la ligne correspondante est conserv√©e par l‚Äôindexation¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(d$trav.satisf)</code></pre></div>
<pre><code>  Satisfaction Insatisfaction      Equilibre 
           480            117            451 
          NA's 
           952 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d.satisf &lt;-<span class="st"> </span>d[d$trav.satisf ==<span class="st"> "Satisfaction"</span>, ]
<span class="kw">dim</span>(d.satisf)</code></pre></div>
<pre><code>[1] 1432   20</code></pre>
<p>Comme on le voit, ici <code>d.satisf</code> contient les individus ayant la modalit√© <em>Satisfaction</em> mais aussi ceux ayant une valeur manquante <code>NA</code>. C‚Äôest pourquoi il faut toujours soit v√©rifier au pr√©alable qu‚Äôon n‚Äôa pas de valeurs manquantes dans les variables de la condition, soit exclure explicitement les <code>NA</code> de la mani√®re suivante¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d.satisf &lt;-<span class="st"> </span>d[d$trav.satisf ==<span class="st"> "Satisfaction"</span> &amp;<span class="st"> </span>!<span class="kw">is.na</span>(d$trav.satisf), 
  ]
<span class="kw">dim</span>(d.satisf)</code></pre></div>
<pre><code>[1] 480  20</code></pre>
<p>C‚Äôest notamment pour cette raison qu‚Äôon pr√©f√®rera le plus souvent utiliser la fonction <code data-pkg="base">subset</code>.</p>
</div>
<div id="sous-ensembles_subset" class="section level2">
<h2>Fonction subset</h2>
<p>La fonction <code data-pkg="base">subset</code> permet d‚Äôextraire des sous-populations de mani√®re plus simple et un peu plus intuitive que l‚Äôindexation directe.</p>
<p>Celle-ci prend trois arguments principaux¬†:</p>
<ul>
<li>le nom de l‚Äôobjet de d√©part¬†;</li>
<li>une condition sur les observations (<code>subset</code>)¬†;</li>
<li>√©ventuellement une condition sur les colonnes (<code>select</code>).</li>
</ul>
<p>Reprenons tout de suite un exemple d√©j√† vu¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dh &lt;-<span class="st"> </span><span class="kw">subset</span>(d, sexe ==<span class="st"> "Homme"</span>)
df &lt;-<span class="st"> </span><span class="kw">subset</span>(d, sexe ==<span class="st"> "Femme"</span>)</code></pre></div>
<p>L‚Äôutilisation de <code data-pkg="base">subset</code> pr√©sente plusieurs avantages. Le premier est d‚Äô√©conomiser quelques touches. On n‚Äôest en effet pas oblig√© de saisir le nom du tableau de donn√©es dans la condition sur les lignes. Ainsi les deux commandes suivantes sont √©quivalentes¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dh &lt;-<span class="st"> </span><span class="kw">subset</span>(d, d$sexe ==<span class="st"> "Homme"</span>)
dh &lt;-<span class="st"> </span><span class="kw">subset</span>(d, sexe ==<span class="st"> "Homme"</span>)</code></pre></div>
<p>Le second avantage est que <code data-pkg="base">subset</code> s‚Äôoccupe du probl√®me des valeurs manquantes √©voqu√©es pr√©c√©demment et les exclut de lui-m√™me, contrairement au comportement par d√©faut¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(d$trav.satisf)</code></pre></div>
<pre><code>  Satisfaction Insatisfaction      Equilibre 
           480            117            451 
          NA's 
           952 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d.satisf &lt;-<span class="st"> </span>d[d$trav.satisf ==<span class="st"> "Satisfaction"</span>, ]
<span class="kw">dim</span>(d.satisf)</code></pre></div>
<pre><code>[1] 1432   20</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d.satisf &lt;-<span class="st"> </span><span class="kw">subset</span>(d, trav.satisf ==<span class="st"> "Satisfaction"</span>)
<span class="kw">dim</span>(d.satisf)</code></pre></div>
<pre><code>[1] 480  20</code></pre>
<p>Dans le cas pr√©sent, l‚Äôextraction obtenue avec <code data-pkg="base">subset</code> est √©quivalente √†¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d.satisf &lt;-<span class="st"> </span>d[d$trav.satisf ==<span class="st"> "Satisfaction"</span> &amp;<span class="st"> </span>!<span class="kw">is.na</span>(d$trav.satisf), 
  ]
<span class="kw">dim</span>(d.satisf)</code></pre></div>
<pre><code>[1] 480  20</code></pre>
<p>Enfin, l‚Äôutilisation de l‚Äôargument <code>select</code> est simplifi√© pour l‚Äôexpression de condition sur les colonnes. On peut ainsi sp√©cifier les noms de variable sans guillemets et leur appliquer directement l‚Äôop√©rateur d‚Äôexclusion <code>-</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d2 &lt;-<span class="st"> </span><span class="kw">subset</span>(d, <span class="dt">select =</span> <span class="kw">c</span>(sexe, sport))
d2 &lt;-<span class="st"> </span><span class="kw">subset</span>(d, age &gt;<span class="st"> </span><span class="dv">25</span>, <span class="dt">select =</span> -<span class="kw">c</span>(id, age, cinema))</code></pre></div>
</div>
<div id="sous-ensembles_tapply" class="section level2">
<h2>Fonction tapply</h2>
<div class="note">
<p>Cette section documente une fonction qui peut √™tre tr√®s utile, mais pas forc√©ment indispensable au d√©part.</p>
</div>
<p>La fonction <code data-pkg="base">tapply</code> n‚Äôest qu‚Äôindirectement li√©e √† la notion de sous-population, mais peut permettre d‚Äô√©viter d‚Äôavoir √† cr√©er ces sous-populations dans certains cas.</p>
<p>Son fonctionnement est assez simple, mais pas forc√©ment intuitif. La fonction prend trois arguments¬†: un vecteur, un facteur et une fonction. Elle applique ensuite la fonction aux √©l√©ments du vecteur correspondant √† un m√™me niveau du facteur. Vite, un exemple¬†!</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tapply</span>(d$age, d$sexe, mean)</code></pre></div>
<pre><code>   Homme    Femme 
48.16129 48.15350 </code></pre>
<p>Qu‚Äôest-ce que √ßa signifie¬†? Ici <code data-pkg="base">tapply</code> a s√©lectionn√© toutes les observations correspondant √† ¬´¬†Homme¬†¬ª, puis appliqu√© la fonction <code data-pkg="base">mean</code> aux valeurs de <em>age</em> correspondantes. Puis elle a fait de m√™me pour les observations correspondant √† ¬´¬†Femme¬†¬ª. On a donc ici la moyenne d‚Äô√¢ge chez les hommes et chez les femmes.</p>
<p>On peut fournir √† peu pr√®s n‚Äôimporte quelle fonction √† <code data-pkg="base">tapply</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tapply</span>(d$bricol, d$sexe, freq)</code></pre></div>
<pre><code>$Homme
      n    % val%
Non 384 42.7 42.7
Oui 515 57.3 57.3
NA    0  0.0   NA

$Femme
      n    % val%
Non 763 69.3 69.3
Oui 338 30.7 30.7
NA    0  0.0   NA</code></pre>
<p>Les arguments suppl√©mentaires fournis √† <code data-pkg="base">tapply</code> sont en fait fournis directement √† la fonction appel√©e.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tapply</span>(d$bricol, d$sexe, freq, <span class="dt">total =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>$Homme
        n     %  val%
Non   384  42.7  42.7
Oui   515  57.3  57.3
NA      0   0.0    NA
Total 899 100.0 100.0

$Femme
         n     %  val%
Non    763  69.3  69.3
Oui    338  30.7  30.7
NA       0   0.0    NA
Total 1101 100.0 100.0</code></pre>
<div class="note">
<p>La fonction <code data-pkg="base">by</code> est un √©quivalent (pour les tableaux de donn√©es) de <code data-pkg="base">tapply</code>. La pr√©sentation des r√©sultats diff√®re l√©g√®rement.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tapply</span>(d$age, d$sexe, mean)</code></pre></div>
<pre><code>   Homme    Femme 
48.16129 48.15350 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">by</span>(d$age, d$sexe, mean)</code></pre></div>
<pre><code>d$sexe: Homme
[1] 48.16129
------------------------------------- 
d$sexe: Femme
[1] 48.1535</code></pre>
</div>
</div>
<div id="sous-ensembles_extension-dplyr" class="section level2">
<h2>Extension dplyr</h2>
</div>
<div id="sous-ensembles_extension-data.table" class="section level2">
<h2>Extension data.table</h2>
</div>

</article>
<article id="fusion-de-tables">

<div class="fluid-row" id="fusion-de-tables_header">


<h1 class="title">Fusion de tables</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#fusion-de-tables_un-premier-exemple-les-enquetes-insee">Un premier exemple : les enqu√™tes INSEE</a></li>
<li><a href="#fusion-de-tables_un-second-exemple-une-enquete-menage">Un second exemple : une enqu√™te m√©nage</a></li>
<li><a href="#fusion-de-tables_extension-dplyr">Extension dplyr</a></li>
<li><a href="#fusion-de-tables_extension-data.table">Extension data.table</a></li>
</ul>
</div>

<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>
<div id="fusion-de-tables_un-premier-exemple-les-enquetes-insee" class="section level2">
<h2>Un premier exemple : les enqu√™tes INSEE</h2>
<p>Lorsqu‚Äôon traite de grosses enqu√™tes, notamment les enqu√™tes de l‚ÄôINSEE, on a souvent √† g√©rer des donn√©es r√©parties dans plusieurs tables, soit du fait de la construction du questionnaire, soit du fait de contraintes techniques (fichiers <strong>dbf</strong> ou <strong>Excel</strong> limit√©s √† 256 colonnes, par exemple).</p>
<p>Une op√©ration relativement courante consiste √† <dfn data-index="fusion de tables">fusionner</dfn><dfn data-index="tableau de donn√©es, fusion"/> plusieurs tables pour regrouper tout ou partie des donn√©es dans un unique tableau.</p>
<p>Nous allons simuler artificiellement une telle situation en cr√©ant deux tables √† partir de l‚Äôextrait de l‚Äôenqu√™te <em>Histoire de vie</em>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">data</span>(hdv2003)
d &lt;-<span class="st"> </span>hdv2003
<span class="kw">dim</span>(d)</code></pre></div>
<pre><code>[1] 2000   20</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d1 &lt;-<span class="st"> </span><span class="kw">subset</span>(d, <span class="dt">select =</span> <span class="kw">c</span>(<span class="st">"id"</span>, <span class="st">"age"</span>, <span class="st">"sexe"</span>))
<span class="kw">dim</span>(d1)</code></pre></div>
<pre><code>[1] 2000    3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d2 &lt;-<span class="st"> </span><span class="kw">subset</span>(d, <span class="dt">select =</span> <span class="kw">c</span>(<span class="st">"id"</span>, <span class="st">"clso"</span>))
<span class="kw">dim</span>(d2)</code></pre></div>
<pre><code>[1] 2000    2</code></pre>
<p>On a donc deux tableaux de donn√©es, <code>d1</code> et <code>d2</code>, comportant chacun 2000 lignes et respectivement 3 et 2 colonnes. Comment les rassembler pour n‚Äôen former qu‚Äôun¬†?</p>
<p>Intuitivement, cela para√Æt simple. Il suffit de ¬´¬†coller¬†¬ª <code>d2</code> √† la droite de <code>d1</code>, comme dans l‚Äôexemple suivant.</p>
<style type="text/css"><![CDATA[
table.exemple_df td, 
table.exemple_df th {
  text-align: center;
  padding: 3px 10px;
}
table.exemple_df th {
  border-bottom: solid 1px #999;
}

table.exemple_df td + td,
table.exemple_df th + th {
  border-left: solid 1px #999;
}

table.exemple_operateur td {
  font-size: 3em;
  padding: 20px;
}
]]></style>
<table style="margin: 11px auto;">
<tr>
<td>
<table class="exemple_df">
<tr>
<th>
id
</th>
<th>
v1
</th>
<th>
v2
</th>
</tr>
<tr>
<td>
1
</td>
<td>
H
</td>
<td>
12
</td>
</tr>
<tr>
<td>
2
</td>
<td>
H
</td>
<td>
17
</td>
</tr>
<tr>
<td>
3
</td>
<td>
F
</td>
<td>
41
</td>
</tr>
<tr>
<td>
4
</td>
<td>
F
</td>
<td>
9
</td>
</tr>
<tr>
<td>
‚Ä¶
</td>
<td>
‚Ä¶
</td>
<td>
‚Ä¶
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_operateur">
<tr>
<td>
+
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_df">
<tr>
<th>
id
</th>
<th>
v3
</th>
</tr>
<tr>
<td>
1
</td>
<td>
rouge
</td>
</tr>
<tr>
<td>
2
</td>
<td>
bleu
</td>
</tr>
<tr>
<td>
3
</td>
<td>
bleu
</td>
</tr>
<tr>
<td>
4
</td>
<td>
rouge
</td>
</tr>
<tr>
<td>
‚Ä¶
</td>
<td>
‚Ä¶
</td>
<td>
‚Ä¶
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_operateur">
<tr>
<td>
=
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_df">
<tr>
<th>
id
</th>
<th>
v1
</th>
<th>
v2
</th>
<th>
v3
</th>
</tr>
<tr>
<td>
1
</td>
<td>
H
</td>
<td>
12
</td>
<td>
rouge
</td>
</tr>
<tr>
<td>
2
</td>
<td>
H
</td>
<td>
17
</td>
<td>
bleu
</td>
</tr>
<tr>
<td>
3
</td>
<td>
F
</td>
<td>
41
</td>
<td>
bleu
</td>
</tr>
<tr>
<td>
4
</td>
<td>
F
</td>
<td>
9
</td>
<td>
rouge
</td>
</tr>
<tr>
<td>
‚Ä¶
</td>
<td>
‚Ä¶
</td>
<td>
‚Ä¶
</td>
<td>
‚Ä¶
</td>
</tr>
</table>
</td>
</tr>
</table>
<p>Cela semble fonctionner. La fonction qui permet d‚Äôeffectuer cette op√©ration sous <strong>R</strong> s‚Äôappelle <code data-pkg="base">cbind</code>, elle ¬´¬†colle¬†¬ª des tableaux c√¥te √† c√¥te en regroupant leurs colonnes<a href="#fusion-de-tables_fn1" class="footnoteRef" id="fusion-de-tables_fnref1"><sup>1</sup></a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(<span class="kw">cbind</span>(d1, d2))</code></pre></div>
<pre><code>  id age  sexe id clso
1  1  28 Femme  1  Oui
2  2  23 Femme  2  Oui
3  3  59 Homme  3  Non
4  4  34 Homme  4  Non
5  5  71 Femme  5  Oui
6  6  35 Femme  6  Non</code></pre>
<p>√Ä part le fait qu‚Äôon a une colonne <em>id</em> en double, le r√©sultat semble satisfaisant. √Ä premi√®re vue seulement. Imaginons maintenant que nous avons travaill√© sur <code>d1</code> et <code>d2</code>, et que nous avons ordonn√© les lignes de <code>d1</code> selon l‚Äô√¢ge des enqu√™t√©s¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d1 &lt;-<span class="st"> </span>d1[<span class="kw">order</span>(d1$age), ]</code></pre></div>
<p>R√©p√©tons l‚Äôop√©ration de collage¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(<span class="kw">cbind</span>(d1, d2))</code></pre></div>
<pre><code>     id age  sexe id clso
162 162  18 Homme  1  Oui
215 215  18 Homme  2  Oui
346 346  18 Femme  3  Non
377 377  18 Homme  4  Non
511 511  18 Homme  5  Oui
646 646  18 Homme  6  Non</code></pre>
<p>Que constate-t-on¬†? La pr√©sence de la variable <em>id</em> en double nous permet de voir que les identifiants ne co√Øncident plus¬†! En regroupant nos colonnes nous avons donc attribu√© √† des individus les r√©ponses d‚Äôautres individus.</p>
<p>La commande <code data-pkg="base">cbind</code> ne peut en effet fonctionner que si les deux tableaux ont exactement le m√™me nombre de lignes, et dans le m√™me ordre, ce qui n‚Äôest pas le cas ici.</p>
<p>On va donc √™tre oblig√© de poc√©der √† une <dfn>fusion</dfn> des deux tableaux, qui va permettre de rendre √† chaque ligne ce qui lui appartient. Pour cela nous avons besoin d‚Äôun identifiant qui permet d‚Äôidentifier chaque ligne de mani√®re unique et qui doit √™tre pr√©sent dans tous les tableaux. Dans notre cas, c‚Äôest plut√¥t rapide, il s‚Äôagit de la variable <em>id</em>.</p>
<p>Une fois l‚Äôidentifiant identifi√©<a href="#fusion-de-tables_fn2" class="footnoteRef" id="fusion-de-tables_fnref2"><sup>2</sup></a>, on peut utiliser la commande <code data-pkg="base">merge</code>. Celle-ci va fusionner les deux tableaux en supprimant les colonnes en double et en regroupant les lignes selon leurs identifiants¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d.complet &lt;-<span class="st"> </span><span class="kw">merge</span>(d1, d2, <span class="dt">by =</span> <span class="st">"id"</span>)
<span class="kw">head</span>(d.complet)</code></pre></div>
<pre><code>  id age  sexe clso
1  1  28 Femme  Oui
2  2  23 Femme  Oui
3  3  59 Homme  Non
4  4  34 Homme  Non
5  5  71 Femme  Oui
6  6  35 Femme  Non</code></pre>
<p>Ici l‚Äôutilisation de la fonction <code data-pkg="base">merge</code> est plut√¥t simple car nous sommes dans le cas de figure id√©al¬†: les lignes correspondent parfaitement et l‚Äôidentifiant est clairement identifi√©. Parfois les choses peuvent √™tre un peu plus compliqu√©es¬†:</p>
<ul>
<li>parfois les identifiants n‚Äôont pas le m√™me nom dans les deux tableaux. On peut alors les sp√©cifier par les options <code>by.x</code> et <code>by.y</code>¬†;</li>
<li>parfois les deux tableaux comportent des colonnes (hors identifiants) ayant le m√™me nom. <code data-pkg="base">merge</code> conserve dans ce cas ces deux colonnes mais les renomme en les suffixant par <em>.x</em> pour celles provenant du premier tableau et <em>.y</em> pour celles du second¬†;</li>
<li>parfois on n‚Äôa pas d‚Äôidentifiant unique pr√©√©tabli, mais on en construit un √† partir de plusieurs variables. On peut alors donner un vecteur en param√®tres de l‚Äôoption <code>by</code>, par exemple <code>by=c("nom","prenom","date.naissance")</code>.</li>
</ul>
<p>Une subtilit√© suppl√©mentaire intervient lorsque les deux tableaux fusionn√©s n‚Äôont pas exactement les m√™mes lignes. Par d√©faut, <code data-pkg="base">merge</code> ne conserve que les lignes pr√©sentes dans les deux tableaux¬†:</p>
<table style="margin: 11px auto;">
<tr>
<td>
<table class="exemple_df">
<tr>
<th>
id
</th>
<th>
v1
</th>
</tr>
<tr>
<td>
1
</td>
<td>
H
</td>
</tr>
<tr>
<td>
2
</td>
<td>
H
</td>
</tr>
<tr>
<td>
3
</td>
<td>
F
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_operateur">
<tr>
<td>
+
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_df">
<tr>
<th>
id
</th>
<th>
v2
</th>
</tr>
<tr>
<td>
1
</td>
<td>
10
</td>
</tr>
<tr>
<td>
2
</td>
<td>
15
</td>
</tr>
<tr>
<td>
5
</td>
<td>
31
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_operateur">
<tr>
<td>
=
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_df">
<tr>
<th>
id
</th>
<th>
v1
</th>
<th>
v2
</th>
</tr>
<tr>
<td>
1
</td>
<td>
H
</td>
<td>
10
</td>
</tr>
<tr>
<td>
2
</td>
<td>
H
</td>
<td>
15
</td>
</tr>
</table>
</td>
</tr>
</table>
<p>On peut cependant modifier ce comportement avec les options <code>all.x</code> et <code>all.y</code>.</p>
<p>Ainsi, <code>all.x=TRUE</code> indique de conserver toutes les lignes du premier tableau. Dans ce cas <code data-pkg="base">merge</code> donne une valeur <code>NA</code> pour ces lignes aux colonnes provenant du second tableau. Ce qui donnerait¬†:</p>
<table style="margin: 11px auto;">
<tr>
<td>
<table class="exemple_df">
<tr>
<th>
id
</th>
<th>
v1
</th>
</tr>
<tr>
<td>
1
</td>
<td>
H
</td>
</tr>
<tr>
<td>
2
</td>
<td>
H
</td>
</tr>
<tr>
<td>
3
</td>
<td>
F
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_operateur">
<tr>
<td>
+
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_df">
<tr>
<th>
id
</th>
<th>
v2
</th>
</tr>
<tr>
<td>
1
</td>
<td>
10
</td>
</tr>
<tr>
<td>
2
</td>
<td>
15
</td>
</tr>
<tr>
<td>
5
</td>
<td>
31
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_operateur">
<tr>
<td>
=
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_df">
<tr>
<th>
id
</th>
<th>
v1
</th>
<th>
v2
</th>
</tr>
<tr>
<td>
1
</td>
<td>
H
</td>
<td>
10
</td>
</tr>
<tr>
<td>
2
</td>
<td>
H
</td>
<td>
15
</td>
</tr>
<tr>
<td>
3
</td>
<td>
F
</td>
<td>
<code>NA</code>
</td>
</tr>
</table>
</td>
</tr>
</table>
<p>L‚Äôoption <code>all.y=TRUE</code> fait la m√™me chose en conservant toutes les lignes du second tableau.</p>
<table style="margin: 11px auto;">
<tr>
<td>
<table class="exemple_df">
<tr>
<th>
id
</th>
<th>
v1
</th>
</tr>
<tr>
<td>
1
</td>
<td>
H
</td>
</tr>
<tr>
<td>
2
</td>
<td>
H
</td>
</tr>
<tr>
<td>
3
</td>
<td>
F
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_operateur">
<tr>
<td>
+
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_df">
<tr>
<th>
id
</th>
<th>
v2
</th>
</tr>
<tr>
<td>
1
</td>
<td>
10
</td>
</tr>
<tr>
<td>
2
</td>
<td>
15
</td>
</tr>
<tr>
<td>
5
</td>
<td>
31
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_operateur">
<tr>
<td>
=
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_df">
<tr>
<th>
id
</th>
<th>
v1
</th>
<th>
v2
</th>
</tr>
<tr>
<td>
1
</td>
<td>
H
</td>
<td>
10
</td>
</tr>
<tr>
<td>
2
</td>
<td>
H
</td>
<td>
15
</td>
</tr>
<tr>
<td>
5
</td>
<td>
<code>NA</code>
</td>
<td>
31
</td>
</tr>
</table>
</td>
</tr>
</table>
<p>Enfin, on peut d√©cider de conserver toutes les lignes des deux tableaux en utilisant √† la fois <code>all.x=TRUE</code> et <code>all.y=TRUE</code>, ce qui donne¬†:</p>
<table style="margin: 11px auto;">
<tr>
<td>
<table class="exemple_df">
<tr>
<th>
id
</th>
<th>
v1
</th>
</tr>
<tr>
<td>
1
</td>
<td>
H
</td>
</tr>
<tr>
<td>
2
</td>
<td>
H
</td>
</tr>
<tr>
<td>
3
</td>
<td>
F
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_operateur">
<tr>
<td>
+
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_df">
<tr>
<th>
id
</th>
<th>
v2
</th>
</tr>
<tr>
<td>
1
</td>
<td>
10
</td>
</tr>
<tr>
<td>
2
</td>
<td>
15
</td>
</tr>
<tr>
<td>
5
</td>
<td>
31
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_operateur">
<tr>
<td>
=
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_df">
<tr>
<th>
id
</th>
<th>
v1
</th>
<th>
v2
</th>
</tr>
<tr>
<td>
1
</td>
<td>
H
</td>
<td>
10
</td>
</tr>
<tr>
<td>
2
</td>
<td>
H
</td>
<td>
15
</td>
</tr>
<tr>
<td>
3
</td>
<td>
F
</td>
<td>
<code>NA</code>
</td>
</tr>
<tr>
<td>
5
</td>
<td>
<code>NA</code>
</td>
<td>
31
</td>
</tr>
</table>
</td>
</tr>
</table>
<p>Parfois, l‚Äôun des identifiants est pr√©sent √† plusieurs reprises dans l‚Äôun des tableaux (par exemple lorsque l‚Äôune des tables est un ensemble de m√©nages et que l‚Äôautre d√©crit l‚Äôensemble des individus de ces m√©nages). Dans ce cas les lignes de l‚Äôautre table sont dupliqu√©es autant de fois que n√©cessaires¬†:</p>
<table style="margin: 11px auto;">
<tr>
<td>
<table class="exemple_df">
<tr>
<th>
id
</th>
<th>
v1
</th>
</tr>
<tr>
<td>
1
</td>
<td>
H
</td>
</tr>
<tr>
<td>
2
</td>
<td>
H
</td>
</tr>
<tr>
<td>
3
</td>
<td>
F
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_operateur">
<tr>
<td>
+
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_df">
<tr>
<th>
id
</th>
<th>
v2
</th>
</tr>
<tr>
<td>
1
</td>
<td>
10
</td>
</tr>
<tr>
<td>
1
</td>
<td>
18
</td>
</tr>
<tr>
<td>
1
</td>
<td>
21
</td>
</tr>
<tr>
<td>
2
</td>
<td>
15
</td>
</tr>
<tr>
<td>
3
</td>
<td>
42
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_operateur">
<tr>
<td>
=
</td>
</tr>
</table>
</td>
<td>
<table class="exemple_df">
<tr>
<th>
id
</th>
<th>
v1
</th>
<th>
v2
</th>
</tr>
<tr>
<td>
1
</td>
<td>
H
</td>
<td>
10
</td>
</tr>
<tr>
<td>
1
</td>
<td>
H
</td>
<td>
18
</td>
</tr>
<tr>
<td>
1
</td>
<td>
H
</td>
<td>
21
</td>
</tr>
<tr>
<td>
2
</td>
<td>
H
</td>
<td>
15
</td>
</tr>
<tr>
<td>
3
</td>
<td>
F
</td>
<td>
42
</td>
</tr>
</table>
</td>
</tr>
</table>
</div>
<div id="fusion-de-tables_un-second-exemple-une-enquete-menage" class="section level2">
<h2>Un second exemple : une enqu√™te m√©nage</h2>
</div>
<div id="fusion-de-tables_extension-dplyr" class="section level2">
<h2>Extension dplyr</h2>
<p>Voir aussi <code data-pkg="dplyr" data-rdoc="bind">combine</code> de <strong class="pkg">dplyr</strong> et <code data-pkg="plyr">rbind.fill</code> de <strong class="pkg">plyr</strong>.</p>
</div>
<div id="fusion-de-tables_extension-data.table" class="section level2">
<h2>Extension data.table</h2>
</div>
<div class="footnotes">
<hr/>
<ol>
<li id="fusion-de-tables_fn1"><p>L‚Äô√©quivalent de <code data-pkg="base">cbind</code> pour les lignes s‚Äôappelle <code data-pkg="base" data-rdoc="cbind">rbind</code>.<a href="#fusion-de-tables_fnref1">‚Ü©</a></p></li>
<li id="fusion-de-tables_fn2"><p>Si vous me passez l‚Äôexpression‚Ä¶<a href="#fusion-de-tables_fnref2">‚Ü©</a></p></li>
</ol>
</div>

</article>
<article id="gestion-des-dates">

<div class="fluid-row" id="gestion-des-dates_header">


<h1 class="title">Gestion des dates</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>

</article>
<article id="aggregation">

<div class="fluid-row" id="aggregation_header">


<h1 class="title">Aggr√©gation</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>

</article>
<article id="fonctions-a-fenetre">

<div class="fluid-row" id="fonctions-a-fenetre_header">


<h1 class="title">Fonctions √† fen√™tre</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>

</article>
<article id="restructuration-de-donnees">

<div class="fluid-row" id="restructuration-de-donnees_header">


<h1 class="title">Restructuration de donn√©es</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>

</article>
<article id="manipuler-du-texte">

<div class="fluid-row" id="manipuler-du-texte_header">


<h1 class="title">Manipuler du texte</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>

</article>
<article id="export-de-donnees">

<div class="fluid-row" id="export-de-donnees_header">


<h1 class="title">Export de donn√©es</h1>

</div>


<p><dfn data-index="donn√©es, exporter"/><dfn data-index="exporter des donn√©es"/></p>
<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>
<p><strong>R</strong> propose diff√©rentes fonctions permettant d‚Äôexporter des donn√©es vers des formats vari√©s.</p>
<table style="width:21%;">
<colgroup>
<col width="6%"/>
<col width="6%"/>
<col width="6%"/>
</colgroup>
<thead>
<tr class="header">
<th align="left">Type de fichier souhait√©</th>
<th align="left">Fonction</th>
<th align="left">Extension</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">texte</td>
<td align="left"><code data-pkg="utils">write.table</code></td>
<td align="left"><code class="pkg">utils</code></td>
</tr>
<tr class="even">
<td align="left">CSV</td>
<td align="left"><code data-pkg="utils" data-rdoc="write.table">write.csv</code></td>
<td align="left"><code class="pkg">utils</code></td>
</tr>
<tr class="odd">
<td align="left">CSV</td>
<td align="left"><code data-pkg="readr">write_csv</code></td>
<td align="left"><code class="pkg">readr</code></td>
</tr>
<tr class="even">
<td align="left">Excel</td>
<td align="left"><code data-pkg="xlsx">write.xlsx</code></td>
<td align="left"><code class="pkg">xlsx</code></td>
</tr>
<tr class="odd">
<td align="left">dBase</td>
<td align="left"><code data-pkg="foreign">write.dbf</code></td>
<td align="left"><code class="pkg">foreign</code></td>
</tr>
<tr class="even">
<td align="left">SPSS</td>
<td align="left"><code data-pkg="haven">write_sav</code></td>
<td align="left"><code class="pkg">haven</code></td>
</tr>
<tr class="odd">
<td align="left">SPSS</td>
<td align="left"><code data-pkg="foreign">write.foreign</code></td>
<td align="left"><code class="pkg">foreign</code></td>
</tr>
<tr class="even">
<td align="left">Stata</td>
<td align="left"><code data-pkg="foreign">write.dta</code></td>
<td align="left"><code class="pkg">foreign</code></td>
</tr>
<tr class="odd">
<td align="left">Stata</td>
<td align="left"><code data-pkg="haven">write_dta</code></td>
<td align="left"><code class="pkg">haven</code></td>
</tr>
<tr class="even">
<td align="left">SAS</td>
<td align="left"><code data-pkg="foreign">write.foreign</code></td>
<td align="left"><code class="pkg">foreign</code></td>
</tr>
<tr class="odd">
<td align="left">SPSS</td>
<td align="left"><code data-pkg="foreign">write.foreign</code></td>
<td align="left"><code class="pkg">foreign</code></td>
</tr>
<tr class="even">
<td align="left">Shapefile</td>
<td align="left"><code data-pkg="maptools" data-rdoc="readShapePoints">writePointsShape</code></td>
<td align="left"><code class="pkg">maptools</code></td>
</tr>
<tr class="odd">
<td align="left">Shapefile</td>
<td align="left"><code data-pkg="maptools" data-rdoc="readShapeLines">writeLinesShape</code></td>
<td align="left"><code class="pkg">maptools</code></td>
</tr>
<tr class="even">
<td align="left">Shapefile</td>
<td align="left"><code data-pkg="maptools" data-rdoc="readShapePoly">writePolyShape</code></td>
<td align="left"><code class="pkg">maptools</code></td>
</tr>
<tr class="odd">
<td align="left">ASCII Grid</td>
<td align="left"><code data-pkg="maptools" data-rdoc="readAsciiGrid">writeAsciiGrid</code></td>
<td align="left"><code class="pkg">maptools</code></td>
</tr>
</tbody>
</table>
<p>√Ä nouveau, pour plus de d√©tails on se r√©f√©rera aux pages d‚Äôaide de ces fonctions et au manuel <cite>R Data Import/Export</cite> accessible √† l‚Äôadresse suivante¬†: <a href="http://cran.r-project.org/manuals.html" class="uri">http://cran.r-project.org/manuals.html</a>.</p>

</article>
<article id="export-de-graphiques">

<div class="fluid-row" id="export-de-graphiques_header">


<h1 class="title">Export de graphiques</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#export-de-graphiques_via-linterface-de-rstudio">Via l‚Äôinterface de RStudio</a><ul>
<li><a href="#export-de-graphiques_sauvegarder-le-fichier-en-tant-quimage">Sauvegarder le fichier en tant qu‚Äôimage</a></li>
<li><a href="#export-de-graphiques_sauvegarder-le-graphique-en-pdf">Sauvegarder le graphique en PDF</a></li>
<li><a href="#export-de-graphiques_copier-le-graphique-dans-le-presse-papier">Copier le graphique dans le presse-papier</a></li>
</ul></li>
<li><a href="#export-de-graphiques_export-avec-les-commandes-de-r">Export avec les commandes de R</a></li>
</ul>
</div>

<div id="export-de-graphiques_via-linterface-de-rstudio" class="section level2">
<h2>Via l‚Äôinterface de RStudio</h2>
<p>L‚Äô<dfn>export de graphiques</dfn><dfn data-index="graphique, export"/> est tr√®s facile avec <strong>RStudio</strong>. Lorsque l‚Äôon cr√©√© un graphique, ce dernier est affich√© sous l‚Äôonglet <em>Plots</em> dans le quadrant inf√©rieur droit. Il suffit de cliquer sur <em>Export</em> pour avoir acc√®s √† trois options diff√©rentes¬†:</p>
<ul>
<li><em>Save as image</em> pour sauvegarder le graphique en tant que fichier image¬†;</li>
<li><em>Save as PDF</em> pour sauvegarder le graphique dans un fichier <strong>PDF</strong>¬†;</li>
<li><em>Copy to Clipboard</em> pour copier le graphique dans le presse-papier (et pouvoir ainsi le coller ensuite dans un document <strong>Word</strong> par exemple).</li>
</ul>
<div id="export-de-graphiques_sauvegarder-le-fichier-en-tant-quimage" class="section level3">
<h3>Sauvegarder le fichier en tant qu‚Äôimage</h3>
<figure>
<img src="images/capture_RStudio_save_plot_as_image.png" alt="Sauvegarder un graphique en tant qu‚Äôimage avec RStudio"/>
<figcaption>
Sauvegarder un graphique en tant qu‚Äôimage avec RStudio
</figcaption>
</figure>
<p>La bo√Æte de dialogue qui s‚Äôouvre propose diff√©rentes options d‚Äôexport¬†:</p>
<ul>
<li>le type de fichier d√©sir√©¬†;</li>
<li>le nom du fichier¬†;</li>
<li>le r√©pertoire o√π le fichier doit √™tre cr√©√© (par d√©faut, il s‚Äôagit du r√©pertoire de travail)¬†;</li>
<li>la taille de l‚Äôimage.</li>
</ul>
<p><strong>R</strong> peut exporter un graphique dans une grande vari√©t√© de formats. Nous n‚Äôaborderons ici que les principaux. Les formats <strong>PNG</strong>, <strong>JPEG</strong> et <strong>TIFF</strong> sont des formats de type <dfn langue="en">bitmap</dfn><dfn data-index="image bitmap"/> (on parle aussi d‚Äô<dfn data-index="image matricielle">images matricielles</dfn><a href="#export-de-graphiques_fn1" class="footnoteRef" id="export-de-graphiques_fnref1"><sup>1</sup></a>). L‚Äôimage est stock√©e sous forme de points, sa qualit√© d√©pendant de sa <dfn>r√©solution</dfn>, c‚Äôest-√†-dire du nombre total de points qui la composent. L‚Äôint√©r√™t des images matricielles est d‚Äô√™tre toujours interpr√©t√©es de mani√®re identique quelque soit l‚Äôoutil utilis√©. Par contre, elles ne sont pas adapt√©es lorsque l‚Äôon souhaite effectuer des retouches avec un logiciel de dessin.</p>
<p>Pour une utilisation sur un site web, on privil√©giera une r√©solution d‚Äôimage mod√©r√©e (entre 400 et 800 pixels de largeur) et les formats <strong>PNG</strong> ou <strong>JPEG</strong>. Pour un document destin√© √† √™tre imprim√©, on priviligiera une r√©solution plus √©lev√©e, pour √©viter un ph√©nom√®ne dit de pixellisation.</p>
<p>Les <dfn data-index="image vectorielle">images vectorielles</dfn><a href="#export-de-graphiques_fn2" class="footnoteRef" id="export-de-graphiques_fnref2"><sup>2</sup></a> ont l‚Äôavantage de pouvoir √™tre redimensionn√©es √† volont√© sans perte de qualit√© et produisent des fichiers en g√©n√©ral de plus petite taille<a href="#export-de-graphiques_fn3" class="footnoteRef" id="export-de-graphiques_fnref3"><sup>3</sup></a>. Elles sont donc tout √† fait adapt√©es pour l‚Äôimpression. Si l‚Äôon souhaite importer l‚Äôimage dans <strong>Word</strong>, on choisira le format <strong>Metafile</strong> (le seul compris par ce logiciel). Pour <strong>Libre Office</strong> ou <strong>Open Office</strong>, on choisira le format <strong>SVG</strong>.</p>
<p><strong>SVG</strong> (<em>scalable vector graphic</em><a href="#export-de-graphiques_fn4" class="footnoteRef" id="export-de-graphiques_fnref4"><sup>4</sup></a>) est un format libre permettant de d√©crire une image vectorielle. Les fichiers <strong>SVG</strong> peuvent √™tre directement lus par la majorit√© des navigateurs r√©cents (<strong>Firefox</strong>, <strong>Chrome</strong>, ‚Ä¶). De plus, le logiciel libre de dessins <strong>Inkscape</strong><a href="#export-de-graphiques_fn5" class="footnoteRef" id="export-de-graphiques_fnref5"><sup>5</sup></a> permet d‚Äô√©diter et de modifier des fichiers <strong>SVG</strong>. Ce format est donc tout √† fait adapt√© pour les graphiques que l‚Äôon souhaite retoucher avant publication. Depuis <strong>Inkscape</strong>, il sera possible de faire un export <strong>PNG</strong> en haute r√©solution pour int√©gration dans un fichier <strong>Word</strong>.</p>
<p>On pourra modifier la taille de l‚Äôimage avec les param√®tres <em>Height</em> (hauteur) et <em>Width</em> (largeur). En cliquant sur <em>Update Preview</em> la pr√©visulation du rendu final sera mise √† jour.</p>
</div>
<div id="export-de-graphiques_sauvegarder-le-graphique-en-pdf" class="section level3">
<h3>Sauvegarder le graphique en PDF</h3>
<figure>
<img src="images/capture_RStudio_save_plot_as_pdf.png" alt="Sauvegarder un graphique en PDF avec RStudio"/>
<figcaption>
Sauvegarder un graphique en PDF avec RStudio
</figcaption>
</figure>
<p>Les options de la bo√Æte de dialogue permettent de modifier la taille du fichier <strong>PDF</strong> et, bien entendu, d‚Äôindiquer le nom et le r√©pertoire du fichier √† cr√©er.</p>
<p>En cliquant sur <em>Preview</em>, <strong>RStudio</strong> g√©n√©rera un fichier temporaire afin de visualiser le rendu final.</p>
</div>
<div id="export-de-graphiques_copier-le-graphique-dans-le-presse-papier" class="section level3">
<h3>Copier le graphique dans le presse-papier</h3>
<figure>
<img src="images/capture_RStudio_copy_plot_to_clipboard.png" alt="Copier un graphique dans le presse-papier avec RStudio"/>
<figcaption>
Copier un graphique dans le presse-papier avec RStudio
</figcaption>
</figure>
<p>Il est possible de redimensionner le graphique. De plus, on pr√©cisera si l‚Äôon souhaite copier une version matricielle (<em>bitmap</em>) ou vectorielle (<em>metafile</em>) du graphique.</p>
</div>
</div>
<div id="export-de-graphiques_export-avec-les-commandes-de-r" class="section level2">
<h2>Export avec les commandes de R</h2>
<p>On peut √©galement exporter les graphiques dans des fichiers de diff√©rents formats directement avec des commandes <strong>R</strong>. Ceci a l‚Äôavantage de fonctionner sur toutes les plateformes et de faciliter la mise √† jour du graphique export√© (on n‚Äôa qu‚Äô√† relancer les commandes concern√©es pour que le fichier externe soit mis √† jour).</p>
<p>La premi√®re possibilit√© est d‚Äôexporter le contenu d‚Äôune fen√™tre d√©j√† existante √† l‚Äôaide de la fonction <code data-pkg="grDevices" data-rdoc="dev2">dev.print</code>. On doit fournir √† celle-ci le format de l‚Äôexport (option <code>device</code>) et le nom du fichier (option <code>file</code>).</p>
<p>Par exemple¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">boxplot</span>(<span class="kw">rnorm</span>(<span class="dv">100</span>))
<span class="kw">dev.print</span>(<span class="dt">device =</span> png, <span class="dt">file =</span> <span class="st">"export.png"</span>, <span class="dt">width =</span> <span class="dv">600</span>)</code></pre></div>
<p>Les formats de sortie possibles varient selon les plateformes, mais on retrouve partout les formats <em>bitmap</em> <code>png</code>, <code>jpeg</code>, <code>tiff</code> et les formats vectoriels <code>svg</code>, <code>postscript</code> ou <code>pdf</code>.</p>
<p>L‚Äôautre possibilit√© est de rediriger directement la sortie graphique dans un fichier, avant d‚Äôex√©cuter la commande g√©n√©rant la figure. On doit pour cela faire appel √† l‚Äôune des commandes permettant cette redirection. Les plus courantes sont <code data-pkg="grDevices">png</code>, <code data-pkg="grDevices" data-rdoc="png">jpeg</code> et <code data-pkg="grDevices" data-rdoc="png">tiff</code> pour les formats <em>bitmap</em>, <code data-pkg="grDevices" data-rdoc="cairo">svg</code>, <code data-pkg="grDevices">pdf</code>, <code data-pkg="grDevices">postscript</code> et <code data-pkg="grDevices" data-rdoc="windows">win.metafile</code> pour les formats vectoriels.</p>
<p>Ces fonctions prennent diff√©rentes options permettant de personnaliser la sortie graphique. Les plus courantes sont <code>width</code> et <code>height</code> qui donnent la largeur et la hauteur de l‚Äôimage g√©n√©r√©e (en pixels pour les images bitmap, en pouces pour les images vectorielles) et <code>pointsize</code> qui donne la taille de base des polices de caract√®re utilis√©es.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">png</span>(<span class="dt">file =</span> <span class="st">"out.png"</span>, <span class="dt">width =</span> <span class="dv">800</span>, <span class="dt">height =</span> <span class="dv">700</span>)
<span class="kw">plot</span>(<span class="kw">rnorm</span>(<span class="dv">100</span>))
<span class="kw">dev.off</span>()
<span class="kw">pdf</span>(<span class="dt">file =</span> <span class="st">"out.pdf"</span>, <span class="dt">width =</span> <span class="dv">9</span>, <span class="dt">height =</span> <span class="dv">9</span>, <span class="dt">pointsize =</span> <span class="dv">10</span>)
<span class="kw">plot</span>(<span class="kw">rnorm</span>(<span class="dv">150</span>))
<span class="kw">dev.off</span>()</code></pre></div>
<p>Il est n√©cessaire de faire un appel √† la fonction <code data-pkg="grDevices" data-rdoc="dev">dev.off</code> apr√®s g√©n√©ration du graphique pour que le r√©sultat soit bien √©crit dans le fichier de sortie (dans le cas contraire on se retrouve avec un fichier vide).</p>
</div>
<div class="footnotes">
<hr/>
<ol>
<li id="export-de-graphiques_fn1"><p>Voir <a href="http://fr.wikipedia.org/wiki/Image_matricielle" class="uri">http://fr.wikipedia.org/wiki/Image_matricielle</a>.<a href="#export-de-graphiques_fnref1">‚Ü©</a></p></li>
<li id="export-de-graphiques_fn2"><p>Voir <a href="http://fr.wikipedia.org/wiki/Image_vectorielle" class="uri">http://fr.wikipedia.org/wiki/Image_vectorielle</a>.<a href="#export-de-graphiques_fnref2">‚Ü©</a></p></li>
<li id="export-de-graphiques_fn3"><p>Sauf dans le cas des graphiques complexes reposant sur des d√©grad√©s de couleurs, comme les cartes produites √† partir de rasters. Auquel cas, il sera parfois pr√©f√©rable de privil√©gier un export dans un format <em>bitmap</em>.<a href="#export-de-graphiques_fnref3">‚Ü©</a></p></li>
<li id="export-de-graphiques_fn4"><p>Voir <a href="https://www.wikiwand.com/fr/Scalable_Vector_Graphics" class="uri">https://www.wikiwand.com/fr/Scalable_Vector_Graphics</a>.<a href="#export-de-graphiques_fnref4">‚Ü©</a></p></li>
<li id="export-de-graphiques_fn5"><p>t√©l√©chargeable gratuitement sur <a href="https://inkscape.org/fr/" class="uri">https://inkscape.org/fr/</a>.<a href="#export-de-graphiques_fnref5">‚Ü©</a></p></li>
</ol>
</div>

</article>
<article id="export-de-tableaux">

<div class="fluid-row" id="export-de-tableaux_header">


<h1 class="title">Export de tableaux</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>

</article>
<article id="statistique-univariee">

<div class="fluid-row" id="statistique-univariee_header">


<h1 class="title">Statistique univari√©e</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#statistique-univariee_variable-quantitative">Variable quantitative</a><ul>
<li><a href="#statistique-univariee_principaux-indicateurs">Principaux indicateurs</a></li>
<li><a href="#statistique-univariee_histogramme">Histogramme</a></li>
<li><a href="#statistique-univariee_boites-a-moustaches">Bo√Ætes √† moustaches</a></li>
</ul></li>
<li><a href="#statistique-univariee_variable-qualitative">Variable qualitative</a><ul>
<li><a href="#statistique-univariee_tris-a-plat">Tris √† plat</a></li>
<li><a href="#statistique-univariee_representation-graphique">Repr√©sentation graphique</a></li>
</ul></li>
</ul>
</div>

<div class="note">
<p>Ce chapitre est inspir√© de la section <em>Premier travail avec les donn√©es</em> du support de cours <a href="https://github.com/juba/intro-r">Introduction √† R</a> r√©alis√© par Julien Barnier.</p>
</div>
<p>On entend par <dfn>statistique univari√©e</dfn><dfn data-index="univari√©e, statistique"/> l‚Äô√©tude d‚Äôune seule variable, que celle-ci soit quantitative ou qualitative. La statistique univari√©e fait partie de la <dfn>statistique descriptive</dfn><dfn data-index="descriptive, statistique"/>.</p>
<p>Nous utiliserons dans ce chapitre les donn√©es de l‚Äôenqu√™te <em>Histoire de vie 2003</em> fournies avec l‚Äôextension <code class="pkg">questionr</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">data</span>(<span class="st">"hdv2003"</span>)
d &lt;-<span class="st"> </span>hdv2003</code></pre></div>
<div id="statistique-univariee_variable-quantitative" class="section level2">
<h2>Variable quantitative</h2>
<div id="statistique-univariee_principaux-indicateurs" class="section level3">
<h3>Principaux indicateurs</h3>
<p>Comme la fonction <code data-pkg="utils">str</code> nous l‚Äôa indiqu√©, notre tableau <code>d</code> contient plusieurs <dfn data-index="variable num√©rique">variables num√©riques</dfn><dfn data-index="num√©rique, variable"/> ou <dfn data-index="variable quantitative">variables quantitatives</dfn><dfn data-index="quantitative, variable"/>, dont la variable <em>heures.tv</em> qui repr√©sente le nombre moyen pass√© par les enqu√™t√©s √† regarder la t√©l√©vision quotidiennement. On peut essayer de d√©terminer quelques caract√©ristiques de cette variable, en utilisant les fonctions <code data-pkg="base">mean</code> (<dfn>moyenne</dfn>), <code data-pkg="stats">sd</code> (<dfn>√©cart-type</dfn>), <code data-pkg="base" data-rdoc="Extremes">min</code> (<dfn>minimum</dfn>), <code data-pkg="base" data-rdoc="Extremes">max</code> (<dfn>maximum</dfn>) et <code data-pkg="base">range</code> (<dfn>√©tendue</dfn>)¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(d$heures.tv)</code></pre></div>
<pre><code>[1] NA</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(d$heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>[1] 2.246566</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sd</span>(d$heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>[1] 1.775853</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">min</span>(d$heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>[1] 0</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">max</span>(d$heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>[1] 12</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">range</span>(d$heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>[1]  0 12</code></pre>
<p>On peut lui ajouter la fonction <code data-pkg="stats">median</code> qui donne la valeur <dfn>m√©diane</dfn>, <code data-pkg="stats">quantile</code> qui calcule plus g√©n√©ralement tout type de <dfn data-index="quantile">quantiles</dfn>, et le tr√®s utile <code data-pkg="base">summary</code> qui donne toutes ces informations ou presque en une seule fois, avec en prime le nombre de <dfn data-index="valeur manquante">valeurs manquantes</dfn> (<code>NA</code>)¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">median</span>(d$heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>[1] 2</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">quantile</span>(d$heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>  0%  25%  50%  75% 100% 
   0    1    2    3   12 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(d$heures.tv)</code></pre></div>
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  0.000   1.000   2.000   2.247   3.000  12.000 
   NA's 
      5 </code></pre>
<p>La fonction <code data-pkg="base">summary</code> est une fonction g√©n√©rique qui peut √™tre utilis√©e sur tout type d‚Äôobjet, y compris un tableau de donn√©es. Essayez donc <code>summary(d)</code>.</p>
</div>
<div id="statistique-univariee_histogramme" class="section level3">
<h3>Histogramme</h3>
<p>Tout cela est bien pratique, mais pour pouvoir observer la <dfn>distribution</dfn> des valeurs d‚Äôune variable quantitative, il n‚Äôy a quand m√™me rien de mieux qu‚Äôun bon graphique.</p>
<p>On peut commencer par un <dfn>histogramme</dfn> de la r√©partition des valeurs. Celui-ci peut √™tre g√©n√©r√© tr√®s facilement avec la fonction <code data-pkg="graphics">hist</code>¬†:</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hist</span>(d$heures.tv, <span class="dt">main =</span> <span class="st">"Nombre d'heures pass√©es devant la t√©l√© par jour"</span>, 
  <span class="dt">xlab =</span> <span class="st">"Heures"</span>, <span class="dt">ylab =</span> <span class="st">"Effectif"</span>)</code></pre></div>
<img src="graphs/statistique-univariee/unnamed-chunk-4-1.png" title="" alt="" width="1050"/>
<figcaption>
Exemple d‚Äôhistogramme
</figcaption>
</figure>
<p>Sous <strong>RStudio</strong>, les graphiques s‚Äôaffichent dans l‚Äôonglet <em>Plots</em> du quadrant inf√©rieur droit. Il est possible d‚Äôafficher une version plus grande de votre graphique en cliquant sur <em>Zoom</em>.</p>
<p>Ici, les options <code>main</code>, <code>xlab</code> et <code>ylab</code> permettent de personnaliser le titre du graphique, ainsi que les √©tiquettes des axes. De nombreuses autres options existent pour personnaliser l‚Äôhistogramme, parmi celles-ci on notera¬†:</p>
<ul>
<li><code>probability</code> si elle vaut <code>TRUE</code>, l‚Äôhistogramme indique la proportion des <dfn data-index="classe de valeurs">classes de valeurs</dfn> au lieu des effectifs.</li>
<li><code>breaks</code> permet de contr√¥ler les classes de valeurs. On peut lui passer un chiffre, qui indiquera alors le nombre de classes, un vecteur, qui indique alors les limites des diff√©rentes classes, ou encore une cha√Æne de caract√®re ou une fonction indiquant comment les classes doivent √™tre calcul√©es.</li>
<li><code>col</code> la couleur de l‚Äôhistogramme<a href="#statistique-univariee_fn1" class="footnoteRef" id="statistique-univariee_fnref1"><sup>1</sup></a>.</li>
</ul>
<p>Voir la page d‚Äôaide de la fonction <code data-pkg="graphics">hist</code> pour plus de d√©tails sur les diff√©rentes options. Les deux figures ci-apr√®s sont deux autres exemples d‚Äôhistogramme.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hist</span>(d$heures.tv, <span class="dt">main =</span> <span class="st">"Heures de t√©l√© en 7 classes"</span>, 
  <span class="dt">breaks =</span> <span class="dv">7</span>, <span class="dt">xlab =</span> <span class="st">"Heures"</span>, <span class="dt">ylab =</span> <span class="st">"Proportion"</span>, 
  <span class="dt">probability =</span> <span class="ot">TRUE</span>, <span class="dt">col =</span> <span class="st">"orange"</span>)</code></pre></div>
<img src="graphs/statistique-univariee/unnamed-chunk-5-1.png" title="" alt="" width="1050"/>
<figcaption>
Un autre exemple d‚Äôhistogramme
</figcaption>
</figure>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hist</span>(d$heures.tv, <span class="dt">main =</span> <span class="st">"Heures de t√©l√© avec classes sp√©cifi√©es"</span>, 
  <span class="dt">breaks =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">9</span>, <span class="dv">12</span>), <span class="dt">xlab =</span> <span class="st">"Heures"</span>, <span class="dt">ylab =</span> <span class="st">"Proportion"</span>, 
  <span class="dt">col =</span> <span class="st">"red"</span>)</code></pre></div>
<img src="graphs/statistique-univariee/unnamed-chunk-6-1.png" title="" alt="" width="1050"/>
<figcaption>
Encore un autre exemple d‚Äôhistogramme
</figcaption>
</figure>
</div>
<div id="statistique-univariee_boites-a-moustaches" class="section level3">
<h3>Bo√Ætes √† moustaches</h3>
<p>Les <dfn data-index="bo√Æte √† moustaches">bo√Ætes √† moustaches</dfn><dfn data-index="moustaches, bo√Æte"/>, ou <dfn data-index="boxplot" lang="en">boxplots</dfn> en anglais, sont une autre repr√©sentation graphique de la r√©partition des valeurs d‚Äôune variable quantitative. Elles sont particuli√®rement utiles pour comparer les distributions de plusieurs variables ou d‚Äôune m√™me variable entre diff√©rents groupes, mais peuvent aussi √™tre utilis√©es pour repr√©senter la dispersion d‚Äôune unique variable. La fonction qui produit ces graphiques est la fonction <code data-pkg="graphics">boxplot</code>.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">boxplot</span>(d$heures.tv, <span class="dt">main =</span> <span class="st">"Nombre d'heures pass√©es devant la t√©l√© par jour"</span>, 
  <span class="dt">ylab =</span> <span class="st">"Heures"</span>)</code></pre></div>
<img src="graphs/statistique-univariee/unnamed-chunk-7-1.png" title="" alt="" width="1050"/>
<figcaption>
Exemple de bo√Æte √† moustaches
</figcaption>
</figure>
<p>Comment interpr√©ter ce graphique¬†? On le comprendra mieux √† partir de la figure ci-apr√®s<a href="#statistique-univariee_fn2" class="footnoteRef" id="statistique-univariee_fnref2"><sup>2</sup></a>.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">boxplot</span>(d$heures.tv, <span class="dt">col =</span> <span class="kw">grey</span>(<span class="fl">0.8</span>), <span class="dt">main =</span> <span class="st">"Nombre d'heures pass√©es devant la t√©l√© par jour"</span>, 
  <span class="dt">ylab =</span> <span class="st">"Heures"</span>)
<span class="kw">abline</span>(<span class="dt">h =</span> <span class="kw">median</span>(d$heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), <span class="dt">col =</span> <span class="st">"navy"</span>, 
  <span class="dt">lty =</span> <span class="dv">2</span>)
<span class="kw">text</span>(<span class="fl">1.35</span>, <span class="kw">median</span>(d$heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>) +<span class="st"> </span><span class="fl">0.15</span>, 
  <span class="st">"M√©diane"</span>, <span class="dt">col =</span> <span class="st">"navy"</span>)
Q1 &lt;-<span class="st"> </span><span class="kw">quantile</span>(d$heures.tv, <span class="dt">probs =</span> <span class="fl">0.25</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)
<span class="kw">abline</span>(<span class="dt">h =</span> Q1, <span class="dt">col =</span> <span class="st">"darkred"</span>)
<span class="kw">text</span>(<span class="fl">1.35</span>, Q1 +<span class="st"> </span><span class="fl">0.15</span>, <span class="st">"Q1 : premier quartile"</span>, <span class="dt">col =</span> <span class="st">"darkred"</span>, 
  <span class="dt">lty =</span> <span class="dv">2</span>)
Q3 &lt;-<span class="st"> </span><span class="kw">quantile</span>(d$heures.tv, <span class="dt">probs =</span> <span class="fl">0.75</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)
<span class="kw">abline</span>(<span class="dt">h =</span> Q3, <span class="dt">col =</span> <span class="st">"darkred"</span>)
<span class="kw">text</span>(<span class="fl">1.35</span>, Q3 +<span class="st"> </span><span class="fl">0.15</span>, <span class="st">"Q3 : troisi√®me quartile"</span>, <span class="dt">col =</span> <span class="st">"darkred"</span>, 
  <span class="dt">lty =</span> <span class="dv">2</span>)
<span class="kw">arrows</span>(<span class="dt">x0 =</span> <span class="fl">0.7</span>, <span class="dt">y0 =</span> <span class="kw">quantile</span>(d$heures.tv, <span class="dt">probs =</span> <span class="fl">0.75</span>, 
  <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), <span class="dt">x1 =</span> <span class="fl">0.7</span>, <span class="dt">y1 =</span> <span class="kw">quantile</span>(d$heures.tv, 
  <span class="dt">probs =</span> <span class="fl">0.25</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), <span class="dt">length =</span> <span class="fl">0.1</span>, <span class="dt">code =</span> <span class="dv">3</span>)
<span class="kw">text</span>(<span class="fl">0.7</span>, Q1 +<span class="st"> </span>(Q3 -<span class="st"> </span>Q1)/<span class="dv">2</span> +<span class="st"> </span><span class="fl">0.15</span>, <span class="st">"h"</span>, <span class="dt">pos =</span> <span class="dv">2</span>)
<span class="kw">mtext</span>(<span class="st">"L'√©cart inter-quartile h contient 50 % des individus"</span>, 
  <span class="dt">side =</span> <span class="dv">1</span>)
<span class="kw">abline</span>(<span class="dt">h =</span> Q1 -<span class="st"> </span><span class="fl">1.5</span> *<span class="st"> </span>(Q3 -<span class="st"> </span>Q1), <span class="dt">col =</span> <span class="st">"darkgreen"</span>)
<span class="kw">text</span>(<span class="fl">1.35</span>, Q1 -<span class="st"> </span><span class="fl">1.5</span> *<span class="st"> </span>(Q3 -<span class="st"> </span>Q1) +<span class="st"> </span><span class="fl">0.15</span>, <span class="st">"Q1 -1.5 h"</span>, 
  <span class="dt">col =</span> <span class="st">"darkgreen"</span>, <span class="dt">lty =</span> <span class="dv">2</span>)
<span class="kw">abline</span>(<span class="dt">h =</span> Q3 +<span class="st"> </span><span class="fl">1.5</span> *<span class="st"> </span>(Q3 -<span class="st"> </span>Q1), <span class="dt">col =</span> <span class="st">"darkgreen"</span>)
<span class="kw">text</span>(<span class="fl">1.35</span>, Q3 +<span class="st"> </span><span class="fl">1.5</span> *<span class="st"> </span>(Q3 -<span class="st"> </span>Q1) +<span class="st"> </span><span class="fl">0.15</span>, <span class="st">"Q3 +1.5 h"</span>, 
  <span class="dt">col =</span> <span class="st">"darkgreen"</span>, <span class="dt">lty =</span> <span class="dv">2</span>)</code></pre></div>
<img src="graphs/statistique-univariee/unnamed-chunk-8-1.png" title="" alt="" width="1050"/>
<figcaption>
Interpr√©tation d‚Äôune bo√Æte √† moustaches
</figcaption>
</figure>
<p>Le carr√© au centre du graphique est d√©limit√© par les premiers et troisi√®me <dfn data-index="quartile">quartiles</dfn>, avec la <dfn>m√©diane</dfn> repr√©sent√©e par une ligne plus sombre au milieu. Les ¬´¬†fourchettes¬†¬ª s‚Äô√©tendant de part et d‚Äôautres vont soit jusqu‚Äô√† la valeur minimale ou maximale, soit jusqu‚Äô√† une valeur approximativement √©gale au quartile le plus proche plus 1,5 fois l‚Äô<dfn>√©cart interquartile</dfn><dfn data-index="interquartilen √©cart"/>. Les points se situant en-dehors de cette fourchette sont repr√©sent√©s par des petits ronds et sont g√©n√©ralement consid√©r√©s comme des valeurs extr√™mes, potentiellement aberrantes.</p>
<p>On peut ajouter la repr√©sentation des valeurs sur le graphique pour en faciliter la lecture avec des petits traits dessin√©s sur l‚Äôaxe vertical (fonction <code data-pkg="graphics">rug</code>)¬†:</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">boxplot</span>(d$heures.tv, <span class="dt">main =</span> <span class="st">"Nombre d'heures pass√©es devant la t√©l√© par</span><span class="ch">\n</span><span class="st">jour"</span>, 
  <span class="dt">ylab =</span> <span class="st">"Heures"</span>)
<span class="kw">rug</span>(d$heures.tv, <span class="dt">side =</span> <span class="dv">2</span>)</code></pre></div>
<img src="graphs/statistique-univariee/unnamed-chunk-9-1.png" title="" alt="" width="1050"/>
<figcaption>
Bo√Æte √† moustaches avec repr√©sentation des valeurs
</figcaption>
</figure>
</div>
</div>
<div id="statistique-univariee_variable-qualitative" class="section level2">
<h2>Variable qualitative</h2>
<div id="statistique-univariee_tris-a-plat" class="section level3">
<h3>Tris √† plat</h3>
<p>La fonction la plus utilis√©e pour le traitement et l‚Äôanalyse des <dfn data-index="variable qualitative">variables qualitatives</dfn><dfn data-index="qualitative, variable"/> (variable prenant ses valeurs dans un ensemble de <dfn data-index="modalit√©">modalit√©s</dfn>) est sans aucun doute la fonction <code data-pkg="base">table</code>, qui donne les effectifs de chaque modalit√© de la variable, ce qu‚Äôon appelle un <dfn>tri √† plat</dfn> ou <dfn>tableau de fr√©quences</dfn><dfn data-index="fr√©quence, tableau"/>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(d$sexe)</code></pre></div>
<pre><code>
Homme Femme 
  899  1101 </code></pre>
<p>La tableau pr√©c√©dent nous indique que parmi nos enqu√™t√©s on trouve 899 hommes et 1101 femmes.</p>
<p>Quand le nombre de modalit√©s est √©lev√©, on peut ordonner le tri √† plat selon les effectifs √† l‚Äôaide de la fonction <code data-pkg="base">sort</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(d$occup)</code></pre></div>
<pre><code>
Exerce une profession               Chomeur 
                 1049                   134 
      Etudiant, eleve              Retraite 
                   94                   392 
  Retire des affaires              Au foyer 
                   77                   171 
        Autre inactif 
                   83 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sort</span>(<span class="kw">table</span>(d$occup))</code></pre></div>
<pre><code>
  Retire des affaires         Autre inactif 
                   77                    83 
      Etudiant, eleve               Chomeur 
                   94                   134 
             Au foyer              Retraite 
                  171                   392 
Exerce une profession 
                 1049 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sort</span>(<span class="kw">table</span>(d$occup), <span class="dt">decreasing =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>
Exerce une profession              Retraite 
                 1049                   392 
             Au foyer               Chomeur 
                  171                   134 
      Etudiant, eleve         Autre inactif 
                   94                    83 
  Retire des affaires 
                   77 </code></pre>
<p>√Ä noter que la fonction <code data-pkg="base">table</code> exclut par d√©faut les non-r√©ponses du tableau r√©sultat. L‚Äôargument <code>useNA</code> de cette fonction permet de modifier ce comportement¬†:</p>
<ul>
<li>avec <code>useNA="no"</code> (valeur par d√©faut), les valeurs manquantes ne sont jamais incluses dans le tri √† plat¬†;</li>
<li>avec <code>useNA="ifany"</code>, une colonne <code>NA</code> est ajout√©e si des valeurs manquantes sont pr√©sentes dans les donn√©es¬†;</li>
<li>avec <code>useNA="always"</code>, une colonne <code>NA</code> est toujours ajout√©e, m√™me s‚Äôil n‚Äôy a pas de valeurs manquantes dans les donn√©es.</li>
</ul>
<p>On peut donc utiliser¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(d$trav.satisf, <span class="dt">useNA =</span> <span class="st">"ifany"</span>)</code></pre></div>
<pre><code>
  Satisfaction Insatisfaction      Equilibre 
           480            117            451 
          &lt;NA&gt; 
           952 </code></pre>
<p>L‚Äôutilisation de <code data-pkg="base">summary</code> permet √©galement l‚Äôaffichage du tri √† plat et du nombre de non-r√©ponses¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(d$trav.satisf)</code></pre></div>
<pre><code>  Satisfaction Insatisfaction      Equilibre 
           480            117            451 
          NA's 
           952 </code></pre>
<p>Pour obtenir un tableau avec la r√©partition en pourcentages, on peut utiliser la fonction <code data-pkg="questionr">freq</code> de l‚Äôextension <code class="pkg">questionr</code><a href="#statistique-univariee_fn3" class="footnoteRef" id="statistique-univariee_fnref3"><sup>3</sup></a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">freq</span>(d$qualif)</code></pre></div>
<pre><code>                           n    % val%
Ouvrier specialise       203 10.2 12.3
Ouvrier qualifie         292 14.6 17.7
Technicien                86  4.3  5.2
Profession intermediaire 160  8.0  9.7
Cadre                    260 13.0 15.7
Employe                  594 29.7 35.9
Autre                     58  2.9  3.5
NA                       347 17.3   NA</code></pre>
<p>La colonne <code>n</code> donne les effectifs bruts, la colonne <code>%</code> la r√©partition en pourcentages et <code>val%</code> la r√©partition en pourcentages, donn√©es manquantes exclues. La fonction accepte plusieurs param√®tres permettant d‚Äôafficher les totaux, les pourcentages cumul√©s, de trier selon les effectifs ou de contr√¥ler l‚Äôaffichage. Par exemple¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">freq</span>(d$qualif, <span class="dt">cum =</span> <span class="ot">TRUE</span>, <span class="dt">total =</span> <span class="ot">TRUE</span>, <span class="dt">sort =</span> <span class="st">"inc"</span>, 
  <span class="dt">digits =</span> <span class="dv">2</span>, <span class="dt">exclude =</span> <span class="ot">NA</span>)</code></pre></div>
<pre><code>                            n      %   %cum
Autre                      58   3.51   3.51
Technicien                 86   5.20   8.71
Profession intermediaire  160   9.68  18.39
Ouvrier specialise        203  12.28  30.67
Cadre                     260  15.73  46.40
Ouvrier qualifie          292  17.66  64.07
Employe                   594  35.93 100.00
Total                    1653 100.00 100.00</code></pre>
<p>La colonne <code>%cum</code> indique ici le pourcentage cumul√©, ce qui est ici une tr√®s mauvaise id√©e puisque pour ce type de variable cela n‚Äôa aucun sens. Les lignes du tableau r√©sultat ont √©t√© tri√©s par effectifs croissants, les totaux ont √©t√© ajout√©s, les non-r√©ponses exclues et les pourcentages arrondis √† deux d√©cimales.</p>
<p>Pour plus d‚Äôinformations sur la fonction <code data-pkg="questionr">freq</code>, consultez sa page d‚Äôaide en ligne avec <code>?freq</code> ou <code>help("freq")</code>.</p>
</div>
<div id="statistique-univariee_representation-graphique" class="section level3">
<h3>Repr√©sentation graphique</h3>
<p>Pour repr√©senter la r√©partition des effectifs parmi les modalit√©s d‚Äôune variable qualitative, on a souvent tendance √† utiliser des <dfn data-index="diagramme en secteur">diagrammes en secteurs</dfn><dfn data-index="secteur, diagramme"/> (<dfn data-index="camembert, graphique">camemberts</dfn>). Ceci est possible sous <strong>R</strong> avec la fonction <code data-pkg="graphics">pie</code>, mais la page d‚Äôaide de la dite fonction nous le d√©conseille assez vivement¬†: les diagrammes en secteur sont en effet une mauvaise mani√®re de pr√©senter ce type d‚Äôinformation, car l‚Äôoeil humain pr√©f√®re comparer des longueurs plut√¥t que des surfaces<a href="#statistique-univariee_fn4" class="footnoteRef" id="statistique-univariee_fnref4"><sup>4</sup></a>.</p>
<p>On privil√©giera donc d‚Äôautres formes de repr√©sentations, √† savoir les <dfn data-index="diagramme en b√¢tons">diagrammes en b√¢tons</dfn><dfn data-index="b√¢ton, diagramme"/> et les <dfn data-index="diagramme de Cleveland">diagrammes de Cleveland</dfn><dfn data-index="Cleveland, diagramme"/>.</p>
<p>Les diagrammes en b√¢tons sont utilis√©s automatiquement par <strong>R</strong> lorsqu‚Äôon applique la fonction g√©n√©rique <code data-pkg="graphics" data-rdoc="plot.table">plot</code> √† un tri √† plat obtenu avec <code data-pkg="base">table</code>. On privil√©giera cependant ce type de repr√©sentations pour les variables de type num√©rique comportant un nombre fini de valeurs. Le nombre de fr√®res, soeurs, demi-fr√®res et demi-soeurs est un bon exemple¬†:</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(<span class="kw">table</span>(d$freres.soeurs), <span class="dt">main =</span> <span class="st">"Nombre de fr√®res, soeurs, demi-fr√®res et demi-soeurs"</span>, 
  <span class="dt">ylab =</span> <span class="st">"Effectif"</span>)</code></pre></div>
<img src="graphs/statistique-univariee/unnamed-chunk-16-1.png" title="" alt="" width="1050"/>
<figcaption>
Exemple de diagramme en b√¢tons
</figcaption>
</figure>
<p>Pour les autres types de variables qualitatives, on privil√©giera les diagrammes de Cleveland, obtenus avec la fonction <code data-pkg="graphics">dotchart</code>. On doit appliquer cette fonction au tri √† plat de la variable, obtenu avec <code data-pkg="base">table</code><a href="#statistique-univariee_fn5" class="footnoteRef" id="statistique-univariee_fnref5"><sup>5</sup></a>¬†:</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dotchart</span>(<span class="kw">as.matrix</span>(<span class="kw">table</span>(d$clso))[, <span class="dv">1</span>], <span class="dt">main =</span> <span class="st">"Sentiment d'appartenance √† une classe sociale"</span>, 
  <span class="dt">pch =</span> <span class="dv">19</span>)</code></pre></div>
<img src="graphs/statistique-univariee/unnamed-chunk-17-1.png" title="" alt="" width="1050"/>
<figcaption>
Exemple de diagramme de Cleveland
</figcaption>
</figure>
<div class="note">
<p>Il est possible d‚Äôentrer directement la commande suivante dans la console¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dotchart</span>(<span class="kw">table</span>(d$clso))</code></pre></div>
<p><strong>R</strong> produira bien le diagramme de Cleveland d√©sir√© mais affichera un message d‚Äôavertissement (<em>Warning</em>) car pour des raisons li√©es au fonctionnement interne de la fonction <code data-pkg="graphics">dotchart</code>, il est attendu une matrice ou un vecteur, non un objet de type table. Pour √©viter cet avertissement, il est n√©cessaire de faire appel √† la fonction <code data-pkg="base" data-rdoc="matrix">as.matrix</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dotchart</span>(<span class="kw">as.matrix</span>(<span class="kw">table</span>(d$clso)))</code></pre></div>
<p><img src="graphs/statistique-univariee/unnamed-chunk-19-1.png" title="" alt="" width="1050"/></p>
<p>Dans le cas pr√©sent, on voit appara√Ætre un chiffre 1 au-dessus des modalit√©s. En fait, <code data-pkg="graphics">dotchart</code> peut √™tre appliqu√© au r√©sultat d‚Äôun tableau crois√© √† deux entr√©es, auquel cas il pr√©sentera les r√©sultats pour chaque colonne. Comme dans l‚Äôexemple ci-apr√®s.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dotchart</span>(<span class="kw">as.matrix</span>(<span class="kw">table</span>(d$clso, d$sexe)))</code></pre></div>
<p><img src="graphs/statistique-univariee/unnamed-chunk-20-1.png" title="" alt="" width="1050"/></p>
<p>Cela ne r√©soud pas le probl√®me pour notre diagramme de Cleveland issu d‚Äôun tri √† plat simple. Pour bien comprendre, la fonction <code data-pkg="base" data-rdoc="matrix">as.matrix</code> a produit un objet √† deux dimensions ayant une colonne et plusieurs lignes. On indiquera √† <strong>R</strong> que l‚Äôon ne souhaite extraire la premi√®re colonne avec <code>[, 1]</code> (juste apr√®s l‚Äôappel √† <code data-pkg="base" data-rdoc="matrix">as.matrix</code>). C‚Äôest ce qu‚Äôon appelle l‚Äô<em>indexation</em> que l‚Äôon abordera plus en d√©tails dans le chapite <a href="pem_manipulation.html#indexation">Manipulation de donn√©es</a>.</p>
</div>
<p>Quand la variable comprend un grand nombre de modalit√©s, il est pr√©f√©rable d‚Äô<dfn>ordonner le tri √† plat</dfn><dfn data-index="tri √† plat, ordonner"/> obtenu √† l‚Äôaide de la fonction <code data-pkg="base">sort</code>¬†:</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dotchart</span>(<span class="kw">as.matrix</span>(<span class="kw">sort</span>(<span class="kw">table</span>(d$qualif)))[, <span class="dv">1</span>], <span class="dt">main =</span> <span class="st">"Niveau de qualification"</span>)</code></pre></div>
<img src="graphs/statistique-univariee/unnamed-chunk-21-1.png" title="" alt="" width="1050"/>
<figcaption>
Exemple de diagramme de Cleveland ordonn√©
</figcaption>
</figure>
<div class="note">
<p>L‚Äôagument <code>pch</code>, qui est utilis√© par la plupart des graphiques de type points, permet de sp√©cifier le symbole √† utiliser. Il peut prendre soit un nombre entier compris entre 0 et 25, soit un charact√®re textuel (voir ci-dessous).</p>
<p><img src="graphs/statistique-univariee/unnamed-chunk-22-1.png" title="" alt="" width="1050"/></p>
</div>
</div>
</div>
<div class="footnotes">
<hr/>
<ol>
<li id="statistique-univariee_fn1"><p>Il existe un grand nombre de couleurs pr√©d√©finies dans <strong>R</strong>. On peut r√©cup√©rer leur liste en utilisant la fonction <code data-pkg="grDevices">colors</code> en tapant simplement <code>colors()</code> dans la console, ou en consultant le document suivant¬†: <a href="http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf" class="uri">http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf</a>.<a href="#statistique-univariee_fnref1">‚Ü©</a></p></li>
<li id="statistique-univariee_fn2"><p>Le code ayant servi √† g√©n√©rer cette figure est une copie quasi conforme de celui pr√©sent√© dans l‚Äôexcellent document de Jean Lobry sur les graphiques de base avec <strong>R</strong>, t√©l√©chargeable sur le site du P√¥le bioinformatique lyonnais¬†: <a href="http://pbil.univ-lyon1.fr/R/pdf/lang04.pdf" class="uri">http://pbil.univ-lyon1.fr/R/pdf/lang04.pdf</a>.<a href="#statistique-univariee_fnref2">‚Ü©</a></p></li>
<li id="statistique-univariee_fn3"><p>En l‚Äôabsence de l‚Äôextension <code class="pkg">questionr</code>, on pourra se rabattre sur la fonction <code data-pkg="base">prop.table</code> avec la commande suivante¬†: <code>prop.table(table(d$qualif))</code>.<a href="#statistique-univariee_fnref3">‚Ü©</a></p></li>
<li id="statistique-univariee_fn4"><p>On trouvera des exemples illustrant cette id√©e dans le document de Jean Lobry cit√© pr√©c√©demment.<a href="#statistique-univariee_fnref4">‚Ü©</a></p></li>
<li id="statistique-univariee_fn5"><p>Pour des raisons li√©es au fonctionnement interne de la fonction <code data-pkg="graphics">dotchart</code>, on doit transformer le tri √† plat en matrice, d‚Äôo√π l‚Äôappel √† la fonction <code data-pkg="base" data-rdoc="matrix">as.matrix</code>.<a href="#statistique-univariee_fnref5">‚Ü©</a></p></li>
</ol>
</div>

</article>
<article id="graphiques-univaries">

<div class="fluid-row" id="graphiques-univaries_header">


<h1 class="title">Graphiques univari√©s</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#graphiques-univaries_quelques-graphiques-de-base">Quelques graphiques de base</a><ul>
<li><a href="#graphiques-univaries_visualiser-une-distribution">Visualiser une distribution</a></li>
<li><a href="#graphiques-univaries_visualiser-un-nuages-de-points">Visualiser un nuages de points</a></li>
<li><a href="#graphiques-univaries_visualiser-des-proportions">Visualiser des proportions</a></li>
</ul></li>
<li><a href="#graphiques-univaries_quelques-graphiques-plus-complexes">Quelques graphiques plus complexes</a><ul>
<li><a href="#graphiques-univaries_matrices-de-nuages-de-points">Matrices de nuages de points</a></li>
<li><a href="#graphiques-univaries_densite-dun-nuage-de-points">Densit√© d‚Äôun nuage de points</a></li>
<li><a href="#graphiques-univaries_resultats-dun-modele-lineaire">R√©sultats d‚Äôun mod√®le lin√©aire</a></li>
</ul></li>
<li><a href="#graphiques-univaries_exporter-un-graphique-avec-rstudio">Exporter un graphique avec <strong>RStudio</strong></a><ul>
<li><a href="#graphiques-univaries_sauvegarder-le-fichier-en-tant-quimage">Sauvegarder le fichier en tant qu‚Äôimage</a></li>
<li><a href="#graphiques-univaries_sauvegarder-le-graphique-en-pdf">Sauvegarder le graphique en PDF</a></li>
<li><a href="#graphiques-univaries_copier-le-graphique-dans-le-presse-papier">Copier le graphique dans le presse-papier</a></li>
</ul></li>
<li><a href="#graphiques-univaries_exporter-un-graphique-avec-r">Exporter un graphique avec <strong>R</strong></a></li>
</ul>
</div>

<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>
<p>Une partie de la r√©putation du logiciel <strong>R</strong> tient √† ses excellentes capacit√©s graphiques, qui ont fait l‚Äôobjet d‚Äô<a href="http://www.gradaanwr.net/">ouvrages complets</a>, et qui permettent d‚Äôaboutir √† des r√©sultats tr√®s avanc√©s, telles que des <a href="https://dsparks.wordpress.com/2012/07/18/mapping-public-opinion-a-tutorial/">cartes isarithmiques</a>. De plus, <strong>R</strong> s‚Äôarticule de mieux en mieux avec d‚Äôautres languages, et en particulier <a href="https://fr.wikipedia.org/wiki/JavaScript">JavaScript</a>, ce qui permet de produire des graphiques interactifs avec <strong>R</strong>.</p>
<p>Ce chapitre pr√©sente les fonctions graphiques les plus basiques de <strong>R</strong>, de mani√®re √† familiariser le lecteur avec la fonction <code data-pkg="graphics" data-rdoc="plot.default">plot</code>, et de mani√®re √† montrer comment produire, en une ligne de code ou √† peine plus, quelques graphiques tr√®s fr√©quemment utilis√©s au stade exploratoire d‚Äôune analyse de donn√©es. Ces fonctions basiques ne produisent pas de graphiques particuli√®rement √©l√©gants ou sophistiqu√©s, mais suffisent largement dans un contexte exploratoire.</p>
<div id="graphiques-univaries_quelques-graphiques-de-base" class="section level2">
<h2>Quelques graphiques de base</h2>
<p>Commen√ßons par charger en m√©moire le jeu de donn√©es <code>rp99</code> du <em>package</em> <code class="pkg">questionr</code>, qui contient un extrait du <a href="http://www.insee.fr/fr/bases-de-donnees/default.asp?page=recensements.htm">recensement Insee 1999</a> pour 301 villes du d√©partement du Rh√¥ne. Ce jeu de donn√©es contient toute une s√©rie d‚Äôindicateurs socio-d√©mographiques mesur√©s au niveau de chaque commune, tels que les pourcentages de chaque cat√©gorie socio-professionnelle parmi la population, ou le taux de ch√¥mage dans cette population √† la date du recensement¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># chargement du package</span>
<span class="kw">library</span>(questionr)

<span class="co"># chargement du jeu de donn√©es</span>
<span class="kw">data</span>(rp99)

<span class="co"># inspection des variables</span>
<span class="kw">str</span>(rp99)</code></pre></div>
<pre><code>'data.frame':   301 obs. of  21 variables:
 $ nom       : Factor w/ 301 levels "AFFOUX","AIGUEPERSE",..: 1 2 3 4 5 6 7 8 9 10 ...
 $ code      : int  69001 69002 69003 69004 69005 69006 69007 69008 69009 69010 ...
 $ pop.act   : int  113 90 1153 277 213 2218 1015 228 2220 2667 ...
 $ pop.tot   : int  248 233 2680 690 427 4947 2181 474 4742 5785 ...
 $ pop15     : int  184 200 2194 572 327 4040 1784 382 3846 4542 ...
 $ nb.rp     : int  91 103 904 217 147 1965 802 179 1665 2183 ...
 $ agric     : num  7.08 22.222 0.607 0 3.756 ...
 $ artis     : num  7.08 8.89 9.54 8.66 7.51 ...
 $ cadres    : num  10.62 4.44 8.41 17.33 5.63 ...
 $ interm    : num  14.16 4.44 23.24 20.22 13.15 ...
 $ empl      : num  28.3 17.8 32.7 24.5 22.5 ...
 $ ouvr      : num  31.9 31.1 24.7 28.9 43.2 ...
 $ retr      : num  38.9 88.9 40 78 30 ...
 $ tx.chom   : num  3.54 7.78 10.41 4.69 7.04 ...
 $ etud      : num  5.98 5 11.17 7.52 6.73 ...
 $ dipl.sup  : num  5.978 4 6.837 4.895 0.917 ...
 $ dipl.aucun: num  23.9 25 25 12.1 24.2 ...
 $ proprio   : num  78 78.6 51.8 68.2 81 ...
 $ hlm       : num  4.4 0 26.88 7.83 0 ...
 $ locataire : num  9.89 9.71 17.26 14.75 16.33 ...
 $ maison    : num  98.9 94.2 51.3 86.2 95.2 ...</code></pre>
<div id="graphiques-univaries_visualiser-une-distribution" class="section level3">
<h3>Visualiser une distribution</h3>
<p>Int√©ressons-nous, pour commencer, au taux de ch√¥mage des communes du Rh√¥ne, qui varie de 0¬†% √† 23¬†%. Un taux de ch√¥mage de 0¬†% n‚Äôest pas anormal quand certaines communes ont une <a href="https://fr.wikipedia.org/wiki/Population_active">population active</a> de moins de 100 habitants, comme c‚Äôest le cas ici. Malheureusement, un taux de ch√¥mage de 23¬†% n‚Äôest pas non plus anormal √† cette p√©riode.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(rp99$tx.chom)</code></pre></div>
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  0.000   5.425   6.767   7.256   8.550  23.340 </code></pre>
<p>Ces statistiques descriptives donnent une id√©e de la <dfn>distribution</dfn> du taux de ch√¥mage. D‚Äôun point de vue graphique, on sait, depuis le <a href="#statistique-univariee">chapitre sur la statistique univari√©e</a>, comment se repr√©senter cette distribution, en construisant son histogramme avec la fonction <code data-pkg="graphics" data-rodc="hist">hist</code>¬†:</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hist</span>(rp99$tx.chom)</code></pre></div>
<img src="graphs/graphiques-univaries/unnamed-chunk-3-1.png" title="" alt="" width="1050"/>
<figcaption>
Histogramme
</figcaption>
</figure>
<p>Jusqu‚Äôici, rien de bien compliqu√© : la fonction <code data-pkg="graphics" data-rodc="hist">hist</code> fait tout le travail n√©cessaire. Toutefois, ce n‚Äôest pas la seule mani√®re de proc√©der avec <strong>R</strong>, qui poss√®de √©galement une fonction g√©n√©rique, <code data-pkg="graphics" data-rdoc="plot.default">plot</code>, qui ¬´¬†s‚Äôadapte¬†¬ª √† ce qu‚Äôon lui demande de visualiser. En voici un exemple¬†:</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(<span class="kw">density</span>(rp99$tx.chom))</code></pre></div>
<img src="graphs/graphiques-univaries/unnamed-chunk-4-1.png" title="" alt="" width="1050"/>
<figcaption>
Courbe de densit√©
</figcaption>
</figure>
<p>Ici, on d‚Äôabord construit un objet bien particulier avec la fonction <code data-pkg="stats">density</code>, qui permet d‚Äôobtenir une <dfn>estimation par noyau</dfn><dfn data-index="noyau, estimation"/><a href="#graphiques-univaries_fn1" class="footnoteRef" id="graphiques-univaries_fnref1"><sup>1</sup></a> de la distribution du taux de ch√¥mage. Le r√©sultat de cette estimation est ensuite repr√©sent√© graphiquement √† l‚Äôaide de <code data-pkg="stats" data-rdoc="plot.density">plot</code>.</p>
<p>De mani√®re similaire, on peut calculer la <dfn>fonction de r√©partition empirique</dfn><dfn data-index="r√©partition empirique, fonction"/> ou <dfn lang="en">empirical cumulative distribution function</dfn> en anglais avec la fonction <code class="pkg">ecdf</code>. Le r√©sultat obtenu peut, une fois encore, √™tre repr√©sent√© sur un graphique √† l‚Äôaide de la fonction <code data-pkg="stats" data-rdoc="ecdf">plot</code>.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(<span class="kw">ecdf</span>(rp99$tx.chom))</code></pre></div>
<img src="graphs/graphiques-univaries/unnamed-chunk-5-1.png" title="" alt="" width="1050"/>
<figcaption>
Fonction de r√©partition empirique cumul√©e
</figcaption>
</figure>
</div>
<div id="graphiques-univaries_visualiser-un-nuages-de-points" class="section level3">
<h3>Visualiser un nuages de points</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">with</span>(rp99, <span class="kw">plot</span>(dipl.aucun, tx.chom))</code></pre></div>
<p><img src="graphs/graphiques-univaries/unnamed-chunk-6-1.png" title="" alt="" width="1050"/></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># graphique principal</span>
<span class="kw">with</span>(rp99, <span class="kw">plot</span>(dipl.aucun, tx.chom, <span class="dt">cex =</span> pop.tot/<span class="dv">10</span>^<span class="dv">4</span>))

<span class="co"># l√©gende justifi√©e √† droite</span>
<span class="kw">text</span>(<span class="dv">40</span>, <span class="dv">0</span>, <span class="st">"taille des points proportionnelle √† la population"</span>, 
  <span class="dt">adj =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">0</span>))</code></pre></div>
<p><img src="graphs/graphiques-univaries/unnamed-chunk-7-1.png" title="" alt="" width="1050"/></p>
</div>
<div id="graphiques-univaries_visualiser-des-proportions" class="section level3">
<h3>Visualiser des proportions</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># recodage du taux de ch√¥mage</span>
t =<span class="st"> </span><span class="kw">cut</span>(rp99$tx.chom, <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">25</span>, <span class="dv">5</span>), <span class="dt">right =</span> <span class="ot">FALSE</span>)

<span class="co"># taille des groupes recod√©s</span>
<span class="kw">table</span>(t, <span class="dt">exclude =</span> <span class="ot">NULL</span>)</code></pre></div>
<pre><code>t
  [0,5)  [5,10) [10,15) [15,20) [20,25)    &lt;NA&gt; 
     60     198      35       6       2       0 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># graphique en barres</span>
<span class="kw">barplot</span>(<span class="kw">table</span>(t))</code></pre></div>
<p><img src="graphs/graphiques-univaries/unnamed-chunk-8-1.png" title="" alt="" width="1050"/></p>
</div>
</div>
<div id="graphiques-univaries_quelques-graphiques-plus-complexes" class="section level2">
<h2>Quelques graphiques plus complexes</h2>
<div id="graphiques-univaries_matrices-de-nuages-de-points" class="section level3">
<h3>Matrices de nuages de points</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">pairs</span>(rp99[, <span class="dv">18</span>:<span class="dv">21</span>])</code></pre></div>
<p><img src="graphs/graphiques-univaries/unnamed-chunk-9-1.png" title="" alt="" width="1050"/></p>
</div>
<div id="graphiques-univaries_densite-dun-nuage-de-points" class="section level3">
<h3>Densit√© d‚Äôun nuage de points</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">smoothScatter</span>(rp99[, <span class="kw">c</span>(<span class="st">"tx.chom"</span>, <span class="st">"dipl.sup"</span>)])</code></pre></div>
<p><img src="graphs/graphiques-univaries/unnamed-chunk-10-1.png" title="" alt="" width="1050"/></p>
</div>
<div id="graphiques-univaries_resultats-dun-modele-lineaire" class="section level3">
<h3>R√©sultats d‚Äôun mod√®le lin√©aire</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># mod√®le lin√©aire</span>
m =<span class="st"> </span><span class="kw">lm</span>(tx.chom ~<span class="st"> </span>dipl.aucun, <span class="dt">data =</span> rp99)

<span class="co"># r√©sum√© des r√©sultats</span>
<span class="kw">summary</span>(m)</code></pre></div>
<pre><code>
Call:
lm(formula = tx.chom ~ dipl.aucun, data = rp99)

Residuals:
   Min     1Q Median     3Q    Max 
-8.341 -1.689 -0.121  1.343 13.283 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)
(Intercept)  4.38779    0.48704   9.009  &lt; 2e-16
dipl.aucun   0.18147    0.02902   6.253 1.39e-09
               
(Intercept) ***
dipl.aucun  ***
---
Signif. codes:  
0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 2.839 on 299 degrees of freedom
Multiple R-squared:  0.1156,    Adjusted R-squared:  0.1127 
F-statistic:  39.1 on 1 and 299 DF,  p-value: 1.389e-09</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(m)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(<span class="dt">y =</span> <span class="kw">resid</span>(m), <span class="dt">x =</span> <span class="kw">fitted</span>(m))</code></pre></div>
<p><img src="graphs/graphiques-univaries/unnamed-chunk-13-1.png" title="" alt="" width="1050"/></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># graphique principal, avec titres</span>
<span class="kw">plot</span>(<span class="dt">y =</span> <span class="kw">resid</span>(m), <span class="dt">x =</span> <span class="kw">fitted</span>(m), <span class="dt">col =</span> <span class="kw">densCols</span>(<span class="kw">resid</span>(m)), 
  <span class="dt">main =</span> <span class="st">"Taux de ch√¥mage ~ Proportion de non-dipl√¥m√©s"</span>, 
  <span class="dt">ylab =</span> <span class="st">"R√©sidus"</span>, <span class="dt">xlab =</span> <span class="st">"Valeurs pr√©dites"</span>)

<span class="co"># ajout de ligne horizontale</span>
<span class="kw">abline</span>(<span class="dt">a =</span> <span class="dv">0</span>, <span class="dt">b =</span> <span class="dv">0</span>, <span class="dt">lty =</span> <span class="st">"dashed"</span>)</code></pre></div>
<p><img src="graphs/graphiques-univaries/unnamed-chunk-14-1.png" title="" alt="" width="1050"/></p>
</div>
</div>
<div id="graphiques-univaries_exporter-un-graphique-avec-rstudio" class="section level2">
<h2>Exporter un graphique avec <strong>RStudio</strong></h2>
<p>L‚Äô<dfn>export de graphiques</dfn><dfn data-index="graphique, export"/> est tr√®s facile avec <strong>RStudio</strong>. Lorsque l‚Äôon cr√©√© un graphique, ce dernier est affich√© sous l‚Äôonglet <em>Plots</em> dans le quadrant inf√©rieur droit. Il suffit de cliquer sur <em>Export</em> pour avoir acc√®s √† trois options diff√©rentes¬†:</p>
<ul>
<li><em>Save as image</em> pour sauvegarder le graphique en tant que fichier image¬†;</li>
<li><em>Save as PDF</em> pour sauvegarder le graphique dans un fichier <strong>PDF</strong>¬†;</li>
<li><em>Copy to Clipboard</em> pour copier le graphique dans le presse-papier (et pouvoir ainsi le coller ensuite dans un document <strong>Word</strong> par exemple).</li>
</ul>
<div id="graphiques-univaries_sauvegarder-le-fichier-en-tant-quimage" class="section level3">
<h3>Sauvegarder le fichier en tant qu‚Äôimage</h3>
<figure>
<img src="images/capture_RStudio_save_plot_as_image.png" alt="Sauvegarder un graphique en tant qu‚Äôimage avec RStudio"/>
<figcaption>
Sauvegarder un graphique en tant qu‚Äôimage avec RStudio
</figcaption>
</figure>
<p>La bo√Æte de dialogue qui s‚Äôouvre propose diff√©rentes options d‚Äôexport¬†:</p>
<ul>
<li>le type de fichier d√©sir√©¬†;</li>
<li>le nom du fichier¬†;</li>
<li>le r√©pertoire o√π le fichier doit √™tre cr√©√© (par d√©faut, il s‚Äôagit du r√©pertoire de travail)¬†;</li>
<li>la taille de l‚Äôimage.</li>
</ul>
<p><strong>R</strong> peut exporter un graphique dans une grande vari√©t√© de formats. Nous n‚Äôaborderons ici que les principaux. Les formats <strong>PNG</strong>, <strong>JPEG</strong> et <strong>TIFF</strong> sont des formats de type <dfn langue="en">bitmap</dfn><dfn data-index="image bitmap"/> (on parle aussi d‚Äô<dfn data-index="image matricielle">images matricielles</dfn><a href="#graphiques-univaries_fn2" class="footnoteRef" id="graphiques-univaries_fnref2"><sup>2</sup></a>). L‚Äôimage est stock√©e sous forme de points, sa qualit√© d√©pendant de sa <dfn>r√©solution</dfn>, c‚Äôest-√†-dire du nombre total de points qui la composent. L‚Äôint√©r√™t des images matricielles est d‚Äô√™tre toujours interpr√©t√©es de mani√®re identique quelque soit l‚Äôoutil utilis√©. Par contre, elles ne sont pas adapt√©es lorsque l‚Äôon souhaite effectuer des retouches avec un logiciel de dessin.</p>
<p>Pour une utilisation sur un site web, on privil√©giera une r√©solution d‚Äôimage mod√©r√©e (entre 400 et 800 pixels de largeur) et les formats <strong>PNG</strong> ou <strong>JPEG</strong>. Pour un document destin√© √† √™tre imprim√©, on priviligiera une r√©solution plus √©lev√©e, pour √©viter un ph√©nom√®ne dit de pixellisation.</p>
<p>Les <dfn data-index="image vectorielle">images vectorielles</dfn><a href="#graphiques-univaries_fn3" class="footnoteRef" id="graphiques-univaries_fnref3"><sup>3</sup></a> ont l‚Äôavantage de pouvoir √™tre redimensionn√©es √† volont√© sans perte de qualit√© et produisent des fichiers en g√©n√©ral de plus petite taille<a href="#graphiques-univaries_fn4" class="footnoteRef" id="graphiques-univaries_fnref4"><sup>4</sup></a>. Elles sont donc tout √† fait adapt√©es pour l‚Äôimpression. Si l‚Äôon souhaite importer l‚Äôimage dans <strong>Word</strong>, on choisira le format <strong>Metafile</strong> (le seul compris par ce logiciel). Pour <strong>Libre Office</strong> ou <strong>Open Office</strong>, on choisira le format <strong>SVG</strong>.</p>
<p><strong>SVG</strong> (<em>scalable vector graphic</em><a href="#graphiques-univaries_fn5" class="footnoteRef" id="graphiques-univaries_fnref5"><sup>5</sup></a>) est un format libre permettant de d√©crire une image vectorielle. Les fichiers <strong>SVG</strong> peuvent √™tre directement lus par la majorit√© des navigateurs r√©cents (<strong>Firefox</strong>, <strong>Chrome</strong>, ‚Ä¶). De plus, le logiciel libre de dessins <strong>Inkscape</strong><a href="#graphiques-univaries_fn6" class="footnoteRef" id="graphiques-univaries_fnref6"><sup>6</sup></a> permet d‚Äô√©diter et de modifier des fichiers <strong>SVG</strong>. Ce format est donc tout √† fait adapt√© pour les graphiques que l‚Äôon souhaite retoucher avant publication. Depuis <strong>Inkscape</strong>, il sera possible de faire un export <strong>PNG</strong> en haute r√©solution pour int√©gration dans un fichier <strong>Word</strong>.</p>
<p>On pourra modifier la taille de l‚Äôimage avec les param√®tres <em>Height</em> (hauteur) et <em>Width</em> (largeur). En cliquant sur <em>Update Preview</em> la pr√©visulation du rendu final sera mise √† jour.</p>
</div>
<div id="graphiques-univaries_sauvegarder-le-graphique-en-pdf" class="section level3">
<h3>Sauvegarder le graphique en PDF</h3>
<figure>
<img src="images/capture_RStudio_save_plot_as_pdf.png" alt="Sauvegarder un graphique en PDF avec RStudio"/>
<figcaption>
Sauvegarder un graphique en PDF avec RStudio
</figcaption>
</figure>
<p>Les options de la bo√Æte de dialogue permettent de modifier la taille du fichier <strong>PDF</strong> et, bien entendu, d‚Äôindiquer le nom et le r√©pertoire du fichier √† cr√©er.</p>
<p>En cliquant sur <em>Preview</em>, <strong>RStudio</strong> g√©n√©rera un fichier temporaire afin de visualiser le rendu final.</p>
</div>
<div id="graphiques-univaries_copier-le-graphique-dans-le-presse-papier" class="section level3">
<h3>Copier le graphique dans le presse-papier</h3>
<figure>
<img src="images/capture_RStudio_copy_plot_to_clipboard.png" alt="Copier un graphique dans le presse-papier avec RStudio"/>
<figcaption>
Copier un graphique dans le presse-papier avec RStudio
</figcaption>
</figure>
<p>Il est possible de redimensionner le graphique. De plus, on pr√©cisera si l‚Äôon souhaite copier une version matricielle (<em>bitmap</em>) ou vectorielle (<em>metafile</em>) du graphique.</p>
</div>
</div>
<div id="graphiques-univaries_exporter-un-graphique-avec-r" class="section level2">
<h2>Exporter un graphique avec <strong>R</strong></h2>
<p>On peut √©galement exporter les graphiques dans des fichiers de diff√©rents formats directement avec des commandes <strong>R</strong>. Ceci a l‚Äôavantage de fonctionner sur toutes les plateformes et de faciliter la mise √† jour du graphique export√© (on n‚Äôa qu‚Äô√† relancer les commandes concern√©es pour que le fichier externe soit mis √† jour).</p>
<p>La premi√®re possibilit√© est d‚Äôexporter le contenu d‚Äôune fen√™tre d√©j√† existante √† l‚Äôaide de la fonction <code data-package="grDevices" data-rdocumentation="dev2">dev.print</code>. On doit fournir √† celle-ci le format de l‚Äôexport (option <code>device</code>) et le nom du fichier (option <code>file</code>).</p>
<p>Par exemple¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">boxplot</span>(<span class="kw">rnorm</span>(<span class="dv">100</span>))
<span class="kw">dev.print</span>(<span class="dt">device =</span> png, <span class="dt">file =</span> <span class="st">"export.png"</span>, <span class="dt">width =</span> <span class="dv">600</span>)</code></pre></div>
<p>Les formats de sortie possibles varient selon les plateformes, mais on retrouve partout les formats <em>bitmap</em> <code>png</code>, <code>jpeg</code>, <code>tiff</code> et les formats vectoriels <code>svg</code>, <code>postscript</code> ou <code>pdf</code>.</p>
<p>L‚Äôautre possibilit√© est de rediriger directement la sortie graphique dans un fichier, avant d‚Äôex√©cuter la commande g√©n√©rant la figure. On doit pour cela faire appel √† l‚Äôune des commandes permettant cette redirection. Les plus courantes sont <code data-package="grDevices">png</code>, <code data-package="grDevices" data-rdocumentation="png">jpeg</code> et <code data-package="grDevices" data-rdocumentation="png">tiff</code> pour les formats <em>bitmap</em>, <code data-package="grDevices" data-rdocumentation="cairo">svg</code>, <code data-package="grDevices">pdf</code>, <code data-package="grDevices">postscript</code> et <code data-package="grDevices" data-rdocumentation="windows">win.metafile</code> pour les formats vectoriels.</p>
<p>Ces fonctions prennent diff√©rentes options permettant de personnaliser la sortie graphique. Les plus courantes sont <code>width</code> et <code>height</code> qui donnent la largeur et la hauteur de l‚Äôimage g√©n√©r√©e (en pixels pour les images bitmap, en pouces pour les images vectorielles) et <code>pointsize</code> qui donne la taille de base des polices de caract√®re utilis√©es.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">png</span>(<span class="dt">file =</span> <span class="st">"out.png"</span>, <span class="dt">width =</span> <span class="dv">800</span>, <span class="dt">height =</span> <span class="dv">700</span>)
<span class="kw">plot</span>(<span class="kw">rnorm</span>(<span class="dv">100</span>))
<span class="kw">dev.off</span>()
<span class="kw">pdf</span>(<span class="dt">file =</span> <span class="st">"out.pdf"</span>, <span class="dt">width =</span> <span class="dv">9</span>, <span class="dt">height =</span> <span class="dv">9</span>, <span class="dt">pointsize =</span> <span class="dv">10</span>)
<span class="kw">plot</span>(<span class="kw">rnorm</span>(<span class="dv">150</span>))
<span class="kw">dev.off</span>()</code></pre></div>
<p>Il est n√©cessaire de faire un appel √† la fonction <code data-package="grDevices" data-rdocumentation="dev">dev.off</code> apr√®s g√©n√©ration du graphique pour que le r√©sultat soit bien √©crit dans le fichier de sortie (dans le cas contraire on se retrouve avec un fichier vide).</p>
</div>
<div class="footnotes">
<hr/>
<ol>
<li id="graphiques-univaries_fn1"><p>Voir <a href="https://fr.wikipedia.org/wiki/Estimation_par_noyau" class="uri">https://fr.wikipedia.org/wiki/Estimation_par_noyau</a><a href="#graphiques-univaries_fnref1">‚Ü©</a></p></li>
<li id="graphiques-univaries_fn2"><p>Voir <a href="http://fr.wikipedia.org/wiki/Image_matricielle" class="uri">http://fr.wikipedia.org/wiki/Image_matricielle</a>.<a href="#graphiques-univaries_fnref2">‚Ü©</a></p></li>
<li id="graphiques-univaries_fn3"><p>Voir <a href="http://fr.wikipedia.org/wiki/Image_vectorielle" class="uri">http://fr.wikipedia.org/wiki/Image_vectorielle</a>.<a href="#graphiques-univaries_fnref3">‚Ü©</a></p></li>
<li id="graphiques-univaries_fn4"><p>Sauf dans le cas des graphiques complexes reposant sur des d√©grad√©s de couleurs, comme les cartes produites √† partir de rasters. Auquel cas, il sera parfois pr√©f√©rable de privil√©gier un export dans un format <em>bitmap</em>.<a href="#graphiques-univaries_fnref4">‚Ü©</a></p></li>
<li id="graphiques-univaries_fn5"><p>Voir <a href="https://www.wikiwand.com/fr/Scalable_Vector_Graphics" class="uri">https://www.wikiwand.com/fr/Scalable_Vector_Graphics</a>.<a href="#graphiques-univaries_fnref5">‚Ü©</a></p></li>
<li id="graphiques-univaries_fn6"><p>t√©l√©chargeable gratuitement sur <a href="https://inkscape.org/fr/" class="uri">https://inkscape.org/fr/</a>.<a href="#graphiques-univaries_fnref6">‚Ü©</a></p></li>
</ol>
</div>

</article>
<article id="statistique-bivariee">

<div class="fluid-row" id="statistique-bivariee_header">


<h1 class="title">Statistique bivari√©e</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#statistique-bivariee_deux-variables-quantitatives">Deux variables quantitatives</a></li>
<li><a href="#statistique-bivariee_une-variable-quantitative-et-une-variable-qualitative">Une variable quantitative et une variable qualitative</a><ul>
<li><a href="#statistique-bivariee_representations-graphiques">Repr√©sentations graphiques</a></li>
</ul></li>
<li><a href="#statistique-bivariee_deux-variables-qualitatives">Deux variables qualitatives</a><ul>
<li><a href="#statistique-bivariee_tableau-croise">Tableau crois√©</a></li>
<li><a href="#statistique-bivariee_representation-graphique">Repr√©sentation graphique</a></li>
</ul></li>
</ul>
</div>

<div class="note">
<p>La version originale de ce chapitre a √©t√© √©crite par Julien Barnier dans le cadre du support de cours <a href="https://github.com/juba/intro-r">Introduction √† R</a>.</p>
</div>
<p>On entend par <dfn>statistique bivari√©e</dfn> l‚Äô√©tude des relations entre deux variables, celles-ci pouvant √™tre <dfn data-index="variable quantitative">quantitatives</dfn><dfn data-index="quantitative, variable"/> ou <dfn data-index="variable qualitative">qualitatives</dfn><dfn data-index="qualitative, variable"/>. La statistique bivari√©e fait partie de la <dfn>statistique descriptive</dfn><dfn data-index="descriptive, statistique"/>.</p>
<p>La statistique univari√©e a quant √† elle d√©j√† √©t√© abord√©e dans un <a href="#statistique-univariee">chapitre d√©di√©</a>.</p>
<p>Comme dans la partie pr√©c√©dente, on travaillera sur les jeux de donn√©es fournis avec l‚Äôextension <code class="pkg">questionr</code> et tir√© de l‚Äôenqu√™te <em>Histoire de vie</em> et du recensement 1999¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">data</span>(hdv2003)
d &lt;-<span class="st"> </span>hdv2003
<span class="kw">data</span>(rp99)</code></pre></div>
<div id="statistique-bivariee_deux-variables-quantitatives" class="section level2">
<h2>Deux variables quantitatives</h2>
<p>La comparaison de deux variables quantitatives se fait en premier lieu graphiquement, en repr√©sentant l‚Äôensemble des couples de valeurs. On peut ainsi repr√©senter les valeurs du nombre d‚Äôheures pass√©es devant la t√©l√©vision selon l‚Äô√¢ge.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(d$age, d$heures.tv)</code></pre></div>
<img src="graphs/statistique-bivariee/unnamed-chunk-2-1.png" title="" alt="" width="1050"/>
<figcaption>
Nombre d‚Äôheures de t√©l√©vision selon l‚Äô√¢ge
</figcaption>
</figure>
<p>Le fait que des points sont superpos√©s ne facilite pas la lecture du graphique. On peut utiliser une repr√©sentation avec des points semi-transparents.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(d$age, d$heures.tv, <span class="dt">pch =</span> <span class="dv">19</span>, <span class="dt">col =</span> <span class="kw">rgb</span>(<span class="dv">1</span>, <span class="dv">0</span>, 
  <span class="dv">0</span>, <span class="fl">0.1</span>))</code></pre></div>
<img src="graphs/statistique-bivariee/unnamed-chunk-3-1.png" title="" alt="" width="1050"/>
<figcaption>
Nombre d‚Äôheures de t√©l√©vision selon l‚Äô√¢ge avec semi-transparence
</figcaption>
</figure>
<p>Plus sophistiqu√©, on peut faire une <dfn>estimation locale de densit√©</dfn><dfn data-index="densit√©, estimation locale"/> et repr√©senter le r√©sultat sous forme de ¬´¬†carte¬†¬ª. Pour cela on commence par isoler les deux variables, supprimer les observations ayant au moins une <dfn>valeur manquante</dfn><dfn data-index="manquante, valeur"/> √† l‚Äôaide de la fonction <code data-pkg="stats">complete.cases</code>, estimer la densit√© locale √† l‚Äôaide de la fonction <code data-pkg="MASS">kde2d</code> de l‚Äôextension <code class="pkg">MASS</code><a href="#statistique-bivariee_fn1" class="footnoteRef" id="statistique-bivariee_fnref1"><sup>1</sup></a> et repr√©senter le tout √† l‚Äôaide d‚Äôune des fonctions <code data-pkg="graphics">image</code>, <code data-pkg="graphics">contour</code> ou <code data-pkg="graphics">filled.contour</code>. . .</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(MASS)
tmp &lt;-<span class="st"> </span>d[, <span class="kw">c</span>(<span class="st">"age"</span>, <span class="st">"heures.tv"</span>)]
tmp &lt;-<span class="st"> </span>tmp[<span class="kw">complete.cases</span>(tmp), ]
<span class="kw">filled.contour</span>(<span class="kw">kde2d</span>(tmp$age, tmp$heures.tv), <span class="dt">color =</span> terrain.colors)</code></pre></div>
<img src="graphs/statistique-bivariee/unnamed-chunk-4-1.png" title="" alt="" width="1050"/>
<figcaption>
Repr√©sentation de l‚Äôestimation de densit√© locale
</figcaption>
</figure>
<p>Dans tous les cas, il n‚Äôy a pas de structure tr√®s nette qui semble se d√©gager. On peut tester ceci math√©matiquement en calculant le <dfn>coefficient de corr√©lation</dfn><dfn data-index="corr√©lation, coefficient"/> entre les deux variables √† l‚Äôaide de la fonction <code data-pkg="stats">cor</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">cor</span>(d$age, d$heures.tv, <span class="dt">use =</span> <span class="st">"complete.obs"</span>)</code></pre></div>
<pre><code>[1] 0.1776249</code></pre>
<p>L‚Äôoption <code>use</code> permet d‚Äô√©liminer les observations pour lesquelles l‚Äôune des deux valeurs est manquante. Le coefficient de corr√©lation est tr√®s faible.</p>
<p>On va donc s‚Äôint√©resser plut√¥t √† deux variables pr√©sentes dans le jeu de donn√©es <code>rp99</code>, la part de dipl√¥m√©s du sup√©rieur et la proportion de cadres dans les communes du Rh√¥ne en 1999.</p>
<p>√Ä nouveau, commen√ßons par repr√©senter les deux variables.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(rp99$dipl.sup, rp99$cadres, <span class="dt">ylab =</span> <span class="st">"Part des cadres"</span>, 
  <span class="dt">xlab =</span> <span class="st">"Part des diplom√™s du sup√©rieur"</span>)</code></pre></div>
<img src="graphs/statistique-bivariee/unnamed-chunk-6-1.png" title="" alt="" width="1050"/>
<figcaption>
Proportion de cadres et proportion de dipl√¥m√©s du sup√©rieur
</figcaption>
</figure>
<p>√áa ressemble d√©j√† beaucoup plus √† une relation de type lin√©aire.</p>
<p>Calculons le coefficient de corr√©lation¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">cor</span>(rp99$dipl.sup, rp99$cadres)</code></pre></div>
<pre><code>[1] 0.8975282</code></pre>
<p>C‚Äôest beaucoup plus proche de 1. On peut alors effectuer une <dfn>r√©gression lin√©aire</dfn><dfn data-index="lin√©aire, r√©gression"/> compl√®te en utilisant la fonction <code data-pkg="stats">lm</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">reg &lt;-<span class="st"> </span><span class="kw">lm</span>(cadres ~<span class="st"> </span>dipl.sup, <span class="dt">data =</span> rp99)
<span class="kw">summary</span>(reg)</code></pre></div>
<pre><code>
Call:
lm(formula = cadres ~ dipl.sup, data = rp99)

Residuals:
    Min      1Q  Median      3Q     Max 
-9.6905 -1.9010 -0.1823  1.4913 17.0866 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)
(Intercept)  1.24088    0.32988   3.762 0.000203
dipl.sup     1.38352    0.03931  35.196  &lt; 2e-16
               
(Intercept) ***
dipl.sup    ***
---
Signif. codes:  
0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 3.281 on 299 degrees of freedom
Multiple R-squared:  0.8056,    Adjusted R-squared:  0.8049 
F-statistic:  1239 on 1 and 299 DF,  p-value: &lt; 2.2e-16</code></pre>
<p>Le r√©sultat montre que les coefficients sont significativement diff√©rents de 0. La part de cadres augmente donc avec celle de dipl√¥m√©s du sup√©rieur (√¥ surprise). On peut tr√®s facilement repr√©senter la <dfn>droite de r√©gression</dfn><dfn data-index="r√©gression, droite"/> √† l‚Äôaide de la fonction <code data-pkg="graphics">abline</code>.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(rp99$dipl.sup, rp99$cadres, <span class="dt">ylab =</span> <span class="st">"Part des cadres"</span>, 
  <span class="dt">xlab =</span> <span class="st">"Part des dipl√¥m√©s du sup√©rieur"</span>)
<span class="kw">abline</span>(reg, <span class="dt">col =</span> <span class="st">"red"</span>)</code></pre></div>
<img src="graphs/statistique-bivariee/unnamed-chunk-9-1.png" title="" alt="" width="1050"/>
<figcaption>
R√©gression de la proportion de cadres par celle de dipl√¥m√©s du sup√©rieur
</figcaption>
</figure>
<div class="note">
<p>On remarquera que le premier argument pass√© √† la fonction <code data-pkg="stats">lm</code> a une syntaxe un peu particuli√®re. Il s‚Äôagit d‚Äôune <dfn>formule</dfn>, utilis√©e de mani√®re g√©n√©rale dans les mod√®les statistiques. On indique la variable d‚Äôint√©r√™t √† gauche et la variable explicative √† droite, les deux √©tant s√©par√©es par un tilde <code>‚àº</code> (obtenu sous <strong>Windows</strong> en appuyant simultan√©ment sur les touches <kbd>Alt Gr</kbd> et <kbd>2</kbd>). On remarquera que les noms des colonnes de notre tableau de donn√©es ont √©t√© √©crites sans guillemets.</p>
<p>Dans le cas pr√©sent, nous avons calcul√© une r√©gression lin√©aire simple entre deux variables, d‚Äôo√π l‚Äô√©criture <code>cadres ‚àº dipl.sup</code>. Si nous avions voulu expliquer une variable <em>z</em> par deux variables <em>x</em> et <em>y</em>, nous aurions √©crit <code>z ‚àº x + y</code>. Il est possible de sp√©cifier des mod√®les encore plus complexes.</p>
<p>Pour un aper√ßu de la syntaxe des formules sous <strong>R</strong>, voir <a href="http://ww2.coastal.edu/kingw/statistics/R-tutorials/formulae.html" class="uri">http://ww2.coastal.edu/kingw/statistics/R-tutorials/formulae.html</a>.</p>
</div>
</div>
<div id="statistique-bivariee_une-variable-quantitative-et-une-variable-qualitative" class="section level2">
<h2>Une variable quantitative et une variable qualitative</h2>
<div id="statistique-bivariee_representations-graphiques" class="section level3">
<h3>Repr√©sentations graphiques</h3>
<p>Quand on parle de comparaison entre une variable quantitative et une variable qualitative, on veut en g√©n√©ral savoir si la <dfn>distribution</dfn> des valeurs de la variable quantitative est la m√™me selon les modalit√©s de la variable qualitative. En clair¬†: est ce que l‚Äô√¢ge de ceux qui √©coutent du hard rock est diff√©rent de l‚Äô√¢ge de ceux qui n‚Äôen √©coutent pas¬†?</p>
<p>L√† encore, l‚Äôid√©al est de commencer par une repr√©sentation graphique. Les <dfn data-index="bo√Æte √† moustache">bo√Ætes √† moustaches</dfn><dfn data-index="moustaches, bo√Æte"/> (<dfn lang="en">boxplot</dfn> en anglais) sont parfaitement adapt√©es pour cela.</p>
<p>Si on a construit des sous-populations d‚Äôindividus √©coutant ou non du hard rock, on peut utiliser la fonction <code data-pkg="graphics">boxplot</code>.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d.hard &lt;-<span class="st"> </span><span class="kw">subset</span>(d, hard.rock ==<span class="st"> "Oui"</span>)
d.non.hard &lt;-<span class="st"> </span><span class="kw">subset</span>(d, hard.rock ==<span class="st"> "Non"</span>)
<span class="kw">boxplot</span>(d.hard$age, d.non.hard$age)</code></pre></div>
<img src="graphs/statistique-bivariee/unnamed-chunk-10-1.png" title="" alt="" width="1050"/>
<figcaption>
Boxplot de la r√©partition des √¢ges (sous-populations)
</figcaption>
</figure>
<p>Mais construire les sous-populations n‚Äôest pas n√©cessaire. On peut utiliser directement la version de <code data-pkg="graphics">boxplot</code> prenant une formule en argument.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">boxplot</span>(age ~<span class="st"> </span>hard.rock, <span class="dt">data =</span> d)</code></pre></div>
<img src="graphs/statistique-bivariee/unnamed-chunk-11-1.png" title="" alt="" width="1050"/>
<figcaption>
Boxplot de la r√©partition des √¢ges (formule)
</figcaption>
</figure>
<p>√Ä premi√®re vue, √¥ surprise, la population √©coutant du hard rock a l‚Äôair sensiblement plus jeune. Peut-on le tester math√©matiquement¬†?</p>
</div>
</div>
<div id="statistique-bivariee_deux-variables-qualitatives" class="section level2">
<h2>Deux variables qualitatives</h2>
<p>La comparaison de deux variables qualitatives s‚Äôappelle en g√©n√©ral un <dfn>tableau crois√©</dfn><dfn data-index="crois√©, tableau"/>. C‚Äôest sans doute l‚Äôune des analyses les plus fr√©quentes lors du traitement d‚Äôenqu√™tes en sciences sociales.</p>
<div id="statistique-bivariee_tableau-croise" class="section level3">
<h3>Tableau crois√©</h3>
<p>La mani√®re la plus simple d‚Äôobtenir un tableau crois√© est d‚Äôutiliser la fonction <code data-pkg="base">table</code> en lui donnant en param√®tres les deux variables √† croiser. En l‚Äôoccurrence nous allons croiser un recodage du niveau de qualification regroup√© avec le fait de pratiquer un sport.</p>
<p>On commence par calculer la variable recod√©e et par afficher le tri √† plat des deux variables¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$qualreg &lt;-<span class="st"> </span><span class="kw">as.character</span>(d$qualif)
d$qualreg[d$qualif %in%<span class="st"> </span><span class="kw">c</span>(<span class="st">"Ouvrier specialise"</span>, <span class="st">"Ouvrier qualifie"</span>)] &lt;-<span class="st"> "Ouvrier"</span>
d$qualreg[d$qualif %in%<span class="st"> </span><span class="kw">c</span>(<span class="st">"Profession intermediaire"</span>, 
  <span class="st">"Technicien"</span>)] &lt;-<span class="st"> "Intermediaire"</span>
<span class="kw">table</span>(d$qualreg)</code></pre></div>
<pre><code>
        Autre         Cadre       Employe 
           58           260           594 
Intermediaire       Ouvrier 
          246           495 </code></pre>
<p>Le tableau crois√© des deux variables s‚Äôobtient de la mani√®re suivante¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(d$sport, d$qualreg)</code></pre></div>
<pre><code>     
      Autre Cadre Employe Intermediaire Ouvrier
  Non    38   117     401           127     381
  Oui    20   143     193           119     114</code></pre>
<div class="note">
<p>Il est tout √† fait possible de croiser trois variables ou plus. Par exemple¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(d$sport, d$cuisine, d$sexe)</code></pre></div>
<pre><code>, ,  = Homme

     
      Non Oui
  Non 401 129
  Oui 228 141

, ,  = Femme

     
      Non Oui
  Non 358 389
  Oui 132 222</code></pre>
</div>
<p>Une alternative √† la fonction <code data-pkg="base">table</code> est la fonction <code data-pkg="stats">xtabs</code>. On indiquera √† cette derni√®re le croisement √† effectuer √† l‚Äôaide d‚Äôune formule puis l‚Äôobjet contenant nos donn√©es. Comme il ne s‚Äôagit pas d‚Äôun mod√®le avec une variable √† expliquer, toutes les variables seront indiqu√©es √† la droite du symbole <code>‚àº</code> et s√©par√©es par <code>+</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">xtabs</span>(~sport, d)</code></pre></div>
<pre><code>sport
 Non  Oui 
1277  723 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">xtabs</span>(~sport +<span class="st"> </span>cuisine, d)</code></pre></div>
<pre><code>     cuisine
sport Non Oui
  Non 759 518
  Oui 360 363</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">xtabs</span>(~sport +<span class="st"> </span>cuisine +<span class="st"> </span>sexe, d)</code></pre></div>
<pre><code>, , sexe = Homme

     cuisine
sport Non Oui
  Non 401 129
  Oui 228 141

, , sexe = Femme

     cuisine
sport Non Oui
  Non 358 389
  Oui 132 222</code></pre>
<p>On remarquera que le rendu par d√©faut est en g√©n√©ral plus lisible car le nom des variables est indiqu√©, permettant de savoir quelle variable est affich√©e en colonnes et laquelle en lignes.</p>
<p>On n‚Äôa cependant que les effectifs, ce qui rend difficile les comparaisons. L‚Äôextension <code class="pkg">questionr</code> fournit des fonctions permettant de calculer facilement les pourcentages lignes, colonnes et totaux d‚Äôun tableau crois√©.</p>
<p>Les pourcentages lignes s‚Äôobtiennent avec la fonction <code data-pkg="questionr" data-rdoc="rprop">lprop</code><a href="#statistique-bivariee_fn2" class="footnoteRef" id="statistique-bivariee_fnref2"><sup>2</sup></a>. Celle-ci s‚Äôapplique au tableau crois√© g√©n√©r√© par <code data-pkg="base">table</code> ou <code data-pkg="stats">xtabs</code> ¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tab &lt;-<span class="st"> </span><span class="kw">table</span>(d$sport, d$qualreg)
<span class="kw">lprop</span>(tab)</code></pre></div>
<pre><code>          
           Autre Cadre Employe Intermediaire
  Non        3.6  11.0  37.7    11.9        
  Oui        3.4  24.3  32.8    20.2        
  Ensemble   3.5  15.7  35.9    14.9        
          
           Ouvrier Total
  Non       35.8   100.0
  Oui       19.4   100.0
  Ensemble  29.9   100.0</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tab &lt;-<span class="st"> </span><span class="kw">xtabs</span>(~sport +<span class="st"> </span>qualreg, d)
<span class="kw">lprop</span>(tab)</code></pre></div>
<pre><code>          qualreg
sport      Autre Cadre Employe Intermediaire
  Non        3.6  11.0  37.7    11.9        
  Oui        3.4  24.3  32.8    20.2        
  Ensemble   3.5  15.7  35.9    14.9        
          qualreg
sport      Ouvrier Total
  Non       35.8   100.0
  Oui       19.4   100.0
  Ensemble  29.9   100.0</code></pre>
<p>Les pourcentages ligne ne nous int√©ressent gu√®re ici. On ne cherche pas √† voir quelle est la proportion de cadres parmi ceux qui pratiquent un sport, mais plut√¥t quelle est la proportion de sportifs chez les cadres. Il nous faut donc des pourcentages colonnes, que l‚Äôon obtient avec la fonction <code data-pkg="questionr">cprop</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">cprop</span>(tab)</code></pre></div>
<pre><code>       qualreg
sport   Autre Cadre Employe Intermediaire Ouvrier
  Non    65.5  45.0  67.5    51.6          77.0  
  Oui    34.5  55.0  32.5    48.4          23.0  
  Total 100.0 100.0 100.0   100.0         100.0  
       qualreg
sport   Ensemble
  Non    64.4   
  Oui    35.6   
  Total 100.0   </code></pre>
<p>Dans l‚Äôensemble, le pourcentage de personnes ayant pratiqu√© un sport est de 35,6 %. Mais cette proportion varie fortement d‚Äôune cat√©gorie professionnelle √† l‚Äôautre¬†: 55,0 % chez les cadres contre 23,0 % chez les ouvriers.</p>
<p>Enfin, les pourcentage totaux s‚Äôobtiennent avec la fonction <code data-pkg="questionr">prop</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">prop</span>(tab)</code></pre></div>
<pre><code>       qualreg
sport   Autre Cadre Employe Intermediaire Ouvrier
  Non     2.3   7.1  24.3     7.7          23.0  
  Oui     1.2   8.7  11.7     7.2           6.9  
  Total   3.5  15.7  35.9    14.9          29.9  
       qualreg
sport   Total
  Non    64.4
  Oui    35.6
  Total 100.0</code></pre>
<p>√Ä noter qu‚Äôon peut personnaliser l‚Äôaffichage de ces tableaux de pourcentages √† l‚Äôaide de diff√©rentes options, dont <code>digits</code> qui r√®gle le nombre de d√©cimales √† afficher et <code>percent</code> qui indique si on souhaite ou non rajouter un symbole <code>%</code> dans chaque case du tableau. Cette personnalisation peut se faire directement au moment de la g√©n√©ration du tableau et dans ce cas elle sera utilis√©e par d√©faut¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ctab &lt;-<span class="st"> </span><span class="kw">cprop</span>(tab, <span class="dt">digits =</span> <span class="dv">2</span>, <span class="dt">percent =</span> <span class="ot">TRUE</span>)
ctab</code></pre></div>
<pre><code>       qualreg
sport   Autre   Cadre   Employe Intermediaire
  Non    65.52%  45.00%  67.51%  51.63%      
  Oui    34.48%  55.00%  32.49%  48.37%      
  Total 100.00% 100.00% 100.00% 100.00%      
       qualreg
sport   Ouvrier Ensemble
  Non    76.97%  64.37% 
  Oui    23.03%  35.63% 
  Total 100.00% 100.00% </code></pre>
<p>ou bien ponctuellement en passant les m√™mes arguments √† la fonction <code data-pkg="questionr" data-rdoc="print.proptab">print</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ctab &lt;-<span class="st"> </span><span class="kw">cprop</span>(tab)
<span class="kw">print</span>(ctab, <span class="dt">percent =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>       qualreg
sport   Autre  Cadre  Employe Intermediaire
  Non    65.5%  45.0%  67.5%   51.6%       
  Oui    34.5%  55.0%  32.5%   48.4%       
  Total 100.0% 100.0% 100.0%  100.0%       
       qualreg
sport   Ouvrier Ensemble
  Non    77.0%   64.4%  
  Oui    23.0%   35.6%  
  Total 100.0%  100.0%  </code></pre>
</div>
<div id="statistique-bivariee_representation-graphique" class="section level3">
<h3>Repr√©sentation graphique</h3>
<p>On peut obtenir une repr√©sentation graphique synth√©tisant l‚Äôensemble des r√©sultats obtenus sous la forme d‚Äôun <dfn>graphique en mosa√Øque</dfn><dfn data-index="mosa√Øque, graphique"/><dfn data-index="tableau crois√©, graphique en mosa√Øque"/> gr√¢ce √† la fonction <code data-pkg="graphics">mosaicplot</code>.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mosaicplot</span>(qualreg ~<span class="st"> </span>sport, <span class="dt">data =</span> d, <span class="dt">shade =</span> <span class="ot">TRUE</span>, 
  <span class="dt">main =</span> <span class="st">"Graphe en mosa√Øque"</span>)</code></pre></div>
<img src="graphs/statistique-bivariee/unnamed-chunk-21-1.png" title="" alt="" width="1050"/>
<figcaption>
Exemple de graphe en mosa√Øque
</figcaption>
</figure>
<p>Comment interpr√©ter ce graphique haut en couleurs<a href="#statistique-bivariee_fn3" class="footnoteRef" id="statistique-bivariee_fnref3"><sup>3</sup></a>¬†? Chaque rectangle repr√©sente une case de tableau. Sa largeur correspond aux pourcentages en colonnes (il y a beaucoup d‚Äôemploy√©s et d‚Äôouvriers et tr√®s peu d‚Äô¬´¬†Autre¬†¬ª). Sa hauteur correspond aux pourcentages en lignes¬†: la proportion de sportifs chez les cadres est plus √©lev√©e que chez les employ√©s. Enfin, la couleur de la case correspond au r√©sidu du test du œá¬≤ correspondant¬†: les cases en rouge sont sous-repr√©sent√©es, les cases en bleu sur-repr√©sent√©es, et les cases blanches sont statistiquement proches de l‚Äôhypoth√®se d‚Äô<dfn>ind√©pendance</dfn>.</p>
<div class="note">
<p>Les graphiques en mosa√Øque permettent notamment de repr√©senter des tableaux crois√©s √† 3 ou 4 dimensions, voire plus.</p>
<p>L‚Äôextension <code class="pkg">vcd</code> fournie une fonction <code data-pkg="vcd">mosaic</code> fournissant plus d‚Äôoptions pour la cr√©ation d‚Äôun graphique en mosa√Øque, permettant par exemple d‚Äôindiquer quelles variables doivent √™tre affich√©es horizontalement ou verticalement, ou encore de colorier le contenu des rectangles en fonction d‚Äôune variable donn√©e, ‚Ä¶</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(vcd)
<span class="kw">mosaic</span>(~sport +<span class="st"> </span>cuisine +<span class="st"> </span>sexe, d, <span class="dt">highlighting =</span> <span class="st">"sexe"</span>, 
  <span class="dt">main =</span> <span class="st">"Exemple de graphique en mosa√Øque √† 3 dimensions"</span>)</code></pre></div>
<p><img src="graphs/statistique-bivariee/unnamed-chunk-22-1.png" title="" alt="" width="1050"/></p>
</div>
<p>Lorsque l‚Äôon s‚Äôint√©resse principalement aux variations d‚Äôune variable selon une autre, par exemple ici √† la pratique du sport selon le niveau de qualification, il peut √™tre int√©ressant de pr√©senter les pourcentages en colonne sous la forme de <dfn data-index="barres cumul√©es, graphique">barres cumul√©es</dfn>.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">barplot</span>(<span class="kw">cprop</span>(tab, <span class="dt">total =</span> <span class="ot">FALSE</span>), <span class="dt">main =</span> <span class="st">"Pratique du sport selon le niveau de qualification"</span>)</code></pre></div>
<img src="graphs/statistique-bivariee/unnamed-chunk-23-1.png" title="" alt="" width="1050"/>
<figcaption>
Exemple de barres cumul√©es
</figcaption>
</figure>
</div>
</div>
<div class="footnotes">
<hr/>
<ol>
<li id="statistique-bivariee_fn1"><p><code class="pkg">MASS</code> est install√©e par d√©faut avec la version de base de <strong>R</strong>.<a href="#statistique-bivariee_fnref1">‚Ü©</a></p></li>
<li id="statistique-bivariee_fn2"><p>Il s‚Äôagit en fait d‚Äôun alias pour les francophones de la fonction <code data-pkg="questionr">rprop</code>.<a href="#statistique-bivariee_fnref2">‚Ü©</a></p></li>
<li id="statistique-bivariee_fn3"><p>Sauf s‚Äôil est imprim√© en noir et blanc‚Ä¶<a href="#statistique-bivariee_fnref3">‚Ü©</a></p></li>
</ol>
</div>

</article>
<article id="graphiques-bivaries">

<div class="fluid-row" id="graphiques-bivaries_header">


<h1 class="title">Graphiques bivari√©s</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#graphiques-bivaries_les-donnees-de-lexemple">Les donn√©es de l‚Äôexemple</a><ul>
<li><a href="#graphiques-bivaries_nettoyage-des-donnees">Nettoyage des donn√©es</a></li>
<li><a href="#graphiques-bivaries_recodage-dune-variable">Recodage d‚Äôune variable</a></li>
</ul></li>
<li><a href="#graphiques-bivaries_visualisation-des-donnees">Visualisation des donn√©es</a><ul>
<li><a href="#graphiques-bivaries_visualisation-par-petits-multiples">Visualisation par <q>petits multiples</q></a></li>
<li><a href="#graphiques-bivaries_visualisation-en-series-temporelles">Visualisation en s√©ries temporelles</a></li>
<li><a href="#graphiques-bivaries_combinaisons-delements-graphiques">Combinaisons d‚Äô√©l√©ments graphiques</a></li>
</ul></li>
<li><a href="#graphiques-bivaries_composition-graphique-avec-ggplot2">Composition graphique avec ggplot2</a><ul>
<li><a href="#graphiques-bivaries_couleurs-et-echelles">Couleurs et √©chelles</a></li>
<li><a href="#graphiques-bivaries_utilisation-des-themes">Utilisation des th√®mes</a></li>
<li><a href="#graphiques-bivaries_export-des-graphiques">Export des graphiques</a></li>
</ul></li>
<li><a href="#graphiques-bivaries_pour-aller-plus-loin">Pour aller plus loin</a><ul>
<li><a href="#graphiques-bivaries_ressources-essentielles">Ressources essentielles</a></li>
<li><a href="#graphiques-bivaries_extensions-de-ggplot2">Extensions de ggplot2</a></li>
</ul></li>
</ul>
</div>

<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>
<div class="note">
<p>Ce chapitre est tir√© d‚Äôune <a href="https://github.com/briatte/aad/tree/master/reinhart-rogoff">s√©ance de cours</a> de Fran√ßois Briatte et destin√©e √† des √©tudiants de L2 sans aucune connaissance de <strong>R</strong>. Cette s√©ance de cours est elle-m√™me inspir√©e d‚Äôun <a href="http://www.stat.cmu.edu/~cshalizi/uADA/13/hw/11/">exercice</a> tir√© d‚Äôun cours de <a href="http://www.stat.cmu.edu/~cshalizi/">Cosma Shalizi</a>.</p>
</div>
<p>Comme expliqu√© dans un <a href="#graphiques-univaries">pr√©c√©dent chapitre</a>, <strong>R</strong> poss√®de un puissant moteur graphique interne, qui permet de <q>dessiner</q> dans un graphique en y rajoutant des segments, des points, du texte, ou toutes sortes d‚Äôautres symboles. Toutefois, pour produire un graphique complet avec les fonctions basiques de <strong>R</strong>, il faut un peu bricoler : d‚Äôabord, ouvrir une fen√™tre ; puis rajouter des points ; puis rajouter des lignes ; tout en configurant les couleurs au fur et √† mesure ; puis finir par fermer la fen√™tre graphique.</p>
<p><strong>R</strong> est distribu√© avec une extension qui permet de moins avoir √† bricoler les graphiques : <code class="pkg">lattice</code>. Mais surtout, <strong>R</strong> est aussi capable de comprendre la <q>grammaire graphique</q> <a href="https://books.google.fr/books/about/The_Grammar_of_Graphics.html">th√©oris√©e par Leland Wilkinson</a>, et traduite pour <strong>R</strong> par Hadley Wickham sous la forme de l‚Äôextension <code class="pkg">ggplot2</code><a href="#graphiques-bivaries_fn1" class="footnoteRef" id="graphiques-bivaries_fnref1"><sup>1</sup></a>. Ce chapitre pr√©sente cette derni√®re extension √† partir d‚Äôun exemple simple de visualisation de s√©ries temporelles, puis rentre dans le d√©tail de sa syntaxe<a href="#graphiques-bivaries_fn2" class="footnoteRef" id="graphiques-bivaries_fnref2"><sup>2</sup></a>.</p>
<div id="graphiques-bivaries_les-donnees-de-lexemple" class="section level2">
<h2>Les donn√©es de l‚Äôexemple</h2>
<p>Il y a quelques ann√©es, les chercheurs Carmen M. Reinhart et Kenneth S. Rogoff publiaient un article intitul√© <cite><a href="http://scholar.harvard.edu/files/rogoff/files/growth_in_time_debt_aer.pdf">Growth in a Time of Debt</a></cite>, dans lequel ils faisaient la d√©monstration qu‚Äôun niveau √©lev√© de dette publique nuisait √† la croissance √©conomique. Plus exactement, les deux chercheurs y d√©fendaient l‚Äôid√©e que, lorsque la dette publique d√©passe 90% du produit int√©rieur brut, ce produit cesse de cro√Ætre.</p>
<p>Cette conclusion, proche du discours port√© par des institutions comme le Fonds Mon√©taire International, a <a href="http://www.economist.com/news/finance-and-economics/21576362-seminal-analysis-relationship-between-debt-and-growth-comes-under">aliment√© plusieurs argumentaires politiques</a>. Des parlementaires am√©ricains s‚Äôen ainsi sont servi pour exiger une diminution du budget f√©d√©ral, et surtout, la Commission europ√©enne s‚Äôest appuy√©e sur cet argumentaire pour exiger que des pays comme la Gr√®ce, durement frapp√©s par la crise financi√®re globale de 2008, adoptent des plans d‚Äôaust√©rit√© drastiques.</p>
<p>Or, en tentant de reproduire les r√©sultats de Reinhart et Rogoff, les chercheurs Thomas Herndon, Michael Ash et Robert Pollin y ont trouv√© <a href="http://www.peri.umass.edu/236/hash/31e2ff374b6377b2ddec04deaa6388b1/publication/566/">de nombreuses erreurs</a>, ainsi qu‚Äôune <a href="http://www.nextnewdeal.net/rortybomb/researchers-finally-replicated-reinhart-rogoff-and-there-are-serious-problems">b√™te erreur de calcul</a> due √† une utilisation peu attentive du logiciel <strong>Microsoft Excel</strong>. La r√©v√©lation de ces erreurs donna lieu √† un d√©bat tr√®s vif entre adversaires et partisans des politiques √©conomiques d‚Äôaust√©rit√©, d√©bat toujours autant d‚Äôactualit√© aujourd‚Äôhui.</p>
<p>Dans ce chapitre, on va se servir des donn√©es (corrig√©es) de Reinhart et Rogoff pour √©valuer, de mani√®re ind√©pendante, la coh√©rence de leur argument sur le rapport entre endettement et croissance √©conomique. Commen√ßons par r√©cup√©rer ces donn√©es au format CSV sur le site du chercheur am√©ricain <a href="http://www.stat.cmu.edu/~cshalizi/">Cosma Shalizi</a>, qui utilise ces donn√©es dans <a href="http://www.stat.cmu.edu/~cshalizi/uADA/">l‚Äôun de ses exercices de cours</a>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># charger l'extension lisant le format CSV</span>
<span class="kw">library</span>(readr)

<span class="co"># emplacement souhait√© pour le jeu de donn√©es</span>
file &lt;-<span class="st"> "data/debt.csv"</span>

<span class="co"># t√©l√©charger le jeu de donn√©es s'il n'existe pas</span>
if(!<span class="kw">file.exists</span>(file))
  <span class="kw">download.file</span>(<span class="st">"http://www.stat.cmu.edu/~cshalizi/uADA/13/hw/11/debt.csv"</span>,
                file, <span class="dt">mode =</span> <span class="st">"wb"</span>)

<span class="co"># charger les donn√©es dans l'objet 'debt'</span>
debt &lt;-<span class="st"> </span><span class="kw">read_csv</span>(file)</code></pre></div>
<div class="note">
<p>Le code ci-dessus utilise la fonction <code data-pkg="readr" data-rdoc="read_csv">read_csv</code> de l‚Äôextension <code class="pkg">readr</code>, dont on a recommand√© l‚Äôutilisation dans un <a href="#import-de-donnees">pr√©c√©dent chapitre</a>. En l‚Äôabsence de cette extension, on aurait pu utiliser la fonction de base <code data-pkg="utils" data-rdoc="read.csv">read.csv</code>.</p>
</div>
<div id="graphiques-bivaries_nettoyage-des-donnees" class="section level3">
<h3>Nettoyage des donn√©es</h3>
<p>Les donn√©es de Reinhart et Rogoff contiennent, pour un √©chantillon de 20 pays occidentaux membres de la zone <a href="https://fr.wikipedia.org/wiki/Organisation_de_coop%C3%A9ration_et_de_d%C3%A9veloppement_%C3%A9conomiques">OCDE</a>, la croissance de leur <a href="https://fr.wikipedia.org/wiki/Produit_int√©rieur_brut">produit int√©rieur brut</a> (PIB)<a href="#graphiques-bivaries_fn3" class="footnoteRef" id="graphiques-bivaries_fnref3"><sup>3</sup></a>, et le ratio entre leur <a href="https://fr.wikipedia.org/wiki/Dette_publique">dette publique</a> et ce produit, exprim√© sous la forme d‚Äôun pourcentage <q>Dette / PIB</q>. Les donn√©es vont du milieu des ann√©es 1940 √† la fin des ann√©es 2000. La premi√®re colonne du jeu de donn√©es ne contenant que les num√©ros des lignes, on va la supprimer d‚Äôentr√©e de jeu¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># inspection du jeu de donn√©es</span>
<span class="kw">str</span>(debt)</code></pre></div>
<pre><code>Classes 'tbl_df', 'tbl' and 'data.frame':   1171 obs. of  5 variables:
 $        : int  147 148 149 150 151 152 153 154 155 156 ...
 $ Country: chr  "Australia" "Australia" "Australia" "Australia" ...
 $ Year   : int  1946 1947 1948 1949 1950 1951 1952 1953 1954 1955 ...
 $ growth : num  -3.56 2.46 6.44 6.61 6.92 ...
 $ ratio  : num  190 177 149 126 110 ...</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># suppression de la premi√®re colonne</span>
debt &lt;-<span class="st"> </span>debt[, -<span class="dv">1</span>]</code></pre></div>
<p>Il faut aussi noter d‚Äôembl√©e que certaines mesures sont manquantes : pour certains pays, on ne dispose pas d‚Äôune mesure fiable du PIB et/ou de la dette publique. En cons√©quence, le nombre d‚Äôobservations par pays est diff√©rent, et va de 40 observations <q>pays-ann√©e</q> pour la Gr√®ce √† 64 observations <q>pays-ann√©e</q> pour plusieurs pays comme l‚ÄôAustralie ou les √âtats-Unis¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(debt$Country)</code></pre></div>
<pre><code>
  Australia     Austria     Belgium      Canada 
         64          59          63          64 
    Denmark     Finland      France     Germany 
         56          64          54          59 
     Greece     Ireland       Italy       Japan 
         40          63          59          54 
Netherlands New Zealand      Norway    Portugal 
         53          64          64          58 
      Spain      Sweden          UK          US 
         42          64          63          64 </code></pre>
</div>
<div id="graphiques-bivaries_recodage-dune-variable" class="section level3">
<h3>Recodage d‚Äôune variable</h3>
<p>Derni√®re manipulation pr√©alable avant l‚Äôanalyse¬†: on va calculer la d√©cennie de chaque observation, en divisant l‚Äôann√©e de mesure par 10, et en multipliant la partie enti√®re de ce r√©sultat par 10. Cette manipulation tr√®s simple donne <q>1940</q> pour les mesures des ann√©es 1940 √† 1949, <q>1950</q> pour les ann√©es 1950-1959, et ainsi de suite.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">debt$Decade &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="dv">10</span> *<span class="st"> </span>debt$Year%/%<span class="dv">10</span>)</code></pre></div>
<p>Voici, pour terminer, les premi√®res lignes du jeu de donn√©es sur lequel on travaille¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(debt)</code></pre></div>
<pre><code>    Country Year    growth     ratio Decade
1 Australia 1946 -3.557951 190.41908   1940
2 Australia 1947  2.459475 177.32137   1940
3 Australia 1948  6.437534 148.92981   1940
4 Australia 1949  6.611994 125.82870   1940
5 Australia 1950  6.920201 109.80940   1950
6 Australia 1951  4.272612  87.09448   1950</code></pre>
</div>
</div>
<div id="graphiques-bivaries_visualisation-des-donnees" class="section level2">
<h2>Visualisation des donn√©es</h2>
<p>Chargeons √† pr√©sent l‚Äôextension graphique <code class="pkg">ggplot2</code> dont nous allons nous servir dans ce chapitre, et dans de nombreux chapitres suivants¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ggplot2)</code></pre></div>
<p>Proc√©dons d√©sormais √† quelques visualisations tr√®s simples de ces donn√©es. On dispose de trois variables continues¬†: l‚Äôann√©e, le taux de croissance du PIB, et le ratio <q>Dette publique / PIB</q>. Si l‚Äôon souhaite visualiser la croissance du PIB au cours du temps, la solution basique dans <strong>R</strong> s‚Äô√©crit de la mani√®re suivante¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">with</span>(debt, <span class="kw">plot</span>(Year, growth))</code></pre></div>
<p><img src="graphs/graphiques-bivaries/unnamed-chunk-7-1.png" title="" alt="" width="1050"/></p>
<p>Le code de la visualisation est tr√®s simple et se lit : <q>avec l‚Äôobjet <code>debt</code>, construire le graphique montrant l‚Äôann√©e d‚Äôobservation <var>Year</var> en abcisse et le taux de croissance du PIB <var>growth</var> en ordonn√©e</q>. Le code est compris de cette mani√®re par <strong>R</strong> car la fonction <code>plot</code> comprend le premier argument comme √©tant la variable √† repr√©senter sur l‚Äôaxe horizontal <code>x</code>, et le second comme la variable √† repr√©senter sur l‚Äôaxe vertical <code>y</code>.</p>
<p>Le m√™me graphique s‚Äô√©crit de la mani√®re suivante avec l‚Äôextension <code class="pkg">ggplot2</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">with</span>(debt, <span class="kw">qplot</span>(Year, growth))</code></pre></div>
<p><img src="graphs/graphiques-bivaries/unnamed-chunk-8-1.png" title="" alt="" width="1050"/></p>
<p>Comme on peut le voir, le code est tr√®s proche du code utilis√© dans <q><strong>R</strong> base</q>, la syntaxe signifiant toujours¬†: <q>avec le jeu de donn√©es <code>debt</code>, visualiser les variables <var>Year</var> sur l‚Äôaxe <code>x</code> et <var>growth</var> sur l‚Äôaxe <code>y</code></q>. Le r√©sultat est similaire, bien que plusieurs param√®tres graphiques aient chang√©¬†: le fond gris clair, en particulier, est caract√©ristique du th√®me graphique par d√©faut de <code class="pkg">ggplot2</code>, que l‚Äôon apprendra √† modifier plus loin.</p>
<p>Par ailleurs, dans les deux exemples pr√©c√©dents, on a √©crit <code>with(debt, ...)</code> pour indiquer que l‚Äôon travaillait avec l‚Äôobjet <code>debt</code>. Lorsque l‚Äôon travaille avec l‚Äôextension <code class="pkg">ggplot2</code>, il est toutefois plus commun d‚Äôutiliser l‚Äôargument <code>data</code> pour indiquer ce choix¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">qplot</span>(Year, growth, <span class="dt">data =</span> debt)</code></pre></div>
<div id="graphiques-bivaries_visualisation-par-petits-multiples" class="section level3">
<h3>Visualisation par <q>petits multiples</q></h3>
<p>Cherchons d√©sormais √† mieux comprendre les variations du taux de croissance du PIB au fil des ann√©es.</p>
<p>Dans les graphiques pr√©c√©dents, on voit clairement que ce taux est tr√®s variable dans l‚Äôimm√©diat apr√®s-guerre, puis qu‚Äôil oscille entre environ -5% et +15%, puis qu‚Äôil semble chuter dramatiquement √† la fin des ann√©es 2000, marqu√©es par la crise financi√®re globale. Mais comment visualiser ces variations pour chacun des vingt pays de l‚Äô√©chantillon¬†?</p>
<p>On va ici utiliser le principe de la visualisation par <q><a href="http://www.juiceanalytics.com/writing/better-know-visualization-small-multiples/">petits multiples</a></q>, c‚Äôest-√†-dire que l‚Äôon va reproduire le m√™me graphique pour chacun des pays, et visualiser l‚Äôensemble de ces graphiques dans une m√™me fen√™tre. Concr√®tement, il va donc s‚Äôagir de montrer la croissance annuelle du PIB en faisant appara√Ætre chaque pays dans une facette diff√©rente du graphique.</p>
<p><code class="pkg">ggplot2</code> permet d‚Äôeffectuer cette op√©ration en rajoutant au graphique pr√©c√©dent, au moyen de l‚Äôop√©rateur <code>+</code>, l‚Äô√©l√©ment <code>facet_wrap(~ Country)</code> au graphique, qui utilise la syntaxe <q>√©quation</q> de <strong>R</strong>, et qui signifie <q>construire le graphique pour chaque valeur diff√©rente de la variable <var>Country</var></q>. Par d√©faut, ces <q>facettes</q> sont class√©es par ordre alphab√©tique¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">qplot</span>(Year, growth, <span class="dt">data =</span> debt) +
<span class="st">  </span><span class="kw">facet_wrap</span>(~<span class="st"> </span>Country)</code></pre></div>
<p><img src="graphs/graphiques-bivaries/unnamed-chunk-10-1.png" title="" alt="" width="1050"/></p>
<p>Voil√† qui est beaucoup plus clair¬†! On aper√ßoit bien, dans ce graphique, les variations tr√®s importantes de croissance du PIB dans un pays comme l‚ÄôAutriche, ruin√©e apr√®s la Seconde guerre mondiale, ou l‚ÄôIrlande, tr√®s durement frapp√©e par la crise financi√®re globale en 2008 et 2009. On aper√ßoit aussi o√π se trouvent les donn√©es manquantes¬†: voir le graphique de l‚ÄôEspagne, par exemple.</p>
<p>Il faut noter ici un √©l√©ment essentiel de la grammaire graphique de <code class="pkg">ggplot2</code>, qui utilise une syntaxe additive, o√π diff√©rents √©l√©ments et param√®tres graphiques peuvent √™tre combin√©s en les additionnant, ce qui permet de construire et de modifier des graphiques de mani√®re cumulative, pas √† pas. Cette caract√©ristique permet de t√¢tonner, et de construire progressivement des graphiques tr√®s complets.</p>
</div>
<div id="graphiques-bivaries_visualisation-en-series-temporelles" class="section level3">
<h3>Visualisation en s√©ries temporelles</h3>
<p>Enfin, pour produire le m√™me graphique que ci-dessus en utilisant des lignes plut√¥t que des points, il suffit d‚Äôutiliser l‚Äôargument <code>geom = "line"</code>, ce qui peut √™tre consid√©r√© comme une meilleure mani√®re de visualiser des s√©ries temporelles, mais qui tend aussi √† rendre plus difficile la d√©tection des p√©riodes pour lesquelles il manque des donn√©es (voir, √† nouveau, le graphique pour l‚ÄôEspagne)¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">qplot</span>(<span class="dt">data =</span> debt, <span class="dt">y =</span> growth, <span class="dt">x =</span> Year, <span class="dt">geom =</span> <span class="st">"line"</span>) +<span class="st"> </span>
<span class="st">  </span><span class="kw">facet_wrap</span>(~<span class="st"> </span>Country)</code></pre></div>
<p><img src="graphs/graphiques-bivaries/unnamed-chunk-11-1.png" title="" alt="" width="1050"/></p>
<p>Dans ce dernier exemple, on a d√©fini l‚Äôaxe <code>y</code> avant de d√©finir l‚Äôaxe <code>x</code>, en √©crivant ces arguments de mani√®re explicite¬†; de m√™me, on a commenc√© par sp√©cifier l‚Äôargument <code>data</code>, et l‚Äôon a termin√© par l‚Äôargument <code>geom</code>. Cet ordre d‚Äô√©criture permet de conserver une forme de coh√©rence dans l‚Äô√©criture des fonctions graphiques.</p>
</div>
<div id="graphiques-bivaries_combinaisons-delements-graphiques" class="section level3">
<h3>Combinaisons d‚Äô√©l√©ments graphiques</h3>
<p>On n‚Äôa pas encore visualis√© le ratio <q>Dette publique / PIB</q>, l‚Äôautre variable du raisonnement de Reinhart et Rogoff. C‚Äôest l‚Äôoccasion de voir comment rajouter des titres aux axes des graphiques, et d‚Äôutiliser les lignes en m√™me temps que des points, toujours gr√¢ce √† l‚Äôargument <code>geom</code>, qui peut prendre plusieurs valeurs (ici, <code>"point"</code> produit les points et <code>"line"</code> produit les lignes)¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">qplot</span>(<span class="dt">data =</span> debt, <span class="dt">y =</span> ratio, <span class="dt">x =</span> Year, <span class="dt">geom =</span> <span class="kw">c</span>(<span class="st">"line"</span>, <span class="st">"point"</span>)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">facet_wrap</span>(~<span class="st"> </span>Country) +
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">x =</span> <span class="ot">NULL</span>,
       <span class="dt">y =</span> <span class="st">"Ratio dette publique / produit int√©rieur brut (%)</span><span class="ch">\n</span><span class="st">"</span>)</code></pre></div>
<p><img src="graphs/graphiques-bivaries/unnamed-chunk-12-1.png" title="" alt="" width="1050"/></p>
<p>Dans ce graphique, on a combin√© deux <q>objets g√©om√©triques</q> (<code>geom</code>) pour afficher √† la fois des points et des lignes. On a ensuite d√©fini les titres des axes, en supprimant celui de l‚Äôaxe <code>x</code>, et en rajoutant un peu d‚Äôespace entre le titre de l‚Äôaxe <code>y</code> et l‚Äôaxe lui-m√™me gr√¢ce √† la cha√Æne de caract√®res finale <code>\n</code>, qui rajoute une ligne vide entre ces deux √©l√©ments.</p>
<p>Les diff√©rents exemples vus dans cette section montrent qu‚Äôil va falloir apprendre un minimum de syntaxe graphique pour parvenir √† produire des graphiques avec <code class="pkg">ggplot2</code>. Ce petit investissement permet de savoir tr√®s vite produire de tr√®s nombreux types de graphiques, assez √©l√©gants de surcro√Æt, et tr√®s facilement modifiables √† l‚Äôaide de toutes sortes de param√®tres optionnels.</p>
<div class="important">
<p>Aussi √©l√©gants que soient vos graphiques, il ne vous dispense √©videmment pas de r√©fl√©chir √† ce que vous √™tes en train de visualiser, un graphique tr√®s √©l√©gant pouvant naturellement √™tre compl√®tement erron√©, en particulier si les donn√©es de base du graphique ont √©t√© mal mesur√©es‚Ä¶ ou endommag√©es.</p>
</div>
</div>
</div>
<div id="graphiques-bivaries_composition-graphique-avec-ggplot2" class="section level2">
<h2>Composition graphique avec ggplot2</h2>
<p>La section pr√©c√©dente a montr√© comment utiliser la fonction <code data-pkg="ggplot2" data-rdoc="qplot">qplot</code> (<q><em>quick plot</em></q>). La syntaxe compl√®te de l‚Äôextension <code class="pkg">ggplot2</code> passe par une autre fonction, <code data-pkg="ggplot2" data-rdoc="ggplot">ggplot</code>, qui permet de mieux comprendre les diff√©rents √©l√©ments de sa grammaire graphique. Dans cette section, on va d√©tailler cette syntaxe pour en tirer un graphique plus complexe que les pr√©c√©dents.</p>
<p>Commen√ßons par cr√©er un <q>treillis de base</q> au graphique¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p &lt;-<span class="st"> </span><span class="kw">ggplot</span>(<span class="dt">data =</span> debt, <span class="kw">aes</span>(<span class="dt">y =</span> growth, <span class="dt">x =</span> ratio))</code></pre></div>
<p>Aucun graphique ne s‚Äôaffiche ici¬†: en effet, ce que l‚Äôon a stock√©, dans l‚Äôobjet <code>p</code>, n‚Äôest pas un graphique complet, mais une base de travail. Cette base d√©finit les coordonn√©es <code>x</code> et <code>y</code> du graphique dans l‚Äôargument <code data-pkg="ggplot2" data-rdoc="aes">aes</code> (‚Äú<em>aesthetics</em>‚Äù). Ici, on a choisi de mettre la variable d√©pendante de Reinhart et Rogoff, <var>growth</var> (le taux de croissance du PIB), sur l‚Äôaxe <code>y</code>, et la variable ind√©pendante <var>ratio</var> (le ratio <q>Dette publique / PIB</q>) sur l‚Äôaxe <code>x</code>.</p>
<p>Rajoutons d√©sormais un objet g√©om√©trique, <code data-pkg="ggplot2" data-rdoc="geom_point">geom_point</code>, qui va projeter, sur le graphique, des points aux coordonn√©es pr√©c√©demment d√©finies, et divisons le graphique par un <q>petit multiple</q>, en projetant les points de chaque d√©cennie dans une facette diff√©rente du graphique. Ce graphique propose une d√©composition temporelle de la relation √©tudi√©e par Reinhart et Rogoff¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p +<span class="st"> </span><span class="kw">geom_point</span>() +
<span class="st">  </span><span class="kw">facet_grid</span>(. ~<span class="st"> </span>Decade)</code></pre></div>
<p><img src="graphs/graphiques-bivaries/unnamed-chunk-14-1.png" title="" alt="" width="1050"/></p>
<div class="note">
<p>Le param√®tre <code data-pkg="ggplot2" data-rdoc="facet_grid">facet_grid</code>, qui utilise aussi la syntaxe <q>√©quation</q>, permet de cr√©er des facettes plus compliqu√©es que celles cr√©√©es par le param√®tre <code data-pkg="ggplot2" data-rdoc="facet_wrap">facet_wrap</code>, m√™me si, dans nos exemples, on aurait pu utiliser aussi bien l‚Äôun que l‚Äôautre.</p>
</div>
<p>Le graphique ci-dessus pr√©sente un probl√®me fr√©quent : l‚Äôaxe horizontal du graphique, tr√®s important puisque Reinhart et Rogoff √©voquent un seuil <q>fatidique</q>, pour la croissance, de 90% du PIB, est illisible. Gr√¢ce √† l‚Äôargument <code data-pkg="ggplot2" data-rdoc="continuous_scale">scale_x_continuous</code>, on va pouvoir clarifier cet axe en n‚Äôy faisant figurer que certaines valeurs¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p +<span class="st"> </span><span class="kw">geom_point</span>() +
<span class="st">  </span><span class="kw">facet_grid</span>(. ~<span class="st"> </span>Decade) +
<span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">200</span>, <span class="dt">by =</span> <span class="dv">100</span>))</code></pre></div>
<p><img src="graphs/graphiques-bivaries/unnamed-chunk-15-1.png" title="" alt="" width="1050"/></p>
<p>Ces r√©glages nous conviennent¬†: on va donc les sauvegarder dans l‚Äôobjet <code>p</code>, de mani√®re √† continuer de construire notre graphique en incluant ces diff√©rents √©l√©ments.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p &lt;-<span class="st"> </span>p +<span class="st"> </span><span class="kw">geom_point</span>() +
<span class="st">  </span><span class="kw">facet_grid</span>(. ~<span class="st"> </span>Decade) +
<span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">200</span>, <span class="dt">by =</span> <span class="dv">100</span>))</code></pre></div>
<div id="graphiques-bivaries_couleurs-et-echelles" class="section level3">
<h3>Couleurs et √©chelles</h3>
<p>Abordons d√©sormais un √©l√©ment-cl√© de <code class="pkg">ggplot2</code> : la manipulation des param√®tres esth√©tiques. Pr√©c√©demment, on n‚Äôa montr√© que deux de ces param√®tres : <code>x</code> et <code>y</code>, les coordonn√©es du graphique. Mais ces param√®tres peuvent aussi influencer la couleur des points de notre graphique comme le montre l‚Äôexemple suivant¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p +<span class="st"> </span><span class="kw">aes</span>(<span class="dt">color =</span> ratio &lt;<span class="st"> </span><span class="dv">90</span>)</code></pre></div>
<p><img src="graphs/graphiques-bivaries/unnamed-chunk-17-1.png" title="" alt="" width="1050"/></p>
<p>Qu‚Äôa-t-on fait ici¬†? On a rajout√©, au graphique stock√© dans <code>p</code>, un param√®tre esth√©tique qui d√©termine la couleur de ses points en fonction d‚Äôune in√©galit√©, <code>ratio &lt; 90</code>, qui est vraie quand le ratio <q>Dette publique / PIB</q> est inf√©rieur au seuil <q>fatidique</q> de Reinhart et Rogoff, et fausse quand ce ratio d√©passe ce seuil. Les couleurs des points correspondent aux couleurs par d√©faut de <code class="pkg">ggplot2</code>, que l‚Äôon peut tr√®s facilement modifier avec une autre <a href="http://docs.ggplot2.org/current/scale_brewer.html">variante</a> du param√®tre <code data-pkg="ggplot2" data-rdoc="scale_brewer">scale</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p +<span class="st"> </span><span class="kw">aes</span>(<span class="dt">color =</span> ratio &lt;<span class="st"> </span><span class="dv">90</span>) +<span class="st"> </span><span class="kw">scale_color_brewer</span>(<span class="dt">palette =</span> <span class="st">"Set1"</span>)</code></pre></div>
<p><img src="graphs/graphiques-bivaries/unnamed-chunk-18-1.png" title="" alt="" width="1050"/></p>
<p>Ici, on a fait appel √† la palette de couleur <code>Set1</code> de l‚Äô√©ventail de couleurs <a href="http://colorbrewer2.org/">ColorBrewer</a>, qui est automatiquement disponible dans <code class="pkg">ggplot2</code>, et qui est contenu dans l‚Äôextension <code class="pkg">RColorBrewer</code>. La palette de couleurs que l‚Äôon a choisie affiche les points situ√©s au-dessus du seuil <q>fatidique</q> de Reinhart et Rogoff en rouge, les autres en bleu.</p>
<p>Que peut-on dire, √† ce stade, du seuil <q>fatidique</q> de Reinhart et Rogoff¬†? On peut observer qu‚Äôapr√®s la Seconde guerre mondiale, de nombreux pays sont <em>d√©j√†</em> endett√©s au-del√† de ce seuil, et d√©gagent <em>d√©j√†</em> moins de croissance que les autres. Sur la base de cette trajectoire, de nombreux critiques de Reinhart et Rogoff ont fait remarquer que le raisonnement de Reinhart et Rogoff pose en r√©alit√© un s√©rieux probl√®me d‚Äô<a href="http://www.nextnewdeal.net/rortybomb/guest-post-reinhartrogoff-and-growth-time-debt">inversion du rapport causal</a> entre endettement et croissance au cours du temps.</p>
<p>Envisageons une nouvelle modification des param√®tres graphiques. La l√©gende du graphique, qui affiche <code>FALSE</code> et <code>TRUE</code> en fonction de l‚Äôin√©galit√© <code>ratio &lt; 90</code>, peut √™tre d√©routante. Clarifions un peu cette l√©gende en supprimant son titre et en rempla√ßant les libell√©s (‚Äú<em>labels</em>‚Äù) <code>FALSE</code> et <code>TRUE</code> par leur signification¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p &lt;-<span class="st"> </span>p +<span class="st"> </span><span class="kw">aes</span>(<span class="dt">color =</span> ratio &lt;<span class="st"> </span><span class="dv">90</span>) +
<span class="st">  </span><span class="kw">scale_color_brewer</span>(<span class="st">""</span>, <span class="dt">palette =</span> <span class="st">"Set1"</span>,
                     <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">"ratio &gt; 90"</span>, <span class="st">"ratio &lt; 90"</span>))</code></pre></div>
<p>Dans le bloc de code ci-dessus, on a stock√© l‚Äôensemble de nos modifications dans l‚Äôobjet <code>p</code>, sans l‚Äôafficher¬†; en effet, on souhaite encore proc√©der √† une derni√®re modification, en rajoutant une <a href="https://fr.wikipedia.org/wiki/R√©gression_locale">r√©gression locale</a> √† travers les points de chaque facette<a href="#graphiques-bivaries_fn4" class="footnoteRef" id="graphiques-bivaries_fnref4"><sup>4</sup></a>. Apr√®s consultation de la documentation de <code class="pkg">ggplot2</code> <a href="http://docs.ggplot2.org/current/geom_smooth.html">ici</a> et <a href="http://docs.ggplot2.org/current/stat_smooth.html">l√†</a>, on en arrive au code ci-dessous, o√π <code>p</code> produit le graphique pr√©c√©dent et <code data-pkg="ggplot2" data-rdoc="geom_smooth">geom_smooth</code> produit la r√©gression locale¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">p +<span class="st"> </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">"loess"</span>, <span class="dt">se =</span> <span class="ot">FALSE</span>,
                <span class="dt">size =</span> <span class="dv">1</span>, <span class="dt">color =</span> <span class="st">"black"</span>)</code></pre></div>
<p><img src="graphs/graphiques-bivaries/unnamed-chunk-20-1.png" title="" alt="" width="1050"/></p>
<p>Le graphique permet d‚Äô√©valuer de mani√®re encore un peu plus pr√©cise l‚Äôargument de Reinhart et Rogoff, et en particulier la nature pas si <q>fatidique</q> du seuil de 90% du ratio ‚ÄúDette publique / PIB‚Äù, qui sans √™tre une bonne nouvelle pour l‚Äô√©conomie, ne d√©termine pas <q>fatidiquement</q> la direction du taux de croissance¬†: si c‚Äô√©tait le cas, toutes les courbes du graphique ressembleraient √† celles des ann√©es 2000. Autrement dit, l‚Äôargumentaire de Reinhart et Rogoff laisse clairement √† d√©sirer.</p>
</div>
<div id="graphiques-bivaries_utilisation-des-themes" class="section level3">
<h3>Utilisation des th√®mes</h3>
<p>Reprenons notre graphique de d√©part. On va, pour terminer cette d√©monstration, en construire une version imprimable en noir et blanc, ce qui signifie qu‚Äôau lieu d‚Äôutiliser des couleurs pour distinguer les points en-de√ß√† et au-del√† du seuil <q>fatidique</q> de Reinhart et Rogoff, on va utiliser une ligne verticale, produite par <code data-pkg="ggplot2" data-rdoc="geom_vline">geom_vline</code> et affich√©e en pointill√©s par le param√®tre <code>lty</code> (‚Äú<em>linetype</em>‚Äù)¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> debt, <span class="kw">aes</span>(<span class="dt">y =</span> growth, <span class="dt">x =</span> ratio)) +<span class="st"> </span>
<span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">color =</span> <span class="st">"grey50"</span>) +
<span class="st">  </span><span class="kw">geom_vline</span>(<span class="dt">xintercept =</span> <span class="dv">90</span>, <span class="dt">lty =</span> <span class="st">"dotted"</span>) +
<span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">method =</span> <span class="st">"loess"</span>, <span class="dt">size =</span> <span class="dv">1</span>, <span class="dt">color =</span> <span class="st">"black"</span>, <span class="dt">se =</span> <span class="ot">FALSE</span>) +
<span class="st">  </span><span class="kw">scale_x_continuous</span>(<span class="dt">breaks =</span> <span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">200</span>, <span class="dt">by =</span> <span class="dv">100</span>)) +
<span class="st">  </span><span class="kw">facet_grid</span>(. ~<span class="st"> </span>Decade) +
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="st">"Taux de croissance du produit int√©rieur brut</span><span class="ch">\n</span><span class="st">"</span>,
       <span class="dt">x =</span> <span class="st">"</span><span class="ch">\n</span><span class="st">Ratio dette publique / produit int√©rieur brut (%)"</span>,
       <span class="dt">title =</span> <span class="st">"Donn√©es Reinhart et Rogoff corrig√©es, 1946-2009</span><span class="ch">\n</span><span class="st">"</span>) +
<span class="st">  </span><span class="kw">theme_bw</span>() +
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">strip.background =</span> <span class="kw">element_rect</span>(<span class="dt">fill =</span> <span class="st">"grey90"</span>, <span class="dt">color =</span> <span class="st">"grey50"</span>),
        <span class="dt">strip.text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="kw">rel</span>(<span class="dv">1</span>)),
        <span class="dt">panel.grid =</span> <span class="kw">element_blank</span>())</code></pre></div>
<p><img src="graphs/graphiques-bivaries/unnamed-chunk-21-1.png" title="" alt="" width="1050"/></p>
<p>Ce graphique utilise tous les √©l√©ments pr√©sent√©s dans ce chapitre, ainsi qu‚Äôune derni√®re nouveaut√©¬†: l‚Äôutilisation d‚Äôun th√®me graphique diff√©rent du th√®me par d√©faut de <code class="pkg">ggplot2</code>. Le th√®me par d√©faut, qui s‚Äôappelle <code>theme_grey</code>, est ici remplac√© par un th√®me moins charg√©, <code>theme_bw</code> (‚Äú<em>black and white</em>‚Äù), que l‚Äôon a modifi√© en y rajoutant <a href="http://docs.ggplot2.org/current/theme.html">quelques param√®tres suppl√©mentaires</a>¬†:</p>
<ul>
<li>le param√®tre <code>strip.background</code> d√©termine la couleur du rectangle contenant les titres des facettes, c‚Äôest-√†-dire les d√©cennies observ√©es¬†;</li>
<li>le param√®tre <code>strip.text</code> d√©termine la taille des titres des facettes, qui sont ici affich√©s dans la m√™me taille de texte que le reste du texte¬†;</li>
<li>et le param√®tre <code>panel.grid</code> supprime ici les guides du graphique gr√¢ce √† l‚Äô√©l√©ment vide <code>element_blank</code>, de mani√®re √† en all√©ger la lecture.</li>
</ul>
<p>Ces diff√©rents r√©glages peuvent √™tre sauvegard√©s de mani√®re √† cr√©er des th√®mes r√©utilisables, comme <a href="https://github.com/jrnold/ggthemes/blob/master/README.md#examples">ceux de l‚Äôextension <code class="pkg">ggthemes</code></a>, ce qui permet par exemple de cr√©er un th√®me enti√®rement blanc dans lequel on peut ensuite projeter une carte, ou de produire une s√©rie de graphiques homog√®nes d‚Äôun point de vue esth√©tique.</p>
</div>
<div id="graphiques-bivaries_export-des-graphiques" class="section level3">
<h3>Export des graphiques</h3>
<p>Les graphiques produits par <code class="pkg">ggplot2</code> peuvent √™tre sauvegard√©s manuellement, comme expliqu√© dans le chapitre <q><a href="#export-de-graphiques">Export des graphiques</a></q>, ou programmatiquement. Pour sauvegarder le dernier graphique affich√© par <code class="pkg">ggplot2</code> au format PNG, il suffit d‚Äôutiliser la fonction <code data-pkg="ggplot2" data-rdoc="ggsave">ggsave</code>, qui permet d‚Äôen r√©gler la taille (en pouces) et la r√©solution (en pixels par pouce¬†; 72 par d√©faut)¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggsave</span>(<span class="st">"reinhart-rogoff.png"</span>, <span class="dt">width =</span> <span class="dv">11</span>, <span class="dt">height =</span> <span class="dv">8</span>)</code></pre></div>
<p>De la m√™me mani√®re, pour sauvegarder n‚Äôimporte quel graphique construit avec <code class="pkg">ggplot2</code> et stock√© dans un objet, il suffit de pr√©ciser le nom de cet objet, comme ci-dessous, o√π l‚Äôon sauvegarde le graphique contenu dans l‚Äôobjet <code>p</code> au format vectoriel PDF, qui pr√©serve la nettet√© du texte et des autres √©l√©ments du graphique √† n‚Äôimporte quelle r√©solution d‚Äôaffichage¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggsave</span>(<span class="st">"reinhart-rogoff.pdf"</span>, <span class="dt">plot =</span> p,
       <span class="dt">width =</span> <span class="dv">11</span>, <span class="dt">height =</span> <span class="dv">8</span>)</code></pre></div>
</div>
</div>
<div id="graphiques-bivaries_pour-aller-plus-loin" class="section level2">
<h2>Pour aller plus loin</h2>
<p>Ce chapitre n‚Äôa pu faire la d√©monstration que d‚Äôune infime partie des mani√®res d‚Äôutiliser <code class="pkg">ggplot2</code>. En voici une derni√®re illustration, qui donne une id√©e des diff√©rents types de graphiques que l‚Äôextension permet de produire d√®s que l‚Äôon conna√Æt les principaux √©l√©ments de sa syntaxe¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ggplot</span>(<span class="dt">data =</span> debt, <span class="kw">aes</span>(<span class="dt">x =</span> ratio &gt;<span class="st"> </span><span class="dv">90</span>, <span class="dt">y =</span> growth)) +
<span class="st">  </span><span class="kw">geom_boxplot</span>() +
<span class="st">  </span><span class="kw">scale_x_discrete</span>(<span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">"&lt; 90"</span>, <span class="st">"90+"</span>)) +
<span class="st">  </span><span class="kw">facet_grid</span>(. ~<span class="st"> </span>Decade) +
<span class="st">  </span><span class="kw">labs</span>(<span class="dt">y =</span> <span class="st">"Taux de croissance du produit int√©rieur brut</span><span class="ch">\n</span><span class="st">"</span>,
       <span class="dt">x =</span> <span class="st">"</span><span class="ch">\n</span><span class="st">Ratio dette publique / produit int√©rieur brut (%)"</span>,
       <span class="dt">title =</span> <span class="st">"Donn√©es Reinhart et Rogoff corrig√©es, 1946-2009</span><span class="ch">\n</span><span class="st">"</span>) +
<span class="st">  </span><span class="kw">theme_linedraw</span>() +
<span class="st">  </span><span class="kw">theme</span>(<span class="dt">strip.text =</span> <span class="kw">element_text</span>(<span class="dt">size =</span> <span class="kw">rel</span>(<span class="dv">1</span>)),
        <span class="dt">panel.grid =</span> <span class="kw">element_blank</span>())</code></pre></div>
<p><img src="graphs/graphiques-bivaries/unnamed-chunk-24-1.png" title="" alt="" width="1050"/></p>
<p>Le code ci-dessus est somme toute tr√®s proche du code pr√©sent√© dans le reste du texte, et en m√™me temps, on a bascul√© de la visualisation sous forme de s√©rie temporelles √† une visualisation par <em>boxplots</em>. Ces basculements sont tr√®s faciles √† envisager d√®s que l‚Äôon ma√Ætrise les principaux √©l√©ments de <code class="pkg">ggplot2</code>, <code>geom</code>, <code>scale</code> et <code>facet</code>, et les param√®tres <code>labs</code> et <code>theme</code> pour effectuer les finitions.</p>
<div id="graphiques-bivaries_ressources-essentielles" class="section level3">
<h3>Ressources essentielles</h3>
<p>Pour tout ce qui concerne l‚Äôutilisation de <code class="pkg">ggplot2</code>, <a href="http://ggplot2.org/book/">l‚Äôouvrage de Wickham</a>, <a href="https://github.com/hadley/ggplot2-book">en cours d‚Äôactualisation</a>, est la ressource essentielle √† consulter. <a href="https://books.google.fr/books?id=ob0VAAAAQBAJ">L‚Äôouvrage de Winston Chang</a>, qui contient des <a href="http://www.cookbook-r.com/Graphs/">dizaines d‚Äôexemples</a>, le compl√®te utilement, de m√™me que la <a href="http://docs.ggplot2.org/current/">documentation en ligne</a> de l‚Äôextension. Enfin, le site <a href="https://stackoverflow.com/questions/tagged/ggplot2">StackOverflow</a> contient de tr√®s nombreuses questions/r√©ponses sur les subtilit√©s de sa syntaxe.</p>
<p>On trouve aussi tr√®s facilement, ailleurs sur Internet, des dizaines de <em>tutorials</em> et autres <em>cheatsheets</em> pour <code class="pkg">ggplot2</code>, <a href="http://zevross.com/blog/2014/08/04/beautiful-plotting-in-r-a-ggplot2-cheatsheet-3/">ici</a> ou <a href="http://www.rstudio.com/wp-content/uploads/2015/04/ggplot2-cheatsheet.pdf">l√†</a> par exemple.</p>
</div>
<div id="graphiques-bivaries_extensions-de-ggplot2" class="section level3">
<h3>Extensions de ggplot2</h3>
<p>Il faut signaler, pour terminer, quelques-unes des diff√©rentes extensions inspir√©es de <code class="pkg">ggplot2</code>, dont la plupart sont encore en cours de d√©veloppement, mais qui permettent d‚Äôores et d√©j√† de produire des centaines de types de graphiques diff√©rents, √† partir d‚Äôune syntaxe graphique proche de celle pr√©sent√©e dans ce chapitre¬†:</p>
<ul>
<li>l‚Äôextension <code class="pkg">ggfortify</code> permet de <a href="https://github.com/sinhrks/ggfortify/blob/master/README.rst#examples">visualiser les r√©sultats de diff√©rentes fonctions de mod√©lisation</a> avec <code class="pkg">ggplot2</code>¬†;</li>
<li>l‚Äôextension <code class="pkg">ggmap</code> permet de visualiser des fonds de carte et d‚Äôy superposer des √©l√©ments graphiques r√©dig√©s avec <code class="pkg">ggplot2</code>¬†;</li>
<li>l‚Äôextension <code class="pkg">GGally</code> rajoute quelques types de graphiques √† ceux que <code class="pkg">ggplot2</code> peut produire par d√©faut¬†;</li>
<li>et des extensions comme <code class="pkg">ggvis</code> permettent de <a href="http://ggvis.rstudio.com/">produire des graphiques interactifs</a> en utilisant la syntaxe de base de <code class="pkg">ggplot2</code>.</li>
</ul>
<p>On reviendra sur ces extensions dans un chapitre plus avanc√©. Pour l‚Äôinstant, on se contentera des √©l√©ments de syntaxe pr√©sent√©s dans ce chapitre, qui seront tr√®s souvent mobilis√©s dans les chapitres suivants, de mani√®re √† pleinement illustrer la richesse et la flexibilit√© de <code class="pkg">ggplot2</code>.</p>
</div>
</div>
<div class="footnotes">
<hr/>
<ol>
<li id="graphiques-bivaries_fn1"><p>Voir l‚Äôexcellente <a href="http://ggplot2.org/">documentation de l‚Äôextension</a> et les autres ressources cit√©es en fin de texte.<a href="#graphiques-bivaries_fnref1">‚Ü©</a></p></li>
<li id="graphiques-bivaries_fn2"><p>Bien que l‚Äôon ait fait le choix de pr√©senter l‚Äôextension <code class="pkg">ggplot2</code> plut√¥t que l‚Äôextension <code class="pkg">lattice</code>, celle-ci reste un excellent choix pour la visualisation, notamment, de <a href="http://www.magesblog.com/2013/09/using-planelgroups-in-lattice.html">panels</a> et de <a href="http://www.fromthebottomoftheheap.net/2013/10/23/time-series-plots-with-lattice-and-ggplot/">s√©ries temporelles</a>. On trouve de <a href="https://procomun.wordpress.com/2015/04/14/mapping-flows-in-r-with-data-table-and-lattice/">tr√®s beaux exemples</a> d‚Äôutilisation de <code class="pkg">lattice</code> en ligne, mais un peu moins de documentation, et beaucoup moins d‚Äôextensions, que pour <code class="pkg">ggplot2</code>.<a href="#graphiques-bivaries_fnref2">‚Ü©</a></p></li>
<li id="graphiques-bivaries_fn3"><p>Ce produit est mesur√© en <a href="https://fr.wikipedia.org/wiki/Produit_int√©rieur_brut_r√©el">termes r√©els</a>, de mani√®re √† ce que le calcul de sa croissance ne soit pas affect√© par l‚Äôinflation.<a href="#graphiques-bivaries_fnref3">‚Ü©</a></p></li>
<li id="graphiques-bivaries_fn4"><p>La r√©gression locale est une variante du calcul de la <a href="https://fr.wikipedia.org/wiki/Moyenne_glissante">moyenne glissante</a> (ou <q>moyenne mobile</q>) d‚Äôune courbe.<a href="#graphiques-bivaries_fnref4">‚Ü©</a></p></li>
</ol>
</div>

</article>
<article id="donnees-ponderees">

<div class="fluid-row" id="donnees-ponderees_header">


<h1 class="title">Donn√©es pond√©r√©es</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#donnees-ponderees_options-de-certaines-fonctions">Options de certaines fonctions</a></li>
<li><a href="#donnees-ponderees_fonctions-de-lextension-questionr">Fonctions de l‚Äôextension questionr</a></li>
<li><a href="#donnees-ponderees_donnees-ponderees-avec-lextension-survey">Donn√©es pond√©r√©es avec l‚Äôextension survey</a></li>
<li><a href="#donnees-ponderees_extraire-un-sous-echantillon">Extraire un sous-√©chantillon</a></li>
<li><a href="#donnees-ponderees_conclusion">Conclusion</a></li>
</ul>
</div>

<div class="note">
<p>La version originale de ce chapitre a √©t√© √©crite par Julien Barnier dans le cadre du support de cours <a href="https://github.com/juba/intro-r">Introduction √† R</a>, compl√©t√©e par Joseph Larmarange dans <a href="https://github.com/larmarange/intro-r/tree/CoursM2">Introduction √† l‚Äôanalyse d‚Äôenqu√™tes avec R</a>.</p>
</div>
<p>S‚Äôil est tout √† fait possible de travailler avec des <dfn>donn√©es pond√©r√©es</dfn> sous R, cette fonctionnalit√© n‚Äôest pas aussi bien int√©gr√©e que dans la plupart des autres logiciels de traitement statistique. En particulier, il y a plusieurs mani√®res possibles de g√©rer la <dfn>pond√©ration</dfn>. Cependant, lorsque l‚Äôon doit √©galement prendre un compte un <dfn>plan d‚Äô√©chantillonnage</dfn><dfn data-index="√©chantillonnage, plan"/> complexe (voir section d√©di√©e ci-apr√®s), <strong>R</strong> fournit tous les outils n√©cessaires, alors que dans la plupart des logiciels propri√©taires, il faut disposer d‚Äôune extension ad√©quate, pas toujours vendue de base avec le logiciel.</p>
<p>Dans ce qui suit, on utilisera le jeu de donn√©es tir√© de l‚Äôenqu√™te <em>Histoire de vie</em> et notamment sa variable de pond√©ration <em>poids</em><a href="#donnees-ponderees_fn1" class="footnoteRef" id="donnees-ponderees_fnref1"><sup>1</sup></a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">data</span>(hdv2003)
d &lt;-<span class="st"> </span>hdv2003
<span class="kw">range</span>(d$poids)</code></pre></div>
<pre><code>[1]    78.07834 31092.14132</code></pre>
<div id="donnees-ponderees_options-de-certaines-fonctions" class="section level2">
<h2>Options de certaines fonctions</h2>
<p>Tout d‚Äôabord, certaines fonctions de <strong>R</strong> acceptent en argument un vecteur permettant de pond√©rer les observations (l‚Äôoption est en g√©n√©ral nomm√©e <code>weights</code> ou <code>row.w</code>). C‚Äôest le cas par exemple des m√©thodes d‚Äôestimation de mod√®les lin√©aires (<code data-pkg="stats">lm</code>) ou de mod√®les lin√©aires g√©n√©ralis√©s (<code data-pkg="stats">glm</code>) ou dans les analyses de correspondances<a href="#donnees-ponderees_fn2" class="footnoteRef" id="donnees-ponderees_fnref2"><sup>2</sup></a> des extensions <code class="pkg">ade4</code> ou <code class="pkg">FactoMineR</code>.</p>
<p>Par contre cette option n‚Äôest pas pr√©sente dans les fonctions de base comme <code data-pkg="base">mean</code>, <code data-pkg="base" data-rdoc="cor">var</code>, <code data-pkg="base">table</code> ou <code data-pkg="stats">chisq.test</code>.</p>
</div>
<div id="donnees-ponderees_fonctions-de-lextension-questionr" class="section level2">
<h2>Fonctions de l‚Äôextension questionr</h2>
<p>L‚Äôextension <code class="pkg">questionr</code> propose quelques fonctions permettant de calculer des statistiques simples pond√©r√©es<a href="#donnees-ponderees_fn3" class="footnoteRef" id="donnees-ponderees_fnref3"><sup>3</sup></a>¬†:</p>
<ul>
<li><code data-pkg="questionr">wtd.mean</code>¬†: moyenne pond√©r√©e</li>
<li><code data-pkg="questionr" data-rdoc="wtd.mean">wtd.var</code>¬†: variance pond√©r√©e</li>
<li><code data-pkg="questionr">wtd.table</code>¬†: tris √† plat et tris crois√©s pond√©r√©s</li>
</ul>
<p>On les utilise de la mani√®re suivante¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">mean</span>(d$age)</code></pre></div>
<pre><code>[1] 48.157</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">wtd.mean</span>(d$age, <span class="dt">weights =</span> d$poids)</code></pre></div>
<pre><code>[1] 46.34726</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">wtd.var</span>(d$age, <span class="dt">weights =</span> d$poids)</code></pre></div>
<pre><code>[1] 325.2658</code></pre>
<p>Pour les tris √† plat, on utilise la fonction wtd.table √† laquelle on passe la variable en param√®tre¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">wtd.table</span>(d$sexe, <span class="dt">weights =</span> d$poids)</code></pre></div>
<pre><code>  Homme   Femme 
5149382 5921844 </code></pre>
<p>Pour un tri crois√©, il suffit de passer deux variables en param√®tres¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">wtd.table</span>(d$sexe, d$hard.rock, <span class="dt">weights =</span> d$poids)</code></pre></div>
<pre><code>             Non        Oui
Homme 5109366.41   40016.02
Femme 5872596.42   49247.49</code></pre>
<p>Ces fonctions admettent notamment les deux options suivantes¬†:</p>
<ul>
<li><code>na.rm</code>¬†: si <code>TRUE</code>, on ne conserve que les observations sans valeur manquante.</li>
<li><code>normwt</code>¬†: si <code>TRUE</code>, on normalise les poids pour que les effectifs totaux pond√©r√©s soient les m√™mes que les effectifs initiaux. Il faut utiliser cette option, notamment si on souhaite appliquer un test sensible aux effectifs comme le œá¬≤.</li>
</ul>
<p>Ces fonctions rendent possibles l‚Äôutilisation des statistiques descriptives les plus simples et le traitement des tableaux crois√©s (les fonctions <code data-pkg="questionr" data-rdoc="rprop">lprop</code>, <code data-pkg="questionr">cprop</code> ou <code data-pkg="stats">chisq.test</code> peuvent √™tre appliqu√©es au r√©sultat d‚Äôun <code data-pkg="questionr">wtd.table</code>) mais restent limit√©es en termes de tests statistiques ou de graphiques‚Ä¶</p>
</div>
<div id="donnees-ponderees_donnees-ponderees-avec-lextension-survey" class="section level2">
<h2>Donn√©es pond√©r√©es avec l‚Äôextension survey</h2>
<p>L‚Äôextension <code class="pkg">survey</code> est sp√©cialement d√©di√©e au traitement d‚Äôenqu√™tes ayant des techniques d‚Äô√©chantillonnage et de pond√©ration potentiellement tr√®s complexes.</p>
<p>L‚Äôextension s‚Äôinstalle comme la plupart des autres¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">"survey"</span>)</code></pre></div>
<p>Le site officiel (en anglais) comporte beaucoup d‚Äôinformations, mais pas forc√©ment tr√®s accessibles¬†: <br/><a href="http://faculty.washington.edu/tlumley/survey/" class="uri">http://faculty.washington.edu/tlumley/survey/</a>.</p>
<p>Pour utiliser les fonctionnalit√©s de l‚Äôextension, on doit d‚Äôabord d√©finir le <dfn>plan d‚Äô√©chantillonnage</dfn> ou <dfn lang="en">design</dfn> de notre enqu√™te, c‚Äôest-√†-dire indiquer quel type de pond√©ration nous souhaitons lui appliquer.</p>
<p>Dans un premier temps, nous utiliserons le plan d‚Äô√©chantillonnage le plus simple, avec une variable de pond√©ration d√©j√† calcul√©e. Ceci se fait √† l‚Äôaide de la fonction <code data-pkg="survey">svydesign</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(survey)
dw &lt;-<span class="st"> </span><span class="kw">svydesign</span>(<span class="dt">ids =</span> ~<span class="dv">1</span>, <span class="dt">data =</span> d, <span class="dt">weights =</span> ~d$poids)</code></pre></div>
<p>Cette fonction cr√©e un nouvel objet, que nous avons nomm√© <code>dw</code>. Cet objet n‚Äôest pas √† proprement parler un tableau de donn√©es, mais plut√¥t un tableau de donn√©es plus une m√©thode de pond√©ration. <code>dw</code> et <code>d</code> sont des objets distincts, les op√©rations effectu√©es sur l‚Äôun n‚Äôont pas d‚Äôinfluence sur l‚Äôautre. On peut cependant retrouver le contenu de <code>d</code> depuis <code>dw</code> en utilisant <code>dw$variables</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(d$age)</code></pre></div>
<pre><code> int [1:2000] 28 23 59 34 71 35 60 47 20 28 ...</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(dw$variables$age)</code></pre></div>
<pre><code> int [1:2000] 28 23 59 34 71 35 60 47 20 28 ...</code></pre>
<p>Lorsque notre plan d‚Äô√©chantillonnage est d√©clar√©, on peut lui appliquer une s√©rie de fonctions permettant d‚Äôeffectuer diverses op√©rations statistiques en tenant compte de la pond√©ration. On citera notamment¬†:</p>
<ul>
<li><code data-pkg="survey" data-rdoc="surveysummary">svymean</code>, <code data-pkg="survey" data-rdoc="surveysummary">svyvar</code>, <code data-pkg="survey" data-rdoc="surveysummary">svytotal</code>, <code data-pkg="survey">svyquantile</code>¬†: <dfn data-index="statistique univari√©e">statistiques univari√©es</dfn> <dfn data-index="univari√©e, statistique"/>(<dfn>moyenne</dfn>, <dfn>variance</dfn>, <dfn>total</dfn>, <dfn data-index="quantile">quantiles</dfn>)</li>
<li><code data-pkg="survey">svytable</code>¬†: <dfn>tri √† plat</dfn> et <dfn>tableau crois√©</dfn></li>
<li><code data-pkg="survey" data-rdoc="svytable">svychisq</code>¬†: <dfn data-index="test du Chi¬≤">test du œá¬≤</dfn> <dfn data-index="Chi¬≤, test"/></li>
<li><code data-pkg="survey">svyby</code>¬†: statistiques selon un facteur</li>
<li><code data-pkg="survey">svyttest</code>¬†: <dfn>test t de Student</dfn><dfn data-index="Student, test-t"/> de <dfn>comparaison de moyennes</dfn><dfn data-index="moyenne, comparaison"/></li>
<li><code data-pkg="survey">svyglm</code>¬†: <dfn data-index="mod√®le lin√©aire g√©n√©ralis√©">mod√®les lin√©aires g√©n√©ralis√©s</dfn> (dont <dfn>r√©gression logistique</dfn><dfn data-index="logistique, r√©gression"/>)</li>
<li><code data-pkg="survey">svyplot</code>, <code data-pkg="survey">svyhist</code>, <code data-pkg="survey" data-rdoc="svyhist">svyboxplot</code>¬†: fonctions graphiques</li>
</ul>
<p>D‚Äôautres fonctions sont disponibles, comme <code data-pkg="survey">svyratio</code>, mais elles ne seront pas abord√©es ici.</p>
<p>Pour ne rien arranger, ces fonctions prennent leurs arguments sous forme de formules, c‚Äôest-√†-dire pas de la mani√®re habituelle. En g√©n√©ral l‚Äôappel de fonction se fait en sp√©cifiant d‚Äôabord les variables d‚Äôint√©r√™t sous forme de formule, puis l‚Äôobjet <em>survey.design</em>.</p>
<p>L‚Äô<dfn>intervalle de confiance d‚Äôune moyenne</dfn><dfn data-index="moyenne, intervalle de confiance"/> s‚Äôobtient avec <code data-pkg="survey" data-rdoc="surveysummary">confint</code> et celui d‚Äôune <dfn data-index="intervalle de confiance d'une proportion">proportion</dfn><dfn data-index="proportion, intervalle de confiance"/> avec <code data-pkg="survey">svyciprop</code>.</p>
<p>Voyons tout de suite quelques exemples<a href="#donnees-ponderees_fn4" class="footnoteRef" id="donnees-ponderees_fnref4"><sup>4</sup></a>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">svymean</span>(~age, dw)</code></pre></div>
<pre><code>      mean     SE
age 46.347 0.5284</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">confint</span>(<span class="kw">svymean</span>(~age, dw))  <span class="co"># Intervalle de confiance</span></code></pre></div>
<pre><code>      2.5 %   97.5 %
age 45.3117 47.38282</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">svyquantile</span>(~age, dw, <span class="dt">quantile =</span> <span class="kw">c</span>(<span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>), 
  <span class="dt">ci =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>$quantiles
    0.25 0.5 0.75
age   31  45   60

$CIs
, , age

       0.25 0.5 0.75
(lower   30  43   58
upper)   32  47   62</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">svyvar</span>(~heures.tv, dw, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>          variance     SE
heures.tv   2.9886 0.1836</code></pre>
<p>Pour comparer deux moyennes √† l‚Äôaide d‚Äôun test <em>t</em> on aura recours √† <code data-pkg="survey">svyttest</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">svyttest</span>(age ~<span class="st"> </span>sexe, dw)</code></pre></div>
<pre><code>
    Design-based t-test

data:  age ~ sexe
t = 2.0404, df = 1998, p-value = 0.04144
alternative hypothesis: true difference in mean is not equal to 0
sample estimates:
difference in mean 
          2.141129 </code></pre>
<p>Les tris √† plat se d√©clarent en passant comme argument le nom de la variable pr√©c√©d√© d‚Äôun tilde (<code>~</code>), tandis que les tableaux crois√©s utilisent les noms des deux variables s√©par√©s par un signe plus (<code>+</code>) et pr√©c√©d√©s par un tilde (<code>~</code>).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">svytable</span>(~sexe, dw)</code></pre></div>
<pre><code>sexe
  Homme   Femme 
5149382 5921844 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">svyciprop</span>(~sexe, dw)  <span class="co"># Intervalle de confiance</span></code></pre></div>
<pre><code>            2.5% 97.5%
sexe 0.535 0.507  0.56</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">svytable</span>(~sexe +<span class="st"> </span>clso, dw)</code></pre></div>
<pre><code>       clso
sexe           Oui        Non Ne sait pas
  Homme 2658744.04 2418187.64    72450.75
  Femme 2602031.76 3242389.36    77422.79</code></pre>
<p>On peut r√©cup√©rer le tableau issu de <code data-pkg="survey">svytable</code> dans un objet et le r√©utiliser ensuite comme n‚Äôimporte quel tableau crois√©¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tab &lt;-<span class="st"> </span><span class="kw">svytable</span>(~sexe +<span class="st"> </span>clso, dw)
tab</code></pre></div>
<pre><code>       clso
sexe           Oui        Non Ne sait pas
  Homme 2658744.04 2418187.64    72450.75
  Femme 2602031.76 3242389.36    77422.79</code></pre>
<p>Les fonctions <code data-pkg="questionr" data-rdoc="rprop">lprop</code> et <code data-pkg="questionr">cprop</code> de <code class="pkg">questionr</code> sont donc tout √† fait compatibles avec l‚Äôutilisation de <code class="pkg">survey</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">lprop</span>(tab)</code></pre></div>
<pre><code>          clso
sexe       Oui   Non   Ne sait pas Total
  Homme     51.6  47.0   1.4       100.0
  Femme     43.9  54.8   1.3       100.0
  Ensemble  47.5  51.1   1.4       100.0</code></pre>
<p>La fonction <code data-pkg="questionr">freq</code> peut √©galement √™tre utilis√©e si on lui passe en argument non pas la variable elle-m√™me, mais son tri √† plat obtenu avec <code data-pkg="survey">svytable</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tab &lt;-<span class="st"> </span><span class="kw">svytable</span>(~peche.chasse, dw)
<span class="kw">freq</span>(tab, <span class="dt">total =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>             n     %  val%
Non    9716683  87.8  87.8
Oui    1354544  12.2  12.2
Total 11071226 100.0 100.0</code></pre>
<p>Par contre, il ne faut pas utiliser <code data-pkg="stats">chisq.test</code> sur un tableau g√©n√©r√© par <code data-pkg="survey">svytable</code>. Les effectifs √©tant extrapol√©s √† partir de la pond√©ration, les r√©sultats du test seraient compl√®tement fauss√©s. Si on veut faire un test du œá¬≤ sur un tableau crois√© pond√©r√©, il faut utiliser <code data-pkg="survey" data-rdoc="svytable">svychisq</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">svychisq</span>(~sexe +<span class="st"> </span>clso, dw)</code></pre></div>
<pre><code>
    Pearson's X^2: Rao &amp; Scott adjustment

data:  svychisq(~sexe + clso, dw)
F = 3.3331, ndf = 1.9734, ddf = 3944.9000,
p-value = 0.03641</code></pre>
<p>Le principe de la fonction <code data-pkg="survey">svyby</code> est similaire √† celui de <code data-pkg="base">tapply</code><a href="#donnees-ponderees_fn5" class="footnoteRef" id="donnees-ponderees_fnref5"><sup>5</sup></a>. Elle permet de calculer des statistiques selon plusieurs sous-groupes d√©finis par un facteur. Par exemple¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">svyby</span>(~age, ~sexe, dw, svymean)</code></pre></div>
<pre><code>       sexe      age        se
Homme Homme 45.20200 0.7419450
Femme Femme 47.34313 0.7420836</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">confint</span>(<span class="kw">svyby</span>(~age, ~sexe, dw, svymean))  <span class="co"># Intervalles de confiance</span></code></pre></div>
<pre><code>         2.5 %   97.5 %
Homme 43.74781 46.65618
Femme 45.88867 48.79758</code></pre>
<p><code class="pkg">survey</code> est √©galement capable de produire des graphiques √† partir des donn√©es pond√©r√©es. Quelques exemples¬†:</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">par</span>(<span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">2</span>))
<span class="kw">svyplot</span>(~age +<span class="st"> </span>heures.tv, dw, <span class="dt">col =</span> <span class="st">"red"</span>, <span class="dt">main =</span> <span class="st">"Bubble plot"</span>)
<span class="kw">svyhist</span>(~heures.tv, dw, <span class="dt">col =</span> <span class="st">"peachpuff"</span>, <span class="dt">main =</span> <span class="st">"Histogramme"</span>)
<span class="kw">svyboxplot</span>(age ~<span class="st"> </span><span class="dv">1</span>, dw, <span class="dt">main =</span> <span class="st">"Boxplot simple"</span>, <span class="dt">ylab =</span> <span class="st">"√Çge"</span>)
<span class="kw">svyboxplot</span>(age ~<span class="st"> </span>sexe, dw, <span class="dt">main =</span> <span class="st">"Boxplot double"</span>, 
  <span class="dt">ylab =</span> <span class="st">"√Çge"</span>, <span class="dt">xlab =</span> <span class="st">"Sexe"</span>)</code></pre></div>
<img src="graphs/donnees-ponderees/unnamed-chunk-16-1.png" title="" alt="" width="1050"/>
<figcaption>
Fonctions graphiques de l‚Äôextension survey
</figcaption>
</figure>
<p>Enfin, <code class="pkg">survey</code> fournit une fonction <code data-pkg="survey">svyglm</code> permettant de calculer un mod√®le statistique tout en prenant en compte le plan d‚Äô√©chantillonnage sp√©cifi√©. La syntaxe de <code data-pkg="survey">svyglm</code> est proche de celle de <code data-pkg="stats">glm</code>. Cependant, le cadre d‚Äôune r√©gression logistique, il est n√©cessaire d‚Äôutiliser <code>family = quasibinomial()</code> afin d‚Äô√©viter un message d‚Äôerreur indiquant un nombre non entier de succ√®s¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">reg &lt;-<span class="st"> </span><span class="kw">svyglm</span>(sport ~<span class="st"> </span>sexe +<span class="st"> </span>age +<span class="st"> </span>relig +<span class="st"> </span>heures.tv, 
  dw, <span class="dt">family =</span> <span class="kw">binomial</span>())</code></pre></div>
<pre><code>Warning: non-integer #successes in a binomial glm!</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">reg &lt;-<span class="st"> </span><span class="kw">svyglm</span>(sport ~<span class="st"> </span>sexe +<span class="st"> </span>age +<span class="st"> </span>relig +<span class="st"> </span>heures.tv, 
  dw, <span class="dt">family =</span> <span class="kw">quasibinomial</span>())
reg</code></pre></div>
<pre><code>Independent Sampling design (with replacement)
svydesign(ids = ~1, data = d, weights = ~d$poids)

Call:  svyglm(formula = sport ~ sexe + age + relig + heures.tv, dw, 
    family = quasibinomial())

Coefficients:
                     (Intercept)  
                         1.90117  
                       sexeFemme  
                        -0.36526  
                             age  
                        -0.04127  
     religPratiquant occasionnel  
                         0.05577  
 religAppartenance sans pratique  
                         0.16367  
religNi croyance ni appartenance  
                         0.03988  
                      religRejet  
                        -0.14862  
                religNSP ou NVPR  
                        -0.22682  
                       heures.tv  
                        -0.18204  

Degrees of Freedom: 1994 Total (i.e. Null);  1986 Residual
  (5 observations deleted due to missingness)
Null Deviance:      2672 
Residual Deviance: 2378     AIC: NA</code></pre>
<p>Le r√©sultat obtenu est similaire √† celui de <code data-pkg="stats">glm</code> et l‚Äôon peut utiliser sans probl√®me les fonctions <code data-pkg="survey" data-rdoc="svyglm">coef</code>, <code data-pkg="survey" data-rdoc="confint.glm">confint</code>, <code data-pkg="questionr">odds.ratio</code> ou <code data-pkg="survey" data-rdoc="svyglm">predict</code> abord√©es dans le chapitre sur la <a href="#regression-logistique">r√©gression logistique</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">odds.ratio</span>(reg)</code></pre></div>
<pre><code>                                    OR 2.5 %
(Intercept)                      6.694 3.670
sexeFemme                        0.694 0.540
age                              0.960 0.952
religPratiquant occasionnel      1.057 0.659
religAppartenance sans pratique  1.178 0.759
religNi croyance ni appartenance 1.041 0.646
religRejet                       0.862 0.428
religNSP ou NVPR                 0.797 0.325
heures.tv                        0.834 0.770
                                 97.5 %         p
(Intercept)                      12.209 6.848e-10
sexeFemme                         0.892  0.004325
age                               0.967 &lt; 2.2e-16
religPratiquant occasionnel       1.696  0.817180
religAppartenance sans pratique   1.827  0.465321
religNi croyance ni appartenance  1.676  0.869658
religRejet                        1.738  0.677858
religNSP ou NVPR                  1.956  0.620504
heures.tv                         0.902 6.786e-06
                                    
(Intercept)                      ***
sexeFemme                        ** 
age                              ***
religPratiquant occasionnel         
religAppartenance sans pratique     
religNi croyance ni appartenance    
religRejet                          
religNSP ou NVPR                    
heures.tv                        ***
---
Signif. codes:  
0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
<p>Dans ses derni√®res versions, <code class="pkg">survey</code> fournit une m√©thode <code data-pkg="survey" data-rdoc="anova.svyglm">AIC.svyglm</code> permettant d‚Äôestimer un <dfn>AIC</dfn> sur un mod√®le calcul√© avec <code data-pkg="survey">svyglm</code>. Il est d√®s lors possible d‚Äôutiliser la fonction <code data-pkg="stats">step</code> pour r√©aliser une <dfn>s√©lection descendante pas √† pas</dfn><dfn data-index="pas √† pas, s√©lection descendante"/>.</p>
<p>L‚Äôextension <code class="pkg">effects</code> n‚Äôest quant √† elle pas compatible avec <code data-pkg="survey">svyglm</code><a href="#donnees-ponderees_fn6" class="footnoteRef" id="donnees-ponderees_fnref6"><sup>6</sup></a>.</p>
</div>
<div id="donnees-ponderees_extraire-un-sous-echantillon" class="section level2">
<h2>Extraire un sous-√©chantillon</h2>
<p>Si l‚Äôon souhaite travailler sur un <dfn>sous-√©chantillon</dfn> tout en gardant les informations d‚Äô√©chantillonnage, on utilisera la fonction <code data-pkg="survey" data-rdoc="subset.survey.design">subset</code> pr√©sent√©e en d√©tail dans le chapitre <a href="pem_manipulation.html#subset">Manipulation de donn√©es</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sous &lt;-<span class="st"> </span><span class="kw">subset</span>(dw, sexe ==<span class="st"> "Femme"</span> &amp;<span class="st"> </span>age &gt;=<span class="st"> </span><span class="dv">40</span>)</code></pre></div>
</div>
<div id="donnees-ponderees_conclusion" class="section level2">
<h2>Conclusion</h2>
<p>Si, la gestion de la pond√©ration sous <strong>R</strong> n‚Äôest sans doute pas ce qui se fait de plus pratique et de plus simple, on pourra quand m√™me donner les conseils suivants¬†:</p>
<ul>
<li>utiliser les options de pond√©ration des fonctions usuelles ou les fonctions d‚Äôextensions comme <code class="pkg">questionr</code> pour les cas les plus simples¬†;</li>
<li>si on utilise <code class="pkg">survey</code>, effectuer autant que possible tous les recodages et manipulations sur les donn√©es non pond√©r√©es¬†;</li>
<li>une fois les recodages effectu√©s, on d√©clare le design et on fait les analyses en tenant compte de la pond√©ration¬†;</li>
<li>surtout ne jamais modifier les variables du design. Toujours effectuer recodages et manipulations sur les donn√©es non pond√©r√©es, puis red√©clarer le design pour que les mises √† jour effectu√©es soient disponibles pour l‚Äôanalyse.</li>
</ul>
</div>
<div class="footnotes">
<hr/>
<ol>
<li id="donnees-ponderees_fn1"><p>On notera que cette variable est utilis√©e √† titre purement illustratif. Le jeu de donn√©es √©tant un extrait d‚Äôenqu√™te et la variable de pond√©ration n‚Äôayant pas √©t√© recalcul√©e, elle n‚Äôa ici √† proprement parler aucun sens.<a href="#donnees-ponderees_fnref1">‚Ü©</a></p></li>
<li id="donnees-ponderees_fn2"><p>Voir le chapitre d√©di√© √† l‚Äô<a href="">analyse des correspondances</a>.<a href="#donnees-ponderees_fnref2">‚Ü©</a></p></li>
<li id="donnees-ponderees_fn3"><p>Les fonctions <code data-pkg="questionr">wtd.mean</code> et <code data-pkg="questionr" data-rdoc="wtd.mean">wtd.var</code> sont des copies conformes des fonctions du m√™me nom de l‚Äôextension <code class="pkg">Hmisc</code> de Frank Harrel. <code class="pkg">Hmisc</code> √©tant une extension ¬´¬†de taille¬†¬ª, on a pr√©f√©r√© recopi√© les fonctions pour limiter le poids des d√©pendances.<a href="#donnees-ponderees_fnref3">‚Ü©</a></p></li>
<li id="donnees-ponderees_fn4"><p>Pour d‚Äôautres exemples, voir <a href="http://www.ats.ucla.edu/stat/r/faq/svy_r_oscluster.htm" class="uri">http://www.ats.ucla.edu/stat/r/faq/svy_r_oscluster.htm</a> (en anglais).<a href="#donnees-ponderees_fnref4">‚Ü©</a></p></li>
<li id="donnees-ponderees_fn5"><p>La fonction <code data-pkg="base">tapply</code> est pr√©sent√©e plus en d√©tails dans le chapitre <a href="pem_manipulation.html#tapply">Manipulation de donn√©es</a>.<a href="#donnees-ponderees_fnref5">‚Ü©</a></p></li>
<li id="donnees-ponderees_fn6"><p>Compatibilit√© qui pourra √©ventuellement √™tre introduite dans une future version de l‚Äôextension.<a href="#donnees-ponderees_fnref6">‚Ü©</a></p></li>
</ol>
</div>

</article>
<article id="graphiques-de-donnees-ponderees">

<div class="fluid-row" id="graphiques-de-donnees-ponderees_header">


<h1 class="title">Graphiques de donn√©es pond√©res</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>

</article>
<article id="intervalles-de-confiance">

<div class="fluid-row" id="intervalles-de-confiance_header">


<h1 class="title">Intervalles de confiance</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#intervalles-de-confiance_ic_moyenne">Intervalle de confiance d‚Äôune moyenne</a></li>
<li><a href="#intervalles-de-confiance_ic_proportion">Intervalle de confiance d‚Äôune proportion</a></li>
</ul>
</div>

<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>
<p>Nous utiliserons dans ce chapitre les donn√©es de l‚Äôenqu√™te <em>Histoire de vie 2003</em> fournies avec l‚Äôextension <code class="pkg">questionr</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">data</span>(<span class="st">"hdv2003"</span>)
d &lt;-<span class="st"> </span>hdv2003</code></pre></div>
<div id="intervalles-de-confiance_ic_moyenne" class="section level3">
<h3>Intervalle de confiance d‚Äôune moyenne</h3>
<p>L‚Äô<dfn>intervalle de confiance d‚Äôune moyenne</dfn><dfn data-index="moyenne, intervalle de confiance"/><dfn data-index="intervalle de confiance"/> peut √™tre calcul√© avec la fonction <code data-pkg="stats">t.test</code> (fonction qui permet √©galement de r√©aliser un test <em>t</em> de Student comme nous le verrons dans le chapitre d√©di√© aux <a href="#comparaisons-moyennes-et-proportions">comparaisons de moyennes</a>)¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">t.test</span>(d$heures.tv)</code></pre></div>
<pre><code>
    One Sample t-test

data:  d$heures.tv
t = 56.505, df = 1994, p-value &lt; 2.2e-16
alternative hypothesis: true mean is not equal to 0
95 percent confidence interval:
 2.168593 2.324540
sample estimates:
mean of x 
 2.246566 </code></pre>
<p>Le niveau de confiance peut √™tre pr√©cis√© via l‚Äôargument <code>conf.level</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">t.test</span>(d$heures.tv, <span class="dt">conf.level =</span> <span class="fl">0.9</span>)</code></pre></div>
<pre><code>
    One Sample t-test

data:  d$heures.tv
t = 56.505, df = 1994, p-value &lt; 2.2e-16
alternative hypothesis: true mean is not equal to 0
90 percent confidence interval:
 2.181138 2.311995
sample estimates:
mean of x 
 2.246566 </code></pre>
<p>Le nombre d‚Äôheures moyennes √† regarder la t√©l√©vision parmi les enqu√™t√©s s‚Äôav√®re √™tre de 2,2 heures, avec un intervalle de confiance √† 95¬†% de [2,17¬†-¬†2,33] et un intervalle de confiance √† 90¬†% de [2,18¬†-¬†2,31].</p>
</div>
<div id="intervalles-de-confiance_ic_proportion" class="section level3">
<h3>Intervalle de confiance d‚Äôune proportion</h3>
<p>La fonction <code data-pkg="stats">prop.test</code> permet de calculer l‚Äô<dfn>intervalle de confiance d‚Äôune proportion</dfn><dfn data-index="proportion, intervalle de confiance"/><dfn data-index="intervalle de confiance"/>. Une premi√®re possibilit√© consiste √† lui transmettre une table √† une dimension et deux entr√©es. Par exemple, si l‚Äôon s‚Äôint√©resse √† la proportion de personnes ayant pratiqu√© une activit√© physique au cours des douze derniers mois¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">freq</span>(d$sport)</code></pre></div>
<pre><code>       n    % val%
Non 1277 63.8 63.8
Oui  723 36.1 36.1
NA     0  0.0   NA</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">prop.test</span>(<span class="kw">table</span>(d$sport))</code></pre></div>
<pre><code>
    1-sample proportions test with continuity
    correction

data:  table(d$sport), null probability 0.5
X-squared = 152.9, df = 1, p-value &lt; 2.2e-16
alternative hypothesis: true p is not equal to 0.5
95 percent confidence interval:
 0.6169447 0.6595179
sample estimates:
     p 
0.6385 </code></pre>
<p>On remarquera que la fonction a calcul√© l‚Äôintervalle de confiance correspondant √† la premi√®re entr√©e du tableau, autrement dit celui de la proportion d‚Äôenqu√™t√©s n‚Äôayant pas pratiqu√© une activit√© sportive. Or, nous sommes int√©ress√© par la proportion compl√©mentaire, √† savoir celle d‚Äôenqu√™t√©s ayant pratiqu√© une activit√© sportive. On peut d√®s lors modifier l‚Äôordre de la table en indiquant notre modalit√© d‚Äôint√©r√™t avec la fonction <code data-pkg="stats">relevel</code> ou bien indiquer √† <code data-pkg="stats">prop.test</code> d‚Äôabord le nombre de succ√®s puis l‚Äôeffectif total¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">prop.test</span>(<span class="kw">table</span>(<span class="kw">relevel</span>(d$sport, <span class="st">"Oui"</span>)))</code></pre></div>
<pre><code>
    1-sample proportions test with continuity
    correction

data:  table(relevel(d$sport, "Oui")), null probability 0.5
X-squared = 152.9, df = 1, p-value &lt; 2.2e-16
alternative hypothesis: true p is not equal to 0.5
95 percent confidence interval:
 0.3404821 0.3830553
sample estimates:
     p 
0.3615 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">prop.test</span>(<span class="kw">sum</span>(d$sport ==<span class="st"> "Oui"</span>), <span class="kw">length</span>(d$sport))</code></pre></div>
<pre><code>
    1-sample proportions test with continuity
    correction

data:  sum(d$sport == "Oui") out of length(d$sport), null probability 0.5
X-squared = 152.9, df = 1, p-value &lt; 2.2e-16
alternative hypothesis: true p is not equal to 0.5
95 percent confidence interval:
 0.3404821 0.3830553
sample estimates:
     p 
0.3615 </code></pre>
<p>Enfin, le niveau de confiance peut √™tre modifi√© via l‚Äôargument <code>conf.level</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">prop.test</span>(<span class="kw">table</span>(<span class="kw">relevel</span>(d$sport, <span class="st">"Oui"</span>)), <span class="dt">conf.level =</span> <span class="fl">0.9</span>)</code></pre></div>
<pre><code>
    1-sample proportions test with continuity
    correction

data:  table(relevel(d$sport, "Oui")), null probability 0.5
X-squared = 152.9, df = 1, p-value &lt; 2.2e-16
alternative hypothesis: true p is not equal to 0.5
90 percent confidence interval:
 0.3437806 0.3795989
sample estimates:
     p 
0.3615 </code></pre>
<div class="note">
<p>Il existe de nombreuses mani√®res de calculer un intervalle de confiance pour une proportion. En l‚Äôoccurence, l‚Äôintervalle calcul√© par <code data-pkg="stats">prop.test</code> correspond dans le cas pr√©sent √† un intervalle bilat√©ral selon la m√©thode des scores de Wilson avec correction de continuit√©. Pour plus d‚Äôinformation, on pourra lire <a href="http://joseph.larmarange.net/?Intervalle-de-confiance-bilateral" class="uri">http://joseph.larmarange.net/?Intervalle-de-confiance-bilateral</a>.</p>
</div>
<div class="note">
<p>Pour se simplifier un peu la vie, le package <code class="pkg">JLutils</code> propose une fonction <code data-pkg="JLutils">prop.ci</code> (et ses deux variantes <code data-pkg="JLutils">prop.ci.lower</code> et <code data-pkg="JLutils">prop.ci.upper</code>) permettant d‚Äôappeler plus facilement <code data-pkg="stats">prop.test</code> et renvoyant directement l‚Äôintervalle de confiance.</p>
<p><code class="pkg">JLutils</code> n‚Äô√©tant disponible que sur <a href="https://github.com/larmarange/JLutils">GitHub</a>, on aura recours au package <code class="pkg">devtools</code> et √† sa fonction <code data-pkg="devtools">install_github</code> pour l‚Äôinstaller¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(devtools)
<span class="kw">install_github</span>(<span class="st">"larmarange/JLutils"</span>)</code></pre></div>
<p><code data-pkg="JLutils">prop.ci</code> fonction accepte directement un tri √† plat obtenu avec <code data-pkg="base">table</code>, un vecteur de donn√©es, un vecteur logique (issu d‚Äôune condition), ou bien le nombre de succ√®s et le nombre total d‚Äôessais. Voir les exemples ci-apr√®s¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(JLutils)
<span class="kw">freq</span>(d$sport)</code></pre></div>
<pre><code>       n    % val%
Non 1277 63.8 63.8
Oui  723 36.1 36.1
NA     0  0.0   NA</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">prop.ci</span>(d$sport)</code></pre></div>
<pre><code>[1] 0.6169447 0.6595179</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">prop.ci.lower</span>(d$sport)</code></pre></div>
<pre><code>[1] 0.6169447</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">prop.ci.upper</span>(d$sport)</code></pre></div>
<pre><code>[1] 0.6595179</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">prop.ci</span>(d$sport, <span class="dt">conf.level =</span> <span class="fl">0.9</span>)</code></pre></div>
<pre><code>[1] 0.6204011 0.6562194</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">prop.ci</span>(<span class="kw">table</span>(d$sport))</code></pre></div>
<pre><code>[1] 0.6169447 0.6595179</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">prop.ci</span>(d$sport ==<span class="st"> "Non"</span>)</code></pre></div>
<pre><code>[1] 0.6169447 0.6595179</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">prop.ci</span>(d$sport ==<span class="st"> "Oui"</span>)</code></pre></div>
<pre><code>[1] 0.3404821 0.3830553</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">prop.ci.lower</span>(<span class="kw">c</span>(<span class="dv">1277</span>, <span class="dv">723</span>), <span class="dt">n =</span> <span class="dv">2000</span>)</code></pre></div>
<pre><code>[1] 0.6169447 0.3404821</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">prop.ci.upper</span>(<span class="kw">c</span>(<span class="dv">1277</span>, <span class="dv">723</span>), <span class="dt">n =</span> <span class="dv">2000</span>)</code></pre></div>
<pre><code>[1] 0.6595179 0.3830553</code></pre>
</div>
</div>

</article>
<article id="comparaisons-moyennes-et-proportions">

<div class="fluid-row" id="comparaisons-moyennes-et-proportions_header">


<h1 class="title">Comparaisons (moyennes et proportions)</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#comparaisons-moyennes-et-proportions_comp_moyennes">Comparaison de moyennes</a></li>
<li><a href="#comparaisons-moyennes-et-proportions_comp_prop">Comparaison de proportions</a></li>
<li><a href="#comparaisons-moyennes-et-proportions_-et-derives">œá¬≤ et d√©riv√©s</a></li>
</ul>
</div>

<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>
<p>Nous utiliserons dans ce chapitre les donn√©es de l‚Äôenqu√™te <em>Histoire de vie 2003</em> fournies avec l‚Äôextension <code class="pkg">questionr</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">data</span>(<span class="st">"hdv2003"</span>)
d &lt;-<span class="st"> </span>hdv2003</code></pre></div>
<div id="comparaisons-moyennes-et-proportions_comp_moyennes" class="section level2">
<h2>Comparaison de moyennes</h2>
<p>On peut calculer la <dfn>moyenne</dfn> d‚Äô√¢ge des deux groupes en utilisant la fonction <code data-pkg="base">tapply</code><a href="#comparaisons-moyennes-et-proportions_fn1" class="footnoteRef" id="comparaisons-moyennes-et-proportions_fnref1"><sup>1</sup></a>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tapply</span>(d$age, d$hard.rock, mean)</code></pre></div>
<pre><code>     Non      Oui 
48.30211 27.57143 </code></pre>
<p>L‚Äô√©cart est important. Est-il statistiquement significatif¬†? Pour cela on peut faire un <dfn>test t de Student</dfn><dfn data-index="Student, test t"/> <dfn>comparaison de moyennes</dfn><dfn data-index="moyenne, comparaison"/> √† l‚Äôaide de la fonction <code data-pkg="stats">t.test</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">t.test</span>(d$age ~<span class="st"> </span>d$hard.rock)</code></pre></div>
<pre><code>
    Welch Two Sample t-test

data:  d$age by d$hard.rock
t = 9.6404, df = 13.848, p-value = 1.611e-07
alternative hypothesis: true difference in means is not equal to 0
95 percent confidence interval:
 16.11379 25.34758
sample estimates:
mean in group Non mean in group Oui 
         48.30211          27.57143 </code></pre>
<p>Le test est extr√™mement significatif. L‚Äô<dfn>intervalle de confiance</dfn> √† 95¬†% de la diff√©rence entre les deux moyennes va de 14,5 ans √† 21,8 ans.</p>
<div class="note">
<p>La valeur affich√©e pour <em>p</em> est de <code>1.611e-07</code>. Cette valeur peut para√Ætre √©trange pour les non avertis. Cela signifie tout simplement 1,611 multipli√© par 10 √† la puissance -7, autrement dit 0,0000001611. Cette mani√®re de repr√©senter un nombre est couramment appel√©e <dfn>notation scientifique</dfn><dfn data-index="scientifique, notation"/>.</p>
<p>Pour plus de d√©tails, voir <a href="http://fr.wikipedia.org/wiki/Notation_scientifique" class="uri">http://fr.wikipedia.org/wiki/Notation_scientifique</a>.</p>
</div>
<p>Nous sommes cependant all√©s un peu vite en besogne, car nous avons n√©glig√© une hypoth√®se fondamentale du test <em>t</em>¬†: les ensembles de valeur compar√©s doivent suivre approximativement une <dfn>loi normale</dfn><dfn data-index="normale, loi"/> et √™tre de m√™me <dfn>variance</dfn><a href="#comparaisons-moyennes-et-proportions_fn2" class="footnoteRef" id="comparaisons-moyennes-et-proportions_fnref2"><sup>2</sup></a>. Comment le v√©rifier¬†?</p>
<p>D‚Äôabord avec un petit graphique compos√©s de deux <dfn data-index="histogramme">histogrammes</dfn>¬†:</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">par</span>(<span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>))
<span class="kw">hist</span>(d$age[d$hard.rock ==<span class="st"> "Oui"</span>], <span class="dt">main =</span> <span class="st">"Hard rock"</span>, 
  <span class="dt">col =</span> <span class="st">"red"</span>)
<span class="kw">hist</span>(d$age[d$hard.rock ==<span class="st"> "Non"</span>], <span class="dt">main =</span> <span class="st">"Sans hard rock"</span>, 
  <span class="dt">col =</span> <span class="st">"red"</span>)</code></pre></div>
<img src="graphs/comparaisons-moyennes-et-proportions/unnamed-chunk-4-1.png" title="" alt="" width="1050"/>
<figcaption>
Distribution des √¢ges pour appr√©ciation de la normalit√©
</figcaption>
</figure>
<div class="note">
<p>La fonction <code data-pkg="graphics">par</code> permet de modifier de nombreux param√®tres graphiques. <code>par(mfrow = c(1, 2))</code> sert √† indiquer que l‚Äôon souhaite afficher deux graphiques sur une m√™me fen√™tre, plus pr√©cis√©ment que la fen√™tre doit comporter une ligne et deux colonnes.</p>
</div>
<p>√áa a l‚Äôair √† peu pr√®s bon pour les ¬´¬†Sans hard rock¬†¬ª, mais un peu plus limite pour les fans de <em>Metallica</em>, dont les effectifs sont d‚Äôailleurs assez faibles. Si on veut en avoir le coeur net on peut utiliser le <dfn>test de normalit√© de Shapiro-Wilk</dfn><dfn data-index="normalit√©, test de Shapiro-Wilk"/><dfn data-index="Shapiro-Wilk, test de normalit√©"/> avec la fonction <code data-pkg="stats">shapiro.test</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">shapiro.test</span>(d$age[d$hard.rock ==<span class="st"> "Oui"</span>])</code></pre></div>
<pre><code>
    Shapiro-Wilk normality test

data:  d$age[d$hard.rock == "Oui"]
W = 0.86931, p-value = 0.04104</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">shapiro.test</span>(d$age[d$hard.rock ==<span class="st"> "Non"</span>])</code></pre></div>
<pre><code>
    Shapiro-Wilk normality test

data:  d$age[d$hard.rock == "Non"]
W = 0.98141, p-value = 2.079e-15</code></pre>
<p>Visiblement, le test estime que les distributions ne sont pas suffisamment proches de la normalit√© dans les deux cas.</p>
<p>Et concernant l‚Äô√©galit√© des variances¬†?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tapply</span>(d$age, d$hard.rock, var)</code></pre></div>
<pre><code>      Non       Oui 
285.62858  62.72527 </code></pre>
<p>L‚Äô√©cart n‚Äôa pas l‚Äôair n√©gligeable. On peut le v√©rifier avec le <dfn>test d‚Äô√©galit√© des variances</dfn><dfn data-index="variance, test d'√©galit√©"/> fourni par la fonction <code data-pkg="stats">var.test</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">var.test</span>(d$age ~<span class="st"> </span>d$hard.rock)</code></pre></div>
<pre><code>
    F test to compare two variances

data:  d$age by d$hard.rock
F = 4.5536, num df = 1985, denom df = 13,
p-value = 0.003217
alternative hypothesis: true ratio of variances is not equal to 1
95 percent confidence interval:
 1.751826 8.694405
sample estimates:
ratio of variances 
          4.553644 </code></pre>
<p>La diff√©rence est tr√®s significative. En toute rigueur le test <em>t</em> n‚Äôaurait donc pas pu √™tre utilis√©.</p>
<p><em>Damned</em>¬†! Ces maudits tests statistiques vont-ils nous emp√™cher de faire conna√Ætre au monde entier notre fabuleuse d√©couverte sur l‚Äô√¢ge des fans de <em>Sepultura</em>¬†? Non¬†! Car voici qu‚Äôapproche √† l‚Äôhorizon un nouveau test, connu sous le nom de <dfn data-index="test de Wilcoxon/Mann-Whitney">Wilcoxon/Mann-Whitney</dfn><dfn data-index="Wilcoxon, test"/><dfn data-index="Mann-Whitney, test"/><dfn data-index="m√©diane, test de comparaison"/><dfn data-index="comparaison de m√©dianes, test"/>. Celui-ci a l‚Äôavantage d‚Äô√™tre non-param√©trique, c‚Äôest √† dire de ne faire aucune hypoth√®se sur la distribution des √©chantillons compar√©s. Par contre il ne compare pas des diff√©rences de moyennes mais des diff√©rences de <dfn data-index="m√©diane">m√©dianes</dfn>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">wilcox.test</span>(d$age ~<span class="st"> </span>d$hard.rock)</code></pre></div>
<pre><code>
    Wilcoxon rank sum test with continuity
    correction

data:  d$age by d$hard.rock
W = 23980, p-value = 2.856e-06
alternative hypothesis: true location shift is not equal to 0</code></pre>
<p>Ouf¬†! La diff√©rence est hautement significative<a href="#comparaisons-moyennes-et-proportions_fn3" class="footnoteRef" id="comparaisons-moyennes-et-proportions_fnref3"><sup>3</sup></a>. Nous allons donc pouvoir entamer la r√©daction de notre article pour la <em>Revue fran√ßaise de sociologie</em>.</p>
</div>
<div id="comparaisons-moyennes-et-proportions_comp_prop" class="section level2">
<h2>Comparaison de proportions</h2>
<p>La fonction <code data-pkg="stats">prop.test</code>, que nous avons d√©j√† rencontrer pour calculer l‚Äôintervalle de confiance d‚Äôune proportion (voir le chapitre d√©di√© aux <a href="#intervalles-de-confiance">intervalles de confiance</a>) permets √©galement d‚Äôeffectuer un <dfn>test de comparaison de deux proportions</dfn><dfn data-index="comparaison de proportions, test"/><dfn data-index="proportion, test de comparaison"/>.</p>
<p>Supposons que l‚Äôon souhaite comparer la proportion de personnes faisant du sport entre ceux qui lisent des bandes dessin√©es et les autres¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tab &lt;-<span class="st"> </span><span class="kw">xtabs</span>(~lecture.bd +<span class="st"> </span>sport, d)
<span class="kw">lprop</span>(tab)</code></pre></div>
<pre><code>          sport
lecture.bd Non   Oui   Total
  Non       64.2  35.8 100.0
  Oui       48.9  51.1 100.0
  Ensemble  63.8  36.1 100.0</code></pre>
<p>Il suffit de transmettre notre tableau crois√© (√† 2√ó2 dimensions) √† <code data-pkg="stats">prop.test</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">prop.test</span>(tab)</code></pre></div>
<pre><code>
    2-sample test for equality of proportions
    with continuity correction

data:  tab
X-squared = 4, df = 1, p-value = 0.0455
alternative hypothesis: two.sided
95 percent confidence interval:
 -0.002652453  0.308107236
sample estimates:
   prop 1    prop 2 
0.6420891 0.4893617 </code></pre>
<p>On pourra √©galement avoir recours √† la fonction <code data-pkg="stats">fisher.test</code> qui renverra notamment l‚Äô<dfn>odds ratio</dfn> et son intervalle de confiance correspondant¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">fisher.test</span>(<span class="kw">table</span>(d$lecture.bd, d$sport))</code></pre></div>
<pre><code>
    Fisher's Exact Test for Count Data

data:  table(d$lecture.bd, d$sport)
p-value = 0.0445
alternative hypothesis: true odds ratio is not equal to 1
95 percent confidence interval:
 1.003372 3.497759
sample estimates:
odds ratio 
  1.871433 </code></pre>
<p>On pourra aussi avoir recours √† la fonction <code data-pkg="questionr">odds.ratio</code> de l‚Äôextension <code class="pkg">questionr</code> qui r√©alise le m√™me calcul mais pr√©sente le r√©sultat l√©g√®rement diff√©remment¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">odds.ratio</span>(tab)</code></pre></div>
<pre><code>                 OR 2.5 % 97.5 %      p  
Fisher's test 1.871 1.003  3.498 0.0445 *
---
Signif. codes:  
0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
<p>Note¬†: pour le calcul du <dfn>risque relatif</dfn>, on pourra regarder du c√¥t√© de la fonction <code data-pkg="mosaic">relrisk</code> de l‚Äôextension <code class="pkg">mosaic</code>.</p>
</div>
<div id="comparaisons-moyennes-et-proportions_-et-derives" class="section level2">
<h2>œá¬≤ et d√©riv√©s</h2>
<p>Dans le cadre d‚Äôun tableau crois√©e, on peut tester l‚Äôexistence d‚Äôun lien entre les modalit√©s de deux variables, avec le tr√®s classique <dfn data-index="test du Chi¬≤">test du œá¬≤</dfn><dfn data-index="Chi¬≤, test"/><a href="#comparaisons-moyennes-et-proportions_fn4" class="footnoteRef" id="comparaisons-moyennes-et-proportions_fnref4"><sup>4</sup></a>. Celui-ci s‚Äôobtient gr√¢ce √† la fonction <code data-pkg="stats">chisq.test</code>, appliqu√©e au tableau crois√© obtenu avec <code data-pkg="base">table</code> ou <code data-pacakge="stats">xtabs</code><a href="#comparaisons-moyennes-et-proportions_fn5" class="footnoteRef" id="comparaisons-moyennes-et-proportions_fnref5"><sup>5</sup></a>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$qualreg &lt;-<span class="st"> </span><span class="kw">as.character</span>(d$qualif)
d$qualreg[d$qualif %in%<span class="st"> </span><span class="kw">c</span>(<span class="st">"Ouvrier specialise"</span>, <span class="st">"Ouvrier qualifie"</span>)] &lt;-<span class="st"> "Ouvrier"</span>
d$qualreg[d$qualif %in%<span class="st"> </span><span class="kw">c</span>(<span class="st">"Profession intermediaire"</span>, 
  <span class="st">"Technicien"</span>)] &lt;-<span class="st"> "Intermediaire"</span>

tab &lt;-<span class="st"> </span><span class="kw">table</span>(d$sport, d$qualreg)
tab</code></pre></div>
<pre><code>     
      Autre Cadre Employe Intermediaire Ouvrier
  Non    38   117     401           127     381
  Oui    20   143     193           119     114</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">chisq.test</span>(tab)</code></pre></div>
<pre><code>
    Pearson's Chi-squared test

data:  tab
X-squared = 96.798, df = 4, p-value &lt;
2.2e-16</code></pre>
<p>Le test est hautement significatif, on ne peut pas consid√©rer qu‚Äôil y a ind√©pendance entre les lignes et les colonnes du tableau.</p>
<p>On peut affiner l‚Äôinterpr√©tation du test en d√©terminant dans quelle case l‚Äô√©cart √† l‚Äôind√©pendance est le plus significatif en utilisant les <dfn data-index="r√©sidus, test du Chi¬≤">r√©sidus</dfn><dfn data-index="test du Chi¬≤, r√©sidus"/><dfn data-index="Chi¬≤, r√©sidus"/> du test. Ceux-ci sont notamment affichables avec la fonction <code data-pkg="questionr">chisq.residuals</code> de <code class="pkg">questionr</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">chisq.residuals</span>(tab)</code></pre></div>
<pre><code>     
      Autre Cadre Employe Intermediaire Ouvrier
  Non  0.11 -3.89    0.95         -2.49    3.49
  Oui -0.15  5.23   -1.28          3.35   -4.70</code></pre>
<p>Les cases pour lesquelles l‚Äô√©cart √† l‚Äôind√©pendance est significatif ont un r√©sidu dont la valeur est sup√©rieure √† 2 ou inf√©rieure √† -2. Ici on constate que la pratique d‚Äôun sport est sur-repr√©sent√©e parmi les cadres et, √† un niveau un peu moindre, parmi les professions interm√©diaires, tandis qu‚Äôelle est sousrepr√©sent√©e chez les ouvriers.</p>
<p>Enfin, on peut calculer le <dfn>coefficient de contingence de Cramer</dfn><dfn data-index="Cramer, coefficient de contingence"/><dfn data-index="tableau crois√©, coefficient de contingence de Cramer"/> du tableau, qui peut nous permettre de le comparer par la suite √† d‚Äôautres tableaux crois√©s. On peut pour cela utiliser la fonction <code data-pkg="questionr">cramer.v</code> de <code class="pkg">questionr</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">cramer.v</span>(tab)</code></pre></div>
<pre><code>[1] 0.24199</code></pre>
<div class="note">
<p>Pour un tableau √† 2√ó2 entr√©es, il est possible de calculer le <dfn>test exact de Fisher</dfn><dfn data-index="Fisher, test exact"/><dfn data-index="tableau crois√©, test exact de Fisher"/> avec la fonction <code data-pkg="stats">fisher.test</code>. On peut soit lui passer le r√©sultat de <code data-pkg="base">table</code> ou <code data-pkg="stats">xtabs</code>, soit directement les deux variables √† croiser.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">lprop</span>(<span class="kw">table</span>(d$sexe, d$cuisine))</code></pre></div>
<pre><code>          
           Non   Oui   Total
  Homme     70.0  30.0 100.0
  Femme     44.5  55.5 100.0
  Ensemble  56.0  44.0 100.0</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">fisher.test</span>(<span class="kw">table</span>(d$sexe, d$cuisine))</code></pre></div>
<pre><code>
    Fisher's Exact Test for Count Data

data:  table(d$sexe, d$cuisine)
p-value &lt; 2.2e-16
alternative hypothesis: true odds ratio is not equal to 1
95 percent confidence interval:
 2.402598 3.513723
sample estimates:
odds ratio 
  2.903253 </code></pre>
</div>
</div>
<div class="footnotes">
<hr/>
<ol>
<li id="comparaisons-moyennes-et-proportions_fn1"><p>La fonction <code data-pkg="base">tapply</code> est pr√©sent√©e plus en d√©tails dans le chapitre <a href="pem_manipulation.html#tapply">Manipulation de donn√©es</a>.<a href="#comparaisons-moyennes-et-proportions_fnref1">‚Ü©</a></p></li>
<li id="comparaisons-moyennes-et-proportions_fn2"><p>Concernant cette seconde condition, <code data-pkg="stats">t.test</code> propose une option nomm√©e <code>var.equal</code> qui permet d‚Äôutiliser une approximation dans le cas o√π les variances ne sont pas √©gales.<a href="#comparaisons-moyennes-et-proportions_fnref2">‚Ü©</a></p></li>
<li id="comparaisons-moyennes-et-proportions_fn3"><p>Ce test peut √©galement fournir un intervalle de confiance avec l‚Äôoption <code>conf.int=TRUE</code>.<a href="#comparaisons-moyennes-et-proportions_fnref3">‚Ü©</a></p></li>
<li id="comparaisons-moyennes-et-proportions_fn4"><p>On ne donnera pas plus d‚Äôindications sur le test du œá¬≤ ici. Les personnes d√©sirant une pr√©sentation plus d√©taill√©e pourront se reporter (attention, s√©ance d‚Äôautopromotion¬†!) √† la page suivante¬†: <a href="http://alea.fr.eu.org/pages/khi2" class="uri">http://alea.fr.eu.org/pages/khi2</a>.<a href="#comparaisons-moyennes-et-proportions_fnref4">‚Ü©</a></p></li>
<li id="comparaisons-moyennes-et-proportions_fn5"><p>On peut aussi appliquer directement le test en sp√©cifiant les deux variables √† croiser via <code>chisq.test(d$qualreg, d$sport)</code>.<a href="#comparaisons-moyennes-et-proportions_fnref5">‚Ü©</a></p></li>
</ol>
</div>

</article>
<article id="definir-un-plan-d-echantillonnage-complexe">

<div class="fluid-row" id="definir-un-plan-d-echantillonnage-complexe_header">


<h1 class="title">D√©finir un plan d‚Äô√©chantillonnage complexe</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#definir-un-plan-d-echantillonnage-complexe_differents-types-dechantillonnage">Diff√©rents types d‚Äô√©chantillonnage</a></li>
<li><a href="#definir-un-plan-d-echantillonnage-complexe_les-options-de-svydesign">Les options de svydesign</a></li>
<li><a href="#definir-un-plan-d-echantillonnage-complexe_quelques-exemples">Quelques exemples</a></li>
<li><a href="#definir-un-plan-d-echantillonnage-complexe_extraire-un-sous-echantillon">Extraire un sous-√©chantillon</a></li>
</ul>
</div>

<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>
<p>L‚Äôextension <code class="pkg">survey</code> ne permet pas seulement d‚Äôindiquer une variable de pond√©ration mais √©galement de prendre les sp√©cificit√©s du plan d‚Äô√©chantillonnage (strates, grappes, ‚Ä¶). Le plan d‚Äô√©chantillonnage ne joue pas seulement sur la pond√©ration des donn√©es, mais influence le calcul des variances et par ricochet tous les tests statistiques. Deux √©chantillons identiques avec la m√™me variable de pond√©ration mais des designs diff√©rents produiront les m√™mes moyennes et proportions mais des intervalles de confiance diff√©rents.</p>
<div id="definir-un-plan-d-echantillonnage-complexe_differents-types-dechantillonnage" class="section level2">
<h2>Diff√©rents types d‚Äô√©chantillonnage</h2>
<p>L‚Äô<dfn>√©chantillonnage al√©atoire simple</dfn><dfn data-index="al√©atoire, √©chantillonnage"/> ou <dfn>√©chantillonnage √©quiprobable</dfn><dfn data-index="√©quiprobable, √©chantillonnage"/> est une m√©thode pour laquelle tous les √©chantillons possibles (de m√™me taille) ont la m√™me probabilit√© d‚Äô√™tre choisis et tous les √©l√©ments de la population ont une chance √©gale de faire partie de l‚Äô√©chantillon. C‚Äôest l‚Äô√©chantillonnage le plus simple¬†: chaque individu √† la m√™me probabilit√© d‚Äô√™tre s√©lectionn√©.</p>
<p>L‚Äô<dfn>√©chantillonnage stratifi√©</dfn><dfn data-index="stratifi√©, √©chantillonnage"/> est une m√©thode qui consiste d‚Äôabord √† subdiviser la population en groupes homog√®nes (<dfn data-index="strate">strates</dfn>) pour ensuite extraire un √©chantillon al√©atoire de chaque strate. Cette m√©thode suppose la connaissance de la structure de la population. Pour estimer les param√®tres, les r√©sultats doivent √™tre pond√©r√©s par l‚Äôimportance relative de chaque strate dans la population.</p>
<p>L‚Äô<dfn>√©chantillonnage par grappes</dfn> est une m√©thode qui consiste √† choisir un √©chantillon al√©atoire d‚Äôunit√©s qui sont elles-m√™mes des sous-ensembles de la population (<dfn data-index="grappe, √©chantillonnage">grappes</dfn> ou <dfn data-index="cluster" lang="en">clusters</dfn> en anglais). Cette m√©thode suppose que les unit√©s de chaque grappe sont repr√©sentatives. Elle poss√®de l‚Äôavantage d‚Äô√™tre souvent plus √©conomique.</p>
<p>Il est possible de combiner plusieurs de ces approches. Par exemple, les <em>Enqu√™tes D√©mographiques et de Sant√©</em><a href="#definir-un-plan-d-echantillonnage-complexe_fn1" class="footnoteRef" id="definir-un-plan-d-echantillonnage-complexe_fnref1"><sup>1</sup></a> (EDS) sont des enqu√™tes stratifi√©es en grappes √† deux degr√©s. Dans un premier temps, la population est divis√©e en strates par r√©gion et milieu de r√©sidence. Dans chaque strate, des zones d‚Äôenqu√™tes, correspondant √† des unit√©s de recensement, sont tir√©es au sort avec une probabilit√© proportionnelle au nombre de m√©nages de chaque zone au dernier recensement de population. Enfin, au sein de chaque zone d‚Äôenqu√™te s√©lectionn√©e, un recensement de l‚Äôensemble des m√©nages est effectu√© puis un nombre identique de m√©nages par zone d‚Äôenqu√™te est tir√© au sort de mani√®re al√©toire simple.</p>
</div>
<div id="definir-un-plan-d-echantillonnage-complexe_les-options-de-svydesign" class="section level2">
<h2>Les options de svydesign</h2>
<p>La fonction <code data-pkg="survey">svydesign</code> accepte plusieurs arguments d√©crits sur sa page d‚Äôaide (obtenue avec la commande <code>?svydesign</code>).</p>
<p>L‚Äôagument <code>data</code> permet de sp√©cifier le tableau de donn√©es contenant les observations.</p>
<p>L‚Äôargument <code>ids</code> est obligatoire et sp√©cifie sous la forme d‚Äôune formule les identifiants des diff√©rents niveaux d‚Äôun tirage en grappe. S‚Äôil s‚Äôagit d‚Äôun √©chantillon al√©atoire simple, on entrera <code>ids=Àú1</code>. Autre situation¬†: supposons une √©tude portant sur la population fran√ßaise. Dans un premier temps, on a tir√© au sort un certain nombre de d√©partements fran√ßais. Dans un second temps, on tire au sort dans chaque d√©partement des communes. Dans chaque commune s√©lectionn√©e, on tire au sort des quartiers. Enfin, on interroge de mani√®re exhaustive toutes les personnes habitant les quartiers enqu√™t√©s. Notre fichier de donn√©es devra donc comporter pour chaque observation les variables <em>id_departement</em>, <em>id_commune</em> et <em>id_quartier</em>. On √©crira alors pour l‚Äôargument <code>ids</code> la valeur suivante¬†:<br/><code>ids=Àúid_departement+id_commune+id_quartier</code>.</p>
<p>Si l‚Äô√©chantillon est stratifi√©, on sp√©cifiera les strates √† l‚Äôaide de l‚Äôargument <code>strata</code> en sp√©cifiant la variable contenant l‚Äôidentifiant des strates. Par exemple¬†: <code>strata=Àúid_strate</code>.</p>
<p>Il faut encore sp√©cifier les probabilit√©s de tirage de chaque cluster ou bien la pond√©ration des individus. Si l‚Äôon dispose de la probabilit√© de chaque observation d‚Äô√™tre s√©lectionn√©e, on utilisera l‚Äôargument <code>probs</code>. Si, par contre, on conna√Æt la pond√©ration de chaque observation (qui doit √™tre proportionnelle √† l‚Äôinverse de cette probabilit√©), on utilisera l‚Äôargument <code>weights</code>.</p>
<p>Si l‚Äô√©chantillon est stratifi√©, qu‚Äôau sein de chaque strate les individus ont √©t√© tir√©s au sort de mani√®re al√©atoire et que l‚Äôon conna√Æt la taille de chaque strate, il est possible de ne pas avoir √† sp√©cifier la probabilit√© de tirage ou la pond√©ration de chaque observation. Il est pr√©f√©rable de fournir une variable contenant la taille de chaque strate √† l‚Äôargument <code>fpc</code>. De plus, dans ce cas-l√†, une petite correction sera appliqu√©e au mod√®le pour prendre en compte la taille finie de chaque strate.</p>
</div>
<div id="definir-un-plan-d-echantillonnage-complexe_quelques-exemples" class="section level2">
<h2>Quelques exemples</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># √âchantillonnage al√©atoire simple</span>
plan &lt;-<span class="st"> </span><span class="kw">svydesign</span>(<span class="dt">ids =</span> ~<span class="dv">1</span>, <span class="dt">data =</span> donnees)

<span class="co"># √âchantillonnage stratifi√© √† un seul niveau (la</span>
<span class="co"># taille de chaque strate est connue)</span>
plan &lt;-<span class="st"> </span><span class="kw">svydesign</span>(<span class="dt">ids =</span> ~<span class="dv">1</span>, <span class="dt">data =</span> donnees, <span class="dt">fpc =</span> ~taille)

<span class="co"># √âchantillonnage en grappes avec tirages √† quatre</span>
<span class="co"># degr√©s (departement, commune, quartier,</span>
<span class="co"># individus). La probabilit√© de tirage de chaque</span>
<span class="co"># niveau de cluster est connue.</span>
plan &lt;-<span class="st"> </span><span class="kw">svydesign</span>(<span class="dt">ids =</span> ~id_departement +<span class="st"> </span>id_commune +<span class="st"> </span>
<span class="st">  </span>id_quartier, <span class="dt">data =</span> donnees, <span class="dt">probs =</span> ~proba_departement +<span class="st"> </span>
<span class="st">  </span>proba_commune +<span class="st"> </span>proba_quartier)

<span class="co"># √âchantillonnage stratifi√© avec tirage √† deux</span>
<span class="co"># degr√©s (clusters et individus). Le poids</span>
<span class="co"># statistiques de chaque observation est connu.</span>
plan &lt;-<span class="st"> </span><span class="kw">svydesign</span>(<span class="dt">ids =</span> ~id_cluster, <span class="dt">data =</span> donnees, 
  <span class="dt">strata =</span> ~id_strate, <span class="dt">weights =</span> ~poids)</code></pre></div>
<p>Prenons l‚Äôexemple d‚Äôune <em>Enqu√™te D√©mographique et de Sant√©</em>. Le nom des diff√©rentes variables est standardis√© et commun quelle que soit l‚Äôenqu√™te. Nous supposerons que vous avez import√© le fichier <em>individus</em> dans un tableau de donn√©es nomm√©s <code>eds</code>. Le poids statistique de chaque individu est fourni par la variable <em>V005</em> qui doit au pr√©alable √™tre divis√©e par un million. Les grappes d‚Äô√©chantillonnage au premier degr√© sont fournies par la variable <em>V021 (primary sample unit)</em>. Si elle n‚Äôest pas renseign√©e, on pourra utilisier le num√©ro de grappe <em>V001</em>. Enfin, le milieu de r√©sidence (urbain / rural) est fourni par <em>V025</em> et la r√©gion par <em>V024</em>. Pour rappel, l‚Äô√©chantillon a √©t√© stratifi√© √† la fois par r√©gion et par mileu de r√©sidence. Certaines enqu√™tes fournissent directement un num√©ro de strate via <em>V022</em>. Si tel est le cas, on pourra pr√©ciser le plan d‚Äô√©chantillonnage ainsi¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">eds$poids &lt;-<span class="st"> </span>eds$V005/<span class="fl">1e+06</span>
design.eds &lt;-<span class="st"> </span><span class="kw">svydesign</span>(<span class="dt">ids =</span> ~V021, <span class="dt">data =</span> eds, <span class="dt">strata =</span> ~V022, 
  <span class="dt">weights =</span> ~poids)</code></pre></div>
<p>Si <em>V022</em> n‚Äôest pas fourni mais que l‚Äôenqu√™te a bien √©t√© stratifi√©e par r√©gion et milieu de r√©sidence (v√©rifiez toujours le premier chapitre du rapport d‚Äôenqu√™te), on pourra cr√©er une variable strate ainsi<a href="#definir-un-plan-d-echantillonnage-complexe_fn2" class="footnoteRef" id="definir-un-plan-d-echantillonnage-complexe_fnref2"><sup>2</sup></a>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">eds$strate &lt;-<span class="st"> </span><span class="kw">as.factor</span>(<span class="kw">as.integer</span>(eds$V024) *<span class="st"> </span><span class="dv">10</span> +<span class="st"> </span>
<span class="st">  </span><span class="kw">as.integer</span>(eds$V025))
<span class="kw">levels</span>(eds$strate) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">paste</span>(<span class="kw">levels</span>(eds$V024), <span class="st">"Urbain"</span>), 
  <span class="kw">paste</span>(<span class="kw">levels</span>(eds$V024), <span class="st">"Rural"</span>))
design.eds &lt;-<span class="st"> </span><span class="kw">svydesign</span>(<span class="dt">ids =</span> ~V021, <span class="dt">data =</span> eds, <span class="dt">strata =</span> ~strate, 
  <span class="dt">weights =</span> ~poids)</code></pre></div>
</div>
<div id="definir-un-plan-d-echantillonnage-complexe_extraire-un-sous-echantillon" class="section level2">
<h2>Extraire un sous-√©chantillon</h2>
<p>Si l‚Äôon souhaite travailler sur un <dfn>sous-√©chantillon</dfn> tout en gardant les informations d‚Äô√©chantillonnage, on utilisera la fonction <code data-pkg="survey" data-rdoc="subset.survey.design">subset</code> pr√©sent√©e en d√©tail dans le chapitre <a href="pem_manipulation.html#subset">Manipulation de donn√©es</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sous &lt;-<span class="st"> </span><span class="kw">subset</span>(plan, sexe ==<span class="st"> "Femme"</span> &amp;<span class="st"> </span>age &gt;=<span class="st"> </span><span class="dv">40</span>)</code></pre></div>
</div>
<div class="footnotes">
<hr/>
<ol>
<li id="definir-un-plan-d-echantillonnage-complexe_fn1"><p>Vaste programme d‚Äôenqu√™tes r√©alis√©es √† intervalles r√©guliers dans les pays du Sud, disponibles sur <a href="http://www.dhsprogram.com/" class="uri">http://www.dhsprogram.com/</a>.<a href="#definir-un-plan-d-echantillonnage-complexe_fnref1">‚Ü©</a></p></li>
<li id="definir-un-plan-d-echantillonnage-complexe_fn2"><p>L‚Äôastuce consiste √† utiliser <code data-pkg="base">as.integer</code> pour obtenir le code des facteurs et non leur valeur textuelle. L‚Äôaddition des deux valeurs apr√®s multiplication du code de la r√©gion par 10 permet d‚Äôobtenir une valeur unique pour chaque combinaison des deux variables. On retransforme le r√©sultat en facteurs puis on modifie les √©tiquettes des modalit√©s.<a href="#definir-un-plan-d-echantillonnage-complexe_fnref2">‚Ü©</a></p></li>
</ol>
</div>

</article>
<article id="regression-lineaire">

<div class="fluid-row" id="regression-lineaire_header">


<h1 class="title">R√©gression lin√©aire</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>

</article>
<article id="regression-logistique">

<div class="fluid-row" id="regression-logistique_header">


<h1 class="title">R√©gression logistique</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#regression-logistique_preparation-des-donnees">Pr√©paration des donn√©es</a></li>
<li><a href="#regression-logistique_regression-logistique-binaire">R√©gression logistique binaire</a></li>
<li><a href="#regression-logistique_selection-de-modeles">S√©lection de mod√®les</a></li>
<li><a href="#regression-logistique_regression-logistique-multinomiale">R√©gression logistique multinomiale</a></li>
</ul>
</div>

<div class="note">
<p>La version originale de ce chapitre a √©t√© √©crite par Joseph Larmarange dans le cadre du support de cours <a href="https://github.com/larmarange/intro-r/tree/CoursM2">Introduction √† l‚Äôanalyse d‚Äôenqu√™tes avec R</a>.</p>
</div>
<p>La <dfn>r√©gression logistique</dfn><dfn data-index="logistique, r√©gression"/> est fr√©quemment utilis√©e en sciences sociales car elle permet d‚Äôeffectuer un raisonnement dit <em>toutes choses √©tant √©gales par ailleurs</em>. Plus pr√©cis√©ment, la r√©gression logistique a pour but d‚Äôisoler les effets de chaque variable, c‚Äôest-√†-dire d‚Äôidentifier les effets r√©siduels d‚Äôune <dfn>variable explicative</dfn><dfn data-index="explicative, variable"/> sur une <dfn>variable d‚Äôint√©r√™t</dfn>, une fois pris en compte les autres variables explicatives introduites dans le mod√®le. La r√©gression logistique est ainsi pris√©e en √©pid√©miologie pour identifier les facteurs associ√©s √† telle ou telle pathologie.</p>
<p>La <dfn>r√©gression logistique ordinaire</dfn><dfn data-index="ordinaire, r√©gression logistique"/> ou <dfn>r√©gression logistique binaire</dfn><dfn data-index="binaire, r√©gression logistique"/> vise √† expliquer une variable d‚Äôint√©r√™t binaire (c‚Äôest-√†-dire de type ¬´¬†oui¬†/¬†non¬†¬ª ou ¬´¬†vrai¬†/¬†faux¬†¬ª). Les variables explicatives qui seront introduites dans le mod√®le peuvent √™tre <dfn data-index="variable quantitative">quantitatives</dfn><dfn data-index="quantitative, variable"/> ou <dfn data-index="variable qualitative">qualitatives</dfn><dfn data-index="qualitative, variable"/>.</p>
<p>La <dfn>r√©gression logistique multinomiale</dfn><dfn data-index="multinomiale, r√©gression logistique"/> est une extension de la r√©gression logistique aux variables qualitatives √† trois modalit√©s ou plus.</p>
<div id="regression-logistique_preparation-des-donnees" class="section level2">
<h2>Pr√©paration des donn√©es</h2>
<p>Dans ce chapite, nous allons encore une fois utiliser les donn√©es de l‚Äôenqu√™te <em>Histoire de vie</em>, fournies avec l‚Äôextension <code class="pkg">questionr</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">data</span>(hdv2003)
d &lt;-<span class="st"> </span>hdv2003</code></pre></div>
<p>√Ä titre d‚Äôexemple, nous allons √©tudier l‚Äôeffet de l‚Äô√¢ge, du sexe, du niveau d‚Äô√©tude, de la pratique religieuse et du nombre moyen d‚Äôheures pass√©es √† regarder la t√©l√©vision par jour.</p>
<p>En premier lieu, il importe de v√©rifier que notre variable d‚Äôint√©r√™t (ici <em>sport</em>) est correctement cod√©e. Une possibilit√© consiste √† cr√©er une <dfn>variable bool√©enne</dfn><dfn data-index="bool√©enne, variable"/> (vrai / faux) selon que l‚Äôindividu a pratiqu√© du sport ou non¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$sport2 &lt;-<span class="st"> </span><span class="ot">FALSE</span>
d$sport2[d$sport ==<span class="st"> "Oui"</span>] &lt;-<span class="st"> </span><span class="ot">TRUE</span></code></pre></div>
<p>Dans le cas pr√©sent, cette variable n‚Äôa pas de <dfn>valeur manquante</dfn><dfn data-index="manquante, valeur">/dfn&gt;. Mais, le cas √©ch√©ant, il importe de bien coder les valeurs manquantes en <code>NA</code>, les individus en question √©tant alors exclu de l‚Äôanalyse.</dfn></p>
<p>Il n‚Äôest pas forc√©ment n√©cessaire de transformer notre variable d‚Äôint√©r√™t en variable bool√©enne. En effet, <strong>R</strong> accepte sans probl√®me une variable de type <dfn>facteur</dfn>. Cependant, l‚Äôordre des valeurs d‚Äôun facteur a de l‚Äôimportance. En effet, <strong>R</strong> consid√®re toujours la premi√®re modalit√© comme √©tant la <dfn>modalit√© de r√©f√©rence</dfn><dfn data-index="r√©f√©rence, modalit√©"/>. Dans le cas de la variable d‚Äôint√©r√™t, la modalit√© de r√©f√©rence correspond au fait de ne pas remplir le crit√®re √©tudi√©, dans notre exemple au fait de ne pas avoir eu d‚Äôactivit√© sportive au cours des douze derniers mois.</p>
<p>Pour conna√Ætre l‚Äôordre des modalit√©s d‚Äôune variable de type facteur, on peut utiliser la fonction <code data-pkg="base">levels</code> ou bien encore tout simplement la fonction <code data-pkg="questionr">freq</code> de l‚Äôextension <code class="pkg">questionr</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">levels</span>(d$sport)</code></pre></div>
<pre><code>[1] "Non" "Oui"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">freq</span>(d$sport)</code></pre></div>
<pre><code>       n    % val%
Non 1277 63.8 63.8
Oui  723 36.1 36.1
NA     0  0.0   NA</code></pre>
<p>Dans notre exemple, la modalit√© ¬´¬†Non¬†¬ª est d√©j√† la premi√®re modalit√©. Il n‚Äôy a donc pas besoin de modifier notre variable. Si ce n‚Äôest pas le cas, il faudra modifier la modalit√© de r√©f√©rence avec la fonction <code data-pkg="stats">relevel</code> comme nous allons le voir un peu plus loin.</p>
<div class="important">
<p>Il est possible d‚Äôindiquer un facteur √† plus de deux modalit√©s. Dans une telle situation, <strong>R</strong> consid√©rera que tous les modalit√©s, sauf la modalit√© de r√©f√©rence, est une r√©alisation de la variable d‚Äôint√©r√™t. Cela serait correct, par exemple, si notre variable <em>sport</em> √©tait cod√©e ainsi¬†: ¬´¬†Non¬†¬ª, ¬´¬†Oui, toutes les semaines¬†¬ª, ¬´¬†Oui, au moins une fois par mois¬†¬ª, ¬´¬†Oui, moins d‚Äôune fois par mois¬†¬ª. Cependant, afin d‚Äô√©viter tout risque d‚Äôerreur ou de mauvaise interpr√©tation, il est vivement conseill√© de recoder au pr√©alable sa variable d‚Äôint√©r√™t en un facteur √† deux modalit√©s.</p>
</div>
<p>La notion de modalit√© de r√©f√©rence s‚Äôapplique √©galement aux variables explicatives qualitatives. En effet, dans un mod√®le, tous les coefficients sont calcul√©s par rapport √† la modalit√© de r√©f√©rence. Il importe de choisir une modalit√© de r√©f√©rence qui fasse sens afin de faciliter l‚Äôinterpr√©tation. Par ailleurs, ce choix peut √©galement d√©pendre de la mani√®re dont on souhaite pr√©senter les r√©sultats. De mani√®re g√©n√©rale on √©vitera de choisir comme r√©f√©rence une modalit√© peu repr√©sent√©e dans l‚Äô√©chantillon ou bien une modalit√© correspondant √† une situation atypique.</p>
<p>Prenons l‚Äôexemple de la variable <em>sexe</em>. Souhaite-t-on connaitre l‚Äôeffet d‚Äô√™tre une femme par rapport au fait d‚Äô√™tre un homme ou bien l‚Äôeffet d‚Äô√™tre un homme par rapport au fait d‚Äô√™tre une femme¬†? Si l‚Äôon opte pour le second, alors notre modalit√© de r√©f√©rence sera le sexe f√©minin. Comme est cod√©e cette variable¬†?</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">freq</span>(d$sexe)</code></pre></div>
<pre><code>         n  % val%
Homme  899 45   45
Femme 1101 55   55
NA       0  0   NA</code></pre>
<p>La modalit√© ¬´¬†Femme¬†¬ª s‚Äôav√®re ne pas √™tre la premi√®re modalit√©. Nous devons appliquer la fonction <code data-pkg="stats">relevel</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$sexe &lt;-<span class="st"> </span><span class="kw">relevel</span>(d$sexe, <span class="st">"Femme"</span>)
<span class="kw">freq</span>(d$sexe)</code></pre></div>
<pre><code>         n  % val%
Femme 1101 55   55
Homme  899 45   45
NA       0  0   NA</code></pre>
<div class="note">
<p>Si l‚Äôon a import√© nos donn√©es depuis <strong>SPSS</strong> ou <strong>Stata</strong> avec l‚Äôextension <code class="pkg">haven</code>, les variables cod√©es num√©riquement et disposant d‚Äô√©tiquettes sont conserv√©es stock√©es sous forme de <dfn lang="en">labelled vector</dfn>, c‚Äôest-√†-dire d‚Äôun vecteur num√©rique ayant des attributs indiquant les √©tiquettes des modalit√©s. Il importera donc de convertir notre variable en facteur avant d‚Äôeffectuer notre analyse. La fonction <code data-pkg="haven" data-rdoc="labelled">as_factor</code> cr√©era automatiquement un facteur √† partir des √©tiquettes.</p>
<p>Une alternative consiste √† utiliser la fonction <code data-pkg="JLutils">lfactor</code> de l‚Äôextension <code class="pkg">JLutils</code> qui fonctionne √©galement si les donn√©es ont √©t√© import√©es avec <code data-pkg="foreign">read.spss</code> ou <code data-pkg="foreign">read.dta</code> de l‚Äôextension <code class="pkg">foreign</code> sans avoir converti les variables labelis√©es en facteurs.</p>
</div>
<p>Les variables <em>age</em> et <em>heures.tv</em> sont des variables quantitatives. Il importe de v√©rifier qu‚Äôelles sont bien enregistr√©es en tant que variables num√©riques. En effet, il arrive parfois que dans le fichier source les variables quantitatives soient renseign√©es sous forme de valeur textuelle et non sous forme num√©rique.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(d$age)</code></pre></div>
<pre><code> int [1:2000] 28 23 59 34 71 35 60 47 20 28 ...</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(d$heures.tv)</code></pre></div>
<pre><code> num [1:2000] 0 1 0 2 3 2 2.9 1 2 2 ...</code></pre>
<p>Nos deux variables sont bien renseign√©es sous forme num√©rique.</p>
<p>Cependant, l‚Äôeffet de l‚Äô√¢ge est rarement lin√©aire. Un exemple trivial est par exemple le fait d‚Äôoccuper un emploi qui sera moins fr√©quent aux jeunes √¢ges et aux √¢ges √©lev√©s. D√®s lors, on pourra transformer la variable <em>age</em> en groupe d‚Äô√¢ges avec la fonction <code data-pkg="base">cut</code> (voir le chapitre <a href="pem_manipulation.html#decouper_en_classes">Manipulation de donn√©es</a>)¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$grpage &lt;-<span class="st"> </span><span class="kw">cut</span>(d$age, <span class="kw">c</span>(<span class="dv">16</span>, <span class="dv">25</span>, <span class="dv">45</span>, <span class="dv">65</span>, <span class="dv">93</span>), <span class="dt">right =</span> <span class="ot">FALSE</span>, 
  <span class="dt">include.lowest =</span> <span class="ot">TRUE</span>)
<span class="kw">freq</span>(d$grpage)</code></pre></div>
<pre><code>          n    % val%
[16,25) 169  8.5  8.5
[25,45) 706 35.3 35.3
[45,65) 745 37.2 37.3
[65,93] 378 18.9 18.9
NA        2  0.1   NA</code></pre>
<p>Jetons maintenant un oeil √† la variable <em>nivetud</em>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">freq</span>(d$nivetud)</code></pre></div>
<pre><code>                                                                  n
N'a jamais fait d'etudes                                         39
A arrete ses etudes, avant la derniere annee d'etudes primaires  86
Derniere annee d'etudes primaires                               341
1er cycle                                                       204
2eme cycle                                                      183
Enseignement technique ou professionnel court                   463
Enseignement technique ou professionnel long                    131
Enseignement superieur y compris technique superieur            441
NA                                                              112
                                                                   %
N'a jamais fait d'etudes                                         2.0
A arrete ses etudes, avant la derniere annee d'etudes primaires  4.3
Derniere annee d'etudes primaires                               17.1
1er cycle                                                       10.2
2eme cycle                                                       9.2
Enseignement technique ou professionnel court                   23.2
Enseignement technique ou professionnel long                     6.6
Enseignement superieur y compris technique superieur            22.1
NA                                                               5.6
                                                                val%
N'a jamais fait d'etudes                                         2.1
A arrete ses etudes, avant la derniere annee d'etudes primaires  4.6
Derniere annee d'etudes primaires                               18.1
1er cycle                                                       10.8
2eme cycle                                                       9.7
Enseignement technique ou professionnel court                   24.5
Enseignement technique ou professionnel long                     6.9
Enseignement superieur y compris technique superieur            23.4
NA                                                                NA</code></pre>
<p>En premier lieu, cette variable est d√©taill√©e en pas moins de huit modalit√©s dont certaines sont peu repr√©sent√©es (seulement 39 individus soit 2¬†% n‚Äôont jamais fait d‚Äô√©tudes par exemple). Afin d‚Äôam√©liorier notre mod√®le logistique, il peut √™tre pertinent de regrouper certaines modalit√©s (voir le chapitre <a href="pem_manipulation.html#regrouper_modalites">Manipulation de donn√©es</a>)¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$etud &lt;-<span class="st"> </span>d$nivetud
<span class="kw">levels</span>(d$etud) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Primaire"</span>, <span class="st">"Primaire"</span>, <span class="st">"Primaire"</span>, 
  <span class="st">"Secondaire"</span>, <span class="st">"Secondaire"</span>, <span class="st">"Technique/Professionnel"</span>, 
  <span class="st">"Technique/Professionnel"</span>, <span class="st">"Sup√©rieur"</span>)
<span class="kw">freq</span>(d$etud)</code></pre></div>
<pre><code>                          n    % val%
Primaire                466 23.3 24.7
Secondaire              387 19.4 20.5
Technique/Professionnel 594 29.7 31.5
Sup√©rieur               441 22.1 23.4
NA                      112  5.6   NA</code></pre>
<p>Notre variable comporte √©galement 112 individus avec une valeur manquante. Si nous conservons cette valeur manquante, ces 112 individus seront, par d√©faut, exclus de l‚Äôanalyse. Ces valeurs manquantes n‚Äô√©tant pas n√©gligeable (5,6¬†%), nous pouvons √©galement faire le choix de consid√©rer ces valeurs manquantes comme une modalit√© suppl√©mentaire. Auquel cas, nous utiliserons la fonction <code data-pkg="base">add.NA</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">levels</span>(d$etud)</code></pre></div>
<pre><code>[1] "Primaire"               
[2] "Secondaire"             
[3] "Technique/Professionnel"
[4] "Sup√©rieur"              </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$etud &lt;-<span class="st"> </span><span class="kw">addNA</span>(d$etud)
<span class="kw">levels</span>(d$etud)</code></pre></div>
<pre><code>[1] "Primaire"               
[2] "Secondaire"             
[3] "Technique/Professionnel"
[4] "Sup√©rieur"              
[5] NA                       </code></pre>
</div>
<div id="regression-logistique_regression-logistique-binaire" class="section level2">
<h2>R√©gression logistique binaire</h2>
<p>La fonction <code data-pkg="stats">glm</code> (pour <dfn lang="en">generalized linear models</dfn> soit <dfn>mod√®le lin√©aire g√©n√©ralis√©</dfn> en fran√ßais) permet de calculer une grande vari√©t√© de mod√®les statistiques. La r√©gression logistique ordinaire correspond au mod√®le <em>logit</em> de la famille des mod√®les binomiaux, ce que l‚Äôon indique √† <code data-pkg="stats">glm</code> avec l‚Äôargument <code>family=binomial(logit)</code>.</p>
<p>Le mod√®le proprement dit sera renseign√© sous la forme d‚Äôune <dfn>formule</dfn> (que nous avons d√©j√† rencontr√©e dans le chapitre sur la <a href="#statistique-bivariee">statistique bivari√©e</a> et pr√©sent√©e plus en d√©tails dans un <a href="#formules">chapitre d√©di√©</a>). On indiquera d‚Äôabord la variable d‚Äôint√©r√™t, suivie du signe <code>~</code> (que l‚Äôon obtient en appuyant sur les touches <kbd>Alt Gr</kbd> et <kbd>3</kbd> sur un clavier de type PC) puis de la liste des variables explicatives s√©par√©es par un signe <code>+</code>. Enfin, l‚Äôargument <code>data</code> permettra d‚Äôindiquer notre tableau de donn√©es.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">reg &lt;-<span class="st"> </span><span class="kw">glm</span>(sport ~<span class="st"> </span>sexe +<span class="st"> </span>grpage +<span class="st"> </span>etud +<span class="st"> </span>relig +<span class="st"> </span>heures.tv, 
  <span class="dt">data =</span> d, <span class="dt">family =</span> <span class="kw">binomial</span>(logit))
reg</code></pre></div>
<pre><code>
Call:  glm(formula = sport ~ sexe + grpage + etud + relig + heures.tv, 
    family = binomial(logit), data = d)

Coefficients:
                     (Intercept)  
                       -0.797364  
                       sexeHomme  
                        0.439002  
                   grpage[25,45)  
                       -0.420306  
                   grpage[45,65)  
                       -1.085463  
                   grpage[65,93]  
                       -1.379274  
                  etudSecondaire  
                        0.948312  
     etudTechnique/Professionnel  
                        1.047156  
                   etudSup√©rieur  
                        1.889621  
                          etudNA  
                        2.148545  
     religPratiquant occasionnel  
                       -0.020597  
 religAppartenance sans pratique  
                       -0.006176  
religNi croyance ni appartenance  
                       -0.214067  
                      religRejet  
                       -0.382744  
                religNSP ou NVPR  
                       -0.083361  
                       heures.tv  
                       -0.120724  

Degrees of Freedom: 1992 Total (i.e. Null);  1978 Residual
  (7 observations deleted due to missingness)
Null Deviance:      2607 
Residual Deviance: 2206     AIC: 2236</code></pre>
<div class="note">
<p>Il est possible de sp√©cifier des mod√®les plus complexes. Par exemple, <code>x:y</code> permet d‚Äôindiquer l‚Äôinteraction entre les variables <em>x</em> et <em>y</em>. <code>x * y</code> sera √©quivalent √† <code>x + y + x:y</code>. Pour aller plus loin, voir <a href="http://ww2.coastal.edu/kingw/statistics/R-tutorials/formulae.html" class="uri">http://ww2.coastal.edu/kingw/statistics/R-tutorials/formulae.html</a>.</p>
</div>
<p>Une pr√©sentation plus compl√®te des r√©sultats est obtenue avec la m√©thode <code data-pkg="stats" data-rdoc="summary.glm">summary</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(reg)</code></pre></div>
<pre><code>
Call:
glm(formula = sport ~ sexe + grpage + etud + relig + heures.tv, 
    family = binomial(logit), data = d)

Deviance Residuals: 
    Min       1Q   Median       3Q      Max  
-1.8783  -0.8864  -0.4814   1.0033   2.4202  

Coefficients:
                                  Estimate
(Intercept)                      -0.797364
sexeHomme                         0.439002
grpage[25,45)                    -0.420306
grpage[45,65)                    -1.085463
grpage[65,93]                    -1.379274
etudSecondaire                    0.948312
etudTechnique/Professionnel       1.047156
etudSup√©rieur                     1.889621
etudNA                            2.148545
religPratiquant occasionnel      -0.020597
religAppartenance sans pratique  -0.006176
religNi croyance ni appartenance -0.214067
religRejet                       -0.382744
religNSP ou NVPR                 -0.083361
heures.tv                        -0.120724
                                 Std. Error
(Intercept)                        0.323833
sexeHomme                          0.106063
grpage[25,45)                      0.228042
grpage[45,65)                      0.237704
grpage[65,93]                      0.273794
etudSecondaire                     0.197427
etudTechnique/Professionnel        0.189777
etudSup√©rieur                      0.195190
etudNA                             0.330198
religPratiquant occasionnel        0.189203
religAppartenance sans pratique    0.174709
religNi croyance ni appartenance   0.193096
religRejet                         0.285878
religNSP ou NVPR                   0.410968
heures.tv                          0.033589
                                 z value Pr(&gt;|z|)
(Intercept)                       -2.462 0.013806
sexeHomme                          4.139 3.49e-05
grpage[25,45)                     -1.843 0.065313
grpage[45,65)                     -4.566 4.96e-06
grpage[65,93]                     -5.038 4.71e-07
etudSecondaire                     4.803 1.56e-06
etudTechnique/Professionnel        5.518 3.43e-08
etudSup√©rieur                      9.681  &lt; 2e-16
etudNA                             6.507 7.67e-11
religPratiquant occasionnel       -0.109 0.913311
religAppartenance sans pratique   -0.035 0.971801
religNi croyance ni appartenance  -1.109 0.267600
religRejet                        -1.339 0.180624
religNSP ou NVPR                  -0.203 0.839260
heures.tv                         -3.594 0.000325
                                    
(Intercept)                      *  
sexeHomme                        ***
grpage[25,45)                    .  
grpage[45,65)                    ***
grpage[65,93]                    ***
etudSecondaire                   ***
etudTechnique/Professionnel      ***
etudSup√©rieur                    ***
etudNA                           ***
religPratiquant occasionnel         
religAppartenance sans pratique     
religNi croyance ni appartenance    
religRejet                          
religNSP ou NVPR                    
heures.tv                        ***
---
Signif. codes:  
0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 2607.4  on 1992  degrees of freedom
Residual deviance: 2205.9  on 1978  degrees of freedom
  (7 observations deleted due to missingness)
AIC: 2235.9

Number of Fisher Scoring iterations: 4</code></pre>
<p>Dans le cadre d‚Äôun mod√®le logistique, g√©n√©ralement on ne pr√©sente pas les <dfn data-index="coefficient, mod√®le">coefficients</dfn> du mod√®le mais leur valeur exponentielle, cette derni√®re correspondant en effet √† des <dfn data-index="odds ratio" lang="en">odds ratio</dfn>, √©galement appel√©s <dfn data-index="rapport des cotes">rapports des cotes</dfn>. L‚Äôodds ratio diff√®re du <dfn>risque relatif</dfn><dfn data-index="relatif, risque"/>. Cependent son interpr√©tation est similaire. Un <em>odds ratio</em> de 1 signifie l‚Äôabsence d‚Äôeffet. Un <em>odds ratio</em> largement sup√©rieur √† 1 correspond √† une augmentation du ph√©nom√®ne √©tudi√© et un <em>odds ratio</em> largement inf√©ieur √† 1 correspond √† une diminution du ph√©nom√®ne √©tudi√©<a href="#regression-logistique_fn1" class="footnoteRef" id="regression-logistique_fnref1"><sup>1</sup></a>.</p>
<p>La fonction <code data-pkg="stats">coef</code> permet d‚Äôobtenir les coefficients d‚Äôun mod√®le, <code data-pkg="stats">confint</code> leurs intervalles de confiance et <code data-pkg="base" data-rdoc="log">exp</code> de calculer l‚Äôexponentiel. Les <em>odds ratio</em> et leurs <dfn data-index="intervalle de confiance d'un odds ratio">intervalles de confiance</dfn><dfn data-index="odds ratio, intervalle de confiance"/> s‚Äôobtiennent ainsi¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">exp</span>(<span class="kw">coef</span>(reg))</code></pre></div>
<pre><code>                     (Intercept) 
                       0.4505151 
                       sexeHomme 
                       1.5511577 
                   grpage[25,45) 
                       0.6568456 
                   grpage[45,65) 
                       0.3377455 
                   grpage[65,93] 
                       0.2517614 
                  etudSecondaire 
                       2.5813476 
     etudTechnique/Professionnel 
                       2.8495358 
                   etudSup√©rieur 
                       6.6168632 
                          etudNA 
                       8.5723745 
     religPratiquant occasionnel 
                       0.9796133 
 religAppartenance sans pratique 
                       0.9938431 
religNi croyance ni appartenance 
                       0.8072940 
                      religRejet 
                       0.6819874 
                religNSP ou NVPR 
                       0.9200190 
                       heures.tv 
                       0.8862785 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">exp</span>(<span class="kw">confint</span>(reg))</code></pre></div>
<pre><code>Waiting for profiling to be done...</code></pre>
<pre><code>                                     2.5 %
(Intercept)                      0.2379725
sexeHomme                        1.2605519
grpage[25,45)                    0.4195082
grpage[45,65)                    0.2115297
grpage[65,93]                    0.1466915
etudSecondaire                   1.7613423
etudTechnique/Professionnel      1.9764492
etudSup√©rieur                    4.5427464
etudNA                           4.5265421
religPratiquant occasionnel      0.6767575
religAppartenance sans pratique  0.7067055
religNi croyance ni appartenance 0.5531366
religRejet                       0.3872078
religNSP ou NVPR                 0.3998878
heures.tv                        0.8291800
                                     97.5 %
(Intercept)                       0.8480538
sexeHomme                         1.9106855
grpage[25,45)                     1.0275786
grpage[45,65)                     0.5380619
grpage[65,93]                     0.4296919
etudSecondaire                    3.8240276
etudTechnique/Professionnel       4.1639745
etudSup√©rieur                     9.7745023
etudNA                           16.5563346
religPratiquant occasionnel       1.4217179
religAppartenance sans pratique   1.4026763
religNi croyance ni appartenance  1.1798422
religRejet                        1.1898605
religNSP ou NVPR                  2.0221544
heures.tv                         0.9459484</code></pre>
<p>On pourra faciliter la lecture en combinant les deux¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">exp</span>(<span class="kw">cbind</span>(<span class="kw">coef</span>(reg), <span class="kw">confint</span>(reg)))</code></pre></div>
<pre><code>Waiting for profiling to be done...</code></pre>
<pre><code>                                          
(Intercept)                      0.4505151
sexeHomme                        1.5511577
grpage[25,45)                    0.6568456
grpage[45,65)                    0.3377455
grpage[65,93]                    0.2517614
etudSecondaire                   2.5813476
etudTechnique/Professionnel      2.8495358
etudSup√©rieur                    6.6168632
etudNA                           8.5723745
religPratiquant occasionnel      0.9796133
religAppartenance sans pratique  0.9938431
religNi croyance ni appartenance 0.8072940
religRejet                       0.6819874
religNSP ou NVPR                 0.9200190
heures.tv                        0.8862785
                                     2.5 %
(Intercept)                      0.2379725
sexeHomme                        1.2605519
grpage[25,45)                    0.4195082
grpage[45,65)                    0.2115297
grpage[65,93]                    0.1466915
etudSecondaire                   1.7613423
etudTechnique/Professionnel      1.9764492
etudSup√©rieur                    4.5427464
etudNA                           4.5265421
religPratiquant occasionnel      0.6767575
religAppartenance sans pratique  0.7067055
religNi croyance ni appartenance 0.5531366
religRejet                       0.3872078
religNSP ou NVPR                 0.3998878
heures.tv                        0.8291800
                                     97.5 %
(Intercept)                       0.8480538
sexeHomme                         1.9106855
grpage[25,45)                     1.0275786
grpage[45,65)                     0.5380619
grpage[65,93]                     0.4296919
etudSecondaire                    3.8240276
etudTechnique/Professionnel       4.1639745
etudSup√©rieur                     9.7745023
etudNA                           16.5563346
religPratiquant occasionnel       1.4217179
religAppartenance sans pratique   1.4026763
religNi croyance ni appartenance  1.1798422
religRejet                        1.1898605
religNSP ou NVPR                  2.0221544
heures.tv                         0.9459484</code></pre>
<p>Pour savoir si un <em>odds ratio</em> diff√®re significativement de 1 (ce qui est identique au fait que le coefficient soit diff√©rent de 0), on pourra se r√©f√©rer √† la colonne <em>Pr(&gt;|z|)</em> obtenue avec <code data-pkg="stats" data-rdoc="summary.glm">summary</code>.</p>
<p>Si vous disposez de l‚Äôextension <code class="pkg">questionr</code>, la fonction <code data-pacakge="questionr">odds.ratio</code> permet de calculer directement les <em>odds ratio</em>, leur intervalles de confiance et les <em>p-value</em>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">odds.ratio</span>(reg)</code></pre></div>
<pre><code>Waiting for profiling to be done...</code></pre>
<pre><code>                                    OR 2.5 %
(Intercept)                      0.451 0.238
sexeHomme                        1.551 1.261
grpage[25,45)                    0.657 0.420
grpage[45,65)                    0.338 0.212
grpage[65,93]                    0.252 0.147
etudSecondaire                   2.581 1.761
etudTechnique/Professionnel      2.850 1.976
etudSup√©rieur                    6.617 4.543
etudNA                           8.572 4.527
religPratiquant occasionnel      0.980 0.677
religAppartenance sans pratique  0.994 0.707
religNi croyance ni appartenance 0.807 0.553
religRejet                       0.682 0.387
religNSP ou NVPR                 0.920 0.400
heures.tv                        0.886 0.829
                                 97.5 %         p
(Intercept)                       0.848 0.0138062
sexeHomme                         1.911 3.488e-05
grpage[25,45)                     1.028 0.0653132
grpage[45,65)                     0.538 4.961e-06
grpage[65,93]                     0.430 4.713e-07
etudSecondaire                    3.824 1.560e-06
etudTechnique/Professionnel       4.164 3.432e-08
etudSup√©rieur                     9.775 &lt; 2.2e-16
etudNA                           16.556 7.674e-11
religPratiquant occasionnel       1.422 0.9133105
religAppartenance sans pratique   1.403 0.9718010
religNi croyance ni appartenance  1.180 0.2675998
religRejet                        1.190 0.1806239
religNSP ou NVPR                  2.022 0.8392596
heures.tv                         0.946 0.0003255
                                    
(Intercept)                      *  
sexeHomme                        ***
grpage[25,45)                    .  
grpage[45,65)                    ***
grpage[65,93]                    ***
etudSecondaire                   ***
etudTechnique/Professionnel      ***
etudSup√©rieur                    ***
etudNA                           ***
religPratiquant occasionnel         
religAppartenance sans pratique     
religNi croyance ni appartenance    
religRejet                          
religNSP ou NVPR                    
heures.tv                        ***
---
Signif. codes:  
0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
<p>L‚Äôextension <code class="pkg">effects</code> propose une repr√©sentation graphique r√©sumant les effets de chaque variable du mod√®le. Pour cela, il suffit d‚Äôappliquer la m√©thode <code data-pkg="effects" data-rdoc="summary.effect">plot</code> au r√©sultat de la fonction <code data-pkg="effects" data-rdoc="effect">allEffects</code>. Nous obtenons alors la <a href="#regression-logistique_reglog_alleffects">figure ci-dessous</a>.</p>
<figure id="regression-logistique_reglog_alleffects">
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(effects)
<span class="kw">plot</span>(<span class="kw">allEffects</span>(reg))</code></pre></div>
<img src="graphs/regression-logistique/plot_allEffects-1.png" title="" alt="" width="1050"/>
<figcaption>
Repr√©sentation graphique de l‚Äôeffet de chaque variable du mod√®le logistique
</figcaption>
</figure>
<p>Une mani√®re de tester la qualit√© d‚Äôun mod√®le est le calcul d‚Äôune <dfn>matrice de confusion</dfn><dfn data-index="confusion, matrice"/>, c‚Äôest-√†-dire le tableau crois√© des valeurs observ√©es et celles des valeurs pr√©dites en appliquant le mod√®le aux donn√©es d‚Äôorigine.</p>
<p>La m√©thode <code data-pkg="stats" data-rdoc="predict.glm">predict</code> avec l‚Äôargument <code>type="response"</code> permet d‚Äôappliquer notre mod√®le logistique √† un tableau de donn√©es et renvoie pour chaque individu la probabilit√© qu‚Äôil ait v√©cu le ph√©nom√®ne √©tudi√©.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sport.pred &lt;-<span class="st"> </span><span class="kw">predict</span>(reg, <span class="dt">type =</span> <span class="st">"response"</span>, <span class="dt">newdata =</span> d)
<span class="kw">head</span>(sport.pred)</code></pre></div>
<pre><code>         1          2          3          4 
0.61251214 0.73426878 0.16004519 0.70335574 
         5          6 
0.07318189 0.34841147 </code></pre>
<p>Or notre variable √©tudi√©e est de type binaire. Nous devons donc transformer nos probabilit√©s pr√©dites en une variable du type ¬´¬†oui / non¬†¬ª. Usuellement, les probabilit√©s pr√©dites seront r√©unies en deux groupes selon qu‚Äôelles soient sup√©rieures ou inf√©rieures √† la moiti√©. La matrice de confusion est alors √©gale √†¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(sport.pred &gt;<span class="st"> </span><span class="fl">0.5</span>, d$sport)</code></pre></div>
<pre><code>       
         Non  Oui
  FALSE 1074  384
  TRUE   199  336</code></pre>
<p>Nous avons donc 583 (384+199) pr√©dictions incorrectes sur un total de 1993, soit un taux de mauvais classement de 29,3¬†%.</p>
</div>
<div id="regression-logistique_selection-de-modeles" class="section level2">
<h2>S√©lection de mod√®les</h2>
<p>Il est toujours tentant lorsque l‚Äôon recherche les facteurs associ√©s √† un ph√©nom√®ne d‚Äôinclure un nombre important de variables explicatives potentielles dans un mmod√®le logistique. Cependant, un tel mod√®le n‚Äôest pas forc√©ment le plus efficace et certaines variables n‚Äôauront probablement pas d‚Äôeffet significatif sur la variable d‚Äôint√©r√™t.</p>
<p>La technique de <dfn>s√©lection descendante pas √† pas</dfn><dfn data-index="pas √† pas, s√©lection descendante"/> est une approche visant √† am√©liorer son mod√®le explicatif<a href="#regression-logistique_fn2" class="footnoteRef" id="regression-logistique_fnref2"><sup>2</sup></a>. On r√©alise un premier mod√®le avec toutes les variables sp√©cifi√©es, puis on regarde s‚Äôil est possible d‚Äôam√©liorer le mod√®le en supprimant une des variables du mod√®le. Si plusieurs variables permettent d‚Äôam√©liorer le mod√®le, on supprimera la variable dont la suppression am√©liorera le plus le mod√®le. Puis on recommence le m√™me proc√©d√© pour voir si la suppression d‚Äôune seconde variable peut encore am√©liorer le mod√®le et ainsi de suite. Lorsque le mod√®le ne peut plus √™tre am√©liorer par la suppresion d‚Äôune variable, on s‚Äôarr√™te.</p>
<p>Il faut √©galement d√©finir un crit√®re pour d√©terminer la qualit√© d‚Äôun mod√®le. L‚Äôun des plus utilis√©s est le <dfn lang="en">Akaike Information Criterion</dfn> ou <dfn>AIC</dfn>. Plus l‚ÄôAIC sera faible, meilleure sera le mod√®le.</p>
<p>La fonction <code data-pkg="stats">step</code> permet justement de s√©lectionner le meilleur mod√®le par une proc√©dure pas √† pas descendante bas√©e sur la minimisation de l‚ÄôAIC. La fonction affiche √† l‚Äô√©cran les diff√©rentes √©tapes de la s√©lection et renvoie le mod√®le final.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">reg2 &lt;-<span class="st"> </span><span class="kw">step</span>(reg)</code></pre></div>
<pre><code>Start:  AIC=2235.94
sport ~ sexe + grpage + etud + relig + heures.tv

            Df Deviance    AIC
- relig      5   2210.2 2230.2
&lt;none&gt;           2205.9 2235.9
- heures.tv  1   2219.3 2247.3
- sexe       1   2223.2 2251.2
- grpage     3   2258.7 2282.7
- etud       4   2329.6 2351.6

Step:  AIC=2230.15
sport ~ sexe + grpage + etud + heures.tv

            Df Deviance    AIC
&lt;none&gt;           2210.2 2230.2
- heures.tv  1   2223.7 2241.7
- sexe       1   2226.1 2244.1
- grpage     3   2260.3 2274.3
- etud       4   2333.8 2345.8</code></pre>
<p>Le mod√®le initial a un AIC de 2235,9. √Ä la premi√®re √©tape, il apparait que la suppression de la variable religion permet diminuer l‚ÄôAIC √† 2230,2. Lors de la seconde √©tape, toute suppression d‚Äôune autre variable ferait augmenter l‚ÄôAIC. La proc√©dure s‚Äôarr√™te donc.</p>
</div>
<div id="regression-logistique_regression-logistique-multinomiale" class="section level2">
<h2>R√©gression logistique multinomiale</h2>
<p>La <dfn>r√©gression logistique multinomiale</dfn> est une extension de la r√©gression logistique aux variables qualitatives √† trois modalit√©s ou plus. Dans ce cas de figure, chaque modalit√© de la variable d‚Äôint√©r√™t sera compar√©e √† la modalit√© de r√©ference. Les <em>odds ratio</em> seront donc exprim√©s par rapport √† cette derni√®re.</p>
<p>Nous allons prendre pour exemple la variable <em>trav.satisf</em>, √† savoir la satisfaction ou l‚Äôinsatisfaction au travail.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">freq</span>(d$trav.satisf)</code></pre></div>
<pre><code>                 n    % val%
Satisfaction   480 24.0 45.8
Insatisfaction 117  5.9 11.2
Equilibre      451 22.6 43.0
NA             952 47.6   NA</code></pre>
<p>Nous allons choisir comme modalit√© de r√©f√©rence la position interm√©diaire, √† savoir l‚Äô¬´¬†√©quilibre¬†¬ª.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$trav.satisf &lt;-<span class="st"> </span><span class="kw">relevel</span>(d$trav.satisf, <span class="st">"Equilibre"</span>)</code></pre></div>
<p>Enfin, nous allons aussi en profiter pour raccourcir les √©tiquettes de la variable <em>trav.imp</em>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">levels</span>(d$trav.imp) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Le plus"</span>, <span class="st">"Aussi"</span>, <span class="st">"Moins"</span>, 
  <span class="st">"Peu"</span>)</code></pre></div>
<p>Pour calculer un mod√®le logistique multinomial, nous allons utiliser la fonction <code data-pkg="nnet">multinom</code> de l‚Äôextension <code class="pkg">nnet</code><a href="#regression-logistique_fn3" class="footnoteRef" id="regression-logistique_fnref3"><sup>3</sup></a>. La syntaxe de <code data-pkg="nnet">multinom</code> est similaire √† celle de <code data-pkg="stats">glm</code>, le param√®tre <code>family</code> en moins.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(nnet)
regm &lt;-<span class="st"> </span><span class="kw">multinom</span>(trav.satisf ~<span class="st"> </span>sexe +<span class="st"> </span>etud +<span class="st"> </span>grpage +<span class="st"> </span>
<span class="st">  </span>trav.imp, <span class="dt">data =</span> d)</code></pre></div>
<pre><code># weights:  39 (24 variable)
initial  value 1151.345679 
iter  10 value 977.348901
iter  20 value 969.849189
iter  30 value 969.522965
final  value 969.521855 
converged</code></pre>
<p>Comme pour la r√©gression logistique, il est possible de r√©aliser une s√©lection pas √† pas descendante¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">regm2 &lt;-<span class="st"> </span><span class="kw">step</span>(regm)</code></pre></div>
<pre><code>Start:  AIC=1987.04
trav.satisf ~ sexe + etud + grpage + trav.imp

trying - sexe 
# weights:  36 (22 variable)
initial  value 1151.345679 
iter  10 value 978.538886
iter  20 value 970.453555
iter  30 value 970.294459
final  value 970.293988 
converged
trying - etud 
# weights:  27 (16 variable)
initial  value 1151.345679 
iter  10 value 987.907714
iter  20 value 981.785467
iter  30 value 981.762800
final  value 981.762781 
converged
trying - grpage 
# weights:  30 (18 variable)
initial  value 1151.345679 
iter  10 value 979.485430
iter  20 value 973.175923
final  value 973.172389 
converged
trying - trav.imp 
# weights:  30 (18 variable)
initial  value 1151.345679 
iter  10 value 998.803976
iter  20 value 994.417973
iter  30 value 994.378914
final  value 994.378869 
converged
           Df      AIC
- grpage   18 1982.345
- sexe     22 1984.588
&lt;none&gt;     24 1987.044
- etud     16 1995.526
- trav.imp 18 2024.758
# weights:  30 (18 variable)
initial  value 1151.345679 
iter  10 value 979.485430
iter  20 value 973.175923
final  value 973.172389 
converged

Step:  AIC=1982.34
trav.satisf ~ sexe + etud + trav.imp

trying - sexe 
# weights:  27 (16 variable)
initial  value 1151.345679 
iter  10 value 976.669670
iter  20 value 973.928385
iter  20 value 973.928377
iter  20 value 973.928377
final  value 973.928377 
converged
trying - etud 
# weights:  18 (10 variable)
initial  value 1151.345679 
iter  10 value 988.413720
final  value 985.085797 
converged
trying - trav.imp 
# weights:  21 (12 variable)
initial  value 1151.345679 
iter  10 value 1001.517287
final  value 998.204280 
converged
           Df      AIC
- sexe     16 1979.857
&lt;none&gt;     18 1982.345
- etud     10 1990.172
- trav.imp 12 2020.409
# weights:  27 (16 variable)
initial  value 1151.345679 
iter  10 value 976.669670
iter  20 value 973.928385
iter  20 value 973.928377
iter  20 value 973.928377
final  value 973.928377 
converged

Step:  AIC=1979.86
trav.satisf ~ etud + trav.imp

trying - etud 
# weights:  15 (8 variable)
initial  value 1151.345679 
iter  10 value 986.124104
final  value 986.034023 
converged
trying - trav.imp 
# weights:  18 (10 variable)
initial  value 1151.345679 
iter  10 value 1000.225356
final  value 998.395273 
converged
           Df      AIC
&lt;none&gt;     16 1979.857
- etud      8 1988.068
- trav.imp 10 2016.791</code></pre>
<p>La plupart des fonctions vues pr√©c√©demment fonctionnent¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(regm2)</code></pre></div>
<pre><code>Call:
multinom(formula = trav.satisf ~ etud + trav.imp, data = d)

Coefficients:
               (Intercept) etudSecondaire
Satisfaction    -0.1110996     0.04916210
Insatisfaction  -1.1213760    -0.09737523
               etudTechnique/Professionnel
Satisfaction                    0.07793241
Insatisfaction                  0.08392603
               etudSup√©rieur      etudNA
Satisfaction      0.69950061 -0.53841577
Insatisfaction    0.07755307 -0.04364055
               trav.impAussi trav.impMoins
Satisfaction       0.2578973    -0.1756206
Insatisfaction    -0.2279774    -0.5330349
               trav.impPeu
Satisfaction    -0.5995051
Insatisfaction   1.3401509

Std. Errors:
               (Intercept) etudSecondaire
Satisfaction     0.4520902      0.2635573
Insatisfaction   0.6516992      0.3999875
               etudTechnique/Professionnel
Satisfaction                     0.2408483
Insatisfaction                   0.3579684
               etudSup√©rieur    etudNA
Satisfaction       0.2472571 0.5910993
Insatisfaction     0.3831110 0.8407592
               trav.impAussi trav.impMoins
Satisfaction       0.4260623     0.4115818
Insatisfaction     0.6213781     0.5941721
               trav.impPeu
Satisfaction     0.5580115
Insatisfaction   0.6587383

Residual Deviance: 1947.857 
AIC: 1979.857 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">odds.ratio</span>(regm2)</code></pre></div>
<pre><code>                                              OR
Satisfaction/(Intercept)                   0.895
Satisfaction/etudSecondaire                1.050
Satisfaction/etudTechnique/Professionnel   1.081
Satisfaction/etudSup√©rieur                 2.013
Satisfaction/etudNA                        0.584
Satisfaction/trav.impAussi                 1.294
Satisfaction/trav.impMoins                 0.839
Satisfaction/trav.impPeu                   0.549
Insatisfaction/(Intercept)                 0.326
Insatisfaction/etudSecondaire              0.907
Insatisfaction/etudTechnique/Professionnel 1.088
Insatisfaction/etudSup√©rieur               1.081
Insatisfaction/etudNA                      0.957
Insatisfaction/trav.impAussi               0.796
Insatisfaction/trav.impMoins               0.587
Insatisfaction/trav.impPeu                 3.820
                                           2.5 %
Satisfaction/(Intercept)                   0.369
Satisfaction/etudSecondaire                0.627
Satisfaction/etudTechnique/Professionnel   0.674
Satisfaction/etudSup√©rieur                 1.240
Satisfaction/etudNA                        0.183
Satisfaction/trav.impAussi                 0.561
Satisfaction/trav.impMoins                 0.374
Satisfaction/trav.impPeu                   0.184
Insatisfaction/(Intercept)                 0.091
Insatisfaction/etudSecondaire              0.414
Insatisfaction/etudTechnique/Professionnel 0.539
Insatisfaction/etudSup√©rieur               0.510
Insatisfaction/etudNA                      0.184
Insatisfaction/trav.impAussi               0.236
Insatisfaction/trav.impMoins               0.183
Insatisfaction/trav.impPeu                 1.050
                                           97.5 %
Satisfaction/(Intercept)                    2.171
Satisfaction/etudSecondaire                 1.761
Satisfaction/etudTechnique/Professionnel    1.733
Satisfaction/etudSup√©rieur                  3.268
Satisfaction/etudNA                         1.859
Satisfaction/trav.impAussi                  2.983
Satisfaction/trav.impMoins                  1.880
Satisfaction/trav.impPeu                    1.639
Insatisfaction/(Intercept)                  1.169
Insatisfaction/etudSecondaire               1.987
Insatisfaction/etudTechnique/Professionnel  2.194
Insatisfaction/etudSup√©rieur                2.290
Insatisfaction/etudNA                       4.974
Insatisfaction/trav.impAussi                2.691
Insatisfaction/trav.impMoins                1.880
Insatisfaction/trav.impPeu                 13.891
                                                  p
Satisfaction/(Intercept)                   0.805878
Satisfaction/etudSecondaire                0.852027
Satisfaction/etudTechnique/Professionnel   0.746260
Satisfaction/etudSup√©rieur                 0.004669
Satisfaction/etudNA                        0.362363
Satisfaction/trav.impAussi                 0.544977
Satisfaction/trav.impMoins                 0.669600
Satisfaction/trav.impPeu                   0.282661
Insatisfaction/(Intercept)                 0.085306
Insatisfaction/etudSecondaire              0.807660
Insatisfaction/etudTechnique/Professionnel 0.814635
Insatisfaction/etudSup√©rieur               0.839581
Insatisfaction/etudNA                      0.958603
Insatisfaction/trav.impAussi               0.713701
Insatisfaction/trav.impMoins               0.369663
Insatisfaction/trav.impPeu                 0.041909
                                             
Satisfaction/(Intercept)                     
Satisfaction/etudSecondaire                  
Satisfaction/etudTechnique/Professionnel     
Satisfaction/etudSup√©rieur                 **
Satisfaction/etudNA                          
Satisfaction/trav.impAussi                   
Satisfaction/trav.impMoins                   
Satisfaction/trav.impPeu                     
Insatisfaction/(Intercept)                 . 
Insatisfaction/etudSecondaire                
Insatisfaction/etudTechnique/Professionnel   
Insatisfaction/etudSup√©rieur                 
Insatisfaction/etudNA                        
Insatisfaction/trav.impAussi                 
Insatisfaction/trav.impMoins                 
Insatisfaction/trav.impPeu                 * 
---
Signif. codes:  
0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
<p>De m√™me, il est possible de calculer la matrice de confusion¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(<span class="kw">predict</span>(regm2, <span class="dt">newdata =</span> d), d$trav.satisf)</code></pre></div>
<pre><code>                
                 Equilibre Satisfaction
  Equilibre            262          211
  Satisfaction         171          258
  Insatisfaction        18           11
                
                 Insatisfaction
  Equilibre                  49
  Satisfaction               45
  Insatisfaction             23</code></pre>
</div>
<div class="footnotes">
<hr/>
<ol>
<li id="regression-logistique_fn1"><p>Pour plus de d√©tails, voir <a href="http://www.spc.univ-lyon1.fr/polycop/odds%20ratio.htm">http://www.spc.univ-lyon1.fr/polycop/odds%20ratio.htm</a>.<a href="#regression-logistique_fnref1">‚Ü©</a></p></li>
<li id="regression-logistique_fn2"><p>Il existe √©galement des m√©thodes de <em>s√©lection ascendante pas √† pas</em>, mais nous les aborderons pas ici.<a href="#regression-logistique_fnref2">‚Ü©</a></p></li>
<li id="regression-logistique_fn3"><p>Une alternative est d‚Äôavoir recours √† l‚Äôextension <code class="pkg">mlogit</code> que nous n‚Äôaborderons pas ici. Voir <a href="http://www.ats.ucla.edu/stat/r/dae/mlogit.htm" class="uri">http://www.ats.ucla.edu/stat/r/dae/mlogit.htm</a> (en anglais) pour plus de d√©tails.<a href="#regression-logistique_fnref3">‚Ü©</a></p></li>
</ol>
</div>

</article>
<article id="analyse-en-composantes-principales">

<div class="fluid-row" id="analyse-en-composantes-principales_header">


<h1 class="title">Analyse en composantes principales (ACP)</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>

</article>
<article id="analyse-des-correspondances-multiples">

<div class="fluid-row" id="analyse-des-correspondances-multiples_header">


<h1 class="title">Analyse des correspondances multiples (ACM)</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#analyse-des-correspondances-multiples_principe-general">Principe g√©n√©ral</a></li>
<li><a href="#analyse-des-correspondances-multiples_acm-avec-ade4">ACM avec ade4</a></li>
<li><a href="#analyse-des-correspondances-multiples_factominer">ACM avec FactoMineR</a></li>
</ul>
</div>

<div class="note">
<p>La version originale de ce chapitre a √©t√© √©crite par Joseph Larmarange dans le cadre du support de cours <a href="https://github.com/larmarange/intro-r/tree/CoursM2">Introduction √† l‚Äôanalyse d‚Äôenqu√™tes avec R</a>.</p>
</div>
<p>Il existe plusieurs techniques d‚Äô<dfn>analyse factorielle</dfn><dfn data-index="factorielle, analyse"/> dont les plus courantes sont l‚Äô<dfn>analyse en composante principale</dfn> (<dfn>ACP</dfn>) portant sur des <dfn data-index="variable quantitative">variables quantitatives</dfn><dfn data-index="quantitative, variable"/>, l‚Äô<dfn>analyse factorielle des correspondances</dfn><dfn data-index="correspondances, analyse factorielle"/> (<dfn>AFC</dfn>) portant sur deux <dfn data-index="variable qualitative">variables qualitatives</dfn><dfn data-index="qualitative, variable"/> et l‚Äô<dfn>analyse des correspondances multiples</dfn> (<dfn>ACM</dfn>) portant sur plusieurs variables qualitatives (il s‚Äôagit d‚Äôune extension de l‚ÄôAFC). Pour combiner des variables √† la fois quantitatives et qualitatives, on pourra avoir recours √† l‚Äô<dfn>analyse mixte de Hill et Smith</dfn><dfn data-index="Hill et Smith, analyse mixte"/>.</p>
<p>Bien que ces techniques soient disponibles dans les extensions standards de <strong>R</strong>, il est souvent pr√©f√©rable d‚Äôavoir recours √† deux autres extensions plus compl√®tes, <code class="pkg">ade4</code> et <code class="pkg">FactoMineR</code>, chacune ayant ses avantages et des possibilit√©s diff√©rentes. Voici les fonctions les plus fr√©quentes¬†:</p>
<table style="width:133%;">
<colgroup>
<col width="13%"/>
<col width="16%"/>
<col width="27%"/>
<col width="59%"/>
<col width="15%"/>
</colgroup>
<thead>
<tr class="header">
<th align="left">Analyse</th>
<th align="left">Variables</th>
<th align="center">Fonction standard</th>
<th align="center">Fonction <code class="pkg">ade4</code></th>
<th align="center">Fonctions <code class="pkg">FactoMineR</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">ACP</td>
<td align="left">plusieurs variables quantitatives</td>
<td align="center"><code data-pkg="stats">princomp</code></td>
<td align="center"><code data-pkg="ade4">dudi.pca</code></td>
<td align="center"><code data-pkg="FactoMineR">PCA</code></td>
</tr>
<tr class="even">
<td align="left">AFC</td>
<td align="left">deux variables qualitatives</td>
<td align="center"><code data-pkg="MASS">corresp</code></td>
<td align="center"><code data-pkg="ade4">dudi.coa</code></td>
<td align="center"><code data-pkg="FactoMineR">CA</code></td>
</tr>
<tr class="odd">
<td align="left">ACM</td>
<td align="left">plusieurs variables qualitatives</td>
<td align="center"><code data-pkg="MASS">mca</code></td>
<td align="center"><code data-pkg="ade4">dudi.acm</code></td>
<td align="center"><code data-pkg="FactoMineR">MCA</code></td>
</tr>
<tr class="even">
<td align="left">Analyse mixte de Hill et Smith</td>
<td align="left">plusieurs variables quantitatives et/ou qualitatives</td>
<td align="center">‚Äî</td>
<td align="center"><code data-pkg="ade4">dudi.mix</code></td>
<td align="center">‚Äî</td>
</tr>
</tbody>
</table>
<p>Dans la suite de ce chapitre, nous n‚Äôarboderons que l‚Äôanalyse des correspondances multiples (ACM).</p>
<div class="note">
<p>On trouvera √©galement de nombreux supports de cours en fran√ßais sur l‚Äôanalyse factorielle sur le site de Fran√ßois Gilles Carpentier¬†: <a href="http://geai.univ-brest.fr/~carpenti/" class="uri">http://geai.univ-brest.fr/~carpenti/</a>.</p>
</div>
<div id="analyse-des-correspondances-multiples_principe-general" class="section level2">
<h2>Principe g√©n√©ral</h2>
<p>L‚Äôanalyse des correspondances multiples est une technique descriptive visant √† r√©sumer l‚Äôinformation contenu dans un grand nombre de variables afin de faciliter l‚Äôinterpr√©tention des corr√©lations existantes entre ces diff√©rentes variables. On cherche √† savoir quelles sont les modalit√©s corr√©l√©es entre elles.</p>
<p>L‚Äôid√©e g√©n√©rale est la suivante<a href="#analyse-des-correspondances-multiples_fn1" class="footnoteRef" id="analyse-des-correspondances-multiples_fnref1"><sup>1</sup></a>. L‚Äôensemble des individus peut √™tre repr√©sent√© dans un espace √† plusieurs dimensions o√π chaque axe repr√©sente les diff√©rentes variables utilis√©es pour d√©crire chaque individu. Plus pr√©cis√©ment, pour chaque variable qualitative, il y a autant d‚Äôaxes que de modalit√©s moins un. Ainsi il faut trois axes pour d√©crire une variable √† quatre modalit√©s. Un tel nuage de points est aussi difficile √† interpr√©ter que de lire directement le fichier de donn√©es. On ne voit pas les corr√©lations qu‚Äôil peut y avoir entre modalit√©s, par exemple qu‚Äôaller au cin√©ma est plus fr√©quent chez les personnes habitant en milieu urbain. Afin de mieux repr√©senter ce nuage de points, on va proc√©der √† un changement de syst√®mes de coordonn√©es. Les individus seront d√®s lors projet√©s et repr√©sent√©s sur un nouveau syst√®me d‚Äôaxe. Ce nouveau syst√®me d‚Äôaxes est choisis de telle mani√®re que la majorit√© des variations soit concentr√©es sur les premiers axes. Les deux-trois premiers axes permettront d‚Äôexpliquer la majorit√© des diff√©rences observ√©es dans l‚Äô√©chantillon, les autres axes n‚Äôapportant qu‚Äôune faible part additionnelle d‚Äôinformation. D√®s lors, l‚Äôanalyse pourra se concentrer sur ses premiers axes qui constitueront un bon r√©sum√© des variations observables dans l‚Äô√©chantillon.</p>
<p>Avant toute ACM, il est indispensable de r√©aliser une analyse pr√©liminaire de chaque variable, afin de voir si toutes les classes sont aussi bien repr√©sent√©es ou s‚Äôil existe un d√©s√©quilibre. L‚ÄôACM est sensible aux effectifs faibles, aussi il est pr√©f√©rable de regrouper les classes peu repr√©sent√©es le cas √©ch√©ant.</p>
</div>
<div id="analyse-des-correspondances-multiples_acm-avec-ade4" class="section level2">
<h2>ACM avec ade4</h2>
<p>Si l‚Äôextension <code class="pkg">ade4</code> n‚Äôest pas pr√©sente sur votre PC, il vous faut l‚Äôinstaller¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">"ade4"</span>, <span class="dt">dep =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p>Dans tous les cas, il faut penser √† la charger en m√©moire¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ade4)</code></pre></div>
<p>Comme pr√©c√©demment, nous utiliserons le fichier de donn√©es <code>hdv2003</code> fourni avec l‚Äôextension <code class="pkg">questionr</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">data</span>(hdv2003)
d &lt;-<span class="st"> </span>hdv2003</code></pre></div>
<p>En premier lieu, comme dans le <a href="#regression-logistique">chapitre sur la r√©gression logistique</a>, nous allons cr√©er une variable groupe d‚Äô√¢ges et regrouper les modalit√©s de la variable ¬´¬†niveau d‚Äô√©tude¬†¬ª.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d$grpage &lt;-<span class="st"> </span><span class="kw">cut</span>(d$age, <span class="kw">c</span>(<span class="dv">16</span>, <span class="dv">25</span>, <span class="dv">45</span>, <span class="dv">65</span>, <span class="dv">93</span>), <span class="dt">right =</span> <span class="ot">FALSE</span>, 
  <span class="dt">include.lowest =</span> <span class="ot">TRUE</span>)
d$etud &lt;-<span class="st"> </span>d$nivetud
<span class="kw">levels</span>(d$etud) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Primaire"</span>, <span class="st">"Primaire"</span>, <span class="st">"Primaire"</span>, 
  <span class="st">"Secondaire"</span>, <span class="st">"Secondaire"</span>, <span class="st">"Technique/Professionnel"</span>, 
  <span class="st">"Technique/Professionnel"</span>, <span class="st">"Sup√©rieur"</span>)</code></pre></div>
<p>Ensuite, nous allons cr√©er un tableau de donn√©es ne contenant que les variables que nous souhaitons prendre en compte pour notre analyse factorielle.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d2 &lt;-<span class="st"> </span>d[, <span class="kw">c</span>(<span class="st">"grpage"</span>, <span class="st">"sexe"</span>, <span class="st">"etud"</span>, <span class="st">"peche.chasse"</span>, 
  <span class="st">"cinema"</span>, <span class="st">"cuisine"</span>, <span class="st">"bricol"</span>, <span class="st">"sport"</span>, <span class="st">"lecture.bd"</span>)]</code></pre></div>
<p>Le calcul de l‚ÄôACM se fait tout simplement avec la fonction <code>dudi.acm</code>{data-pkg=‚Äúade4‚Äù&gt;.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">acm &lt;-<span class="st"> </span><span class="kw">dudi.acm</span>(d2)</code></pre></div>
<p>Par d√©faut, la fonction affichera le graphique des <dfn data-index="valeur propre, ACM">valeurs propres</dfn> de chaque axe (nous y reviendrons) et vous demandera le nombre d‚Äôaxes que vous souhaitez conserver dans les r√©sultats. Le plus souvent, cinq axes seront largement plus que suffisants. Vous pouvez √©galement √©viter cette √©tape en indiquant directement √† <code data-pkg="ade4">dudi.acm</code> de vous renvoyer les cinq premiers axes ainsi¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">acm &lt;-<span class="st"> </span><span class="kw">dudi.acm</span>(d2, <span class="dt">scannf =</span> <span class="ot">FALSE</span>, <span class="dt">nf =</span> <span class="dv">5</span>)</code></pre></div>
<p>Le graphique des valeurs propres peut √™tre reproduit avec <code data-pkg="ade4" data-rdoc="scatter">screeplot</code>¬†:</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">screeplot</span>(acm)</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-8-1.png" title="" alt="" width="1050"/>
<figcaption>
Valeurs propres ou inerties de chaque axe
</figcaption>
</figure>
<p>Les m√™mes valeurs pour les premiers axes s‚Äôobtiennent √©galement avec <code data-pkg="ade4" data-rdoc="dudi">summary</code><a href="#analyse-des-correspondances-multiples_fn2" class="footnoteRef" id="analyse-des-correspondances-multiples_fnref2"><sup>2</sup></a>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(acm)</code></pre></div>
<pre><code>Class: acm dudi
Call: dudi.acm(df = d2, scannf = FALSE, nf = 5)

Total inertia: 1.451

Eigenvalues:
    Ax1     Ax2     Ax3     Ax4     Ax5 
 0.2474  0.1672  0.1309  0.1263  0.1176 

Projected inertia (%):
    Ax1     Ax2     Ax3     Ax4     Ax5 
 17.055  11.525   9.022   8.705   8.109 

Cumulative projected inertia (%):
    Ax1   Ax1:2   Ax1:3   Ax1:4   Ax1:5 
  17.06   28.58   37.60   46.31   54.42 

(Only 5 dimensions (out of 15) are shown)</code></pre>
<p>L‚Äô<dfn>inertie</dfn> totale est de 1,451 et l‚Äôaxe 1 en explique 0,1474 soit 17¬†%. L‚Äôinertie projet√©e cumul√©e nous indique que les deux premiers axes expliquent √† eux seuls 29¬†% des variations observ√©es dans notre √©chantillon.</p>
<p>Pour comprendre la signification des diff√©rents axes, il importe d‚Äôidentifier quelles sont les variables/ modalit√©s qui contribuent le plus √† chaque axe. Une premi√®re repr√©sentation graphique est le <dfn>cercle de corr√©lation</dfn><dfn data-index="corr√©lation, cercle"/> des modalit√©s. Pour cela, on aura recours √† <code data-pkg="ade4">s.corcicle</code>. On indiquera d‚Äôabord <code>acm$co</code> si l‚Äôon souhaite repr√©senter les modalit√©s ou <code>acm$li</code> si l‚Äôon souhaite repr√©senter les individus. Les deux chiffres suivant indiquent les deux axes que l‚Äôon souhaite afficher (dans le cas pr√©sent les deux premiers axes). Enfin, le param√®tre <code>clabel</code> permet de modifier la taille des √©tiquettes.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">s.corcircle</span>(acm$co, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dt">clabel =</span> <span class="fl">0.7</span>)</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-10-1.png" title="" alt="" width="1050"/>
<figcaption>
Cercle de corr√©lations des modalit√©s sur les deux premiers axes
</figcaption>
</figure>
<p>On pourra avoir √©galement recours √† <code data-pkg="ade4" data-rdoc="dudi.acm">boxplot</code> pour visualiser comment se r√©partissent les modalit√©s de chaque variable sur un axe donn√©<a href="#analyse-des-correspondances-multiples_fn3" class="footnoteRef" id="analyse-des-correspondances-multiples_fnref3"><sup>3</sup></a>.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">boxplot</span>(acm)</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-11-1.png" title="" alt="" width="1050"/>
<figcaption>
R√©partition des modalit√©s selon le premier axe
</figcaption>
</figure>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">boxplot</span>(acm, <span class="dv">2</span>)</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-12-1.png" title="" alt="" width="1050"/>
<figcaption>
R√©partition des modalit√©s selon le second axe
</figcaption>
</figure>
<p>Le tableau <code>acm$cr</code> contient les rapports de corr√©lation (variant de 0 √† 1) entre les variables et les axes choisis au d√©part de l‚ÄôACM. Pour repr√©senter graphiquement ces rapports, utiliser la fonction <code data-pkg="graphics">barplot</code> ainsi¬†: <code>barplot(acm$cr[,num],names.arg=row.names( acm$cr),las=2)</code> o√π <code>num</code> est le num√©ro de l‚Äôaxe √† repr√©senter. Pour l‚Äôinterpr√©tation des axes, se concentrer sur les variables les plus structurantes, c‚Äôest-√†-dire dont le rapport de corr√©lation est le plus proche de 1.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">par</span>(<span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">2</span>))
for (i in <span class="dv">1</span>:<span class="dv">4</span>) <span class="kw">barplot</span>(acm$cr[, i], <span class="dt">names.arg =</span> <span class="kw">row.names</span>(acm$cr), 
  <span class="dt">las =</span> <span class="dv">2</span>, <span class="dt">main =</span> <span class="kw">paste</span>(<span class="st">"Axe"</span>, i))</code></pre></div>
<p><img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-13-1.png" title="" alt="" width="1050"/></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">par</span>(<span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>))</code></pre></div>
<figcaption>
Rapports de corr√©lation des variables sur les 4 premiers axes
</figcaption>
</figure>
<div class="note">
<p>Le param√®tre <code>mfrow</code> de la fonction <code data-pkg="graphics">par</code> permet d‚Äôindiquer √† <strong>R</strong> que l‚Äôon souhaite afficher plusieurs graphiques sur une seule et m√™me fen√™tre, plus pr√©cis√©ment que l‚Äôon souhaite diviser la fen√™tre en deux lignes et deux colonnes.</p>
<p>Dans l‚Äôexemple pr√©c√©dent, apr√®s avoir produit notre graphique, nous avons r√©initilis√© cette valeur √† <code>c(1, 1)</code> (un seul graphique par fen√™tre) pour ne pas affecter les prochains graphiques que nous allons produire.</p>
</div>
<p>Pour repr√©senter, les modalit√©s dans le <dfn>plan factoriel</dfn><dfn data-index="factoriel, plan"/>, on utilisera la fonction <code data-pkg="ade4">s.label</code>. Par d√©faut, les deux premiers axes sont repr√©sent√©s.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">s.label</span>(acm$co, <span class="dt">clabel =</span> <span class="fl">0.7</span>)</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-14-1.png" title="" alt="" width="1050"/>
<figcaption>
R√©partition des modalit√©s selon les deux premiers axes
</figcaption>
</figure>
<p>Il est bien sur possible de pr√©ciser les axes √† repr√©senter. L‚Äôargument <code>boxes</code> permet quant √† lui d‚Äôindiquer si l‚Äôon souhaite tracer une bo√Æte pour chaque modalit√©.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">s.label</span>(acm$co, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dt">clabel =</span> <span class="fl">0.7</span>, <span class="dt">boxes =</span> <span class="ot">FALSE</span>)</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-15-1.png" title="" alt="" width="1050"/>
<figcaption>
R√©partition des modalit√©s selon les axes 3 et 4
</figcaption>
</figure>
<p>Bien entendu, on peut √©galement repr√©senter les individus. En indiquant <code>clabel=0</code> (une taille nulle pour les √©tiquettes), <code data-pkg="ade4">s.label</code> remplace chaque observation par un symbole qui peut √™tre sp√©cifi√© avec <code>pch</code>.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">s.label</span>(acm$li, <span class="dt">clabel =</span> <span class="dv">0</span>, <span class="dt">pch =</span> <span class="dv">17</span>)</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-16-1.png" title="" alt="" width="1050"/>
<figcaption>
R√©partition des individus selon les deux premiers axes
</figcaption>
</figure>
<div class="note">
<p>L‚Äôagument <code>pch</code> permet de sp√©cifier le symbole √† utiliser. Il peut prendre soit un nombre entier compris entre 0 et 25, soit un charact√®re textuel.</p>
<p><img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-17-1.png" title="" alt="" width="1050"/></p>
</div>
<div class="note">
<p>Lorsque l‚Äôon r√©alise une ACM, il n‚Äôest pas rare que plusieurs observations soient identiques, c‚Äôest-√†-dire correspondent √† la m√™me combinaison de modalit√©s. D√®s lors, ces observations seront projet√©es sur le m√™me point dans le plan factoriel. Une repr√©sentation classique des observations avec <code data-pkg="ade4">s.label</code> ne permettra pas de rendre compte les effectifs de chaque point.</p>
<p>Le package <code class="pkg">JLutils</code>, disponible seulement sur <strong><a href="https://github.com/larmarange/JLutils">GitHub</a></strong>, propose une fonction <code data-pkg="JLutils">s.freq</code> repr√©sentant chaque point par un carr√© proportionnel au nombre d‚Äôindividus.</p>
<p>Pour installer <code class="pkg">JLutils</code>, on aura recours au package <code class="pkg">devtools</code> et √† sa fonction <code data-pkg="devtools">install_github</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(devtools)
<span class="kw">install_github</span>(<span class="st">"larmarange/JLutils"</span>)</code></pre></div>
<p>La fonction <code data-pkg="JLutils">s.freq</code> s‚Äôemploie de mani√®re similaire aux autres fonctions graphiques de <code class="pkg">ade4</code>. Le param√®tre <code>csize</code> permet d‚Äôajuster la taille des carr√©s.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(JLutils)
<span class="kw">s.freq</span>(acm$li)</code></pre></div>
<p><img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-19-1.png" title="" alt="" width="1050"/></p>
<p>L‚Äôinterpr√©tation est tout autre, non¬†?</p>
</div>
<div class="note">
<p>Gaston Sanchez propose un graphique am√©lior√© des modalit√©s dans le plan factoriel √† cette adresse¬†: <a href="http://rpubs.com/gaston/MCA" class="uri">http://rpubs.com/gaston/MCA</a>.</p>
</div>
<p>La fonction <code data-pkg="ade4">s.value</code> permet notamment de repr√©senter un troisi√®me axe factoriel. Dans l‚Äôexemple ci-apr√®s, nous projettons les individus selon les deux premiers axes factoriels. La taille et la couleur des carr√©s d√©pendent pour leur part de la coordonn√©e des individus sur le troisi√®me axe factoriel. Le param√®tre <code>csi</code> permet d‚Äôajuster la taille des carr√©s.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">s.value</span>(acm$li, acm$li[, <span class="dv">3</span>], <span class="dv">1</span>, <span class="dv">2</span>, <span class="dt">csi =</span> <span class="fl">0.5</span>)</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-20-1.png" title="" alt="" width="1050"/>
<figcaption>
R√©partition des individus selon les trois premiers axes
</figcaption>
</figure>
<p><code data-pkg="ade4">s.arrow</code> permet de repr√©senter les vecteurs variables ou les vecteurs individus sous la forme d‚Äôune fl√®che allant de l‚Äôorigine du plan factoriel aux coordonn√©es des variables/individus¬†:</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">s.arrow</span>(acm$co, <span class="dt">clabel =</span> <span class="fl">0.7</span>)</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-21-1.png" title="" alt="" width="1050"/>
<figcaption>
Vecteurs des modalit√©s selon les deux premiers axes
</figcaption>
</figure>
<p><code data-pkg="ade4">s.hist</code> permet de repr√©senter des individus (ou des modalit√©s) sur le plan factoriel et d‚Äôafficher leur distribution sur chaque axe¬†:</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">s.hist</span>(acm$li, <span class="dt">clabel =</span> <span class="dv">0</span>, <span class="dt">pch =</span> <span class="dv">15</span>)</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-22-1.png" title="" alt="" width="1050"/>
<figcaption>
Distribution des individus dans le plan factoriel
</figcaption>
</figure>
<p><code data-pkg="ade4">s.class</code> et <code data-pkg="ade4">s.chull</code> permettent de repr√©senter les diff√©rentes observations class√©es en plusieurs cat√©gories. Cela permet notamment de projeter certaines variables.</p>
<p><code data-pkg="ade4">s.class</code> repr√©sente les observations par des points, lie chaque observation au barycentre de la modalit√© √† laquelle elle appartient et dessine une ellipse repr√©sentant la forme g√©n√©rale du nuage de points¬†:</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(RColorBrewer)
<span class="kw">s.class</span>(acm$li, d2$sexe, <span class="dt">col =</span> <span class="kw">brewer.pal</span>(<span class="dv">4</span>, <span class="st">"Set1"</span>))</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-23-1.png" title="" alt="" width="1050"/>
<figcaption>
Individus dans le plan factoriel selon le sexe (s.class)
</figcaption>
</figure>
<p><code data-pkg="ade4">s.chull</code> repr√©sente les barycentres de chaque cat√©gorie et dessine des lignes de niveaux repr√©sentant la distribution des individus de cette cat√©gorie. Les individus ne sont pas directement repr√©sent√©s¬†:</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">s.chull</span>(acm$li, d2$sexe, <span class="dt">col =</span> <span class="kw">brewer.pal</span>(<span class="dv">4</span>, <span class="st">"Set1"</span>))</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-24-1.png" title="" alt="" width="1050"/>
<figcaption>
Individus dans le plan factoriel selon le sexe (s.chull)
</figcaption>
</figure>
<div class="note">
<p>Il est pr√©f√©rable de fournir une liste de couleurs (via le param√®tre <code>col</code>) pour rendre le graphique plus lisible. Si vous avez install√© l‚Äôextension <code class="pkg">RColorBrewer</code>, vous pouvez utiliser les diff√©rentes palettes de couleurs propos√©es. Pour afficher les palettes disponibles, utilisez <code data-pkg="RColorBrewer" data-rdoc="RColorsBrewer">display.brewer.all</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(RColorBrewer)
<span class="kw">display.brewer.all</span>(<span class="dv">8</span>)</code></pre></div>
<p><img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-25-1.png" title="" alt="" width="1050"/></p>
<p>Pour obtenir une <dfn>palette de couleurs</dfn><dfn data-index="couleur, palette"/>, utilisez la fonction <code data-pkg="RColorBrewer" data-rdoc="RColorsBrewer">brewer.pal</code> avec les arguments <code>n</code> (nombre de couleurs demand√©es) et <code>pal</code>(nom de la palette de couleurs d√©sir√©e).</p>
<p>Pour plus d‚Äôinformations sur les palettes <em>Color Brewer</em>, voir <a href="http://colorbrewer2.org/" class="uri">http://colorbrewer2.org/</a>.</p>
</div>
<p>La variable cat√©gorielle transmise √† <code data-pkg="ade4">s.class</code> ou <code data-pkg="ade4">s.chull</code> n‚Äôest pas obligatoirement une des variables retenues pour l‚ÄôACM. Il est tout √† fait possible d‚Äôutiliser une autre variable. Par exemple¬†:</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">s.class</span>(acm$li, d$trav.imp, <span class="dt">col =</span> <span class="kw">brewer.pal</span>(<span class="dv">4</span>, <span class="st">"Set1"</span>))</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-26-1.png" title="" alt="" width="1050"/>
<figcaption>
Individus dans le plan factoriel selon l‚Äôimportance donn√©e au travail
</figcaption>
</figure>
<p>Les fonctions <code data-pkg="ade4">scatter</code> et <code data-pkg="ade4" data-rdoc="scatter">biplot</code> sont √©quivalentes¬†: elles appliquent <code data-pkg="ade4">s.class</code> √† chaque variable utilis√©e pour l‚ÄôACM.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">scatter</span>(acm, <span class="dt">col =</span> <span class="kw">brewer.pal</span>(<span class="dv">4</span>, <span class="st">"Set1"</span>))</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-27-1.png" title="" alt="" width="1050"/>
<figcaption>
La fonction scatter appliqu√©e au r√©sultat d‚Äôune ACM
</figcaption>
</figure>
</div>
<div id="analyse-des-correspondances-multiples_factominer" class="section level2">
<h2>ACM avec FactoMineR</h2>
<p>Comme avec <code class="pkg">ade4</code>, il est n√©cessaire de pr√©parer les donn√©es au pr√©alable (voir section pr√©c√©dente).</p>
<p>L‚ÄôACM se calcule avec la fonction <code data-pkg="FactoMineR">MCA</code>, l‚Äôargument <code>ncp</code> permettant de choisir le nombre d‚Äôaxes √† retenir¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(FactoMineR)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">acm2 &lt;-<span class="st"> </span><span class="kw">MCA</span>(d2, <span class="dt">ncp =</span> <span class="dv">5</span>, <span class="dt">graph =</span> <span class="ot">FALSE</span>)
acm2</code></pre></div>
<pre><code>**Results of the Multiple Correspondence Analysis (MCA)**
The analysis was performed on 2000 individuals, described by 9 variables
*The results are available in the following objects:

   name             
1  "$eig"           
2  "$var"           
3  "$var$coord"     
4  "$var$cos2"      
5  "$var$contrib"   
6  "$var$v.test"    
7  "$ind"           
8  "$ind$coord"     
9  "$ind$cos2"      
10 "$ind$contrib"   
11 "$call"          
12 "$call$marge.col"
13 "$call$marge.li" 
   description                       
1  "eigenvalues"                     
2  "results for the variables"       
3  "coord. of the categories"        
4  "cos2 for the categories"         
5  "contributions of the categories" 
6  "v-test for the categories"       
7  "results for the individuals"     
8  "coord. for the individuals"      
9  "cos2 for the individuals"        
10 "contributions of the individuals"
11 "intermediate results"            
12 "weights of columns"              
13 "weights of rows"                 </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">acm2$eig</code></pre></div>
<pre><code>       eigenvalue percentage of variance
dim 1  0.25757489              15.454493
dim 2  0.18363502              11.018101
dim 3  0.16164626               9.698776
dim 4  0.12871623               7.722974
dim 5  0.12135737               7.281442
dim 6  0.11213331               6.727999
dim 7  0.10959377               6.575626
dim 8  0.10340564               6.204338
dim 9  0.09867478               5.920487
dim 10 0.09192693               5.515616
dim 11 0.07501208               4.500725
dim 12 0.06679676               4.007805
dim 13 0.06002063               3.601238
dim 14 0.05832024               3.499215
dim 15 0.03785276               2.271166
       cumulative percentage of variance
dim 1                           15.45449
dim 2                           26.47259
dim 3                           36.17137
dim 4                           43.89434
dim 5                           51.17579
dim 6                           57.90378
dim 7                           64.47941
dim 8                           70.68375
dim 9                           76.60424
dim 10                          82.11985
dim 11                          86.62058
dim 12                          90.62838
dim 13                          94.22962
dim 14                          97.72883
dim 15                         100.00000</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sum</span>(acm2$eig$eigenvalue)</code></pre></div>
<pre><code>[1] 1.666667</code></pre>
<p>En premier lieu, il apparait que l‚Äôinertie totale obtenue avec <code data-pkg="FactoMineR">MCA</code> est diff√©rente de celle observ√©e avec <code data-pkg="ade4">dudi.acm</code>. Cela est d√ª √† un traitement diff√©rents des <dfn data-index="valeur manquante">valeurs manquantes</dfn><dfn data-index="manquante, valeur"/>. Alors que <code data-pkg="ade4">dudi.acm</code> exclu les valeurs manquantes, <code data-pkg="FactoMineR">MCA</code> les consid√®rent, par d√©faut, comme une modalit√© additionnelle. Pour calculer l‚ÄôACM uniquement sur les individus n‚Äôayant pas de valeur manquante, on aura recours √† <code data-pkg="stats">complete.cases</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">acm2 &lt;-<span class="st"> </span><span class="kw">MCA</span>(d2[<span class="kw">complete.cases</span>(d2), ], <span class="dt">ncp =</span> <span class="dv">5</span>, <span class="dt">graph =</span> <span class="ot">FALSE</span>)
acm2$eig</code></pre></div>
<pre><code>       eigenvalue percentage of variance
dim 1  0.24790700              17.162792
dim 2  0.16758465              11.602014
dim 3  0.13042357               9.029324
dim 4  0.12595105               8.719688
dim 5  0.11338629               7.849820
dim 6  0.10976674               7.599236
dim 7  0.10060204               6.964757
dim 8  0.09802387               6.786268
dim 9  0.09283131               6.426783
dim 10 0.07673502               5.312425
dim 11 0.06609694               4.575942
dim 12 0.05950655               4.119684
dim 13 0.05562942               3.851267
       cumulative percentage of variance
dim 1                           17.16279
dim 2                           28.76481
dim 3                           37.79413
dim 4                           46.51382
dim 5                           54.36364
dim 6                           61.96287
dim 7                           68.92763
dim 8                           75.71390
dim 9                           82.14068
dim 10                          87.45311
dim 11                          92.02905
dim 12                          96.14873
dim 13                         100.00000</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sum</span>(acm2$eig$eigenvalue)</code></pre></div>
<pre><code>[1] 1.444444</code></pre>
<p>Les possibilit√©s graphiques de <code class="pkg">FactoMineR</code> sont diff√©rentes de celles de <code class="pkg">ade4</code>. Un recours √† la fonction <code data-pkg="FactoMineR" data-rdoc="plot.MCA">plot</code> affichera par d√©faut les individus, les modalit√©s et les variables. La commande <code>?plot.MCA</code> permet d‚Äôacc√©der au fichier d‚Äôaide de cette fonction (i.e.¬†de la m√©thode g√©n√©rique <code>plot</code> appliqu√©e aux objets de type <code>MCA</code>) et de voir toutes les options graphiques. L‚Äôargument <code>choix</code> permet de sp√©cifier ce que l‚Äôon souhaite afficher (¬´¬†ind¬†¬ª pour les individus et les cat√©gories, ¬´¬†var¬†¬ª pour les variables). L‚Äôargument <code>invisible</code> quant √† lui permet de sp√©cifier ce que l‚Äôon souhaite masquer. Les axes √† afficher se pr√©cisent avec <code>axes</code>. Voir les exemples ci-dessous.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(acm2)</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-31-1.png" title="" alt="" width="1050"/>
<figcaption>
Plan factoriel (deux premiers axes)
</figcaption>
</figure>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(acm2, <span class="dt">axes =</span> <span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">4</span>))</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-32-1.png" title="" alt="" width="1050"/>
<figcaption>
Plan factoriel (axes 3 et 4)
</figcaption>
</figure>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(acm2, <span class="dt">choix =</span> <span class="st">"ind"</span>)</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-33-1.png" title="" alt="" width="1050"/>
<figcaption>
Plan factoriel (seulement les individus et les cat√©gories)
</figcaption>
</figure>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(acm2, <span class="dt">choix =</span> <span class="st">"ind"</span>, <span class="dt">invisible =</span> <span class="st">"ind"</span>)</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-34-1.png" title="" alt="" width="1050"/>
<figcaption>
Plan factoriel (seulement les cat√©gories)
</figcaption>
</figure>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(acm2, <span class="dt">choix =</span> <span class="st">"var"</span>)</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-35-1.png" title="" alt="" width="1050"/>
<figcaption>
Plan factoriel (seulement les variables)
</figcaption>
</figure>
<p>La fonction <code data-pkg="FactoMineR">plotellipses</code> trace des ellipses de confiance atour des modalit√©s de variables qualitatives. L‚Äôobjectif est de voir si les modalit√©s d‚Äôune variable qualitative sont significativement diff√©rentes les unes des autres.</p>
<p>Par d√©faut (<code>means=TRUE</code>), les ellipses de confiance sont calcul√©es pour les coordonn√©es moyennes de chaque cat√©gorie.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plotellipses</span>(acm2)</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-36-1.png" title="" alt="" width="1050"/>
<figcaption>
Ellipses de confiance (means=TRUE) dans le plan factoriel
</figcaption>
</figure>
<p>L‚Äôoption <code>means=FALSE</code> calculera les ellipses de confiance pour l‚Äôensemble des coordonn√©es des observations relevant de chaque cat√©gorie.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plotellipses</span>(acm2, <span class="dt">means =</span> <span class="ot">FALSE</span>)</code></pre></div>
<img src="graphs/analyse-des-correspondances-multiples/unnamed-chunk-37-1.png" title="" alt="" width="1050"/>
<figcaption>
Ellipses de confiance (means=FALSE) dans le plan factoriel
</figcaption>
</figure>
<p>La fonction <code data-pkg="FactoMineR">dimdesc</code> aide √† d√©crire et interpr√©ter les dimensions de l‚ÄôACM. Cette fonction est tr√®s utile quand le nombre de variables est √©lev√©. Elle permet de voir √† quelles variables les axes sont le plus li√©s¬†: quelles variables et quelles modalit√©s d√©crivent le mieux chaque axe¬†?</p>
<blockquote>
<p>Pour les variables qualitatives, un mod√®le d‚Äôanalyse de variance √† un facteur est r√©alis√© pour chaque dimension¬†; les variables √† expliquer sont les coordonn√©es des individus et la variable explicative est une des variables qualitatives. Un test F permet de voir si la variable a un effet significatif sur la dimension et des tests T sont r√©alis√©s modalit√© par modalit√© (avec le contraste somme des alpha_i=0). Cela montre si les coordonn√©es des individus de la sous-population d√©finie par une modalit√© sont significativement diff√©rentes de celles de l‚Äôensemble de la population (<em>i.e.</em> diff√©rentes de 0). Les variables et modalit√©s sont tri√©es par probabilit√© critique et seules celles qui sont significatives sont gard√©es dans le r√©sultat.</p>
<footer>
Source¬†: <a href="http://factominer.free.fr/factosbest/description-des-dimensions.html" class="uri">http://factominer.free.fr/factosbest/description-des-dimensions.html</a>
</footer>
</blockquote>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dimdesc</span>(acm2, <span class="dt">axes =</span> <span class="dv">1</span>:<span class="dv">2</span>)</code></pre></div>
<pre><code>$`Dim 1`
$`Dim 1`$quali
                      R2       p.value
etud         0.586058164  0.000000e+00
grpage       0.512231318 1.008479e-292
cinema       0.471002163 8.339548e-263
sport        0.398103140 5.940105e-210
bricol       0.179188677  7.142716e-83
cuisine      0.048233515  4.941749e-22
lecture.bd   0.017667936  6.856650e-09
sexe         0.013670717  3.546801e-07
peche.chasse 0.005007337  2.105728e-03

$`Dim 1`$category
                           Estimate       p.value
cinema_Oui               0.35033716 8.339548e-263
sport_Oui                0.33199860 5.940105e-210
[25,45)                  0.33895697 1.959716e-159
Sup√©rieur                0.45630756 1.376719e-118
bricol_Oui               0.21255190  7.142716e-83
Technique/Professionnel  0.17291856  4.703868e-23
cuisine_Oui              0.11015793  4.941749e-22
[16,25)                  0.39553122  3.635181e-15
lecture.bd_Oui           0.22169306  6.856650e-09
Homme                    0.05853263  3.546801e-07
peche.chasse_Oui         0.05543091  2.105728e-03
peche.chasse_Non        -0.05543091  2.105728e-03
Femme                   -0.05853263  3.546801e-07
lecture.bd_Non          -0.22169306  6.856650e-09
[45,65)                 -0.13173232  2.477610e-12
cuisine_Non             -0.11015793  4.941749e-22
bricol_Non              -0.21255190  7.142716e-83
[65,93]                 -0.60275587 2.906563e-165
sport_Non               -0.33199860 5.940105e-210
cinema_Non              -0.35033716 8.339548e-263
Primaire                -0.59465967 5.269497e-268


$`Dim 2`
$`Dim 2`$quali
                     R2       p.value
sexe         0.62723828  0.000000e+00
peche.chasse 0.31109226 1.161746e-154
bricol       0.20276579  8.014713e-95
etud         0.13925513  6.754592e-61
cuisine      0.12908453  1.461380e-58
cinema       0.04039994  1.215838e-18
grpage       0.03776900  1.257795e-15
lecture.bd   0.01995653  7.190474e-10

$`Dim 2`$category
                           Estimate       p.value
Homme                    0.32598031  0.000000e+00
peche.chasse_Oui         0.35922450 1.161746e-154
bricol_Oui               0.18590016  8.014713e-95
cuisine_Non              0.14816688  1.461380e-58
Technique/Professionnel  0.23013181  5.919911e-54
cinema_Non               0.08436024  1.215838e-18
[45,65)                  0.11638978  3.028836e-17
lecture.bd_Non           0.19371997  7.190474e-10
[65,93]                 -0.02872480  1.229757e-02
[25,45)                 -0.05570792  2.294799e-09
lecture.bd_Oui          -0.19371997  7.190474e-10
Secondaire              -0.09715846  1.240732e-10
cinema_Oui              -0.08436024  1.215838e-18
Sup√©rieur               -0.14813997  6.942611e-24
cuisine_Oui             -0.14816688  1.461380e-58
bricol_Non              -0.18590016  8.014713e-95
peche.chasse_Non        -0.35922450 1.161746e-154
Femme                   -0.32598031  0.000000e+00</code></pre>
</div>
<div class="footnotes">
<hr/>
<ol>
<li id="analyse-des-correspondances-multiples_fn1"><p>Pour une pr√©sentation plus d√©taill√©e, voir <br/><a href="http://www.math.univ-toulouse.fr/~baccini/zpedago/asdm.pdf" class="uri">http://www.math.univ-toulouse.fr/~baccini/zpedago/asdm.pdf</a>.<a href="#analyse-des-correspondances-multiples_fnref1">‚Ü©</a></p></li>
<li id="analyse-des-correspondances-multiples_fn2"><p>On pourra √©galement avoir recours √† la fonction <code data-pkg="ade4">inertia.dudi</code> pour l‚Äôensemble des axes.<a href="#analyse-des-correspondances-multiples_fnref2">‚Ü©</a></p></li>
<li id="analyse-des-correspondances-multiples_fn3"><p>La fonction <code data-pkg="ade4" data-rdoc="score.acm">score</code> constituera √©galement une aide √† l‚Äôinterpr√©tation des axes.<a href="#analyse-des-correspondances-multiples_fnref3">‚Ü©</a></p></li>
</ol>
</div>

</article>
<article id="classification-ascendante-hierarchique">

<div class="fluid-row" id="classification-ascendante-hierarchique_header">


<h1 class="title">Classification ascendante hi√©rarchique (CAH)</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#classification-ascendante-hierarchique_calculer-une-matrice-des-distances">Calculer une matrice des distances</a><ul>
<li><a href="#classification-ascendante-hierarchique_distance-de-gower">Distance de Gower</a></li>
<li><a href="#classification-ascendante-hierarchique_distance-du-">Distance du Œ¶¬≤</a></li>
<li><a href="#classification-ascendante-hierarchique_exemple">Exemple</a></li>
</ul></li>
<li><a href="#classification-ascendante-hierarchique_calcul-du-dendrogramme">Calcul du dendrogramme</a></li>
<li><a href="#classification-ascendante-hierarchique_decouper-le-dendrogramme">D√©couper le dendrogramme</a></li>
<li><a href="#classification-ascendante-hierarchique_factominer">CAH avec l‚Äôextension FactoMineR</a></li>
</ul>
</div>

<div class="note">
<p>La version originale de ce chapitre a √©t√© √©crite par Joseph Larmarange dans le cadre du support de cours <a href="https://github.com/larmarange/intro-r/tree/CoursM2">Introduction √† l‚Äôanalyse d‚Äôenqu√™tes avec R</a>.</p>
</div>
<p>Il existe de nombreuses techniques statistiques visant √† partinionner une population en diff√©rentes classes ou sous-groupes. La <dfn>classification ascendante hi√©rarchique</dfn> (<dfn>CAH</dfn>) est l‚Äôune d‚Äôentre elles. On cherche √† ce que les individus regroup√©s au sein d‚Äôune m√™me classe (homog√©n√©it√© intra-classe) soient le plus semblables possibles tandis que les classes soient le plus dissemblables (h√©t√©rog√©n√©it√© inter-classe).</p>
<p>Le principe de la CAH est de rassembler des individus selon un crit√®re de ressemblance d√©fini au pr√©alable qui s‚Äôexprimera sous la forme d‚Äôune <dfn>matrice de distances</dfn>, exprimant la distance existant entre chaque individu pris deux √† deux. Deux observations identiques auront une distance nulle. Plus les deux observations seront dissemblables, plus la distance sera importante. La CAH va ensuite rassembler les individus de mani√®re it√©rative afin de produire un <dfn>dendrogramme</dfn> ou <dfn>arbre de classification</dfn><dfn data-index="classification, arbre"/>. La classification est <em>ascendante</em> car elle part des observations individuelles¬†; elle est <em>hi√©rarchique</em> car elle produit des classes ou groupes de plus en plus vastes, incluant des sous-groupes en leur sein. En d√©coupant cet arbre √† une certaine hauteur choisie, on produira la <dfn>partition</dfn> d√©sir√©e.</p>
<div class="note">
<p>On trouvera √©galement de nombreux supports de cours en fran√ßais sur la CAH sur le site de Fran√ßois Gilles Carpentier¬†: <a href="http://pagesperso.univ-brest.fr/~carpenti/" class="uri">http://pagesperso.univ-brest.fr/~carpenti/</a>.</p>
</div>
<div id="classification-ascendante-hierarchique_calculer-une-matrice-des-distances" class="section level2">
<h2>Calculer une matrice des distances</h2>
<p>La notion de <dfn>ressemblance</dfn> entre observations est √©valu√©e par une <dfn>distance</dfn> entre individus. Plusieurs type de ditances existent selon les donn√©es utilis√©es.</p>
<p>Il existe de nombreuses distances math√©matiques pour les variables quantitatives (euclidiennes, Manhattan‚Ä¶) que nous n‚Äôaborderons pas ici<a href="#classification-ascendante-hierarchique_fn1" class="footnoteRef" id="classification-ascendante-hierarchique_fnref1"><sup>1</sup></a>. La plupart peuvent √™tre calcul√©es avec la fonction <code data-pkg="stats">dist</code>.</p>
<p>Usuellement, pour un ensemble de variables qualitatives, on aura recours √† la <dfn data-index="distance du Phi¬≤">distance du Œ¶¬≤</dfn><dfn data-index="Phi¬≤, distance"/> qui est celle utilis√©e pour l‚Äôanalyse des correspondances multiples (voir le <a href="">chapitre d√©di√©</a>). Avec l‚Äôextension <code class="pkg">ade4</code>, la distance du Œ¶¬≤ s‚Äôobtient avec la fonction <code data-pkg="ade4">dist.dudi</code><a href="#classification-ascendante-hierarchique_fn2" class="footnoteRef" id="classification-ascendante-hierarchique_fnref2"><sup>2</sup></a>. Le cas particulier de la CAH avec l‚Äôextension <code class="pkg">FactoMineR</code> sera abord√©e dans une section sp√©cifique ci-apr√®s. Nous √©voquerons √©galement la <dfn>distance de Gower</dfn><dfn data-index="Gower, distance"/> qui peut s‚Äôappliquer √† un ensemble de variables √† la fois qualitatives et quantitatives et qui se calcule avec la fonction <code data-pkg="cluster">daisy</code> de l‚Äôextension <code class="pkg">cluster</code>. Enfin, dans le chapitre sur l‚Äô<a href="#analyse-de-sequences">analyse de s√©quences</a>, nous verrons √©galement la fonction <code data-pkg="TraMineR">seqdist</code> (extension <code class="pkg">TraMineR</code>) permettant de calculer une distance entre s√©quences.</p>
<div id="classification-ascendante-hierarchique_distance-de-gower" class="section level3">
<h3>Distance de Gower</h3>
<p>En 1971, Gower a propos√© un <dfn>indice de similarit√©</dfn><dfn data-index="similarit√©, indice"/> qui porte son nom. L‚Äôobjectif de cet indice consiste √† mesurer dans quelle mesure deux individus sont semblables. L‚Äôindice de Gower varie entre 0 et 1. Si l‚Äôindice vaut 1, les deux individus sont identiques. √Ä l‚Äôoppos√©, s‚Äôil vaut 0, les deux individus consid√©r√©s n‚Äôont pas de point commun. Si l‚Äôon note <em>S<sub>g</sub></em> l‚Äô<dfn>indice de similarit√© de Gower</dfn><dfn data-index="Gower, indice de similarit√©"/>, la distance de Gower <em>D<sub>g</sub></em> s‚Äôobtient simplement de la mani√®re suivante¬†: <em>D<sub>g</sub></em>¬†=¬†1¬†-¬†<em>S<sub>g</sub></em>. Ainsi, la distance sera nulle entre deux individus identiques et elle sera √©gale √† 1 entre deux individus totalement diff√©rents. Cette distance s‚Äôobtient sous <strong>R</strong> avec la fonction <code data-pkg="cluster">daisy</code> du package <code class="pkg">cluster</code>.</p>
<p>L‚Äôindice de similarit√© de Gower entre deux individus <em>x<sub>1</sub></em> et <em>x<sub>2</sub></em> se calcule de la mani√®re suivante¬†:</p>
<!-- 
$$ S_{g}(x_{1},x_{2})=\frac{1}{p}\sum_{j=1}^{p}s_{12j} $$
converted on http://www2.ph.ed.ac.uk/snuggletex/MathInputDemo
-->
<p><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"> <semantics> <mrow> <msub> <mi>S</mi> <mi>g</mi> </msub> <mfenced close=")" open="("> <msub> <mi>x</mi> <mn>1</mn> </msub> <msub> <mi>x</mi> <mn>2</mn> </msub> </mfenced> <mo>=</mo> <mfrac> <mn>1</mn> <mi>p</mi> </mfrac> <munderover> <mo>‚àë</mo> <mrow> <mi>j</mi> <mo>=</mo> <mn>1</mn> </mrow> <mi>p</mi> </munderover> <msub> <mi>s</mi> <mrow> <mn>12</mn> <mi>j</mi> </mrow> </msub> </mrow> </semantics> </math></p>
<p><em>p</em> repr√©sente le nombre total de caract√®res (ou de variables) descriptifs utilis√©s pour comparer les deux individus. <em>s</em><sub>12<em>j</em></sub> repr√©sente la similarit√© partielle entre les individus 1 et 2 concernant le descripteur <em>j</em>. Cette similarit√© partielle se calcule diff√©remment s‚Äôil s‚Äôagit d‚Äôune <dfn>variable qualitative</dfn><dfn data-index="qualitative, variable"/> ou <dfn data-index="variable quantitative">quantitative</dfn><dfn data-index="quantitative, variable"/>¬†:</p>
<ul>
<li><strong>variable qualitative¬†:</strong> <em>s</em><sub>12<em>j</em></sub> vaut 1 si la variable <em>j</em> prend la m√™me valeur pour les individus 1 et 2, et vaut 0 sinon. Par exemple, si 1 et 2 sont tous les deux ¬´¬†grand¬†¬ª, alors <em>s</em><sub>12<em>j</em></sub> vaudra 1. Si 1 est ¬´¬†grand¬†¬ª et 2 ¬´¬†petit¬†¬ª, <em>s</em><sub>12<em>j</em></sub> vaudra 0.</li>
<li><strong>variable quantitative¬†:</strong> la diff√©rence absolue entre les valeurs des deux variables est tout d‚Äôabord calcul√©e, soit |<em>y</em><sub>1<em>j</em></sub>¬†‚àí¬†<em>y</em><sub>2<em>j</em></sub>|. Puis l‚Äô√©cart maximum observ√© sur l‚Äôensemble du fichier est d√©termin√© et not√© <em>R</em><sub><em>j</em></sub>. D√®s lors, la similarit√© partielle vaut <em>S</em><sub>12<em>j</em></sub>¬†=¬†|<em>y</em><sub>1<em>j</em></sub>¬†‚àí¬†<em>y</em><sub>2<em>j</em></sub>|¬†/¬†<em>R</em><sub><em>j</em></sub>.</li>
</ul>
<p>Dans le cas o√π l‚Äôon n‚Äôa que des variables qualitatives, la valeur de l‚Äôindice de Gower correspond √† la proportion de caract√®res en commun. Supposons des individus 1 et 2 d√©cris ainsi¬†:</p>
<ol style="list-style-type: decimal">
<li>homme / grand / blond / √©tudiant / urbain</li>
<li>femme / grande / brune / √©tudiante / rurale</li>
</ol>
<p>Sur les 5 variables utilis√©es pour les d√©crire, 1 et 2 ont deux caract√©ristiques communes¬†: ils sont grand(e)s et √©tudiant(e)s. D√®s lors, l‚Äôindice de similarit√© de Gower entre 1 et 2 vaut 2/5¬†=¬†0,4 (soit une distance de 1¬†‚àí¬†0,4¬†=¬†0,6).</p>
<p>Plusieurs approches peuvent √™tre retenues pour traiter les valeurs manquantes¬†:</p>
<ul>
<li>supprimer tout individu n‚Äô√©tant pas renseign√© pour toutes les variables de l‚Äôanalyse¬†;</li>
<li>consid√©rer les valeurs manquantes comme une modalit√© en tant que telle¬†;</li>
<li>garder les valeurs manquantes en tant que valeurs manquantes.</li>
</ul>
<p>Le choix retenu modifiera les distances de Gower calcul√©es. Supposons que l‚Äôon ait¬†:</p>
<ol style="list-style-type: decimal">
<li>homme / grand / blond / √©tudiant / urbain</li>
<li>femme / grande / brune / √©tudiante / manquant</li>
</ol>
<p>Si l‚Äôon supprime les individus ayant des <dfn data-index="valeur manquante">valeurs manquantes</dfn><dfn data-index="manquante, valeur"/>, 2 est retir√©e du fichier d‚Äôobservations et aucune distance n‚Äôest calcul√©e.</p>
<p>Si l‚Äôon traite les valeurs manquantes comme une modalit√© particuli√®re, 1 et 2 partagent alors 2 caract√®res sur les 5 analys√©s, la distance de Gower entre eux est alors de 1¬†‚àí¬†2/5¬†=1¬†‚àí¬†0,4¬†=¬†0,6.</p>
<p>Si on garde les valeurs manquantes, l‚Äôindice de Gower est d√®s lors calcul√© sur les seuls descripteurs renseign√©s √† la fois pour 1 et 2. La distance de Gower sera calcul√©e dans le cas pr√©sent uniquement sur les 4 caract√®res renseign√©s et vaudra 1¬†‚àí¬†2/4¬†=¬†0,5.</p>
</div>
<div id="classification-ascendante-hierarchique_distance-du-" class="section level3">
<h3>Distance du Œ¶¬≤</h3>
<p>Il s‚Äôagit de la distance utilis√©e dans les analyses de correspondance multiples (ACM). C‚Äôest une variante de la <dfn data-index="distance du Chi¬≤">distance du œá¬≤</dfn><dfn data-index="Chi¬≤, distance"/>. Nous consid√©rons ici que nous avons <em>Q</em> questions (soit <em>Q</em> variables initiales de type facteur). √Ä chaque individu est associ√© un <dfn>patron</dfn> c‚Äôest-√†-dire une certaine combinaison de r√©ponses aux <em>Q</em> questions. La distance entre deux individus correspond √† la distance entre leurs deux patrons. Si les deux individus pr√©sentent le m√™me patron, leur distance sera nulle. La distance du Œ¶¬≤ peut s‚Äôexprimer ainsi¬†:</p>
<!-- 
$$ d_{\Phi^2}^2(L_i,L_j)=\frac{1}{Q}\sum_{k}\frac{(\delta_{ik}-\delta_{jk})^2}{f_k} $$ 
converted on http://www2.ph.ed.ac.uk/snuggletex/MathInputDemo
-->
<p><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"> <semantics> <mrow> <msubsup> <mi>d</mi> <msup> <mi>Œ¶</mi> <mn>2</mn> </msup> <mn>2</mn> </msubsup> <mfenced close=")" open="("> <msub> <mi>L</mi> <mi>i</mi> </msub> <msub> <mi>L</mi> <mi>j</mi> </msub> </mfenced> <mo>=</mo> <mfrac> <mn>1</mn> <mi>Q</mi> </mfrac> <munder> <mo>‚àë</mo> <mi>k</mi> </munder> <mfrac> <msup> <mfenced close=")" open="("> <mrow> <msub> <mi>Œ¥</mi> <mrow> <mi>i</mi> <mi>k</mi> </mrow> </msub> <mo>-</mo> <msub> <mi>Œ¥</mi> <mrow> <mi>j</mi> <mi>k</mi> </mrow> </msub> </mrow> </mfenced> <mn>2</mn> </msup> <msub> <mi>f</mi> <mi>k</mi> </msub> </mfrac> </mrow> </semantics> </math></p>
<p>o√π <em>L<sub>i</sub></em> et <em>L<sub>j</sub></em> sont deux patrons, <em>Q</em> le nombre total de questions. <em>Œ¥<sub>ik</sub></em> vaut 1 si la modalit√© <em>k</em> est pr√©sente dans le patron <em>L<sub>i</sub></em>, 0 sinon. <em>f<sub>k</sub></em> est la fr√©quence de la modalit√© <em>k</em> dans l‚Äôensemble de la population.</p>
<p>Exprim√© plus simplement, on fait la somme de l‚Äôinverse des modalit√©s non communes aux deux patrons, puis on divise par le nombre total de question. Si nous reprenons notre exemple pr√©c√©dent¬†:</p>
<ol style="list-style-type: decimal">
<li>homme / grand / blond / √©tudiant / urbain</li>
<li>femme / grande / brune / √©tudiante / rurale</li>
</ol>
<p>Pour calculer la distance entre 1 et 2, il nous faut conna√Ætre la proportion des diff√©rentes modalit√©s dans l‚Äôensemble de la population √©tudi√©e. En l‚Äôoccurrence¬†:</p>
<ul>
<li>hommes¬†: 52¬†% / femmes¬†: 48¬†%</li>
<li>grand¬†: 30¬†% / moyen¬†: 45¬†% / petit¬†: 25¬†%</li>
<li>blond¬†: 15¬†% / ch√¢tain¬†: 45¬†% / brun¬†: 30¬†% / blanc¬†: 10¬†%</li>
<li>√©tudiant¬†: 20 % / salari√©s¬†: 65¬†% / retrait√©s¬†: 15¬†%</li>
<li>urbain¬†: 80 % / rural¬†: 20¬†%</li>
</ul>
<p>Les modalit√©s non communes entre les profils de 1 et 2 sont¬†: homme, femme, blond, brun, urbain et rural. La distance du Œ¶¬≤ entre 1 et 2 est donc la suivante¬†:</p>
<!-- 
$$ d_{\Phi^2}^2(L_1,L_2)=\frac{1}{5}(\frac{1}{0,52}+\frac{1}{0,48}+\frac{1}{0,15}+\frac{1}{0,30}+\frac{1}{0,80}+\frac{1}{0,20})=4,05 $$
converted on http://www2.ph.ed.ac.uk/snuggletex/MathInputDemo
-->
<p><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"> <semantics> <mrow> <msubsup> <mi>d</mi> <msup> <mi>Œ¶</mi> <mn>2</mn> </msup> <mn>2</mn> </msubsup> <mfenced close=")" open="("> <msub> <mi>L</mi> <mn>1</mn> </msub> <msub> <mi>L</mi> <mn>2</mn> </msub> </mfenced> <mo>=</mo> <mfrac> <mn>1</mn> <mn>5</mn> </mfrac> <mfenced close=")" open="("> <mrow> <mfrac> <mn>1</mn> <mrow> <mn>0</mn> <mo>,</mo> <mn>52</mn> </mrow> </mfrac> <mo>+</mo> <mfrac> <mn>1</mn> <mrow> <mn>0</mn> <mo>,</mo> <mn>48</mn> </mrow> </mfrac> <mo>+</mo> <mfrac> <mn>1</mn> <mrow> <mn>0</mn> <mo>,</mo> <mn>15</mn> </mrow> </mfrac> <mo>+</mo> <mfrac> <mn>1</mn> <mrow> <mn>0</mn> <mo>,</mo> <mn>30</mn> </mrow> </mfrac> <mo>+</mo> <mfrac> <mn>1</mn> <mrow> <mn>0</mn> <mo>,</mo> <mn>80</mn> </mrow> </mfrac> <mo>+</mo> <mfrac> <mn>1</mn> <mrow> <mn>0</mn> <mo>,</mo> <mn>20</mn> </mrow> </mfrac> </mrow> </mfenced> <mo>=</mo> <mn>4</mn> <mo>,</mo> <mn>05</mn> </mrow> </semantics> </math></p>
<p>Cette distance, bien que moins intuitive que la distance de Gower √©voqu√©e pr√©c√©demment, est la plus employ√©e pour l‚Äôanalyse d‚Äôenqu√™tes en sciences sociales. Il faut retenir que la distance entre deux profils est d√©pendante de la distribution globale de chaque modalit√© dans la population √©tudi√©e. Ainsi, si l‚Äôon recalcule les distances entre individus √† partir d‚Äôun sous-√©chantillon, le r√©sultat obtenu sera diff√©rent. De mani√®re g√©n√©rale, les individus pr√©sentant des caract√©ristiques rares dans la population vont se retrouver √©loign√©s des individus pr√©sentant des caract√©ristiques fortement repr√©sent√©es.</p>
</div>
<div id="classification-ascendante-hierarchique_exemple" class="section level3">
<h3>Exemple</h3>
<p>Nous allons reprendre l‚ÄôACM calcul√©e avec <code data-pkg="ade4">dudi.acm</code> (<code class="pkg">ade4</code>) dans le <a href="">chapitre consacr√© √† l‚ÄôACM</a>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">data</span>(hdv2003)
d &lt;-<span class="st"> </span>hdv2003
d$grpage &lt;-<span class="st"> </span><span class="kw">cut</span>(d$age, <span class="kw">c</span>(<span class="dv">16</span>, <span class="dv">25</span>, <span class="dv">45</span>, <span class="dv">65</span>, <span class="dv">93</span>), <span class="dt">right =</span> <span class="ot">FALSE</span>, 
  <span class="dt">include.lowest =</span> <span class="ot">TRUE</span>)
d$etud &lt;-<span class="st"> </span>d$nivetud
<span class="kw">levels</span>(d$etud) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Primaire"</span>, <span class="st">"Primaire"</span>, <span class="st">"Primaire"</span>, 
  <span class="st">"Secondaire"</span>, <span class="st">"Secondaire"</span>, <span class="st">"Technique/Professionnel"</span>, 
  <span class="st">"Technique/Professionnel"</span>, <span class="st">"Sup√©rieur"</span>)
d2 &lt;-<span class="st"> </span>d[, <span class="kw">c</span>(<span class="st">"grpage"</span>, <span class="st">"sexe"</span>, <span class="st">"etud"</span>, <span class="st">"peche.chasse"</span>, 
  <span class="st">"cinema"</span>, <span class="st">"cuisine"</span>, <span class="st">"bricol"</span>, <span class="st">"sport"</span>, <span class="st">"lecture.bd"</span>)]
<span class="kw">library</span>(ade4)
acm &lt;-<span class="st"> </span><span class="kw">dudi.acm</span>(d2, <span class="dt">scannf =</span> <span class="ot">FALSE</span>, <span class="dt">nf =</span> <span class="dv">5</span>)</code></pre></div>
<p>La matrice des distances s‚Äôobtient d√®s lors avec la fonction <code data-pkg="ade4">dist.dudi</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">md &lt;-<span class="st"> </span><span class="kw">dist.dudi</span>(acm)</code></pre></div>
</div>
</div>
<div id="classification-ascendante-hierarchique_calcul-du-dendrogramme" class="section level2">
<h2>Calcul du dendrogramme</h2>
<p>Il faut ensuite choisir une m√©thode d‚Äô<dfn>agr√©gation</dfn> pour construire le dendrogramme. De nombreuses solutions existent (saut minimum, distance maximum, moyenne, Ward‚Ä¶). Chacune d‚Äôelle produira un dendrogramme diff√©rent. Nous ne d√©taillerons pas ici ces diff√©rentes techniques<a href="#classification-ascendante-hierarchique_fn3" class="footnoteRef" id="classification-ascendante-hierarchique_fnref3"><sup>3</sup></a>. Cependant, √† l‚Äôusage, on privil√©giera le plus souvent la <dfn>m√©thode de Ward</dfn><dfn data-index="Ward, m√©thode"/>. Cette m√©thode se distingue de toutes les autres en ce sens qu‚Äôelle utilise une analyse de la variance approch√©e afin d‚Äô√©valuer les distances entre groupes. La m√©thode de Ward se justifie bien lorsque lorsque l‚Äôon utilise le carr√© de la distance. Choisir de regrouper les deux individus les plus proches revient alors √† choisir la paire de points dont l‚Äôagr√©gation entra√Æne la diminution minimale de l‚Äôinertie du nuage. En r√©sum√©, cette m√©thode cherche √† minimiser l‚Äôinertie intra-classe et √† maximiser l‚Äôinertie inter-classe afin d‚Äôobtenir des classes les plus homog√®nes possibles.</p>
<p>En raison de la vari√©t√© des distances possibles et de la vari√©t√© des techniques d‚Äôagr√©gation, on pourra √™tre amen√© √† r√©aliser plusieurs dendrogrammes diff√©rents sur un m√™me jeu de donn√©es jusqu‚Äô√† obtenir une classification qui fait ¬´¬†sens¬†¬ª.</p>
<p>La fonction de base pour le calcul d‚Äôun dendrogramme est <code data-pkg="stats">hclust</code> en pr√©cisant le crit√®re d‚Äôaggr√©gation avec <code>method</code>. Dans notre cas, nous allons opter pour la m√©thode de Ward appliqu√©e au carr√© des distances (ce qu‚Äôon indique avec <code>method = "ward.D2"</code><a href="#classification-ascendante-hierarchique_fn4" class="footnoteRef" id="classification-ascendante-hierarchique_fnref4"><sup>4</sup></a>, l‚Äôoption <code>method = "ward.D"</code> correspondant √† la version ¬´¬†classique¬†¬ª)¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">arbre &lt;-<span class="st"> </span><span class="kw">hclust</span>(md, <span class="dt">method =</span> <span class="st">"ward.D2"</span>)</code></pre></div>
<div class="note">
<p>Le temps de calcul d‚Äôun dendrogramme peut √™tre particuli√®rement important sur un gros fichier de donn√©es. L‚Äôextension <code class="pkg">fastcluster</code> permet de r√©duire significativement le temps de calcul. Il suffit d‚Äôinstaller puis d‚Äôappeler cette extension. La fonction <code data-pkg="fastcluster">hclust</code> sera automatiquement remplac√©e par cette version optimis√©e. Elle prends les m√™mes param√®tres¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(fastcluster)
arbre &lt;-<span class="st"> </span><span class="kw">hclust</span>(md, <span class="dt">method =</span> <span class="st">"ward.D2"</span>)</code></pre></div>
</div>
<p>Le dendrogramme obtenu peut √™tre affich√© simplement avec <code data-pkg="stats" data-rdoc="hclust">plot</code>. Lorsque le nombre d‚Äôindividus est important, il peut √™tre utile de ne pas afficher les √©tiquettes des individus avec <code>labels=FALSE</code>.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(arbre, <span class="dt">labels =</span> <span class="ot">FALSE</span>, <span class="dt">main =</span> <span class="st">"Dendrogramme"</span>)</code></pre></div>
<img src="graphs/classification-ascendante-hierarchique/unnamed-chunk-5-1.png" title="" alt="" width="1050"/>
<figcaption>
Dendrogramme obtenu avec hclust
</figcaption>
</figure>
<p>La fonction <code data-pkg="cluster">agnes</code> de l‚Äôextension <code class="pkg">cluster</code> peut √©galement √™tre utilis√©e pour calculer le dendrogramme. Cependant, √† l‚Äôusage, elle semble √™tre un peu plus lente que <code data-pkg="stats">hclust</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(cluster)
arbre2 &lt;-<span class="st"> </span><span class="kw">agnes</span>(md, <span class="dt">method =</span> <span class="st">"ward"</span>)</code></pre></div>
<p>ATTENTION¬†: la m√©thode impl√©ment√©e dans la fonction <code data-pkg="cluster">agnes</code> correspond √† l‚Äôoption <code>method = "ward.D2"</code> de <code data-pkg="stats">hclust</code>.</p>
<p>Le r√©sultat obtenu n‚Äôest pas au m√™me format que celui de <code data-pkg="stats">hclust</code>. Il est possible de transformer un objet <code data-pkg="cluster" data-rdoc="agnes.object">agnes</code> au format <code data-pkg="stats">hclust</code> avec <code data-pkg="cluster" data-rdoc="agnes.object">as.hclust</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as.hclust</span>(arbre2)</code></pre></div>
</div>
<div id="classification-ascendante-hierarchique_decouper-le-dendrogramme" class="section level2">
<h2>D√©couper le dendrogramme</h2>
<p>Pour obtenir une <dfn>partition</dfn> de la population, il suffit de d√©couper le dendrogramme obtenu √† une certaine hauteur. En premier lieu, une analyse de la forme du dendrogramme pourra nous donner une indication sur le nombre de classes √† retenir. Dans notre exemple, deux branches bien distinctes apparaissent sur l‚Äôarbre.</p>
<p>Pour nous aider, nous pouvons repr√©senter les <dfn data-index="saut d'inertie">sauts d‚Äôinertie</dfn><dfn data-index="inertie, saut"/> du dendrogramme selon le nombre de classes retenues.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">inertie &lt;-<span class="st"> </span><span class="kw">sort</span>(arbre$height, <span class="dt">decreasing =</span> <span class="ot">TRUE</span>)
<span class="kw">plot</span>(inertie[<span class="dv">1</span>:<span class="dv">20</span>], <span class="dt">type =</span> <span class="st">"s"</span>, <span class="dt">xlab =</span> <span class="st">"Nombre de classes"</span>, 
  <span class="dt">ylab =</span> <span class="st">"Inertie"</span>)</code></pre></div>
<img src="graphs/classification-ascendante-hierarchique/unnamed-chunk-8-1.png" title="" alt="" width="1050"/>
<figcaption>
Inertie du dendrogramme
</figcaption>
</figure>
<p>On voit trois sauts assez nets √† 2, 5 et 8 classes, que nous avons repr√©sent√©s ci-dessous respectivement en vert, en rouge et en bleu.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(inertie[<span class="dv">1</span>:<span class="dv">20</span>], <span class="dt">type =</span> <span class="st">"s"</span>, <span class="dt">xlab =</span> <span class="st">"Nombre de classes"</span>, 
  <span class="dt">ylab =</span> <span class="st">"Inertie"</span>)
<span class="kw">points</span>(<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">8</span>), inertie[<span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">8</span>)], <span class="dt">col =</span> <span class="kw">c</span>(<span class="st">"green3"</span>, 
  <span class="st">"red3"</span>, <span class="st">"blue3"</span>), <span class="dt">cex =</span> <span class="dv">2</span>, <span class="dt">lwd =</span> <span class="dv">3</span>)</code></pre></div>
<img src="graphs/classification-ascendante-hierarchique/unnamed-chunk-9-1.png" title="" alt="" width="1050"/>
<figcaption>
Sauts d‚Äôinertie du dendrogramme
</figcaption>
</figure>
<p>La fonction <code data-pkg="stats">rect.hclust</code> permet de visualiser les diff√©rentes partitions directement sur le dendrogramme.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(arbre, <span class="dt">labels =</span> <span class="ot">FALSE</span>, <span class="dt">main =</span> <span class="st">"Partition en 2, 5 ou 8 classes"</span>, 
  <span class="dt">xlab =</span> <span class="st">""</span>, <span class="dt">ylab =</span> <span class="st">""</span>, <span class="dt">sub =</span> <span class="st">""</span>, <span class="dt">axes =</span> <span class="ot">FALSE</span>, <span class="dt">hang =</span> -<span class="dv">1</span>)
<span class="kw">rect.hclust</span>(arbre, <span class="dv">2</span>, <span class="dt">border =</span> <span class="st">"green3"</span>)
<span class="kw">rect.hclust</span>(arbre, <span class="dv">5</span>, <span class="dt">border =</span> <span class="st">"red3"</span>)
<span class="kw">rect.hclust</span>(arbre, <span class="dv">8</span>, <span class="dt">border =</span> <span class="st">"blue3"</span>)</code></pre></div>
<img src="graphs/classification-ascendante-hierarchique/unnamed-chunk-10-1.png" title="" alt="" width="1050"/>
<figcaption>
Diff√©rentes partitions du dendrogramme
</figcaption>
</figure>
<p>L‚Äôextension <code class="pkg">FactoMineR</code> (que nous aborderons <a href="#classification-ascendante-hierarchique_factominer">dans une section d√©di√©e ci-apr√®s</a>) sugg√®re d‚Äôutiliser la partition ayant la plus grande <dfn>perte relative d‚Äôinertie</dfn><dfn data-index="indertie, perte relative"/>.</p>
<p>L‚Äôextension <code class="pkg">JLutils</code> (disponible sur <a href="https://github.com/larmarange/JLutils">GitHub</a>) propose une fonction <code data-pkg="JLutils">best.cutree</code> qui permet de calculer cette indicateur √† partir de n‚Äôimporte quel dendrogramme calcul√© avec <code data-pkg="stats">hclust</code> ou <code data-pkg="cluster">agnes</code>.</p>
<p>Pour installer <code class="pkg">JLutils</code>, on aura recours au package <code class="pkg">devtools</code> et √† sa fonction <code data-pkg="devtools">install_github</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(devtools)
<span class="kw">install_github</span>(<span class="st">"larmarange/JLutils"</span>)</code></pre></div>
<p>Par d√©faut, <code data-pkg="JLutils">best.cutree</code> regarde quelle serait la meilleure partition entre 3 et 20 classes.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(JLutils)
<span class="kw">best.cutree</span>(arbre)</code></pre></div>
<pre><code>[1] 5</code></pre>
<p>En l‚Äôoccurence il s‚Äôagirait d‚Äôune partition en 5 classes. Il est possible de modifier le minimum et le maximum des partitions recherch√©es avec <code>min</code> et <code>max</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">best.cutree</span>(arbre, <span class="dt">min =</span> <span class="dv">2</span>)</code></pre></div>
<pre><code>[1] 2</code></pre>
<p>On peut √©galement repr√©senter le graphique des pertes relatives d‚Äôinertie avec <code>graph=TRUE</code>. La meilleure partition selon ce crit√®re est repr√©sent√©e par un point noir et la seconde par un point gris.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">best.cutree</span>(arbre, <span class="dt">min =</span> <span class="dv">2</span>, <span class="dt">graph =</span> <span class="ot">TRUE</span>, <span class="dt">xlab =</span> <span class="st">"Nombre de classes"</span>, 
  <span class="dt">ylab =</span> <span class="st">"Inertie relative"</span>)</code></pre></div>
<p><img src="graphs/classification-ascendante-hierarchique/unnamed-chunk-14-1.png" title="" alt="" width="1050"/></p>
<pre><code>[1] 2</code></pre>
<figcaption>
Perte relative d‚Äôinertie selon le nombre de classes
</figcaption>
</figure>
<p>Un d√©coupage en deux classes minimise ce crit√®re. Cependant, si l‚Äôon souhaite r√©aliser une analyse un peu plus fine, un nombre de classes plus √©lev√© serait pertinent. Nous allons donc retenir un d√©coupage en cinq classes. Le d√©coupage s‚Äôeffectue avec la fonction <code data-pkg="stats">cutree</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">typo &lt;-<span class="st"> </span><span class="kw">cutree</span>(arbre, <span class="dv">5</span>)
<span class="kw">freq</span>(typo)</code></pre></div>
<pre><code>         n    % val%
[1] 1 1031 51.5 51.5
[2] 2  164  8.2  8.2
[3] 3  553 27.7 27.7
[4] 4  205 10.2 10.2
[5] 5   47  2.4  2.4
NA       0  0.0   NA</code></pre>
<p>La typologie obtenue peut √™tre repr√©sent√©e dans le plan factoriel avec <code data-pkg="ade4">s.class</code>.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">par</span>(<span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>))
<span class="kw">library</span>(RColorBrewer)
<span class="kw">s.class</span>(acm$li, <span class="kw">as.factor</span>(typo), <span class="dt">col =</span> <span class="kw">brewer.pal</span>(<span class="dv">5</span>, 
  <span class="st">"Set1"</span>), <span class="dt">sub =</span> <span class="st">"Axes 1 et 2"</span>)
<span class="kw">s.class</span>(acm$li, <span class="kw">as.factor</span>(typo), <span class="dv">3</span>, <span class="dv">4</span>, <span class="dt">col =</span> <span class="kw">brewer.pal</span>(<span class="dv">5</span>, 
  <span class="st">"Set1"</span>), <span class="dt">sub =</span> <span class="st">"Axes 3 et 4"</span>)</code></pre></div>
<p><img src="graphs/classification-ascendante-hierarchique/unnamed-chunk-16-1.png" title="" alt="" width="1050"/></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">par</span>(<span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>))</code></pre></div>
<figcaption>
Projection de la typologie obtenue par CAH selon les 4 premiers axes
</figcaption>
</figure>
<div class="note">
<p>De nombreuses possibilit√©s graphiques sont possibles avec les dendrogrammes. Des exemples document√©s sont disponibles √† cette adresse¬†: <a href="http://rpubs.com/gaston/dendrograms" class="uri">http://rpubs.com/gaston/dendrograms</a>.</p>
<p>Romain Fran√ßois a developp√© une fonction <code data-pkg="JLutils">A2Rplot</code> permettant de r√©aliser facilement un dendrogramme avec les branches color√©es<a href="#classification-ascendante-hierarchique_fn5" class="footnoteRef" id="classification-ascendante-hierarchique_fnref5"><sup>5</sup></a>. Par commodit√©, cette fonction est disponible directement au sein de l‚Äôextension <code class="pkg">JLutils</code>.</p>
<p>Pour r√©aliser le graphique, on indiquera le nombre de classes et les couleurs √† utiliser pour chaque branche de l‚Äôarbre¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">A2Rplot</span>(arbre, <span class="dt">k =</span> <span class="dv">5</span>, <span class="dt">boxes =</span> <span class="ot">FALSE</span>, <span class="dt">col.up =</span> <span class="st">"gray50"</span>, 
  <span class="dt">col.down =</span> <span class="kw">brewer.pal</span>(<span class="dv">5</span>, <span class="st">"Dark2"</span>), <span class="dt">show.labels =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p><img src="graphs/classification-ascendante-hierarchique/unnamed-chunk-17-1.png" title="" alt="" width="1050"/></p>
<p>On pourra aussi noter l‚Äôextension <code class="pkg">ggdendro</code> pour repr√©senter des dendrogrammes avec <code class="pkg">ggplot2</code> ou encore l‚Äôextension <code class="pkg">dendextend</code> qui permet de manipuler, repr√©senter et comparer des dendrogrammes<a href="#classification-ascendante-hierarchique_fn6" class="footnoteRef" id="classification-ascendante-hierarchique_fnref6"><sup>6</sup></a>.</p>
</div>
</div>
<div id="classification-ascendante-hierarchique_factominer" class="section level2">
<h2>CAH avec l‚Äôextension FactoMineR</h2>
<p>L‚Äôextension <code class="pkg">FactoMineR</code> fournit une fonction <code data-pkg="FactoMineR">HCPC</code> permettant de r√©aliser une classification hi√©rarchique √† partir du r√©sultats d‚Äôune analyse factorielle r√©alis√©e avec la m√™me extension (voir la <a href="#classification-ascendante-hierarchique_factominer">section d√©di√©e du chapitre sur l‚ÄôACM</a>).</p>
<p><code data-pkg="FactoMineR">HCPC</code> r√©alise √† la fois le calcul de la matrice des distances, du dendrogramme et le partitionnement de la population en classes. Par d√©faut, <code data-pkg="FactoMineR">HCPC</code> calcule le dendrogramme √† partir du carr√© des distances du Œ¶¬≤ et avec la m√©thode de Ward.</p>
<p>Par d√©faut, l‚Äôarbre est affich√© √† l‚Äô√©cran et l‚Äôarbre sera coup√© selon la partition ayant la plus grande perte relative d‚Äôinertie (comme avec <code data-pkg="JLutils">best.cutree</code>). Utilisez <code>graph=FALSE</code> pour ne pas afficher le graphique et l‚Äôargument <code>nb.clust</code> pour indiquer le nombre de classes d√©sir√©es.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(FactoMineR)
acm2 &lt;-<span class="st"> </span><span class="kw">MCA</span>(d2[<span class="kw">complete.cases</span>(d2), ], <span class="dt">ncp =</span> <span class="dv">5</span>, <span class="dt">graph =</span> <span class="ot">FALSE</span>)
cah &lt;-<span class="st"> </span><span class="kw">HCPC</span>(acm2)</code></pre></div>
<img src="graphs/classification-ascendante-hierarchique/unnamed-chunk-18-1.png" title="" alt="" width="1050"/>
<figcaption>
Graphique produit par HCPC
</figcaption>
</figure>
<p>On pourra repr√©senter le dendrogramme avec <code data-pkg="FactoMineR" data-rdoc="plot.HCPC">plot</code> et l‚Äôargument <code>choice="tree"</code>.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(cah, <span class="dt">choice =</span> <span class="st">"tree"</span>)</code></pre></div>
<img src="graphs/classification-ascendante-hierarchique/unnamed-chunk-19-1.png" title="" alt="" width="1050"/>
<figcaption>
Dendrogramme obtenu avec HCPC (5 axes)
</figcaption>
</figure>
<p>Il apparait que le dendrogramme obtenu avec <code data-pacakge="FactoMineR">HCPC</code> diff√®re de celui que nous avons calcul√© pr√©c√©demment en utilisant la matrice des distances fournies par <code data-pkg="ade4">dist.dudi</code>. Cela est d√ª au fait que <code data-pkg="FactoMineR">HCPC</code> proc√®de diff√©rement pour calculer la matrice des distances en ne prenant en compte que les axes retenus dans le cadre de l‚ÄôACM. Pour rappel, nous avions retenu que 5 axes dans le cadre de notre ACM¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">acm2 &lt;-<span class="st"> </span><span class="kw">MCA</span>(d2[<span class="kw">complete.cases</span>(d2), ], <span class="dt">ncp =</span> <span class="dv">5</span>, <span class="dt">graph =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p><code data-pkg="FactoMineR">HCPC</code> n‚Äôa donc pris en compte que ces 5 premiers axes pour calculer les distances entre les individus, consid√©rant que les autres axes n‚Äôapportent que du ¬´¬†bruit¬†¬ª rendant la classification instable. Cependant, comme le montre <code>summary(acm2)</code>, nos cinq premiers axes n‚Äôexpliquent que 54¬†% de la variance. Il usuellement pr√©f√©rable de garder un plus grande nombre d‚Äôaxes afin de couvrir au moins 80 √† 90¬†% de la variance<a href="#classification-ascendante-hierarchique_fn7" class="footnoteRef" id="classification-ascendante-hierarchique_fnref7"><sup>7</sup></a>. De son c√¥t√©, <code data-pkg="ade4">dist.dudi</code> prends en compte l‚Äôensemble des axes pour calculer la matrice des distances. On peut reproduire cela avec <code class="pkg">FactoMineR</code> en indiquant <code>ncp=Inf</code> lors du calcul de l‚ÄôACM.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">acm2 &lt;-<span class="st"> </span><span class="kw">MCA</span>(d2[<span class="kw">complete.cases</span>(d2), ], <span class="dt">ncp =</span> <span class="ot">Inf</span>, <span class="dt">graph =</span> <span class="ot">FALSE</span>)
cah &lt;-<span class="st"> </span><span class="kw">HCPC</span>(acm2, <span class="dt">nb.clust =</span> -<span class="dv">1</span>, <span class="dt">graph =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p>On obtient bien cette fois-ci le m√™me r√©sultat.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(cah, <span class="dt">choice =</span> <span class="st">"tree"</span>)</code></pre></div>
<img src="graphs/classification-ascendante-hierarchique/unnamed-chunk-22-1.png" title="" alt="" width="1050"/>
<figcaption>
Dendrogramme obtenu avec HCPC (tous les axes)
</figcaption>
</figure>
<p>D‚Äôautres graphiques sont disponibles, en faisant varier la valeur de l‚Äôargument <code>choice</code>¬†:</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(cah, <span class="dt">choice =</span> <span class="st">"3D.map"</span>)</code></pre></div>
<img src="graphs/classification-ascendante-hierarchique/unnamed-chunk-23-1.png" title="" alt="" width="1050"/>
<figcaption>
Repr√©sentation en 3 dimensions du dendrogramme
</figcaption>
</figure>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(cah, <span class="dt">choice =</span> <span class="st">"bar"</span>)</code></pre></div>
<img src="graphs/classification-ascendante-hierarchique/unnamed-chunk-24-1.png" title="" alt="" width="1050"/>
<figcaption>
Gains d‚Äôinertie
</figcaption>
</figure>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(cah, <span class="dt">choice =</span> <span class="st">"map"</span>)</code></pre></div>
<img src="graphs/classification-ascendante-hierarchique/unnamed-chunk-25-1.png" title="" alt="" width="1050"/>
<figcaption>
Projection des cat√©gories sur le plan factoriel
</figcaption>
</figure>
<p>L‚Äôobjet renvoy√© par <code data-pkg="FactoMineR">HCPC</code> contient de nombreuses informations. La partition peut notamment √™tre r√©cup√©r√©e avec <code>cah$data.clust$clust</code>. Il y a √©galement diverses statistiques pour d√©crire les cat√©gories.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cah</code></pre></div>
<pre><code>**Results for the Hierarchical Clustering on Principal Components**
   name                   
1  "$data.clust"          
2  "$desc.var"            
3  "$desc.var$test.chi2"  
4  "$desc.axes$category"  
5  "$desc.axes"           
6  "$desc.axes$quanti.var"
7  "$desc.axes$quanti"    
8  "$desc.ind"            
9  "$desc.ind$para"       
10 "$desc.ind$dist"       
11 "$call"                
12 "$call$t"              
   description                                              
1  "dataset with the cluster of the individuals"            
2  "description of the clusters by the variables"           
3  "description of the cluster var. by the categorical var."
4  "description of the clusters by the categories."         
5  "description of the clusters by the dimensions"          
6  "description of the cluster var. by the axes"            
7  "description of the clusters by the axes"                
8  "description of the clusters by the individuals"         
9  "parangons of each clusters"                             
10 "specific individuals"                                   
11 "summary statistics"                                     
12 "description of the tree"                                </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">freq</span>(cah$data.clust$clust)</code></pre></div>
<pre><code>     n    % val%
1  490 26.0 27.6
2  189 10.0 10.6
3  984 52.2 55.3
4   74  3.9  4.2
5   41  2.2  2.3
NA 108  5.7   NA</code></pre>
</div>
<div class="footnotes">
<hr/>
<ol>
<li id="classification-ascendante-hierarchique_fn1"><p>Pour une pr√©sentation de ces diff√©rentes distances, on pourra se r√©f√©rer √† <a href="http://old.biodiversite.wallonie.be/outils/methodo/similarite_distance.htm" class="uri">http://old.biodiversite.wallonie.be/outils/methodo/similarite_distance.htm</a> ou encore √† ce support de cours par D. Chessel, J. Thioulouse et A.B. Dufour disponible √† <a href="http://pbil.univ-lyon1.fr/R/pdf/stage7.pdf" class="uri">http://pbil.univ-lyon1.fr/R/pdf/stage7.pdf</a>.<a href="#classification-ascendante-hierarchique_fnref1">‚Ü©</a></p></li>
<li id="classification-ascendante-hierarchique_fn2"><p>Cette m√™me fonction peut aussi √™tre utilis√©e pour calculer une distance apr√®s une analyse en composantes principales ou une analyse mixte de Hill et Smith.<a href="#classification-ascendante-hierarchique_fnref2">‚Ü©</a></p></li>
<li id="classification-ascendante-hierarchique_fn3"><p>On pourra consulter le cours de FG Carpentier d√©j√† cit√© ou bien des ouvrages d‚Äôanalyse statistique.<a href="#classification-ascendante-hierarchique_fnref3">‚Ü©</a></p></li>
<li id="classification-ascendante-hierarchique_fn4"><p>Depuis la version 3.1 de <strong>R</strong>.<a href="#classification-ascendante-hierarchique_fnref4">‚Ü©</a></p></li>
<li id="classification-ascendante-hierarchique_fn5"><p>Voir <a href="http://addicted2or.free.fr/packages/A2R/lastVersion/R/code.R" class="uri">http://addicted2or.free.fr/packages/A2R/lastVersion/R/code.R</a>.<a href="#classification-ascendante-hierarchique_fnref5">‚Ü©</a></p></li>
<li id="classification-ascendante-hierarchique_fn6"><p>Pour une pr√©sentation succincte, voir par exemple <a href="http://www.r-bloggers.com/dendextend-version-1-0-1-user2015-presentation/" class="uri">http://www.r-bloggers.com/dendextend-version-1-0-1-user2015-presentation/</a> (en anglais).<a href="#classification-ascendante-hierarchique_fnref6">‚Ü©</a></p></li>
<li id="classification-ascendante-hierarchique_fn7"><p>Voir <a href="http://factominer.free.fr/classical-methods/classification-hierarchique-sur-composantes-principales.html" class="uri">http://factominer.free.fr/classical-methods/classification-hierarchique-sur-composantes-principales.html</a><a href="#classification-ascendante-hierarchique_fnref7">‚Ü©</a></p></li>
</ol>
</div>

</article>
<article id="modeles-lineaires-a-effets-mixtes">

<div class="fluid-row" id="modeles-lineaires-a-effets-mixtes_header">


<h1 class="title">Mod√®les lin√©aires √† effets mixtes</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>

</article>
<article id="modeles-gee">

<div class="fluid-row" id="modeles-gee_header">


<h1 class="title">Mod√®les GEE</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>

</article>
<article id="series-temporelles">

<div class="fluid-row" id="series-temporelles_header">


<h1 class="title">S√©ries temporelles</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>

</article>
<article id="modeles-a-temps-discret">

<div class="fluid-row" id="modeles-a-temps-discret_header">


<h1 class="title">Mod√®les √† temps discret</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>

</article>
<article id="analyse-de-survie">

<div class="fluid-row" id="analyse-de-survie_header">


<h1 class="title">Analyse de survie</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>

</article>
<article id="analyse-de-sequences">

<div class="fluid-row" id="analyse-de-sequences_header">


<h1 class="title">Analyse de s√©quences</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#analyse-de-sequences_lanalyse-de-sequences">L‚Äôanalyse de s√©quences</a></li>
<li><a href="#analyse-de-sequences_installer-traminer-et-recuperer-les-donnees">Installer TraMineR et r√©cup√©rer les donn√©es</a></li>
<li><a href="#analyse-de-sequences_appariement-optimal-et-classification">Appariement optimal et classification</a></li>
<li><a href="#analyse-de-sequences_representations-graphiques">Repr√©sentations graphiques</a></li>
<li><a href="#analyse-de-sequences_bibliographie">Bibliographie</a></li>
</ul>
</div>

<div class="note">
<p>La version originale de ce chapitre est une reprise, avec l‚Äôaimable autorisation de son auteur, d‚Äôun article de Nicolas Robette intitul√© <em>L‚Äôanalyse de s√©quences¬†: une introduction avec le logiciel R et le package TraMineR</em> et publi√© sur le blog Quanti (<a href="http://quanti.hypotheses.org/686/" class="uri">http://quanti.hypotheses.org/686/</a>).</p>
</div>
<p>Depuis les ann√©es 1980, l‚Äô√©tude quantitative des <dfn data-index="trajectoire biographique">trajectoires biographiques</dfn> (<dfn lang="en">life course analysis</dfn>) a pris une ampleur consid√©rable dans le champ des sciences sociales. Les collectes de donn√©es micro-individuelles longitudinales se sont d√©velopp√©es, principalement sous la forme de panels ou d‚Äôenqu√™tes r√©trospectives. Parall√®lement √† cette multiplication des donn√©es disponibles, la m√©thodologie statistique a connu de profondes √©volutions. L‚Äô<dfn>analyse des biographies</dfn><dfn data-index="biographie, analyse"/> (<dfn lang="en">event history analysis</dfn>) ‚Äî qui ajoute une dimension diachronique aux mod√®les √©conom√©triques mainstream ‚Äî s‚Äôest rapidement impos√©e comme l‚Äôapproche dominante¬†: il s‚Äôagit de mod√©liser la dur√©e des situations ou le risque d‚Äôoccurrence des √©v√©nements.</p>
<div id="analyse-de-sequences_lanalyse-de-sequences" class="section level2">
<h2>L‚Äôanalyse de s√©quences</h2>
<p>Cependant, ces derni√®res ann√©es ont vu la diffusion d‚Äôun large corpus de m√©thodes descriptives d‚Äô<dfn>analyse de s√©quences</dfn><dfn data-index="s√©quence, analyse"/>, au sein desquelles l‚Äô<dfn>appariement optimal</dfn><dfn data-index="optimal, appariement"/> (<dfn lang="en">optimal matching</dfn><dfn data-index="matching, optimal" lang="en"/>) occupe une place centrale<a href="#analyse-de-sequences_fn1" class="footnoteRef" id="analyse-de-sequences_fnref1"><sup>1</sup></a>. L‚Äôobjectif principal de ces m√©thodes est d‚Äôidentifier ‚Äî dans la diversit√© d‚Äôun corpus de s√©quences constitu√©es de s√©ries d‚Äô√©tats successifs ‚Äî les r√©gularit√©s, les ressemblances, puis le plus souvent de construire des typologies de ¬´¬†s√©quences-types¬†¬ª. L‚Äôanalyse de s√©quences constitue donc un moyen de d√©crire mais aussi de mieux comprendre le d√©roulement de divers processus.</p>
<p>La majeure partie des applications de l‚Äôanalyse de s√©quences traite de trajectoires biographiques ou de carri√®res professionnelles. Dans ces cas, chaque trajectoire ou chaque carri√®re est d√©crite par une s√©quence, autrement dit par une suite chronologiquement ordonn√©e de ¬´¬†moments¬†¬ª √©l√©mentaires, chaque moment correspondant √† un ¬´¬†√©tat¬†¬ª d√©termin√© de la trajectoire (par exemple, pour les carri√®res professionnelles¬†: √™tre en emploi, au ch√¥mage ou en inactivit√©). Mais on peut bien s√ªr imaginer des types de s√©quences plus originaux¬†: Andrew Abbott<a href="#analyse-de-sequences_fn2" class="footnoteRef" id="analyse-de-sequences_fnref2"><sup>2</sup></a>, le sociologue am√©ricain qui a introduit l‚Äô<em>optimal matching</em> dans les sciences scientifiques ou des s√©quences de pas de danses traditionnelles.</p>
<p>En France, les premiers travaux utilisant l‚Äôappariement optimal sont ceux de Claire Lemercier<a href="#analyse-de-sequences_fn3" class="footnoteRef" id="analyse-de-sequences_fnref3"><sup>3</sup></a> sur les carri√®res des membres des institutions consulaires parisiennes au <span style="font-variant: small-caps;">xix</span><sup>e</sup> si√®cle (Lemercier, 2005), et de Laurent Lesnard<a href="#analyse-de-sequences_fn4" class="footnoteRef" id="analyse-de-sequences_fnref4"><sup>4</sup></a> sur les emplois du temps (Lesnard, 2008). Mais d√®s les ann√©es 1980, les chercheurs du C√©req construisaient des typologies de trajectoires d‚Äôinsertion √† l‚Äôaide des m√©thodes d‚Äôanalyse des donn√©es ¬´¬†√† la fran√ßaise¬†¬ª (analyse des correspondances, etc.)<a href="#analyse-de-sequences_fn5" class="footnoteRef" id="analyse-de-sequences_fnref5"><sup>5</sup></a>. Au final, on d√©nombre maintenant plus d‚Äôune centaine d‚Äôarticles de sciences sociales contenant ou discutant des techniques emprunt√©es √† l‚Äôanalyse de s√©quences.</p>
<p>Pour une pr√©sentation des diff√©rentes m√©thodes d‚Äôanalyse de s√©quences disponibles et de leur mise en oeuvre pratique, il existe un petit manuel en fran√ßais, publi√© en 2011 derni√®re aux √©ditions du Ceped (collection ¬´¬†Les clefs pour¬†¬ª<a href="#analyse-de-sequences_fn6" class="footnoteRef" id="analyse-de-sequences_fnref6"><sup>6</sup></a>) et disponible en pdf<a href="#analyse-de-sequences_fn7" class="footnoteRef" id="analyse-de-sequences_fnref7"><sup>7</sup></a> (Robette, 2011). De plus, un article r√©cemment publi√© dans le <em>Bulletin de M√©thodologie Sociologique</em> compare de mani√®re syst√©matique les r√©sultats obtenus par les principales m√©thodes d‚Äôanalyse de s√©quences (Robette &amp; Bry, 2012). La conclusion en est qu‚Äôavec des donn√©es empiriques aussi structur√©es que celles que l‚Äôon utilise en sciences sociales, l‚Äôapproche est robuste, c‚Äôest-√†-dire qu‚Äôun changement de m√©thode aura peu d‚Äôinfluence sur les principaux r√©sultats. Cependant, l‚Äôarticle tente aussi de d√©crire les sp√©cificit√©s de chaque m√©thode et les diff√©rences marginales qu‚Äôelles font appara√Ætre, afin de permettre aux chercheurs de mieux adapter leurs choix m√©thodologiques √† leur question de recherche.</p>
<p>Afin d‚Äôillustrer la d√©marche de l‚Äôanalyse de s√©quences, nous allons proc√©der ici √† la description ¬´¬†pas √† pas¬†¬ª d‚Äôun corpus de carri√®res professionnelles, issues de l‚Äôenqu√™te <em>Biographies et entourage</em> (Ined, 2000)<a href="#analyse-de-sequences_fn8" class="footnoteRef" id="analyse-de-sequences_fnref8"><sup>8</sup></a>. Et pour ce faire, on va utiliser le logiciel <strong>R</strong>, qui propose la solution actuellement la plus compl√®te et la plus puissante en mati√®re d‚Äôanalyse de s√©quences. Les m√©thodes d‚Äôanalyse de s√©quences par analyses factorielles ou de correspondances ne n√©cessitent pas de logiciel sp√©cifique¬†: tous les logiciels de statistiques g√©n√©ralistes peuvent √™tre utilis√©s (<strong>SAS</strong>, <strong>SPSS</strong>, <strong>Stata</strong>, <strong>R</strong>, etc.). En revanche, il n‚Äôexiste pas de fonctions pour l‚Äôappariement optimal dans <strong>SAS</strong> ou <strong>SPSS</strong>. Certains logiciels gratuits impl√©mentent l‚Äôappariement optimal (comme <strong>Chesa</strong><a href="#analyse-de-sequences_fn9" class="footnoteRef" id="analyse-de-sequences_fnref9"><sup>9</sup></a> ou <strong>TDA</strong><a href="#analyse-de-sequences_fn10" class="footnoteRef" id="analyse-de-sequences_fnref10"><sup>10</sup></a>) mais il faut alors recourir √† d‚Äôautres programmes pour d√©rouler l‚Äôensemble de l‚Äôanalyse (classification, repr√©sentation graphique). <strong>Stata</strong> propose le module <strong>sq</strong><a href="#analyse-de-sequences_fn11" class="footnoteRef" id="analyse-de-sequences_fnref11"><sup>11</sup></a>, qui dispose d‚Äôun √©ventail de fonctions int√©ressantes. Mais c‚Äôest <strong>R</strong> et le package <code class="pkg">TraMineR</code><a href="#analyse-de-sequences_fn12" class="footnoteRef" id="analyse-de-sequences_fnref12"><sup>12</sup></a>, d√©velopp√© par des coll√®gues de l‚ÄôUniversit√© de Gen√®ve (Gabadinho et al, 2011), qui fournit la solution la plus compl√®te et la plus puissante √† ce jour¬†: on y trouve l‚Äôappariement optimal mais aussi d‚Äôautres algorithmes alternatifs, ainsi que de nombreuses fonctions de description des s√©quences et de repr√©sentation graphique.</p>
</div>
<div id="analyse-de-sequences_installer-traminer-et-recuperer-les-donnees" class="section level2">
<h2>Installer TraMineR et r√©cup√©rer les donn√©es</h2>
<p>Tout d‚Äôabord, √† quoi ressemblent nos donn√©es¬†? On a reconstruit √† partir de l‚Äôenqu√™te les carri√®res de 1000 hommes. Pour chacune, on conna√Æt la position professionnelle chaque ann√©e, de l‚Äô√¢ge de 14 ans jusqu‚Äô√† 50 ans. Cette position est cod√©e de la mani√®re suivante¬†: les codes 1 √† 6 correspondent aux groupes socioprofessionnels de la nomenclature des PCS de l‚ÄôINSEE 13 (agriculteurs exploitants¬†; artisans, commer√ßants et chefs d‚Äôentreprise¬†; cadres et professions intellectuelles sup√©rieures¬†; professions interm√©diaires¬†; employ√©s¬†; ouvriers)¬†; on y a ajout√© ¬´¬†√©tudes¬†¬ª (code 7), ¬´¬†inactivit√©¬†¬ª (code 8) et ¬´¬†service militaire¬†¬ª (code 9). Le fichier de donn√©es comporte une ligne par individu et une colonne par ann√©e¬†: la variable <em>csp1</em> correspond √† la position √† 14 ans, la variable <em>csp2</em> √† la position √† 15 ans, etc. Par ailleurs, les enqu√™t√©s √©tant tous n√©s entre 1930 et 1950, on ajoute √† notre base une variable ¬´¬†g√©n√©ration¬†¬ª √† trois modalit√©s, prenant les valeurs suivantes¬†: 1=‚Äú1930-1938‚Äù¬†; 2=‚Äú1939-1945‚Äù¬†; 3=‚Äú1946-1950‚Äù. Au final, la base est constitu√©e de 500 lignes et de 37¬†+¬†1¬†=¬†38 colonnes et se pr√©sente sous la forme d‚Äôun fichier texte au format <strong>csv</strong> (t√©l√©chargeable √† <a href="http://larmarange.github.io/analyse-R/data/trajpro.csv" class="uri">http://larmarange.github.io/analyse-R/data/trajpro.csv</a>).</p>
<p>Une fois <strong>R</strong> ouvert, on commence par installer les extensions n√©cessaires √† ce programme (op√©ration √† ne r√©aliser que lors de leur premi√®re utilisation) et par les charger en m√©moire. L‚Äôextension <code class="pkg">TraMineR</code> propose de nombreuses fonctions pour l‚Äôanalyse de s√©quences. L‚Äôextension <code class="pkg">cluster</code> comprend un certain nombre de m√©thodes de classification automatique<a href="#analyse-de-sequences_fn13" class="footnoteRef" id="analyse-de-sequences_fnref13"><sup>13</sup></a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="kw">c</span>(<span class="st">"TraMineR"</span>))</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(TraMineR)</code></pre></div>
<pre><code>
TraMineR stable version 1.8-9 (Built: 2015-06-20)
Website: http://mephisto.unige.ch/traminer
Please type 'citation("TraMineR")' for citation information.</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(cluster)</code></pre></div>
<p>On importe ensuite les donn√©es, on recode la variable ¬´¬†g√©n√©ration¬†¬ª pour lui donner des √©tiquettes plus explicites. On jette √©galement un coup d‚Äôoeil √† la structure du tableau de donn√©es¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">donnees &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">"http://larmarange.github.io/analyse-R/data/trajpro.csv"</span>, 
  <span class="dt">header =</span> T)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">donnees$generation &lt;-<span class="st"> </span><span class="kw">factor</span>(donnees$generation, <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">"1930-38"</span>, 
  <span class="st">"1939-45"</span>, <span class="st">"1946-50"</span>))
<span class="kw">str</span>(donnees)</code></pre></div>
<pre><code>'data.frame':   1000 obs. of  38 variables:
 $ csp1      : int  1 7 6 7 7 6 7 7 7 6 ...
 $ csp2      : int  1 7 6 7 7 6 7 7 6 6 ...
 $ csp3      : int  1 7 6 6 7 6 7 7 6 6 ...
 $ csp4      : int  1 7 6 6 7 6 7 7 6 6 ...
 $ csp5      : int  1 7 6 6 7 6 7 7 6 6 ...
 $ csp6      : int  1 7 6 6 7 6 9 7 6 6 ...
 $ csp7      : int  6 9 6 6 7 6 9 7 9 6 ...
 $ csp8      : int  6 9 9 6 7 6 9 7 4 6 ...
 $ csp9      : int  6 6 9 6 7 6 9 3 4 9 ...
 $ csp10     : int  6 6 9 6 7 6 4 3 4 9 ...
 $ csp11     : int  6 6 6 6 3 6 4 3 4 6 ...
 $ csp12     : int  6 6 6 6 3 6 4 3 4 6 ...
 $ csp13     : int  6 6 6 6 3 6 4 3 4 6 ...
 $ csp14     : int  6 4 6 6 3 6 4 3 4 6 ...
 $ csp15     : int  6 4 6 6 3 6 4 3 4 6 ...
 $ csp16     : int  6 4 6 6 3 6 6 3 4 6 ...
 $ csp17     : int  6 4 6 6 3 6 6 3 4 6 ...
 $ csp18     : int  6 4 6 6 3 6 6 3 4 6 ...
 $ csp19     : int  6 4 6 6 3 6 6 3 4 6 ...
 $ csp20     : int  6 4 6 6 3 6 6 3 4 6 ...
 $ csp21     : int  6 4 6 6 6 6 6 3 4 6 ...
 $ csp22     : int  6 4 6 6 6 6 6 3 4 4 ...
 $ csp23     : int  6 4 6 6 6 6 6 3 4 4 ...
 $ csp24     : int  6 6 6 6 5 6 6 3 4 4 ...
 $ csp25     : int  6 6 6 6 5 6 6 3 4 4 ...
 $ csp26     : int  6 6 6 6 5 6 6 3 4 4 ...
 $ csp27     : int  6 6 6 6 5 6 6 3 4 4 ...
 $ csp28     : int  6 6 6 6 5 6 6 3 4 4 ...
 $ csp29     : int  6 6 6 6 5 6 6 3 4 4 ...
 $ csp30     : int  4 6 6 6 5 6 6 3 4 4 ...
 $ csp31     : int  4 6 6 6 5 6 6 3 4 4 ...
 $ csp32     : int  4 6 6 6 5 6 6 3 4 4 ...
 $ csp33     : int  4 6 6 6 5 6 6 3 4 4 ...
 $ csp34     : int  4 6 6 6 5 6 6 3 4 4 ...
 $ csp35     : int  4 6 6 6 5 6 6 3 4 4 ...
 $ csp36     : int  4 6 6 6 5 6 6 3 4 4 ...
 $ csp37     : int  4 6 6 6 5 6 6 3 4 4 ...
 $ generation: Factor w/ 3 levels "1930-38","1939-45",..: 2 1 1 3 2 3 1 1 2 1 ...</code></pre>
<p>On a bien 1000 observations et 38 variables. On d√©finit maintenant des <em>labels</em> pour les diff√©rents √©tats qui composent les s√©quences et on cr√©e un objet ¬´¬†s√©quence¬†¬ª avec <code data-pkg="TraMineR">seqdef</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">labels &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"agric"</span>, <span class="st">"acce"</span>, <span class="st">"cadr"</span>, <span class="st">"pint"</span>, <span class="st">"empl"</span>, 
  <span class="st">"ouvr"</span>, <span class="st">"etud"</span>, <span class="st">"inact"</span>, <span class="st">"smil"</span>)
seq &lt;-<span class="st"> </span><span class="kw">seqdef</span>(donnees[, <span class="dv">1</span>:<span class="dv">37</span>], <span class="dt">states =</span> labels)</code></pre></div>
<pre><code> [&gt;] state coding:
       [alphabet]  [label]  [long label] 
     1  1           agric    agric
     2  2           acce     acce
     3  3           cadr     cadr
     4  4           pint     pint
     5  5           empl     empl
     6  6           ouvr     ouvr
     7  7           etud     etud
     8  8           inact    inact
     9  9           smil     smil
 [&gt;] 1000 sequences in the data set
 [&gt;] min/max sequence length: 37/37</code></pre>
</div>
<div id="analyse-de-sequences_appariement-optimal-et-classification" class="section level2">
<h2>Appariement optimal et classification</h2>
<p>Ces √©tapes pr√©alables achev√©es, on peut comparer les s√©quences en calculant les dissimilarit√©s entre paires de s√©quences. On va ici utiliser la m√©thode la plus r√©pandue, l‚Äôappariement optimal (<em>optimal matching</em>). Cette m√©thode consiste, pour chaque paire de s√©quences, √† compter le nombre minimal de modifications (substitutions, suppressions, insertions) qu‚Äôil faut faire subir √† l‚Äôune des s√©quences pour obtenir l‚Äôautre. On peut consid√©rer que chaque modification est √©quivalente, mais il est aussi possible de prendre en compte le fait que les ¬´¬†distances¬†¬ª entre les diff√©rents √©tats n‚Äôont pas toutes la m√™me ¬´¬†valeur¬†¬ª (par exemple, la distance sociale entre emploi √† temps plein et ch√¥mage est plus grande qu‚Äôentre emploi √† temps plein et emploi √† temps partiel), en assignant aux diff√©rentes modifications des ¬´¬†co√ªts¬†¬ª distincts. Dans notre exemple, on va cr√©er avec <code data-pkg="TraMineR">seqsubm</code> une ¬´¬†matrice des co√ªts de substitution¬†¬ª dans laquelle tous les co√ªts sont constants et √©gaux √† 2<a href="#analyse-de-sequences_fn14" class="footnoteRef" id="analyse-de-sequences_fnref14"><sup>14</sup></a>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">couts &lt;-<span class="st"> </span><span class="kw">seqsubm</span>(seq, <span class="dt">method =</span> <span class="st">"CONSTANT"</span>, <span class="dt">cval =</span> <span class="dv">2</span>)</code></pre></div>
<pre><code> [&gt;] creating 9x9 substitution-cost matrix using 2 as constant value</code></pre>
<p>Ensuite, on calcule la <dfn>matrice de distances</dfn><dfn data-index="distance, matrice"/> entre les s√©quences (i.e contenant les ¬´¬†dissimilarit√©s¬†¬ª entre les s√©quences) avec <code data-pkg="TraMineR">seqdist</code>, avec un co√ªt d‚Äôinsertion/suppression (<em>indel</em>) que l‚Äôon fixe ici √† 1,1¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">seq.om &lt;-<span class="st"> </span><span class="kw">seqdist</span>(seq, <span class="dt">method =</span> <span class="st">"OM"</span>, <span class="dt">indel =</span> <span class="fl">1.1</span>, 
  <span class="dt">sm =</span> couts)</code></pre></div>
<pre><code> [&gt;] 1000 sequences with 9 distinct events/states
 [&gt;] 818 distinct sequences
 [&gt;] min/max sequence length: 37/37
 [&gt;] computing distances using OM metric
 [&gt;] total time: 1.78 secs</code></pre>
<p>Cette matrice des distances ou des dissimilarit√©s entre s√©quences peut ensuite √™tre utilis√©e pour une <dfn>classification ascendante hi√©rarchique</dfn> (<dfn>CAH</dfn>), qui permet de regrouper les s√©quences en un certain nombre de ¬´¬†classes¬†¬ª en fonction de leur proximit√©¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">seq.agnes &lt;-<span class="st"> </span><span class="kw">agnes</span>(<span class="kw">as.dist</span>(seq.om), <span class="dt">method =</span> <span class="st">"ward"</span>, 
  <span class="dt">keep.diss =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p>Avec la fonction <code data-pkg="stats" data-rdoc="dendrogram">plot</code>, il est possible de tracer l‚Äôarbre de la classification (<dfn>dendrogramme</dfn>).</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(<span class="kw">as.dendrogram</span>(seq.agnes), <span class="dt">leaflab =</span> <span class="st">"none"</span>)</code></pre></div>
<img src="graphs/analyse-de-sequences/unnamed-chunk-10-1.png" title="" alt="" width="1050"/>
<figcaption>
Dendrogramme de la classification des s√©quences
</figcaption>
</figure>
<p>De m√™me, on peut repr√©senter les <dfn data-index="saut d'inertie">sauts d‚Äôinertie</dfn>&lt;dfn data-index=‚Äúinertie, saut‚Äù.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(<span class="kw">sort</span>(seq.agnes$height, <span class="dt">decreasing =</span> <span class="ot">TRUE</span>)[<span class="dv">1</span>:<span class="dv">20</span>], 
  <span class="dt">type =</span> <span class="st">"s"</span>, <span class="dt">xlab =</span> <span class="st">"nb de classes"</span>, <span class="dt">ylab =</span> <span class="st">"inertie"</span>)</code></pre></div>
<img src="graphs/analyse-de-sequences/unnamed-chunk-11-1.png" title="" alt="" width="1050"/>
<figcaption>
Sauts d‚Äôinertie de la classification des s√©quences
</figcaption>
</figure>
<p>L‚Äôobservation, sur ce dendogramme ou sur la courbe des sauts d‚Äôinertie, des sauts d‚Äôinertie des derni√®res √©tapes de la classification peut servir de guide pour d√©terminer le nombre de classes que l‚Äôon va retenir pour la suite des analyses. Une premi√®re inflexion dans la courbe des sauts d‚Äôinertie appara√Æt au niveau d‚Äôune partition en 5 classes. On voit aussi une seconde inflexion assez nette √† 7 classes. Mais il faut garder en t√™te le fait que ces outils ne sont que des guides, le choix devant avant tout se faire apr√®s diff√©rents essais, en fonction de l‚Äôint√©r√™t des r√©sultats par rapport √† la question de recherche et en arbitrant entre exhaustivit√© et parcimonie.</p>
<p>On fait ici le choix d‚Äôune <dfn>partition</dfn> en 5 classes¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">nbcl &lt;-<span class="st"> </span><span class="dv">5</span>
seq.part &lt;-<span class="st"> </span><span class="kw">cutree</span>(seq.agnes, nbcl)
seq.part &lt;-<span class="st"> </span><span class="kw">factor</span>(seq.part, <span class="dt">labels =</span> <span class="kw">paste</span>(<span class="st">"classe"</span>, 
  <span class="dv">1</span>:nbcl, <span class="dt">sep =</span> <span class="st">"."</span>))</code></pre></div>
</div>
<div id="analyse-de-sequences_representations-graphiques" class="section level2">
<h2>Repr√©sentations graphiques</h2>
<p>Pour se faire une premi√®re id√©e de la nature des classes de la typologie, il existe un certain nombre de repr√©sentations graphiques. Les chronogrammes (<em>state distribution plots</em>) pr√©sentent une s√©rie de coupes transversales¬†: pour chaque √¢ge, on a les proportions d‚Äôindividus de la classe dans les diff√©rentes situations (agriculteur, √©tudiant, etc.). Ce graphique s‚Äôobtient avec <code data-pkg="TraMineR" data-rdoc="seqplot">seqdplot</code>¬†:</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seqdplot</span>(seq, <span class="dt">group =</span> seq.part, <span class="dt">xtlab =</span> <span class="dv">14</span>:<span class="dv">50</span>, <span class="dt">border =</span> <span class="ot">NA</span>, 
  <span class="dt">withlegend =</span> T)</code></pre></div>
<img src="graphs/analyse-de-sequences/unnamed-chunk-13-1.png" title="" alt="" width="1050"/>
<figcaption>
Chronogrammes
</figcaption>
</figure>
<p>Chacune des classes semble caract√©ris√©e par un groupe professionnel principal¬†: profession interm√©diaire pour la classe 1, ouvrier pour la 2, employ√© pour la 3, cadre pour la 4 et ind√©pendant pour la 5. Cependant, on aper√ßoit aussi des ¬´¬†couches¬†¬ª d‚Äôautres couleurs, indiquant que l‚Äôensemble des carri√®res ne sont probablement pas stables.</p>
<p>Les ¬´¬†<dfn dataindex="tapis des s√©quences">tapis</dfn><dfn data-index="s√©quence, tapis"/>¬†¬ª (<dfn lang="en">index plots</dfn>), obtenus avec <code data-pkg="TraMineR" data-rdoc="seqplot">seqiplot</code>, permettent de mieux visualiser la dimension individuelle des s√©quences. Chaque segment horizontal repr√©sente une s√©quence, d√©coup√©e en sous-segments correspondant aux aux diff√©rents √©tats successifs qui composent la s√©quence.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seqiplot</span>(seq, <span class="dt">group =</span> seq.part, <span class="dt">xtlab =</span> <span class="dv">14</span>:<span class="dv">50</span>, <span class="dt">tlim =</span> <span class="dv">0</span>, 
  <span class="dt">space =</span> <span class="dv">0</span>, <span class="dt">border =</span> <span class="ot">NA</span>, <span class="dt">withlegend =</span> T, <span class="dt">yaxis =</span> <span class="ot">FALSE</span>)</code></pre></div>
<img src="graphs/analyse-de-sequences/unnamed-chunk-14-1.png" title="" alt="" width="1050"/>
<figcaption>
Tapis des s√©quences tri√©s
</figcaption>
</figure>
<p>Il est possible de trier les s√©quences pour rendre les tapis plus lisibles (on trie ici par <dfn lang="en">multidimensional scaling</dfn> √† l‚Äôaide de la fonction <code data-pkg="stats">cmdscale</code>).</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ordre &lt;-<span class="st"> </span><span class="kw">cmdscale</span>(<span class="kw">as.dist</span>(seq.om), <span class="dt">k =</span> <span class="dv">1</span>)
<span class="kw">seqiplot</span>(seq, <span class="dt">group =</span> seq.part, <span class="dt">sortv =</span> ordre, <span class="dt">xtlab =</span> <span class="dv">14</span>:<span class="dv">50</span>, 
  <span class="dt">tlim =</span> <span class="dv">0</span>, <span class="dt">space =</span> <span class="dv">0</span>, <span class="dt">border =</span> <span class="ot">NA</span>, <span class="dt">withlegend =</span> T, 
  <span class="dt">yaxis =</span> <span class="ot">FALSE</span>)</code></pre></div>
<img src="graphs/analyse-de-sequences/unnamed-chunk-15-1.png" title="" alt="" width="1050"/>
<figcaption>
Tapis des s√©quences tri√©s par multidimensional scaling
</figcaption>
</figure>
<p>On voit mieux appara√Ætre ainsi l‚Äôh√©t√©rog√©n√©it√© de certaines classes. Les classes 1, 3 et 4, par exemple, semblent regrouper des carri√®res relativement stables (respectivement de professions interm√©diaires, d‚Äôemploy√©s et de cadres) et des carri√®res plus ¬´¬†mobiles¬†¬ª commenc√©es comme ouvrier (classes 1 et 3, en orange) ou comme profession interm√©diaire (classe 4, en rouge). De m√™me, la majorit√© des membres de la derni√®re classe commencent leur carri√®re dans un groupe professionnel distinct de celui qu‚Äôils occuperont par la suite (ind√©pendants). Ces distinctions apparaissent d‚Äôailleurs si on relance le programme avec un nombre plus √©lev√© de classes (en rempla√ßant le 5 de la ligne <code>nbcl &lt;- 5</code> par 7, seconde inflexion de la courbe des sauts d‚Äôinertie, et en ex√©cutant de nouveau le programme √† partir de cette ligne)¬†: les stables et les mobiles se trouvent alors dans des classes distinctes.</p>
<p>Le package <code class="pkg">JLutils</code>, disponible sur <a href="https://github.com/larmarange/JLutils"><strong>GitHub</strong></a>, propose une fonction <code data-pkg="JLutils">seq_heatmap</code> permettant de repr√©senter le tapis de l‚Äôensemble des s√©quences selon l‚Äôordre du dendrogramme.</p>
<p>Pour installer <code class="pkg">JLutils</code>, on aura recours au package <code class="pkg">devtools</code> et √† sa fonction <code data-pkg="devtools">install_github</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(devtools)
<span class="kw">install_github</span>(<span class="st">"larmarange/JLutils"</span>)</code></pre></div>
<p>On peut ensuite g√©n√©rer le graphique ainsi¬†:</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(JLutils)
<span class="kw">seq_heatmap</span>(seq, seq.agnes, <span class="dt">labCol =</span> <span class="dv">14</span>:<span class="dv">50</span>)</code></pre></div>
<img src="graphs/analyse-de-sequences/unnamed-chunk-17-1.png" title="" alt="" width="1050"/>
<figcaption>
Tapis des s√©quences tri√© selon le dendrogramme
</figcaption>
</figure>
<p>La distance moyenne des s√©quences d‚Äôune classe au centre de cette classe, obtenue avec <code data-pkg="TraMineR">disscenter</code>, permet de mesurer plus pr√©cis√©ment l‚Äô<dfn>homog√©n√©it√© des classes</dfn><dfn data-index="classe, homog√©n√©it√©"/>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">round</span>(<span class="kw">aggregate</span>(<span class="kw">disscenter</span>(<span class="kw">as.dist</span>(seq.om), <span class="dt">group =</span> seq.part), 
  <span class="kw">list</span>(seq.part), mean)[, -<span class="dv">1</span>], <span class="dv">1</span>)</code></pre></div>
<pre><code>[1] 13.1  8.9 15.6  9.7 16.5</code></pre>
<p>Cela nous confirme que les classes 1, 3 et 5 sont nettement plus h√©t√©rog√®nes que les autres, alors que la classe 2 est la plus homog√®ne.</p>
<p>D‚Äôautres repr√©sentations graphiques existent pour poursuivre l‚Äôexamen de la typologie. On peut visualiser les 10 s√©quences les plus fr√©quentes de chaque classe avec <code data-pkg="TraMineR" data-rdoc="seqplot">seqfplot</code>.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seqfplot</span>(seq, <span class="dt">group =</span> seq.part, <span class="dt">withlegend =</span> T)</code></pre></div>
<img src="graphs/analyse-de-sequences/unnamed-chunk-19-1.png" title="" alt="" width="1050"/>
<figcaption>
S√©quences les plus fr√©quentes de chaque classe
</figcaption>
</figure>
<p>On peut aussi visualiser avec <code data-pkg="TraMineR" data-rdoc="seqplot">seqmsplot</code> l‚Äô√©tat modal (celui qui correspond au plus grand nombre de s√©quences de la classe) √† chaque √¢ge.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seqmsplot</span>(seq, <span class="dt">group =</span> seq.part, <span class="dt">xtlab =</span> <span class="dv">14</span>:<span class="dv">50</span>, <span class="dt">withlegend =</span> T, 
  <span class="dt">title =</span> <span class="st">"classe"</span>)</code></pre></div>
<img src="graphs/analyse-de-sequences/unnamed-chunk-20-1.png" title="" alt="" width="1050"/>
<figcaption>
Statut modal √† chaque √¢ge
</figcaption>
</figure>
<p>On peut √©galement repr√©senter avec <code data-pkg="TraMineR" data-rdoc="seqplot">seqmtplot</code> les dur√©es moyennes pass√©es dans les diff√©rents √©tats.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seqmtplot</span>(seq, <span class="dt">group =</span> seq.part, <span class="dt">withlegend =</span> T)</code></pre></div>
<img src="graphs/analyse-de-sequences/unnamed-chunk-21-1.png" title="" alt="" width="1050"/>
<figcaption>
Dur√©e moyenne dans chaque statut
</figcaption>
</figure>
<p>Enfin, l‚Äô<dfn>entropie transversale</dfn><dfn data-index="transversale, entropie"/> d√©crit l‚Äô√©volution de l‚Äôhomog√©n√©it√© de la classe. Pour un √¢ge donn√©, une entropie proche de 0 signifie que tous les individus de la classe (ou presque) sont dans la m√™me situation. √Ä l‚Äôinverse, l‚Äôentropie est de 1 si les individus sont dispers√©s dans toutes les situations. Ce type de graphique produit par <code data-pkg="TraMineR" data-rdoc="seqplot">seqHtplot</code> peut √™tre pratique pour localiser les moments de transition, l‚Äôinsertion professionnelle ou une mobilit√© sociale ascendante.</p>
<figure>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">seqHtplot</span>(seq, <span class="dt">group =</span> seq.part, <span class="dt">xtlab =</span> <span class="dv">14</span>:<span class="dv">50</span>, <span class="dt">withlegend =</span> T)</code></pre></div>
<img src="graphs/analyse-de-sequences/unnamed-chunk-22-1.png" title="" alt="" width="1050"/>
<figcaption>
Entropie transversale
</figcaption>
</figure>
<p>On souhaite maintenant conna√Ætre la distribution de la typologie (en effectifs et en pourcentages)¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">freq</span>(seq.part)</code></pre></div>
<pre><code>           n    % val%
classe.1 280 28.0 28.0
classe.2 199 19.9 19.9
classe.3 114 11.4 11.4
classe.4 341 34.1 34.1
classe.5  66  6.6  6.6
NA         0  0.0   NA</code></pre>
<p>On poursuit ensuite la description des classes en croisant la typologie avec la variable <em>generation</em>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">cprop</span>(<span class="kw">table</span>(seq.part, donnees$generation))</code></pre></div>
<pre><code>          
seq.part   1930-38 1939-45 1946-50 Ensemble
  classe.1  25.6    27.1    31.0    28.0   
  classe.2  20.9    20.0    18.9    19.9   
  classe.3   7.9    13.6    12.9    11.4   
  classe.4  38.2    31.9    32.1    34.1   
  classe.5   7.4     7.5     5.2     6.6   
  Total    100.0   100.0   100.0   100.0   </code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">chisq.test</span>(<span class="kw">table</span>(seq.part, donnees$generation))</code></pre></div>
<pre><code>
    Pearson's Chi-squared test

data:  table(seq.part, donnees$generation)
X-squared = 12.032, df = 8, p-value = 0.1498</code></pre>
<p>Le lien entre le fait d‚Äôavoir un certain type de carri√®res et la cohorte de naissance est significatif √† un seuil de 15¬†%. On constate par exemple l‚Äôaugmentation continue de la proportion de carri√®res de type ¬´¬†professions interm√©diaires¬†¬ª (classe 1) et, entre les deux cohortes les plus anciennes, l‚Äôaugmentation de la part des carri√®res de type ¬´¬†employ√©s¬†¬ª (classe 3) et la baisse de la part des carri√®res de type ¬´¬†cadres¬†¬ª (classe 4).</p>
<p>Bien d‚Äôautres analyses sont envisageables¬†: croiser la typologie avec d‚Äôautres variables (origine sociale, etc.), construire l‚Äôespace des carri√®res possibles, √©tudier les interactions entre trajectoires familiales et professionnelles, analyser la variance des dissimilarit√©s entre s√©quences en fonction de plusieurs variables ¬´¬†explicatives<a href="#analyse-de-sequences_fn15" class="footnoteRef" id="analyse-de-sequences_fnref15"><sup>15</sup></a>¬†¬ª‚Ä¶</p>
<p>Mais l‚Äôexemple propos√© est sans doute bien suffisant pour une premi√®re introduction¬†!</p>
</div>
<div id="analyse-de-sequences_bibliographie" class="section level2">
<h2>Bibliographie</h2>
<ul>
<li>Abbott A., 2001, <em>Time matters. On theory and method</em>, The University of Chicago Press.</li>
<li>Abbott A., Hrycak A., 1990, ¬´¬†Measuring ressemblance in sequence data: an optimal matching analysis of musicians‚Äô careers¬ª, <em>American journal of sociology</em>, (96), p.144-185. <a href="http://www.jstor.org/stable/10.2307/2780695" class="uri">http://www.jstor.org/stable/10.2307/2780695</a></li>
<li>Abbott A., Tsay A., 2000, ¬´¬†Sequence analysis and optimal matching methods in sociology: Review and prospect¬†¬ª, <em>Sociological methods &amp; research</em>, 29(1), p.3-33. <a href="http://smr.sagepub.com/content/29/1/3.short" class="uri">http://smr.sagepub.com/content/29/1/3.short</a></li>
<li>Gabadinho, A., Ritschard, G., M√ºller, N.S. &amp; Studer, M., 2011, ¬´¬†Analyzing and visualizing state sequences in R with TraMineR¬†¬ª, <em>Journal of Statistical Software</em>, 40(4), p.1-37. <a href="http://archive-ouverte.unige.ch/downloader/vital/pdf/tmp/4hff8pe6uhukqiavvgaluqmjq2/out.pdf" class="uri">http://archive-ouverte.unige.ch/downloader/vital/pdf/tmp/4hff8pe6uhukqiavvgaluqmjq2/out.pdf</a></li>
<li>Grelet Y., 2002, ¬´¬†Des typologies de parcours. M√©thodes et usages¬†¬ª, <em>Document G√©n√©ration</em> 92, (20), 47 p. <a href="http://www.cmh.greco.ens.fr/programs/Grelet_typolparc.pdf" class="uri">http://www.cmh.greco.ens.fr/programs/Grelet_typolparc.pdf</a></li>
<li>Leli√®vre √â., Vivier G., 2001, ¬´¬†√âvaluation d‚Äôune collecte √† la crois√©e du quantitatif et du qualitatif¬†: l‚Äôenqu√™te Biographies et entourage¬†¬ª, <em>Population</em>, (6), p.1043-1073. <a href="http://www.persee.fr/web/revues/home/prescript/article/pop_0032-4663_2001_num_56_6_7217" class="uri">http://www.persee.fr/web/revues/home/prescript/article/pop_0032-4663_2001_num_56_6_7217</a></li>
<li>Lemercier C., 2005, ¬´¬†Les carri√®res des membres des institutions consulaires parisiennes au XIX<sup>e</sup> si√®cle¬†¬ª, <em>Histoire et mesure</em>, XX (1-2), p.59-95. <a href="http://histoiremesure.revues.org/786" class="uri">http://histoiremesure.revues.org/786</a></li>
<li>Lesnard L., 2008, ¬´¬†Off-Scheduling within Dual-Earner Couples: An Unequal and Negative Externality for Family Time¬†¬ª, <em>American Journal of Sociology</em>, 114(2), p.447-490. <a href="http://laurent.lesnard.free.fr/IMG/pdf/lesnard_2008_off-scheduling_within_dual-earner_couples-2.pdf" class="uri">http://laurent.lesnard.free.fr/IMG/pdf/lesnard_2008_off-scheduling_within_dual-earner_couples-2.pdf</a></li>
<li>Lesnard L., Saint Pol T. (de), 2006, ¬´¬†Introduction aux M√©thodes d‚ÄôAppariement Optimal (Optimal Matching Analysis)¬†¬ª, <em>Bulletin de M√©thodologie Sociologique</em>, 90, p.5-25. <a href="http://bms.revues.org/index638.html" class="uri">http://bms.revues.org/index638.html</a></li>
<li>Robette N., 2011, <em>Explorer et d√©crire les parcours de vie¬†: les typologies de trajectoires</em>, Ceped (Les Clefs pour), 86 p. <a href="http://nicolas.robette.free.fr/Docs/Robette2011_Manuel_TypoTraj.pdf" class="uri">http://nicolas.robette.free.fr/Docs/Robette2011_Manuel_TypoTraj.pdf</a></li>
<li>Robette N., 2012, ¬´¬†Du pros√©lytisme √† la s√©cularisation. Le processus de diffusion de l‚ÄôOptimal Matching Analysis¬†¬ª, <em>document de travail</em>. <a href="http://nicolas.robette.free.fr/Docs/Proselytisme_secularisation_NRobette.pdf" class="uri">http://nicolas.robette.free.fr/Docs/Proselytisme_secularisation_NRobette.pdf</a></li>
<li>Robette N., Bry X., 2012, ¬´¬†Harpoon or bait? A comparison of various metrics to fish for life course patterns¬†¬ª, <em>Bulletin de M√©thodologie Sociologique</em>, 116, p.5-24. <a href="http://nicolas.robette.free.fr/Docs/Harpoon_maggot_RobetteBry.pdf" class="uri">http://nicolas.robette.free.fr/Docs/Harpoon_maggot_RobetteBry.pdf</a></li>
<li>Robette N., Thibault N., 2008, ¬´¬†L‚Äôanalyse exploratoire de trajectoires professionnelles¬†: analyse harmonique qualitative ou appariement optimal¬†? ¬ª, <em>Population</em>, 64(3), p.621-646. <a href="http://www.cairn.info/revue-population-2008-4-p-621.htm" class="uri">http://www.cairn.info/revue-population-2008-4-p-621.htm</a></li>
<li>Savage M., 2009, ¬´¬†Contemporary Sociology and the Challenge of Descriptive Assemblage¬†¬ª, <em>European Journal of Social Theory</em>, 12(1), p.155-174. <a href="http://est.sagepub.com/content/12/1/155.short" class="uri">http://est.sagepub.com/content/12/1/155.short</a></li>
</ul>
</div>
<div class="footnotes">
<hr/>
<ol>
<li id="analyse-de-sequences_fn1"><p>Pour une analyse des conditions sociales de la diffusion de l‚Äôanalyse de s√©quences dans le champ des sciences sociales, voir Robette, 2012.<a href="#analyse-de-sequences_fnref1">‚Ü©</a></p></li>
<li id="analyse-de-sequences_fn2"><p><a href="http://home.uchicago.edu/~aabbott/" class="uri">http://home.uchicago.edu/~aabbott/</a><a href="#analyse-de-sequences_fnref2">‚Ü©</a></p></li>
<li id="analyse-de-sequences_fn3"><p><a href="http://lemercier.ouvaton.org/document.php?id=62" class="uri">http://lemercier.ouvaton.org/document.php?id=62</a><a href="#analyse-de-sequences_fnref3">‚Ü©</a></p></li>
<li id="analyse-de-sequences_fn4"><p><a href="http://laurent.lesnard.free.fr/article.php3?id_article=22" class="uri">http://laurent.lesnard.free.fr/article.php3?id_article=22</a><a href="#analyse-de-sequences_fnref4">‚Ü©</a></p></li>
<li id="analyse-de-sequences_fn5"><p>Voir par exemple l‚Äôarticle d‚ÄôYvette Grelet (2002).<a href="#analyse-de-sequences_fnref5">‚Ü©</a></p></li>
<li id="analyse-de-sequences_fn6"><p><a href="http://www.ceped.org/?rubrique57" class="uri">http://www.ceped.org/?rubrique57</a><a href="#analyse-de-sequences_fnref6">‚Ü©</a></p></li>
<li id="analyse-de-sequences_fn7"><p><a href="http://nicolas.robette.free.fr/Docs/Robette2011_Manuel_TypoTraj.pdf" class="uri">http://nicolas.robette.free.fr/Docs/Robette2011_Manuel_TypoTraj.pdf</a><a href="#analyse-de-sequences_fnref7">‚Ü©</a></p></li>
<li id="analyse-de-sequences_fn8"><p>Pour une analyse plus pouss√©e de ces donn√©es, avec deux m√©thodes diff√©rentes, voir Robette &amp; Thibault, 2008. Pour une pr√©sentation de l‚Äôenqu√™te, voir Leli√®vre &amp; Vivier, 2001.<a href="#analyse-de-sequences_fnref8">‚Ü©</a></p></li>
<li id="analyse-de-sequences_fn9"><p><a href="http://home.fsw.vu.nl/ch.elzinga/" class="uri">http://home.fsw.vu.nl/ch.elzinga/</a><a href="#analyse-de-sequences_fnref9">‚Ü©</a></p></li>
<li id="analyse-de-sequences_fn10"><p><a href="http://steinhaus.stat.ruhr-uni-bochum.de/tda.html" class="uri">http://steinhaus.stat.ruhr-uni-bochum.de/tda.html</a><a href="#analyse-de-sequences_fnref10">‚Ü©</a></p></li>
<li id="analyse-de-sequences_fn11"><p><a href="http://www.stata-journal.com/article.html?article=st0111" class="uri">http://www.stata-journal.com/article.html?article=st0111</a><a href="#analyse-de-sequences_fnref11">‚Ü©</a></p></li>
<li id="analyse-de-sequences_fn12"><p><a href="http://mephisto.unige.ch/traminer/" class="uri">http://mephisto.unige.ch/traminer/</a><a href="#analyse-de-sequences_fnref12">‚Ü©</a></p></li>
<li id="analyse-de-sequences_fn13"><p>Pour une pr√©sentation plus d√©taill√©e, voir le chapitre sur la <a href="#classification-ascendante-hierarchique">classification ascendante hi√©rarchique (CAH)</a>.<a href="#analyse-de-sequences_fnref13">‚Ü©</a></p></li>
<li id="analyse-de-sequences_fn14"><p>Le fonctionnement de l‚Äôalgorithme d‚Äôappariement optimal ‚Äî et notamment le choix des co√ªts ‚Äî est d√©crit dans le chapitre 9 du manuel de <code class="pkg">TraMineR</code> (<a href="http://mephisto.unige.ch/pub/TraMineR/doc/TraMineR-Users-Guide.pdf" class="uri">http://mephisto.unige.ch/pub/TraMineR/doc/TraMineR-Users-Guide.pdf</a>).<a href="#analyse-de-sequences_fnref14">‚Ü©</a></p></li>
<li id="analyse-de-sequences_fn15"><p>L‚Äôarticulation entre m√©thodes ¬´¬†descriptives¬†¬ª et m√©thodes ¬´¬†explicatives¬†¬ª est un prolongement possible de l‚Äôanalyse de s√©quences. Cependant, l‚Äôanalyse de s√©quences √©tait envisag√©e par Abbott comme une alternative √† la sociologie quantitative <em>mainstream</em>, i.e le ¬´¬†paradigme des variables¬†¬ª et ses hypoth√®ses implicites souvent difficilement tenables (Abbott, 2001). Une bonne description solidement fond√©e th√©oriquement vaut bien des ¬´¬†mod√®les explicatifs¬†¬ª (Savage, 2009).<a href="#analyse-de-sequences_fnref15">‚Ü©</a></p></li>
</ol>
</div>

</article>
<article id="analyse-de-reseaux">

<div class="fluid-row" id="analyse-de-reseaux_header">


<h1 class="title">Analyse de r√©seaux</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>

</article>
<article id="analyse-spatiale">

<div class="fluid-row" id="analyse-spatiale_header">


<h1 class="title">Analyse spatiale</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>

</article>
<article id="ggplot2-la-grammaire-des-graphiques">

<div class="fluid-row" id="ggplot2-la-grammaire-des-graphiques_header">


<h1 class="title">ggplot2¬†: la grammaire des graphiques</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>

</article>
<article id="etendre-ggplot2">

<div class="fluid-row" id="etendre-ggplot2_header">


<h1 class="title">√âtendre ggplot2</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>

</article>
<article id="lattice-graphiques-et-formules">

<div class="fluid-row" id="lattice-graphiques-et-formules_header">


<h1 class="title">lattice¬†: graphiques et formules</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>

</article>
<article id="diagrammes">

<div class="fluid-row" id="diagrammes_header">


<h1 class="title">Diagrammes</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>

</article>
<article id="representer-des-flux">

<div class="fluid-row" id="representer-des-flux_header">


<h1 class="title">Repr√©senter des flux</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>

</article>
<article id="reseaux-dynamiques">

<div class="fluid-row" id="reseaux-dynamiques_header">


<h1 class="title">R√©seaux dynamiques</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>

</article>
<article id="ggvis-les-graphiques-interactifs">

<div class="fluid-row" id="ggvis-les-graphiques-interactifs_header">


<h1 class="title">ggvis¬†: les graphiques interactifs</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>

</article>
<article id="htmlwidgets-la-puissance-du-javascript">

<div class="fluid-row" id="htmlwidgets-la-puissance-du-javascript_header">


<h1 class="title">htmlwidgets¬†: la puissance de javascript</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>

</article>
<article id="cartes">

<div class="fluid-row" id="cartes_header">


<h1 class="title">Cartes</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>

</article>
<article id="formules">

<div class="fluid-row" id="formules_header">


<h1 class="title">Formules</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#formules_statistiques-descriptives">Statistiques descriptives</a><ul>
<li><a href="#formules_tableaux-croises-avec-xtabs">Tableaux crois√©s avec xtabs</a></li>
<li><a href="#formules_statistiques-bivariees-avec-aggregate">Statistiques bivari√©es avec aggregate</a></li>
</ul></li>
<li><a href="#formules_panels-graphiques-avec-lattice">Panels graphiques avec lattice</a><ul>
<li><a href="#formules_visualisation-bivariee">Visualisation bivari√©e</a></li>
<li><a href="#formules_visualisation-par-petits-multiples">Visualisation par <q>petits multiples</q></a></li>
</ul></li>
<li><a href="#formules_pour-aller-plus-loin">Pour aller plus loin</a></li>
</ul>
</div>

<p>Ce chapitre vise √† illustrer l‚Äôutilisation de la <dfn>notation <q>formule</q></dfn> de <strong>R</strong>, qui d√©signe l‚Äôemploi de cette notation par l‚Äôexpression <code data-pkg="stats">formula</code>. Cette notation est utilis√©e par de tr√®s nombreuses fonctions de <strong>R</strong>¬†: on en a notamment vu plusieurs exemples dans le <a href="#graphiques-bivaries">chapitre sur les graphiques bivari√©s</a>, car l‚Äôextension <code class="pkg">ggplot2</code> se sert de cette notation dans ses param√®tres <code data-pkg="ggplot2">facet_wrap</code> et <code data-pkg="ggplot2">facet_grid</code>.</p>
<p>Dans ce chapitre, on verra comment se servir de la notation <q>formule</q> dans deux contextes diff√©rents. D‚Äôune part, on verra que deux fonctions basiques de <strong>R</strong> se servent de cette notation pour produire des tableaux crois√©s et des statistiques bivari√©es. D‚Äôautre part, on verra que l‚Äôextension <code class="pkg">lattice</code> se sert de cette notation pour cr√©er des graphiques <q>panelis√©s</q>, dits graphiques √† <q>petits multiples</q>.</p>
<p>Dans plusieurs autres chapitres, les op√©rations d√©crites ci-dessus sont effectu√©es avec les extensions <code class="pkg">dplyr</code> d‚Äôune part, et <code class="pkg">ggplot2</code> d‚Äôautre part. On se servira √©galement de ces extensions dans ce chapitre, de mani√®re √† mener une comparaison des diff√©rentes mani√®res d‚Äôeffectuer certaines op√©rations dans <strong>R</strong>, avec ou sans la notation <q>formule</q>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dplyr)
<span class="kw">library</span>(ggplot2)</code></pre></div>
<div id="formules_statistiques-descriptives" class="section level2">
<h2>Statistiques descriptives</h2>
<p>Les premiers exemples de ce chapitre montrent l‚Äôutilisation de cette notation pour produire des tableaux crois√©s et des statistiques descriptives. Le jeu de donn√©es utilis√©, <code data-pkg="questionr">hdv2003</code>, a d√©j√† √©t√© utilis√© dans plusieurs chapitres, et font partie de l‚Äôextension <code class="pkg">questionr</code>. Chargeons cette extension et le jeu de donn√©es <code data-pkg="questionr">hdv2003</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">data</span>(hdv2003)</code></pre></div>
<p>Pour rappel, ce jeu de donn√©es contient des individus, leur √¢ge, leur statut professionnel, et le nombre d‚Äôheures quotidiennes pass√©es √† regarder la t√©l√©vision.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">glimpse</span>(hdv2003, <span class="dv">75</span>)</code></pre></div>
<pre><code>Observations: 2000
Variables:
$ id            (int) 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 1...
$ age           (int) 28, 23, 59, 34, 71, 35, 60, 47, 20, 28, 65, 47, ...
$ sexe          (fctr) Femme, Femme, Homme, Homme, Femme, Femme, Femme...
$ nivetud       (fctr) Enseignement superieur y compris technique supe...
$ poids         (dbl) 2634.3982, 9738.3958, 3994.1025, 5731.6615, 4329...
$ occup         (fctr) Exerce une profession, Etudiant, eleve, Exerce ...
$ qualif        (fctr) Employe, NA, Technicien, Technicien, Employe, E...
$ freres.soeurs (int) 8, 2, 2, 1, 0, 5, 1, 5, 4, 2, 3, 4, 1, 5, 2, 3, ...
$ clso          (fctr) Oui, Oui, Non, Non, Oui, Non, Oui, Non, Oui, No...
$ relig         (fctr) Ni croyance ni appartenance, Ni croyance ni app...
$ trav.imp      (fctr) Peu important, NA, Aussi important que le reste...
$ trav.satisf   (fctr) Insatisfaction, NA, Equilibre, Satisfaction, NA...
$ hard.rock     (fctr) Non, Non, Non, Non, Non, Non, Non, Non, Non, No...
$ lecture.bd    (fctr) Non, Non, Non, Non, Non, Non, Non, Non, Non, No...
$ peche.chasse  (fctr) Non, Non, Non, Non, Non, Non, Oui, Oui, Non, No...
$ cuisine       (fctr) Oui, Non, Non, Oui, Non, Non, Oui, Oui, Non, No...
$ bricol        (fctr) Non, Non, Non, Oui, Non, Non, Non, Oui, Non, No...
$ cinema        (fctr) Non, Oui, Non, Oui, Non, Oui, Non, Non, Oui, Ou...
$ sport         (fctr) Non, Oui, Oui, Oui, Non, Oui, Non, Non, Non, Ou...
$ heures.tv     (dbl) 0.0, 1.0, 0.0, 2.0, 3.0, 2.0, 2.9, 1.0, 2.0, 2.0...</code></pre>
<div id="formules_tableaux-croises-avec-xtabs" class="section level3">
<h3>Tableaux crois√©s avec xtabs</h3>
<p>Utilisons, pour ce premier exemple, la variable <var>occup</var> du jeu de donn√©es <code data-pkg="questionr">hdv2003</code>, qui correspond au statut professionnel des individus inclus dans l‚Äô√©chantillon. La fonction de base pour compter les individus par statut est la fonction <code data-pkg="base">table</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(hdv2003$occup)</code></pre></div>
<pre><code>
Exerce une profession               Chomeur 
                 1049                   134 
      Etudiant, eleve              Retraite 
                   94                   392 
  Retire des affaires              Au foyer 
                   77                   171 
        Autre inactif 
                   83 </code></pre>
<p>Avec la fonction <code data-pkg="stats">xtabs</code>, le m√™me r√©sultat est produit √† partir de la notation suivante¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">xtabs</span>(~occup, <span class="dt">data =</span> hdv2003)</code></pre></div>
<pre><code>occup
Exerce une profession               Chomeur 
                 1049                   134 
      Etudiant, eleve              Retraite 
                   94                   392 
  Retire des affaires              Au foyer 
                   77                   171 
        Autre inactif 
                   83 </code></pre>
<p>Le premier argument est une formule, au sens o√π <strong>R</strong> entend cette expression. Le second argument, <code>data</code>, correspond au jeu de donn√©es auquel la formule doit √™tre appliqu√©e. On pourra se passer d‚Äô√©crire explicitement cet argument dans les exemples suivants.</p>
<p>L‚Äôavantage de la fonction <code data-pkg="stats">xtabs</code> n‚Äôest pas √©vident dans ce premier exemple. En r√©alit√©, cette fonction devient utile lorsque l‚Äôon souhaite construire un ou plusieurs tableau(x) crois√©(s). Par exemple, pour croiser la variable <var>occup</var> avec la variable <var>sexe</var>, une solution constiste √† √©crire¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">with</span>(hdv2003, <span class="kw">table</span>(occup, sexe))</code></pre></div>
<pre><code>                       sexe
occup                   Homme Femme
  Exerce une profession   520   529
  Chomeur                  54    80
  Etudiant, eleve          48    46
  Retraite                208   184
  Retire des affaires      39    38
  Au foyer                  0   171
  Autre inactif            30    53</code></pre>
<p>Ou alors, ce qui revient au m√™me¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(hdv2003$occup, hdv2003$sexe)</code></pre></div>
<p>Avec <code data-pkg="stats">xtabs</code>, la m√™me op√©ration s‚Äô√©crit de la mani√®re suivante¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">xtabs</span>(~occup +<span class="st"> </span>sexe, hdv2003)</code></pre></div>
<pre><code>                       sexe
occup                   Homme Femme
  Exerce une profession   520   529
  Chomeur                  54    80
  Etudiant, eleve          48    46
  Retraite                208   184
  Retire des affaires      39    38
  Au foyer                  0   171
  Autre inactif            30    53</code></pre>
<p>Cette √©criture est plus courte que le code √©quivalent dans <code class="pkg">dplyr</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">group_by</span>(hdv2003, occup) %&gt;%
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">Homme =</span> <span class="kw">sum</span>(sexe ==<span class="st"> "Homme"</span>),
            <span class="dt">Femme =</span> <span class="kw">sum</span>(sexe ==<span class="st"> "Femme"</span>))</code></pre></div>
<pre><code>Source: local data frame [7 x 3]

                  occup Homme Femme
1 Exerce une profession   520   529
2               Chomeur    54    80
3       Etudiant, eleve    48    46
4              Retraite   208   184
5   Retire des affaires    39    38
6              Au foyer     0   171
7         Autre inactif    30    53</code></pre>
<p>De plus, <code data-pkg="stats">xtabs</code> permet de cr√©er plusieurs tableaux crois√©s en une seule formule¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">xtabs</span>(~occup +<span class="st"> </span>sexe +<span class="st"> </span>trav.imp, hdv2003)</code></pre></div>
<pre><code>, , trav.imp = Le plus important

                       sexe
occup                   Homme Femme
  Exerce une profession    13    16
  Chomeur                   0     0
  Etudiant, eleve           0     0
  Retraite                  0     0
  Retire des affaires       0     0
  Au foyer                  0     0
  Autre inactif             0     0

, , trav.imp = Aussi important que le reste

                       sexe
occup                   Homme Femme
  Exerce une profession   159   100
  Chomeur                   0     0
  Etudiant, eleve           0     0
  Retraite                  0     0
  Retire des affaires       0     0
  Au foyer                  0     0
  Autre inactif             0     0

, , trav.imp = Moins important que le reste

                       sexe
occup                   Homme Femme
  Exerce une profession   328   380
  Chomeur                   0     0
  Etudiant, eleve           0     0
  Retraite                  0     0
  Retire des affaires       0     0
  Au foyer                  0     0
  Autre inactif             0     0

, , trav.imp = Peu important

                       sexe
occup                   Homme Femme
  Exerce une profession    20    32
  Chomeur                   0     0
  Etudiant, eleve           0     0
  Retraite                  0     0
  Retire des affaires       0     0
  Au foyer                  0     0
  Autre inactif             0     0</code></pre>
<p>Cet exemple permet simplement de r√©aliser que la variable <var>trav.imp</var>, qui contient les r√©ponses √† une question portant sur l‚Äôimportance du travail, n‚Äôa √©t√© mesur√©e (c‚Äôest-√†-dire que la question n‚Äôa √©t√© pos√©e) qu‚Äôaux seuls individus actifs de l‚Äô√©chantillon.</p>
</div>
<div id="formules_statistiques-bivariees-avec-aggregate" class="section level3">
<h3>Statistiques bivari√©es avec aggregate</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">aggregate</span>(heures.tv ~<span class="st"> </span>sexe, mean, <span class="dt">data =</span> hdv2003)</code></pre></div>
<pre><code>   sexe heures.tv
1 Homme  2.219330
2 Femme  2.268727</code></pre>
<p>Ici, le premier argument est √† nouveau une formule. Le second argument correspond √† la statistique descriptive que l‚Äôon souhaite obtenir, et le dernier argument indique le jeu de donn√©es auquel appliquer les deux autres arguments. On peut d‚Äôailleurs obtenir le m√™me r√©sultat en respectant de mani√®re plus stricte l‚Äôordre des arguments dans la syntaxe de la fonction <code data-pkg="stats">aggregate</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">aggregate</span>(heures.tv ~<span class="st"> </span>sexe, hdv2003, mean)</code></pre></div>
<pre><code>   sexe heures.tv
1 Homme  2.219330
2 Femme  2.268727</code></pre>
<p>Cette √©criture est, √† nouveau, plus compacte que le code √©quivalent dans <code class="pkg">dplyr</code>, qui demande de sp√©cifier le retrait des valeurs manquantes¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">group_by</span>(hdv2003, sexe) %&gt;%
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">heures.tv =</span> <span class="kw">mean</span>(heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</code></pre></div>
<p>√Ä nouveau, on va pouvoir combiner plusieurs variables dans la formule que l‚Äôon passe √† <code data-pkg="stats">aggregate</code>, ce qui va permettre d‚Äôobtenir la moyenne des heures de t√©l√©vision quotidiennes par sexe et par statut professionnel¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">aggregate</span>(heures.tv ~<span class="st"> </span>sexe +<span class="st"> </span>occup, hdv2003, mean)</code></pre></div>
<pre><code>    sexe                 occup heures.tv
1  Homme Exerce une profession  1.920463
2  Femme Exerce une profession  1.724953
3  Homme               Chomeur  2.853846
4  Femme               Chomeur  2.888608
5  Homme       Etudiant, eleve  1.400000
6  Femme       Etudiant, eleve  1.256522
7  Homme              Retraite  2.826442
8  Femme              Retraite  2.877174
9  Homme   Retire des affaires  2.410256
10 Femme   Retire des affaires  2.844737
11 Femme              Au foyer  2.822222
12 Homme         Autre inactif  3.133333
13 Femme         Autre inactif  3.339623</code></pre>
<p>La m√™me op√©ration demanderait toujours un peu plus de code avec <code class="pkg">dplyr</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">group_by</span>(hdv2003, occup, sexe) %&gt;%
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">heures.tv =</span> <span class="kw">mean</span>(heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</code></pre></div>
<p>La fonction <code data-pkg="stats">aggregate</code> permet bien s√ªr d‚Äôutiliser une autre fonction que la moyenne, comme dans cet exemple, suivi de son √©quivalent avec <code class="pkg">dplyr</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># √¢ge m√©dian par sexe et statut professionnel</span>
<span class="kw">aggregate</span>(age ~<span class="st"> </span>sexe +<span class="st"> </span>occup, hdv2003, median)</code></pre></div>
<pre><code>    sexe                 occup  age
1  Homme Exerce une profession 42.0
2  Femme Exerce une profession 41.0
3  Homme               Chomeur 35.5
4  Femme               Chomeur 40.0
5  Homme       Etudiant, eleve 20.0
6  Femme       Etudiant, eleve 20.5
7  Homme              Retraite 68.0
8  Femme              Retraite 69.0
9  Homme   Retire des affaires 70.0
10 Femme   Retire des affaires 74.0
11 Femme              Au foyer 51.0
12 Homme         Autre inactif 56.0
13 Femme         Autre inactif 58.0</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># code √©quivalent avec l'extension 'dplyr'</span>
<span class="kw">group_by</span>(hdv2003, occup, sexe) %&gt;%
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">age =</span> <span class="kw">median</span>(age, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</code></pre></div>
<p>La fonction <code data-pkg="stats">aggregate</code> permet, par ailleurs, d‚Äôobtenir des r√©sultats √† plusieurs colonnes. Dans l‚Äôexemple ci-dessus, on illustre ce principe avec la fonction <code data-pkg="stats">range</code>, qui renvoie deux r√©sultats (la valeur minimale et la valeur maximale de la variable, qui est toujours la variable <var>age</var>), chacun pr√©sent√©s dans une colonne¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">aggregate</span>(age ~<span class="st"> </span>sexe +<span class="st"> </span>occup, hdv2003, range)</code></pre></div>
<pre><code>    sexe                 occup age.1 age.2
1  Homme Exerce une profession    18    63
2  Femme Exerce une profession    18    67
3  Homme               Chomeur    18    63
4  Femme               Chomeur    18    63
5  Homme       Etudiant, eleve    18    34
6  Femme       Etudiant, eleve    18    35
7  Homme              Retraite    48    92
8  Femme              Retraite    41    96
9  Homme   Retire des affaires    57    91
10 Femme   Retire des affaires    57    93
11 Femme              Au foyer    22    90
12 Homme         Autre inactif    39    71
13 Femme         Autre inactif    19    97</code></pre>
<p>Cette fonction ne peut pas √™tre facilement √©crite dans <code class="pkg">dplyr</code> sans r√©√©crire chacune des colonnes, ce que le bloc de code suivant illustre. On y gagne en lisibilit√© dans les intitul√©s de colonnes¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">group_by</span>(hdv2003, occup, sexe) %&gt;%
<span class="st">  </span><span class="kw">summarise</span>(<span class="dt">min =</span> <span class="kw">min</span>(age, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),
            <span class="dt">max =</span> <span class="kw">max</span>(age, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</code></pre></div>
</div>
</div>
<div id="formules_panels-graphiques-avec-lattice" class="section level2">
<h2>Panels graphiques avec lattice</h2>
<p>Les exemples suivants montreront ensuite comment la notation <q>formule</q> peut servir √† produire des graphiques par panel avec l‚Äôextension <code class="pkg">lattice</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(lattice)</code></pre></div>
<div class="note">
<p>L‚Äôextension <code class="pkg">lattice</code> pr√©sente l‚Äôavantage d‚Äô√™tre install√©e par d√©faut avec <strong>R</strong>. Il n‚Äôest donc pas n√©cessaire de l‚Äôinstaller pr√©alablement.</p>
</div>
<p>Chargeons les m√™mes donn√©es que le <a href="#graphiques-bivaries">chapitre sur les graphiques bivari√©s</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># charger l'extension lisant le format CSV</span>
<span class="kw">library</span>(readr)

<span class="co"># emplacement souhait√© pour le jeu de donn√©es</span>
file =<span class="st"> "data/debt.csv"</span>

<span class="co"># t√©l√©charger le jeu de donn√©es s'il n'existe pas</span>
if(!<span class="kw">file.exists</span>(file))
  <span class="kw">download.file</span>(<span class="st">"http://www.stat.cmu.edu/~cshalizi/uADA/13/hw/11/debt.csv"</span>,
                file, <span class="dt">mode =</span> <span class="st">"wb"</span>)

<span class="co"># charger les donn√©es dans l'objet 'debt'</span>
debt =<span class="st"> </span><span class="kw">read_csv</span>(file)</code></pre></div>
<p>Rejetons rapidement un coup d‚Äôoeil √† ces donn√©es, qui sont structur√©es par pays (variable <var>Country&lt;/var) et par ann√©e (variable <var>Year</var>). On y trouve deux variables, <var>growth</var> (le taux de croissance du produit int√©rieur brut r√©el), et <var>ratio</var> (le ratio entre la dette publique et le produit int√©rieur brut), ainsi qu‚Äôune premi√®re colonne vide, ne contenant que des num√©ros lignes, dont on va se d√©barrasser¬†:</var></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># inspection des donn√©es</span>
<span class="kw">glimpse</span>(debt, <span class="dv">75</span>)</code></pre></div>
<pre><code>Observations: 1,171
Variables: 5
$         (int) 147, 148, 149, 150, 151, 152, 153, 154, 155, 156, 157,...
$ Country (chr) "Australia", "Australia", "Australia", "Australia", "A...
$ Year    (int) 1946, 1947, 1948, 1949, 1950, 1951, 1952, 1953, 1954, ...
$ growth  (dbl) -3.5579515, 2.4594746, 6.4375341, 6.6119938, 6.9202012...
$ ratio   (dbl) 190.41908, 177.32137, 148.92981, 125.82870, 109.80940,...</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># suppression de la premi√®re colonne</span>
debt =<span class="st"> </span>debt[, -<span class="dv">1</span>]</code></pre></div>
<div id="formules_visualisation-bivariee" class="section level3">
<h3>Visualisation bivari√©e</h3>
<p>Le m√™me graphique s‚Äô√©crit de la mani√®re suivante avec l‚Äôextension <code class="pkg">lattice</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">xyplot</span>(growth ~<span class="st"> </span>Year, <span class="dt">data =</span> debt)</code></pre></div>
<p><img src="graphs/formules/unnamed-chunk-23-1.png" title="" alt="" width="1050"/></p>
</div>
<div id="formules_visualisation-par-petits-multiples" class="section level3">
<h3>Visualisation par <q>petits multiples</q></h3>
<p>Appliquons d√©sormais la m√™me visualisation par <q>petits multiples</q> que vue dans le chapitre¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">xyplot</span>(growth ~<span class="st"> </span>Year |<span class="st"> </span>Country, <span class="dt">data =</span> debt)</code></pre></div>
<p><img src="graphs/formules/unnamed-chunk-24-1.png" title="" alt="" width="1050"/></p>
<p>Enfin, rajoutons quelques options au graphique, afin de montrer comment l‚Äôextension <code class="pkg">lattice</code> fonctionne¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">xyplot</span>(growth ~<span class="st"> </span>Year |<span class="st"> </span>Country, <span class="dt">type =</span> <span class="kw">c</span>(<span class="st">"o"</span>, <span class="st">"l"</span>), 
  <span class="dt">main =</span> <span class="st">"Donn√©es Reinhart et Rogoff corrig√©es, 1946-2009"</span>, 
  <span class="dt">ylab =</span> <span class="st">"Taux de croissance du PIB"</span>, <span class="dt">xlab =</span> <span class="ot">NULL</span>, 
  <span class="dt">data =</span> debt)</code></pre></div>
<p><img src="graphs/formules/unnamed-chunk-25-1.png" title="" alt="" width="1050"/></p>
</div>
</div>
<div id="formules_pour-aller-plus-loin" class="section level2">
<h2>Pour aller plus loin</h2>
<p>Comme vient de le voir dans ce chapitre, la notation <q>formule</q> appara√Æt √ß√† et l√† dans les diff√©rentes fonctions de <strong>R</strong> est de ses extensions. Il est par cons√©quent utile d‚Äôen conna√Ætre les rudiments, et en particulier les op√©rateurs <code>~</code> (<em>tilde</em>) et <code>+</code>, ne serait-ce que pour pouvoir se servir des diff√©rentes fonctions pr√©sent√©es sur cette page.</p>
<p>La notation <q>formule</q> devient cruciale d√®s que l‚Äôon souhaite r√©diger des mod√®les¬†: la formule <code>y ~ x</code>, par exemple, qui est √©quivalente √† la formule <code>y ~ 1 + x</code>, correspond √† l‚Äô√©quation math√©matique <span class="math inline"><em>Y</em>‚ÄÑ=‚ÄÑ<em>a</em>‚ÄÖ+‚ÄÖ<em>b</em><em>X</em></span>. On trouvera de nombreux exemples d‚Äôusage de cette notation dans les chapitres consacr√©s, notamment, √† la r√©gression lin√©aire ou √† la <a href="#regression-logistique">r√©gression logistique</a>.</p>
<p>De la m√™me mani√®re, l‚Äôop√©rateur <code>|</code> (<em>pipe</em>) utilis√© par l‚Äôextension <code class="pkg">lattice</code> joue aussi un r√¥le tr√®s important dans la r√©daction de mod√®les multi-niveaux, o√π il sert √† indiquer les variables √† pentes ou √† coefficients al√©atoires. Ces mod√®les sont pr√©sent√©s dans un <a href="#modeles-lineaires-a-effets-mixtes">chapitre d√©di√©</a>.</p>
</div>

</article>
<article id="structures-conditionnelles">

<div class="fluid-row" id="structures-conditionnelles_header">


<h1 class="title">Structures conditionnelles</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>

</article>
<article id="expressions-regulieres">

<div class="fluid-row" id="expressions-regulieres_header">


<h1 class="title">Expressions r√©guli√®res</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>

</article>
<article id="ecrire-ses-propres-fonctions">

<div class="fluid-row" id="ecrire-ses-propres-fonctions_header">


<h1 class="title">√âcrire ses propres fonctions</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>

</article>
<article id="rmarkdown-les-rapports-automatises">

<div class="fluid-row" id="rmarkdown-les-rapports-automatises_header">


<h1 class="title">R Markdown¬†: les rapports automatis√©s</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>

</article>
<article id="shiny-les-interfaces-interactives">

<div class="fluid-row" id="shiny-les-interfaces-interactives_header">


<h1 class="title">Shiny¬†: les interfaces interactives</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>

</article>
<article id="git">

<div class="fluid-row" id="git_header">


<h1 class="title">Git</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>

</article>
<article id="developper-un-package">

<div class="fluid-row" id="developper-un-package_header">


<h1 class="title">D√©velopper un package</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>

</article>
<article id="calculer-un-age">

<div class="fluid-row" id="calculer-un-age_header">


<h1 class="title">Calculer un √¢ge</h1>

</div>

<div class="TOC">
<ul>
<li><a href="#calculer-un-age_rappel-sur-les-ages">Rappel sur les √¢ges</a></li>
<li><a href="#calculer-un-age_le-package-lubridate">Le package lubridate</a></li>
<li><a href="#calculer-un-age_calcul-dun-age-exact">Calcul d‚Äôun √¢ge exact</a><ul>
<li><a href="#calculer-un-age_cas-particulier-des-personnes-nees-un-29-fevrier">Cas particulier des personnes n√©es un 29 f√©vrier</a></li>
</ul></li>
<li><a href="#calculer-un-age_age-revolu-ou-age-au-dernier-anniversaire">√Çge r√©volu ou √¢ge au dernier anniversaire</a></li>
<li><a href="#calculer-un-age_age-par-difference-de-millesimes">√Çge par diff√©rence de mill√©simes</a></li>
<li><a href="#calculer-un-age_calcul-dun-age-moyen">Calcul d‚Äôun √¢ge moyen</a></li>
<li><a href="#calculer-un-age_notes">Notes</a></li>
</ul>
</div>

<div class="note">
<p>La version originale de cette astuce a √©t√© publi√©e par Joseph Larmarange sur <a href="http://joseph.larmarange.net/?Calculer-proprement-un-age-sous-R" class="uri">http://joseph.larmarange.net/?Calculer-proprement-un-age-sous-R</a>.</p>
</div>
<p>Le calcul d‚Äôun <dfn>√¢ge</dfn> sous <strong>R</strong> n‚Äôest pas forc√©ment aussi trivial qu‚Äôil n‚Äôy parait.</p>
<div id="calculer-un-age_rappel-sur-les-ages" class="section level2">
<h2>Rappel sur les √¢ges</h2>
<p>Il convient en premier lieu de rappeler les principaux √¢ges utilis√©s les d√©mographes¬†:</p>
<blockquote>
<p>L‚Äô√¢ge ‚Äì on pr√©cise parfois √¢ge chronologique ‚Äì est une des caract√©ristiques fondamentales de la structure des populations. On l‚Äôexprime g√©n√©ralement en ann√©es, ou en ann√©es et mois, voire en mois et jours, pour les enfants en bas √¢ge¬†; parfois en ann√©es et fractions d√©cimales d‚Äôann√©e. Les d√©mographes arrondissent d‚Äôordinaire l‚Äô√¢ge √† l‚Äôunit√© inf√©rieure, l‚Äôexprimant ainsi en ann√©es r√©volues, ou ann√©es accomplies, le cas √©ch√©ant en mois r√©volus, ou mois accomplis. Cet √¢ge est aussi l‚Äô√¢ge au dernier anniversaire. On trouve aussi, dans les statistiques, l‚Äô√¢ge atteint dans l‚Äôann√©e, qui est √©gal √† la diff√©rence de mill√©simes entre l‚Äôann√©e consid√©r√©e et l‚Äôann√©e de naissance. [‚Ä¶] On est parfois conduit √† pr√©ciser que l‚Äôon consid√®re un √¢ge exact, pour √©viter toute confusion avec un √¢ge en ann√©es r√©volues, qui repr√©sente en fait une classe d‚Äô√¢ges exacts.</p>
<footer>
Source¬†: <a href="http://fr-ii.demopaedia.org/wiki/32#322"><cite>Demop√¶dia</cite> (322)</a>
</footer>
</blockquote>
</div>
<div id="calculer-un-age_le-package-lubridate" class="section level2">
<h2>Le package lubridate</h2>
<p>Le package <code class="pkg">lubridate</code> est sp√©cialement d√©velopp√© pour faciliter la manipulation et le calcul autour des <dfn data-index="date, variable">dates</dfn>. La version de d√©veloppement int√®gre depuis peu une fonction <code data-pkg="lubridate">time_length</code> adapt√©e au calcul des √¢ges exacts.</p>
<div class="note">
<p>La fonction <code data-pkg="lubridate">time_length</code> √©tant r√©cente, elle n‚Äôest pas encore disponible dans la version stable du package. Pour installer la version de d√©veloppement de <code class="pkg">lubridate</code>, on aura recours au package <code class="pkg">devtools</code>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(devtools)
<span class="kw">install_github</span>(<span class="st">"hadley/lubridate"</span>)</code></pre></div>
</div>
<p>Nous noterons <code>naiss</code> la date de naissance et <code>evt</code> la date √† laquelle nous calculerons l‚Äô√¢ge.</p>
</div>
<div id="calculer-un-age_calcul-dun-age-exact" class="section level2">
<h2>Calcul d‚Äôun √¢ge exact</h2>
<p>On appelle <dfn>√¢ge exact</dfn><dfn data-index="exact, √¢ge"/> l‚Äôexpression d‚Äôun √¢ge avec sa partie d√©cimale.</p>
<p>Une approche simple consiste √† calculer une diff√©rence en jours puis √† diviser par 365. Or, le souci c‚Äôest que toutes les ann√©es n‚Äôont pas le m√™me nombre de jours. Regardons par exemple ce qui se passe si l‚Äôon calcule l‚Äô√¢ge au 31 d√©cembre 1999 d‚Äôune personne n√©e le 1<sup>er</sup> janvier 1900.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(lubridate)
naiss &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">"1900-01-01"</span>)
evt &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">"1999-12-31"</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">"days"</span>)</code></pre></div>
<pre><code>[1] 36523</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">"days"</span>)/<span class="dv">365</span></code></pre></div>
<pre><code>[1] 100.063</code></pre>
<p>Or, au 31 d√©cembre 1999, cette personne n‚Äôa pas encore f√™t√© son centi√®me anniversaire. Le calcul pr√©c√©dent ne prend pas en compte les ann√©es bissextiles. Une approche plus correcte serait de consid√©rer que les ann√©es durent en moyenne 365,25 jours.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">"days"</span>)/<span class="fl">365.25</span></code></pre></div>
<pre><code>[1] 99.99452</code></pre>
<p>Si cette approche semble fonctionner avec cet exemple, ce n‚Äôest plus le cas dans d‚Äôautres situations.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">evt &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">"1903-01-01"</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">"days"</span>)/<span class="fl">365.25</span></code></pre></div>
<pre><code>[1] 2.997947</code></pre>
<p>Or, √† la date du premier janvier 1903, cette personne a bien f√™t√© son troisi√®me anniversaire.</p>
<p>Pour calculer proprement un √¢ge en ann√©es (ou en mois), il est d√®s lors n√©cessaire de prendre en compte la date <dfn>anniversaire</dfn> et le fait que la dur√©e de chaque ann√©e (ou mois) est variable. C‚Äôest justement ce que fait la fonction <code data-pkg="lubridate">time_length</code> appliqu√©e √† un objet de type <code data-pkg="lubridate" data-rdoc="Interval-class">Interval</code>. On d√©termine le dernier et le prochain anniversaire et l‚Äôon rajoute, √† l‚Äô√¢ge atteint au dernier anniversaire, le ratio entre le nombre de jours entre l‚Äô√©v√©nement et le dernier anniversaire par le nombre de jours entre le prochain et le dernier anniversaire.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">naiss &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">"1900-01-01"</span>)
evt &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">"1999-12-31"</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">"years"</span>)</code></pre></div>
<pre><code>[1] 99.99726</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">evt &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">"1903-01-01"</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">"years"</span>)</code></pre></div>
<pre><code>[1] 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">evt &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">"1918-11-11"</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">"years"</span>)</code></pre></div>
<pre><code>[1] 18.86027</code></pre>
<p>Attention, cela n‚Äôest valable que si l‚Äôon pr√©sente √† la fonction <code data-pkg="lubridate">time_length</code> un objet de type <code data-pkg="lubridate" data-rdoc="Interval-class">Interval</code> (pour lequel on connait d√®s lors la date de d√©but et la date de fin). Si l‚Äôon passe une dur√©e (objet de type <code data-pkg="lubridate" data-rdoc="Duration-class">Duration</code>) √† la fonction <code data-pkg="lubridate">time_length</code>, le calcul s‚Äôeffectuera alors en prenant en compte la dur√©e moyenne d‚Äôune ann√©e (plus pr√©cis√©ment 365 jours).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">naiss &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">"1900-01-01"</span>)
evt &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">"1999-12-31"</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">"years"</span>)</code></pre></div>
<pre><code>[1] 99.99726</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">time_length</span>(evt -<span class="st"> </span>naiss, <span class="st">"years"</span>)</code></pre></div>
<pre><code>[1] 100.063</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">time_length</span>(<span class="kw">as.duration</span>(<span class="kw">interval</span>(naiss, evt)), <span class="st">"years"</span>)</code></pre></div>
<pre><code>[1] 100.063</code></pre>
<div id="calculer-un-age_cas-particulier-des-personnes-nees-un-29-fevrier" class="section level3">
<h3>Cas particulier des personnes n√©es un 29 f√©vrier</h3>
<p>Pour les personnes n√©es un 29 f√©vrier, il existe un certain flou concernant leur date d‚Äôanniversaire pour les ann√©es non bissextiles. Doit-on consid√©rer qu‚Äôil s‚Äôagit du 28 f√©vrier ou du 1<sup>er</sup> mars¬†?</p>
<p>Au sens strict, on peut consid√©rer que leur anniversaire a lieu entre le 28 f√©vrier soir √† minuit et le 1<sup>er</sup> mars √† 0 heure du matin, autrement dit que le 28 f√©vrier ils n‚Äôont pas encore f√™t√© leur anniversaire. C‚Äôest la position adopt√©e par la fonction <code data-pkg="lubridate">time_length</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">naiss &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">"1992-02-29"</span>)
evt &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">"2014-02-28"</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">"years"</span>)</code></pre></div>
<pre><code>[1] 21.99726</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">evt &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">"2014-03-01"</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">"years"</span>)</code></pre></div>
<pre><code>[1] 22</code></pre>
<p>Cette approche permets √©galement d‚Äô√™tre coh√©rent avec la mani√®re dont les dates sont prises en compte informatiquement. On consid√®re en effet que lorsque seule la date est pr√©cis√©e (sans mention de l‚Äôheure), l‚Äôheure correspondante est <code>0:00</code>. Autrement dit, <code>"2014-03-01"</code> est √©quivalent √† <code>"2014-03-01 00:00:00"</code>. L‚Äôapproche adopt√©e permet donc d‚Äô√™tre coh√©rent lorsque l‚Äôanniversaire est calcul√© en tenant compte des heures.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">naiss &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">"1992-02-29"</span>)
evt &lt;-<span class="st"> </span><span class="kw">ymd_hms</span>(<span class="st">"2014-02-28 23:00:00"</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">"years"</span>)</code></pre></div>
<pre><code>[1] 21.99989</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">evt &lt;-<span class="st"> </span><span class="kw">ymd_hms</span>(<span class="st">"2014-03-01 00:00:00"</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">"years"</span>)</code></pre></div>
<pre><code>[1] 22</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">evt &lt;-<span class="st"> </span><span class="kw">ymd_hms</span>(<span class="st">"2014-03-01 01:00:00"</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">"years"</span>)</code></pre></div>
<pre><code>[1] 22.00011</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">naiss &lt;-<span class="st"> </span><span class="kw">ymd_hms</span>(<span class="st">"1992-02-29 12:00:00"</span>)
evt &lt;-<span class="st"> </span><span class="kw">ymd_hms</span>(<span class="st">"2014-03-01 01:00:00"</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">"years"</span>)</code></pre></div>
<pre><code>[1] 22.00011</code></pre>
</div>
</div>
<div id="calculer-un-age_age-revolu-ou-age-au-dernier-anniversaire" class="section level2">
<h2>√Çge r√©volu ou √¢ge au dernier anniversaire</h2>
<p>Une fois que l‚Äôon sait calculer un √¢ge exact, le calcul d‚Äôun <dfn>√¢ge r√©volu</dfn><dfn data-index="r√©volu, √¢ge"/> ou <dfn>√¢ge au dernier anniversaire</dfn> est assez simple. Il suffit de ne garder que la partie enti√®re de l‚Äô√¢ge exact (approche conseill√©e).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">naiss &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">"1980-01-09"</span>)
evt &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">"2015-01-01"</span>)
<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">"years"</span>)</code></pre></div>
<pre><code>[1] 34.97808</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">trunc</span>(<span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">"years"</span>))</code></pre></div>
<pre><code>[1] 34</code></pre>
<p>Une autre approche consiste √† convertir l‚Äôintervalle en objet de type <code data-pkg="lubridate" data-rdoc="Period-class">Period</code> et √† ne prendre en compte que les ann√©es.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as.period</span>(<span class="kw">interval</span>(naiss, evt))</code></pre></div>
<pre><code>[1] "34y 11m 23d 0H 0M 0S"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as.period</span>(<span class="kw">interval</span>(naiss, evt))@year</code></pre></div>
<pre><code>[1] 34</code></pre>
</div>
<div id="calculer-un-age_age-par-difference-de-millesimes" class="section level2">
<h2>√Çge par diff√©rence de mill√©simes</h2>
<p>L‚Äô<dfn>√¢ge par diff√©rence de mill√©simes</dfn>, encore appel√© <dfn>√¢ge atteint dans l‚Äôann√©e</dfn>, s‚Äôobtient tout simplement en soustrayant l‚Äôann√©e de naissance √† l‚Äôann√©e de l‚Äô√©v√©nement.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">naiss &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">"1980-01-09"</span>)
evt &lt;-<span class="st"> </span><span class="kw">ymd</span>(<span class="st">"2015-01-01"</span>)
<span class="kw">year</span>(evt) -<span class="st"> </span><span class="kw">year</span>(naiss)</code></pre></div>
<pre><code>[1] 35</code></pre>
</div>
<div id="calculer-un-age_calcul-dun-age-moyen" class="section level2">
<h2>Calcul d‚Äôun √¢ge moyen</h2>
<p>Le calcul d‚Äôun <dfn>√¢ge moyen</dfn><dfn data-index="moyenne, √¢ge"/> s‚Äôeffectue normalement √† partir d‚Äô√¢ges exacts. Il arrive fr√©quemment que l‚Äôon ne dispose dans les donn√©es d‚Äôenqu√™tes que de l‚Äô√¢ge r√©volu. Auquel cas, il faut bien penser √† rajouter 0,5 au r√©sultat obtenu. En effet, un √¢ge r√©volu peut √™tre vu comme une classe d‚Äô√¢ges exacts¬†: les individus ayant 20 ans r√©volus ont entre 20 et 21 ans exacts, soit en moyenne 20,5 ans¬†!</p>
</div>
<div id="calculer-un-age_notes" class="section level2">
<h2>Notes</h2>
<p>L‚Äôensemble des fonctions pr√©sent√©es peuvent √™tre appliqu√©es √† des vecteurs et, par cons√©quent, aux colonnes d‚Äôun tableau de donn√©es (<em>data.frame</em>).</p>
<p>Le package <code class="pkg">eeptools</code> fournit de son c√¥t√© une fonction <code data-pkg="eeptools">age_calc</code><a href="#calculer-un-age_fn1" class="footnoteRef" id="calculer-un-age_fnref1"><sup>1</sup></a> qui permet le calcul des √¢ges exacts et r√©volus.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(eeptools)</code></pre></div>
<pre><code>Loading required package: ggplot2
Loading required package: MASS</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">naiss &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="st">"1980-01-09"</span>)
evt &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="st">"2015-01-01"</span>)
<span class="kw">age_calc</span>(naiss, evt, <span class="dt">units =</span> <span class="st">"years"</span>, <span class="dt">precise =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>[1] 34.97814</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">time_length</span>(<span class="kw">interval</span>(naiss, evt), <span class="st">"years"</span>)</code></pre></div>
<pre><code>[1] 34.97808</code></pre>
<p>La m√©thode utilis√©e par <code data-pkg="eeptools">age_calc</code> donne des r√©sultats l√©g√®rement diff√©rent de ceux de <code data-pkg="lubridate">time_length</code>. Il est donc conseill√© d‚Äôutiliser de pr√©f√©rence le package <code class="pkg">lubridate</code>.</p>
<p>En l‚Äôabsence du package <code class="pkg">lubridate</code>, il reste facile de calculer une dur√©e en jours avec les fonctions de base de <strong>R</strong>¬†:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">naiss &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="st">"1900-01-01"</span>)
evt &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="st">"1999-12-31"</span>)
evt -<span class="st"> </span>naiss</code></pre></div>
<pre><code>Time difference of 36523 days</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as.integer</span>(evt -<span class="st"> </span>naiss)</code></pre></div>
<pre><code>[1] 36523</code></pre>
</div>
<div class="footnotes">
<hr/>
<ol>
<li id="calculer-un-age_fn1"><p><a href="https://github.com/jknowles/eeptools/blob/master/R/age_calc.R" class="uri">https://github.com/jknowles/eeptools/blob/master/R/age_calc.R</a><a href="#calculer-un-age_fnref1">‚Ü©</a></p></li>
</ol>
</div>

</article>
<article id="prevR-cartes-de-prevalence">

<div class="fluid-row" id="prevR-cartes-de-prevalence_header">


<h1 class="title">prevR¬†: cartes de pr√©valence √† partir des EDS</h1>

</div>


<div class="important">
<p>Ce chapitre est en cours d‚Äô√©criture.</p>
</div>

</article>
<article id="index-des-concepts">

<div class="fluid-row" id="index-des-concepts_header">


<h1 class="title">Index des concepts</h1>

</div>


<nav>
<ul class="pagination pagination-sm">
<li>
<a href="#index-des-concepts_ "> </a>
</li>
<li>
<a href="#index-des-concepts_,">,</a>
</li>
<li>
<a href="#index-des-concepts_A">A</a>
</li>
<li>
<a href="#index-des-concepts_B">B</a>
</li>
<li>
<a href="#index-des-concepts_C">C</a>
</li>
<li>
<a href="#index-des-concepts_D">D</a>
</li>
<li>
<a href="#index-des-concepts_E">E</a>
</li>
<li>
<a href="#index-des-concepts_F">F</a>
</li>
<li>
<a href="#index-des-concepts_G">G</a>
</li>
<li>
<a href="#index-des-concepts_H">H</a>
</li>
<li>
<a href="#index-des-concepts_I">I</a>
</li>
<li>
<a href="#index-des-concepts_L">L</a>
</li>
<li>
<a href="#index-des-concepts_M">M</a>
</li>
<li>
<a href="#index-des-concepts_N">N</a>
</li>
<li>
<a href="#index-des-concepts_O">O</a>
</li>
<li>
<a href="#index-des-concepts_P">P</a>
</li>
<li>
<a href="#index-des-concepts_Q">Q</a>
</li>
<li>
<a href="#index-des-concepts_R">R</a>
</li>
<li>
<a href="#index-des-concepts_S">S</a>
</li>
<li>
<a href="#index-des-concepts_T">T</a>
</li>
<li>
<a href="#index-des-concepts_U">U</a>
</li>
<li>
<a href="#index-des-concepts_V">V</a>
</li>
<li>
<a href="#index-des-concepts_W">W</a>
</li>
</ul>
<p/></nav>
<div id="index-des-concepts_index_concepts">
<h2 id="index-des-concepts_ ">
</h2>
<p><dfn> consiste √† fournir un vecteur logique indiquant si chaque √©l√©ment doit √™tre inclu (si <code>TRUE</code>) ou exclu (si <code>FALSE</code>). Par exemple¬†:</dfn></p>
<pre class="{r}"><code>sexe
sexe[c(TRUE, FALSE, FALSE, TRUE, FALSE, FALSE)]</code></pre>
<p>√âcrire manuellement une telle condition n‚Äôest pas tr√®s pratique √† l‚Äôusage. Mais supposons que nous ayons √©galement √† notre disposition les deux vecteurs suivants, √©galement de longueur 6.</p>
<pre class="{r}"><code>urbain op√©rateurs de comparaison suivants¬†:

Op√©rateur de comparaison  | Signification
:-----------|:-------------
`==` | √©gal √†
`!=` | diff√©rent de
`&gt;` | strictement sup√©rieur √†
`=` | sup√©rieur ou √©gal √†
`= 80</code></pre>
<p>Que s‚Äôest-il pass√©¬†? Nous avons fourni √† <strong>R</strong> une condition et il nous a renvoy√© un vecteur logique avec autant d‚Äô√©l√©ments qu‚Äôil y‚Äôa d‚Äôobservations et dont la valeur est <code>TRUE</code> si la condition est remplie et <code>FALSE</code> dans les autres cas. Nous pouvons alors utiliser ce vecteur logique pour obtenir la taille des participants pesant 80 kilogrammes ou plus¬†:</p>
<pre class="{r}"><code>taille[poids &gt;= 80]</code></pre>
<p>On peut combiner ou modifier des conditions √† l‚Äôaide des op√©rateurs logiques habituels¬†:</p>
<table>
<thead>
<tr class="header">
<th align="left">Op√©rateur logique</th>
<th align="left">Signification</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>&amp;</code></td>
<td align="left">et logique</td>
</tr>
<tr class="even">
<td align="left"><code>|</code></td>
<td align="left">ou logique</td>
</tr>
<tr class="odd">
<td align="left"><code>!</code></td>
<td align="left">n√©gation logique</td>
</tr>
</tbody>
</table>
<p>Comment les utilise-t-on¬†? Voyons tout de suite un exemple. Supposons que je veuille identifier les personnes pesant 80 kilogrammes ou plus <strong>et</strong> vivant en milieu urbain¬†:</p>
<p><code>{r, results='hide'} poids &gt;= 80 &amp; urbain</code></p>
<p>Les r√©sultats sont tr√®s diff√©rents si je souhaite isoler les personnes pesant 80 kilogrammes ou plus <em>ou</em> vivant milieu urbain¬†:</p>
<p><code>{r, results='hide'} poids &gt;= 80 &amp; urbain</code></p>
<p>Une remarque importante¬†: quand l‚Äôun des termes d‚Äôune condition comporte une valeur manquante (<code>NA</code>), le r√©sultat de cette condition n‚Äôest pas toujours <code>TRUE</code> ou <code>FALSE</code>, il peut aussi √™tre √† son tour une valeur manquante.</p>
<pre class="{r}"><code>taille
taille &gt; 1.8</code></pre>
<p>On voit que le test <code>NA &gt; 1.8</code> ne renvoie ni vrai ni faux, mais <code>NA</code>.</p>
<p>Une autre cons√©quence importante de ce comportement est qu‚Äôon ne peut pas utiliser l‚Äôop√©rateur l‚Äôexpression <code>== NA</code> pour tester la pr√©sence de valeurs manquantes. On utilisera √† la place la fonction <em>ad hoc</em> <code data-pkg="base" data-rdoc="NA">is.na</code>¬†:</p>
<pre class="{r}"><code>is.na(taille &gt; 1.8)</code></pre>
<p>Pour compliquer encore un peu le tout, lorsqu‚Äôon utilise une condition pour l‚Äôindexation, si la condition renvoie <code>NA</code>, <strong>R</strong> ne s√©lectionne pas l‚Äô√©l√©ment mais retourne quand m√™me la valeur <code>NA</code>. Ceci a donc des cons√©quences sur le r√©sultat d‚Äôune indexation par comparaison.</p>
<p>Par exemple si je cherche √† conna√Ætre le poids des personnes mesurant 1,80 m√®tre ou plus¬†:</p>
<pre class="{r}"><code>taille
poids
poids[taille &gt; 1.8]</code></pre>
<p>Les √©l√©ments pour lesquels la taille n‚Äôest pas connue ont √©t√© transform√©s en <code>NA</code>, ce qui n‚Äôinfluera pas le calcul d‚Äôune moyenne. Par contre, lorsqu‚Äôon utilisera assignation et indexation ensemble, cela peut cr√©er des probl√®mes. Il est donc pr√©f√©rable lorsque l‚Äôon a des valeurs manquantes de les exclure ainsi¬†:</p>
<pre class="{r}"><code>poids[taille &gt; 1.8 &amp; !is.na(taille)]</code></pre>
<p>Pour plus de d√©tails sur les conditions et le calcul logique dans <strong>R</strong>, on pourra se r√©f√©rer au <a href="conditions-et-comparaisons.html">chapitre d√©di√©</a>.</p>
<h2 id="index-des-concepts_assignation-par-indexation">Assignation par indexation</h2>
<p>Dans tous les exemples pr√©c√©dents, on a utilis√© l‚Äôindexation pour extraire une partie d‚Äôun vecteur, en pla√ßant l‚Äôop√©ration d‚Äôindexation √† droite de l‚Äôop√©rateur <code>assignation. Dans ce cas, les √©l√©ments s√©lectionn√©s par l'indexation sont alors remplac√©s par les valeurs indiqu√©es √† droite de l'op√©rateur</code>recyclage</p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<h2 id="index-des-concepts_,">
,
</h2>
<p><dfn>, l‚Äôindexation par nom et l‚Äôindexation par condition.</dfn></p>
<pre class="{r}"><code>l
l[c(1,3,4)]
l[c("majuscules", "minuscules")]
l[c(TRUE, TRUE, FALSE, FALSE, TRUE)]</code></pre>
<p>M√™me si l‚Äôon extrait un seul √©l√©ment, l‚Äôextraction obtenue avec les crochets simples renvoie toujours une liste, ici compos√©e d‚Äôun seul √©l√©ment¬†:</p>
<pre class="{r}"><code>str(l[1])</code></pre>
<p>Supposons que je souhaite calculer la moyenne des valeurs du premier √©l√©ment de ma liste. Essayons la commande suivante¬†:</p>
<pre class="{r}"><code>mean(l[1])</code></pre>
<p>Nous obtenons un message d‚Äôerreur. En effet, <strong>R</strong> ne sait pas calculer une moyenne √† partir d‚Äôune liste. Ce qu‚Äôil lui faut, c‚Äôest un vecteur de valeurs num√©riques. Autrement dit, ce que nous cherchons √† obtenir c‚Äôest le contenu m√™me du premier √©l√©ment de notre liste et non une liste √† un seul √©l√©ment.</p>
<p>C‚Äôest ici que les doubles crochets (<code>[[]]</code>) vont rentrer en jeu. Pour ces derniers, nous pourrons utiliser l‚Äôindexation par position ou l‚Äôindexation par nom, mais pas l‚Äôindexation par condition. De plus, le crit√®re que l‚Äôon indiquera doit indiquer un et un seul √©l√©ment de notre liste. Au lieu de renvoyer une liste √† un √©l√©ment, les doubles crochets vont renvoyer l‚Äô√©l√©ment d√©sign√©. Vite, un exemple¬†:</p>
<pre class="{r}"><code>str(l[1])
str(l[[1]])</code></pre>
<p>Maintenant, nous pouvons calculer notre moyenne¬†:</p>
<pre class="{r}"><code>mean(l[[1]])</code></pre>
<p>Nous pouvons aussi tester l‚Äôindexation par nom,</p>
<pre class="{r}"><code>l[["mois"]]</code></pre>
<p>mais il faut avouer que cette √©criture avec doubles crochets et guillemets est un peu lourde. Heuresement, un nouvel acteur entre en sc√®ne¬†: le symbole dollar (<code>$</code>). C‚Äôest un raccourci des doubles crochets pour l‚Äôindexation par nom. Que l‚Äôon utilise ainsi¬†:</p>
<pre class="{r}"><code>l$mois</code></pre>
<p>Les √©critures <code>l$mois</code> et <code>l[["mois"]]</code> sont √©quivalentes. Attention¬†! Cela ne fonctionne que pour l‚Äôindexation par nom.</p>
<p><code>{r, eval=FALSE} l$1</code></p>
<pre><code>Error: unexpected numeric constant in "l$1"</code></pre>
<p>L‚Äôassignation par indexation fonctionne √©galement avec les doubles crochets ou le signe dollar¬†:</p>
<p>```{r} l[[2]] tableau de donn√©es</p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donn√©es</a></li>
</ul>
<h2 id="index-des-concepts_A">
A
</h2>
<p><dfn>ACM</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><dfn>ACP</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><dfn>AFC</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><dfn>√¢ge</dfn></p>
<ul>
<li><a href="#calculer-un-age">Calculer un √¢ge</a></li>
</ul>
<p><dfn>√¢ge atteint dans l‚Äôann√©e</dfn></p>
<ul>
<li><a href="#calculer-un-age">Calculer un √¢ge</a></li>
</ul>
<p><dfn>√¢ge au dernier anniversaire</dfn></p>
<ul>
<li><a href="#calculer-un-age">Calculer un √¢ge</a></li>
</ul>
<p><dfn>√¢ge exact</dfn></p>
<ul>
<li><a href="#calculer-un-age">Calculer un √¢ge</a></li>
</ul>
<p><dfn>AIC</dfn></p>
<ul>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><dfn>aide</dfn></p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
</ul>
<p><dfn>aide en ligne</dfn></p>
<ul>
<li><a href="#ou-trouver-de-l-aide">O√π trouver de l‚Äôaide¬†?</a></li>
</ul>
<p><dfn lang="en">Akaike Information Criterion</dfn></p>
<ul>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><dfn>al√©atoire, √©chantillonnage</dfn></p>
<ul>
<li><a href="#definir-un-plan-d-echantillonnage-complexe">D√©finir un plan d‚Äô√©chantillonnage complexe</a></li>
</ul>
<p><dfn>analyse de s√©quences</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
</ul>
<p><dfn>analyse des biographies</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
</ul>
<p><dfn>analyse des correspondances multiples</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><dfn>analyse en composante principale</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><dfn>analyse factorielle</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><dfn>analyse factorielle des correspondances</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><dfn>analyse mixte de Hill et Smith</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><dfn>appariement optimal</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
</ul>
<p><dfn>arbre de classification</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><dfn>argument</dfn></p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
</ul>
<p><dfn>argument nomm√©</dfn></p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
</ul>
<p><dfn>argument non nomm√©</dfn></p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
</ul>
<p><dfn>assignation par indexation</dfn></p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donn√©es</a></li>
</ul>
<p><dfn>assignation, op√©rateur</dfn></p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
</ul>
<p><dfn>attribut</dfn></p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><dfn>autocompl√©tion</dfn></p>
<ul>
<li><a href="#organiser-ses-fichiers">Organiser ses fichiers</a></li>
<li><a href="#premier-contact">Premier contact</a></li>
<li><a href="#presentation-et-philosophie">Pr√©sentation et Philosophie</a></li>
</ul>
<h2 id="index-des-concepts_B">
B
</h2>
<p><dfn>barres cumul√©es, graphique</dfn></p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
</ul>
<p><dfn>b√¢ton, diagramme</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><dfn>binaire, r√©gression logistique</dfn></p>
<ul>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><dfn>biographie, analyse</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
</ul>
<p><dfn>bitmap</dfn></p>
<ul>
<li><a href="#export-de-graphiques">Export de graphiques</a></li>
<li><a href="#graphiques-univaries">Graphiques univari√©s</a></li>
</ul>
<p><dfn>bo√Æte √† moustache</dfn></p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
</ul>
<p><dfn>bo√Æte √† moustaches</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><dfn>bool√©enne, valeur</dfn></p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>bool√©enne, variable</dfn></p>
<ul>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><dfn lang="en">boxplot</dfn></p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<h2 id="index-des-concepts_C">
C
</h2>
<p><dfn>CAH</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><dfn>camembert, graphique</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><dfn>caract√®res, cha√Æne</dfn></p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>cat√©gorielle, variable</dfn></p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellis√©s</a></li>
</ul>
<p><dfn>cercle de corr√©lation</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><dfn>cha√Æne de caract√®res</dfn></p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn lang="en">character</dfn></p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>chemin relatif</dfn></p>
<ul>
<li><a href="#organiser-ses-fichiers">Organiser ses fichiers</a></li>
</ul>
<p><dfn>Chi¬≤, distance</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><dfn>Chi¬≤, r√©sidus</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>Chi¬≤, test</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<p><dfn>classe de valeurs</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><dfn>classe, homog√©n√©it√©</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
</ul>
<p><dfn>classification ascendante hi√©rarchique</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><dfn>classification, arbre</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><dfn>Cleveland, diagramme</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><dfn lang="en">cluster</dfn></p>
<ul>
<li><a href="#definir-un-plan-d-echantillonnage-complexe">D√©finir un plan d‚Äô√©chantillonnage complexe</a></li>
</ul>
<p><dfn>coefficient de contingence de Cramer</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>coefficient de corr√©lation</dfn></p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
</ul>
<p><dfn>coefficient, mod√®le</dfn></p>
<ul>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><dfn>coloration syntaxique</dfn></p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
<li><a href="#presentation-et-philosophie">Pr√©sentation et Philosophie</a></li>
</ul>
<p><dfn>commentaire</dfn></p>
<ul>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
</ul>
<p><dfn>comparaison de m√©dianes, test</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>comparaison de moyennes</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<p><dfn>comparaison de proportions, test</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>comparaison, op√©rateur</dfn></p>
<ul>
<li><a href="conditions-et-comparaisons.html">Conditions et comparaisons</a></li>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn lang="en">Comprehensive R Archive Network</dfn></p>
<ul>
<li><a href="#extensions">Extensions</a></li>
</ul>
<p><dfn>condition, indexation</dfn></p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donn√©es</a></li>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>confusion, matrice</dfn></p>
<ul>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><dfn>console</dfn></p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
</ul>
<p><dfn>corr√©lation, cercle</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><dfn>corr√©lation, coefficient</dfn></p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
</ul>
<p><dfn>correspondances, analyse factorielle</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><dfn>couleur, palette</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><dfn>Cramer, coefficient de contingence</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>CRAN</dfn></p>
<ul>
<li><a href="#extensions">Extensions</a></li>
</ul>
<p><dfn>crois√©, tableau</dfn></p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
</ul>
<p><dfn>CSV, fichier</dfn></p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<h2 id="index-des-concepts_D">
D
</h2>
<p><dfn lang="en">data frame</dfn></p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donn√©es</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
</ul>
<p><dfn>date, variable</dfn></p>
<ul>
<li><a href="#calculer-un-age">Calculer un √¢ge</a></li>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><dfn>dendrogramme</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><dfn>densit√©, estimation locale</dfn></p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
</ul>
<p><dfn>descriptive, statistique</dfn></p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><dfn lang="en">design</dfn></p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<p><dfn>diagramme de Cleveland</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><dfn>diagramme en b√¢tons</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><dfn>diagramme en secteur</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><dfn>distance</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><dfn>distance de Gower</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><dfn>distance du Chi¬≤</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><dfn>distance du Phi¬≤</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><dfn>distance, matrice</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
</ul>
<p><dfn>distribution</dfn></p>
<ul>
<li><a href="#graphiques-univaries">Graphiques univari√©s</a></li>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><dfn>donn√©e labeliss√©e</dfn></p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellis√©s</a></li>
</ul>
<p><dfn>donn√©es pond√©r√©es</dfn></p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<p><dfn>donn√©es, exporter</dfn></p>
<ul>
<li><a href="#export-de-donnees">Export de donn√©es</a></li>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><dfn>donn√©es, tableau</dfn></p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donn√©es</a></li>
</ul>
<h2 id="index-des-concepts_E">
E
</h2>
<p><dfn>√©cart-type</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><dfn>√©cart interquartile</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><dfn>√©chantillonnage al√©atoire simple</dfn></p>
<ul>
<li><a href="#definir-un-plan-d-echantillonnage-complexe">D√©finir un plan d‚Äô√©chantillonnage complexe</a></li>
</ul>
<p><dfn>√©chantillonnage √©quiprobable</dfn></p>
<ul>
<li><a href="#definir-un-plan-d-echantillonnage-complexe">D√©finir un plan d‚Äô√©chantillonnage complexe</a></li>
</ul>
<p><dfn>√©chantillonnage par grappes</dfn></p>
<ul>
<li><a href="#definir-un-plan-d-echantillonnage-complexe">D√©finir un plan d‚Äô√©chantillonnage complexe</a></li>
</ul>
<p><dfn>√©chantillonnage stratifi√©</dfn></p>
<ul>
<li><a href="#definir-un-plan-d-echantillonnage-complexe">D√©finir un plan d‚Äô√©chantillonnage complexe</a></li>
</ul>
<p><dfn>√©chantillonnage, plan</dfn></p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<p><dfn>√©diteur de script</dfn></p>
<ul>
<li><a href="#presentation-et-philosophie">Pr√©sentation et Philosophie</a></li>
</ul>
<p><dfn lang="en">empirical cumulative distribution function</dfn></p>
<ul>
<li><a href="#graphiques-univaries">Graphiques univari√©s</a></li>
</ul>
<p><dfn>entier</dfn></p>
<ul>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
</ul>
<p><dfn>entier, nombre</dfn></p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>entropie transversale</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
</ul>
<p><dfn>environnement de d√©veloppement</dfn></p>
<ul>
<li><a href="#presentation-et-philosophie">Pr√©sentation et Philosophie</a></li>
</ul>
<p><dfn>environnement de travail</dfn></p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
</ul>
<p><dfn>√©quiprobable, √©chantillonnage</dfn></p>
<ul>
<li><a href="#definir-un-plan-d-echantillonnage-complexe">D√©finir un plan d‚Äô√©chantillonnage complexe</a></li>
</ul>
<p><dfn>estimation locale de densit√©</dfn></p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
</ul>
<p><dfn>estimation par noyau</dfn></p>
<ul>
<li><a href="#graphiques-univaries">Graphiques univari√©s</a></li>
</ul>
<p><dfn>√©tendue</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><dfn>√©tiquette de valeur</dfn></p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellis√©s</a></li>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><dfn>√©tiquette de variable</dfn></p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><dfn>√©tiquettes de valeurs</dfn></p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><dfn lang="en">event history analysis</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
</ul>
<p><dfn>exact, √¢ge</dfn></p>
<ul>
<li><a href="#calculer-un-age">Calculer un √¢ge</a></li>
</ul>
<p><dfn>explicative, variable</dfn></p>
<ul>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><dfn>export de graphiques</dfn></p>
<ul>
<li><a href="#export-de-graphiques">Export de graphiques</a></li>
<li><a href="#graphiques-univaries">Graphiques univari√©s</a></li>
</ul>
<p><dfn>exporter des donn√©es</dfn></p>
<ul>
<li><a href="#export-de-donnees">Export de donn√©es</a></li>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><dfn>extension</dfn></p>
<ul>
<li><a href="#extensions">Extensions</a></li>
</ul>
<h2 id="index-des-concepts_F">
F
</h2>
<p><dfn>facteur</dfn></p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellis√©s</a></li>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><dfn lang="en">factor</dfn></p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellis√©s</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
</ul>
<p><dfn>factoriel, plan</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><dfn>factorielle, analyse</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><dfn>fichier de commandes</dfn></p>
<ul>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
</ul>
<p><dfn>fichier texte</dfn></p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><dfn>fichiers <strong>Shapefile</strong></dfn></p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><dfn>Fisher, test exact</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>fonction</dfn></p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
</ul>
<p><dfn>fonction de r√©partition empirique</dfn></p>
<ul>
<li><a href="#graphiques-univaries">Graphiques univari√©s</a></li>
</ul>
<p><dfn>formule</dfn></p>
<ul>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
</ul>
<p><dfn>fr√©quence, tableau</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><dfn>fusion de tables</dfn></p>
<ul>
<li><a href="#fusion-de-tables">Fusion de tables</a></li>
</ul>
<h2 id="index-des-concepts_G">
G
</h2>
<p><dfn>gestionnaire de versions</dfn></p>
<ul>
<li><a href="#organiser-ses-fichiers">Organiser ses fichiers</a></li>
</ul>
<p><dfn>Gower, distance</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><dfn>Gower, indice de similarit√©</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><dfn>graphique, export</dfn></p>
<ul>
<li><a href="#export-de-graphiques">Export de graphiques</a></li>
<li><a href="#graphiques-univaries">Graphiques univari√©s</a></li>
</ul>
<p><dfn>grappe, √©chantillonnage</dfn></p>
<ul>
<li><a href="#definir-un-plan-d-echantillonnage-complexe">D√©finir un plan d‚Äô√©chantillonnage complexe</a></li>
</ul>
<h2 id="index-des-concepts_H">
H
</h2>
<p><dfn>Hill et Smith, analyse mixte</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><dfn>histogramme</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><dfn>historique des commandes</dfn></p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
</ul>
<p><dfn>homog√©n√©it√© des classes</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
</ul>
<h2 id="index-des-concepts_I">
I
</h2>
<p><dfn>image bitmap</dfn></p>
<ul>
<li><a href="#export-de-graphiques">Export de graphiques</a></li>
<li><a href="#graphiques-univaries">Graphiques univari√©s</a></li>
</ul>
<p><dfn>image matricielle</dfn></p>
<ul>
<li><a href="#export-de-graphiques">Export de graphiques</a></li>
<li><a href="#graphiques-univaries">Graphiques univari√©s</a></li>
</ul>
<p><dfn>image vectorielle</dfn></p>
<ul>
<li><a href="#export-de-graphiques">Export de graphiques</a></li>
<li><a href="#graphiques-univaries">Graphiques univari√©s</a></li>
</ul>
<p><dfn>ind√©pendance</dfn></p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
</ul>
<p><dfn>indertie, perte relative</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><dfn lang="en">index plots</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
</ul>
<p><dfn>indexation</dfn></p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>indexation bidimensionnelle</dfn></p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donn√©es</a></li>
</ul>
<p><dfn>indexation directe</dfn></p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>indexation par condition</dfn></p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donn√©es</a></li>
</ul>
<p><dfn>indexation par condition consiste √† fournir un vecteur logique indiquant si chaque √©l√©ment doit √™tre inclu (si <code>TRUE</code>) ou exclu (si <code>FALSE</code>). Par exemple¬†:</dfn></p>
<pre class="{r}"><code>sexe
sexe[c(TRUE, FALSE, FALSE, TRUE, FALSE, FALSE)]</code></pre>
<p>√âcrire manuellement une telle condition n‚Äôest pas tr√®s pratique √† l‚Äôusage. Mais supposons que nous ayons √©galement √† notre disposition les deux vecteurs suivants, √©galement de longueur 6.</p>
<pre class="{r}"><code>urbain op√©rateurs de comparaison suivants¬†:

Op√©rateur de comparaison  | Signification
:-----------|:-------------
`==` | √©gal √†
`!=` | diff√©rent de
`&gt;` | strictement sup√©rieur √†
`=` | sup√©rieur ou √©gal √†
`= 80</code></pre>
<p>Que s‚Äôest-il pass√©¬†? Nous avons fourni √† <strong>R</strong> une condition et il nous a renvoy√© un vecteur logique avec autant d‚Äô√©l√©ments qu‚Äôil y‚Äôa d‚Äôobservations et dont la valeur est <code>TRUE</code> si la condition est remplie et <code>FALSE</code> dans les autres cas. Nous pouvons alors utiliser ce vecteur logique pour obtenir la taille des participants pesant 80 kilogrammes ou plus¬†:</p>
<pre class="{r}"><code>taille[poids &gt;= 80]</code></pre>
<p>On peut combiner ou modifier des conditions √† l‚Äôaide des op√©rateurs logiques habituels¬†:</p>
<table>
<thead>
<tr class="header">
<th align="left">Op√©rateur logique</th>
<th align="left">Signification</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>&amp;</code></td>
<td align="left">et logique</td>
</tr>
<tr class="even">
<td align="left"><code>|</code></td>
<td align="left">ou logique</td>
</tr>
<tr class="odd">
<td align="left"><code>!</code></td>
<td align="left">n√©gation logique</td>
</tr>
</tbody>
</table>
<p>Comment les utilise-t-on¬†? Voyons tout de suite un exemple. Supposons que je veuille identifier les personnes pesant 80 kilogrammes ou plus <strong>et</strong> vivant en milieu urbain¬†:</p>
<p><code>{r, results='hide'} poids &gt;= 80 &amp; urbain</code></p>
<p>Les r√©sultats sont tr√®s diff√©rents si je souhaite isoler les personnes pesant 80 kilogrammes ou plus <em>ou</em> vivant milieu urbain¬†:</p>
<p><code>{r, results='hide'} poids &gt;= 80 &amp; urbain</code></p>
<p>Une remarque importante¬†: quand l‚Äôun des termes d‚Äôune condition comporte une valeur manquante (<code>NA</code>), le r√©sultat de cette condition n‚Äôest pas toujours <code>TRUE</code> ou <code>FALSE</code>, il peut aussi √™tre √† son tour une valeur manquante.</p>
<pre class="{r}"><code>taille
taille &gt; 1.8</code></pre>
<p>On voit que le test <code>NA &gt; 1.8</code> ne renvoie ni vrai ni faux, mais <code>NA</code>.</p>
<p>Une autre cons√©quence importante de ce comportement est qu‚Äôon ne peut pas utiliser l‚Äôop√©rateur l‚Äôexpression <code>== NA</code> pour tester la pr√©sence de valeurs manquantes. On utilisera √† la place la fonction <em>ad hoc</em> <code data-pkg="base" data-rdoc="NA">is.na</code>¬†:</p>
<pre class="{r}"><code>is.na(taille &gt; 1.8)</code></pre>
<p>Pour compliquer encore un peu le tout, lorsqu‚Äôon utilise une condition pour l‚Äôindexation, si la condition renvoie <code>NA</code>, <strong>R</strong> ne s√©lectionne pas l‚Äô√©l√©ment mais retourne quand m√™me la valeur <code>NA</code>. Ceci a donc des cons√©quences sur le r√©sultat d‚Äôune indexation par comparaison.</p>
<p>Par exemple si je cherche √† conna√Ætre le poids des personnes mesurant 1,80 m√®tre ou plus¬†:</p>
<pre class="{r}"><code>taille
poids
poids[taille &gt; 1.8]</code></pre>
<p>Les √©l√©ments pour lesquels la taille n‚Äôest pas connue ont √©t√© transform√©s en <code>NA</code>, ce qui n‚Äôinfluera pas le calcul d‚Äôune moyenne. Par contre, lorsqu‚Äôon utilisera assignation et indexation ensemble, cela peut cr√©er des probl√®mes. Il est donc pr√©f√©rable lorsque l‚Äôon a des valeurs manquantes de les exclure ainsi¬†:</p>
<pre class="{r}"><code>poids[taille &gt; 1.8 &amp; !is.na(taille)]</code></pre>
<p>Pour plus de d√©tails sur les conditions et le calcul logique dans <strong>R</strong>, on pourra se r√©f√©rer au <a href="conditions-et-comparaisons.html">chapitre d√©di√©</a>.</p>
<h2 id="index-des-concepts_assignation-par-indexation-1">Assignation par indexation</h2>
<p>Dans tous les exemples pr√©c√©dents, on a utilis√© l‚Äôindexation pour extraire une partie d‚Äôun vecteur, en pla√ßant l‚Äôop√©ration d‚Äôindexation √† droite de l‚Äôop√©rateur <code>assignation. Dans ce cas, les √©l√©ments s√©lectionn√©s par l'indexation sont alors remplac√©s par les valeurs indiqu√©es √† droite de l'op√©rateur</code>recyclage. Les deux commandes suivantes sont ainsi rigoureusement √©quivalentes¬†:</p>
<p>``<code>{r} sexe[c(1,3,4)] tous les √©l√©ments sauf celui-l√†.  - Si l'on indique des cha√Ænes de caract√®res, c'est l'indexation par nom¬†: on indique le nom des √©l√©ments que l'on souhaite extraire. Cette forme d'indexation ne fonctionne que si le vecteur est nomm√©.  - Si l'on transmets des valeurs logiques, le plus souvent sous la forme d'une condition, c'est l'indexation par condition¬†:</code>TRUE<code>indique les √©l√©ments √† extraire et</code>FALSE<code>les √©l√©ments √† exclure. Il faut √™tre vigilant aux valeurs manquantes (</code>NA<code>) dans ce cas pr√©cis.  - Enfin, il est possible de modifier que certains √©l√©ments d'un vecteur en ayant recours √† la fois √† l'indexation (</code>[]<code>) et √† l'assignation (</code></p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>indexation par nom</dfn></p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donn√©es</a></li>
</ul>
<p><dfn>indexation par position</dfn></p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>indexation, assignation</dfn></p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donn√©es</a></li>
</ul>
<p><dfn>indice de similarit√©</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><dfn>indice de similarit√© de Gower</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><dfn>inertie</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><dfn>inertie, saut</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><dfn>installation</dfn></p>
<ul>
<li><a href="#installation-de-R-et-RStudio">Installation de R et RStudio</a></li>
</ul>
<p><dfn lang="en">integer</dfn></p>
<ul>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>interface</dfn></p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
</ul>
<p><dfn>interquartilen √©cart</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><dfn>intervalle de confiance</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="#intervalles-de-confiance">Intervalles de confiance</a></li>
</ul>
<p><dfn>intervalle de confiance d‚Äôun odds ratio</dfn></p>
<ul>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><dfn>intervalle de confiance d‚Äôune moyenne</dfn></p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<p><dfn>intervalle de confiance d‚Äôune proportion</dfn></p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
<li><a href="#intervalles-de-confiance">Intervalles de confiance</a></li>
</ul>
<p><dfn>invite de commande</dfn></p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
</ul>
<h2 id="index-des-concepts_L">
L
</h2>
<p><dfn>labelled data</dfn></p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellis√©s</a></li>
</ul>
<p><dfn lang="en">labelled vector</dfn></p>
<ul>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><dfn>labellis√©e, donn√©e</dfn></p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellis√©s</a></li>
</ul>
<p><dfn>labellis√©e, variable</dfn></p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><dfn lang="en">level, factor</dfn></p>
<ul>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
</ul>
<p><dfn>libre, logiciel</dfn></p>
<ul>
<li><a href="#presentation-et-philosophie">Pr√©sentation et Philosophie</a></li>
</ul>
<p><dfn lang="en">life course analysis</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
</ul>
<p><dfn>lin√©aire, r√©gression</dfn></p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
</ul>
<p><dfn>liste</dfn></p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donn√©es</a></li>
</ul>
<p><dfn lang="en">logical</dfn></p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>logiciel libre</dfn></p>
<ul>
<li><a href="#presentation-et-philosophie">Pr√©sentation et Philosophie</a></li>
</ul>
<p><dfn>logique, op√©rateur</dfn></p>
<ul>
<li><a href="conditions-et-comparaisons.html">Conditions et comparaisons</a></li>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>logique, valeur</dfn></p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>logistique, r√©gression</dfn></p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><dfn>loi normale</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<h2 id="index-des-concepts_M">
M
</h2>
<p><dfn>Mann-Whitney, test</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>manquante, valeur</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn lang="en">matching, optimal</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
</ul>
<p><dfn>matrice de confusion</dfn></p>
<ul>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><dfn>matrice de distances</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><dfn>maximum</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><dfn>m√©diane</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><dfn>m√©diane, test de comparaison</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>m√©tadonn√©e</dfn></p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><dfn>m√©thode de Ward</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><dfn>minimum</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><dfn>modalit√©</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><dfn>modalit√© de r√©f√©rence</dfn></p>
<ul>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><dfn>modalit√©, facteur</dfn></p>
<ul>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
</ul>
<p><dfn>mod√®le lin√©aire g√©n√©ralis√©</dfn></p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><dfn>mosa√Øque, graphique</dfn></p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
</ul>
<p><dfn>moustaches, bo√Æte</dfn></p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><dfn>moyenne</dfn></p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><dfn>moyenne, √¢ge</dfn></p>
<ul>
<li><a href="#calculer-un-age">Calculer un √¢ge</a></li>
</ul>
<p><dfn>moyenne, comparaison</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<p><dfn>moyenne, intervalle de confiance</dfn></p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
<li><a href="#intervalles-de-confiance">Intervalles de confiance</a></li>
</ul>
<p><dfn lang="en">multidimensional scaling</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
</ul>
<p><dfn>multinomiale, r√©gression logistique</dfn></p>
<ul>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<h2 id="index-des-concepts_N">
N
</h2>
<p><dfn>NA</dfn></p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
</ul>
<p><dfn>nom, indexation</dfn></p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donn√©es</a></li>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>nombre entier</dfn></p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>nombre r√©el</dfn></p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>normale, loi</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>normalit√©, test de Shapiro-Wilk</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>notation formule</dfn></p>
<ul>
<li><a href="#formules">Formules</a></li>
</ul>
<p><dfn>notation scientifique</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>noyau, estimation</dfn></p>
<ul>
<li><a href="#graphiques-univaries">Graphiques univari√©s</a></li>
</ul>
<p><dfn lang="en">numeric</dfn></p>
<ul>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>num√©rique, variable</dfn></p>
<ul>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<h2 id="index-des-concepts_O">
O
</h2>
<p><dfn>observation</dfn></p>
<ul>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
</ul>
<p><dfn lang="en">odds ratio</dfn></p>
<ul>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><dfn>odds ratio, intervalle de confiance</dfn></p>
<ul>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><dfn>op√©rateur de comparaison</dfn></p>
<ul>
<li><a href="conditions-et-comparaisons.html">Conditions et comparaisons</a></li>
</ul>
<p><dfn>op√©rateur logique</dfn></p>
<ul>
<li><a href="conditions-et-comparaisons.html">Conditions et comparaisons</a></li>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn lang="en">optimal matching</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
</ul>
<p><dfn>optimal, appariement</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
</ul>
<p><dfn>ordinaire, r√©gression logistique</dfn></p>
<ul>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><dfn>ordonner le tri √† plat</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<h2 id="index-des-concepts_P">
P
</h2>
<p><dfn lang="en">package</dfn></p>
<ul>
<li><a href="#extensions">Extensions</a></li>
</ul>
<p><dfn>palette de couleurs</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><dfn>partition</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><dfn>pas √† pas, s√©lection descendante</dfn></p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><dfn>patron</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><dfn>perte relative d‚Äôinertie</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><dfn>Phi¬≤, distance</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><dfn>plan d‚Äô√©chantillonnage</dfn></p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<p><dfn>plan factoriel</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><dfn>pond√©ration</dfn></p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<p><dfn>position, indexation</dfn></p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donn√©es</a></li>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>projets</dfn></p>
<ul>
<li><a href="#organiser-ses-fichiers">Organiser ses fichiers</a></li>
</ul>
<p><dfn>prompt</dfn></p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
</ul>
<p><dfn>proportion, intervalle de confiance</dfn></p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
<li><a href="#intervalles-de-confiance">Intervalles de confiance</a></li>
</ul>
<p><dfn>proportion, test de comparaison</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>proxy</dfn></p>
<ul>
<li><a href="#installation-de-R-et-RStudio">Installation de R et RStudio</a></li>
</ul>
<h2 id="index-des-concepts_Q">
Q
</h2>
<p><dfn>qualitative, variable</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><dfn>quantile</dfn></p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><dfn>quantitative, variable</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><dfn>quartile</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<h2 id="index-des-concepts_R">
R
</h2>
<p><dfn>rapport des cotes</dfn></p>
<ul>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><dfn>recodage de variables</dfn></p>
<ul>
<li><a href="#recodage">Recodage</a></li>
</ul>
<p><dfn>recyclage</dfn></p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
</ul>
<p><dfn lang="en">recycling rule</dfn></p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
</ul>
<p><dfn>r√©el, nombre</dfn></p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>r√©f√©rence, modalit√©</dfn></p>
<ul>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><dfn>r√©gression lin√©aire</dfn></p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
</ul>
<p><dfn>r√©gression logistique</dfn></p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><dfn>r√©gression logistique binaire</dfn></p>
<ul>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><dfn>r√©gression logistique multinomiale</dfn></p>
<ul>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><dfn>r√©gression logistique ordinaire</dfn></p>
<ul>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><dfn>r√©gression, droite</dfn></p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
</ul>
<p><dfn>relatif, risque</dfn></p>
<ul>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><dfn>r√©partition empirique, fonction</dfn></p>
<ul>
<li><a href="#graphiques-univaries">Graphiques univari√©s</a></li>
</ul>
<p><dfn>r√©pertoire de travail</dfn></p>
<ul>
<li><a href="#organiser-ses-fichiers">Organiser ses fichiers</a></li>
</ul>
<p><dfn>r√©solution</dfn></p>
<ul>
<li><a href="#export-de-graphiques">Export de graphiques</a></li>
<li><a href="#graphiques-univaries">Graphiques univari√©s</a></li>
</ul>
<p><dfn>ressemblance</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><dfn>r√©volu, √¢ge</dfn></p>
<ul>
<li><a href="#calculer-un-age">Calculer un √¢ge</a></li>
</ul>
<p><dfn>risque relatif</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<h2 id="index-des-concepts_S">
S
</h2>
<p><dfn>SAS, fichier</dfn></p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><dfn>saut d‚Äôinertie</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><dfn>scientifique, notation</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>script</dfn></p>
<ul>
<li><a href="#organiser-ses-fichiers">Organiser ses fichiers</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
</ul>
<p><dfn>scripts</dfn></p>
<ul>
<li><a href="#presentation-et-philosophie">Pr√©sentation et Philosophie</a></li>
</ul>
<p><dfn>secteur, diagramme</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><dfn>section</dfn></p>
<ul>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
</ul>
<p><dfn>s√©lection descendante pas √† pas</dfn></p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><dfn>s√©parateur de champs</dfn></p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><dfn>s√©parateur d√©cimal</dfn></p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><dfn>s√©quence, analyse</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
</ul>
<p><dfn>s√©quence, tapis</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
</ul>
<p><dfn>Shapiro-Wilk, test de normalit√©</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>similarit√©, indice</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><dfn>sous-√©chantillon</dfn></p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<p><dfn>SPSS, fichier</dfn></p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><dfn>statistique bivari√©e</dfn></p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
</ul>
<p><dfn>statistique descriptive</dfn></p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><dfn>statistique univari√©e</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><dfn>strate</dfn></p>
<ul>
<li><a href="#definir-un-plan-d-echantillonnage-complexe">D√©finir un plan d‚Äô√©chantillonnage complexe</a></li>
</ul>
<p><dfn>stratifi√©, √©chantillonnage</dfn></p>
<ul>
<li><a href="#definir-un-plan-d-echantillonnage-complexe">D√©finir un plan d‚Äô√©chantillonnage complexe</a></li>
</ul>
<p><dfn>structure d‚Äôun objet</dfn></p>
<ul>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
</ul>
<p><dfn>Student, test-t</dfn></p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<p><dfn>Student, test t</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<h2 id="index-des-concepts_T">
T
</h2>
<p><dfn>tableau crois√©</dfn></p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
</ul>
<p><dfn>tableau crois√©, coefficient de contingence de Cramer</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>tableau crois√©, graphique en mosa√Øque</dfn></p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
</ul>
<p><dfn>tableau crois√©, test exact de Fisher</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>tableau de donn√©e</dfn></p>
<ul>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
</ul>
<p><dfn>tableau de donn√©es, fusion</dfn></p>
<ul>
<li><a href="#fusion-de-tables">Fusion de tables</a></li>
</ul>
<p><dfn>tableau de donn√©es, tri</dfn></p>
<ul>
<li><a href="#tris">Tris</a></li>
</ul>
<p><dfn>tableau de fr√©quences</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><dfn>tapis</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
</ul>
<p><dfn lang="en">task view</dfn></p>
<ul>
<li><a href="#extensions">Extensions</a></li>
</ul>
<p><dfn>test d‚Äô√©galit√© des variances</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>test de comparaison de deux proportions</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>test de normalit√© de Shapiro-Wilk</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>test de Wilcoxon/Mann-Whitney</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>test du Chi¬≤</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<p><dfn>test du Chi¬≤, r√©sidus</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>test exact de Fisher</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>test t de Student</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<p><dfn>texte</dfn></p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>texte tabul√©, fichier</dfn></p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><dfn>texte, fichier</dfn></p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><dfn>total</dfn></p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<p><dfn>trajectoire biographique</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
</ul>
<p><dfn>transversale, entropie</dfn></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
</ul>
<p><dfn>tri √† plat</dfn></p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><dfn>tri √† plat, ordonner</dfn></p>
<ul>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<h2 id="index-des-concepts_U">
U
</h2>
<p><dfn>univari√©e, statistique</dfn></p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<h2 id="index-des-concepts_V">
V
</h2>
<p><dfn>valeur bool√©enne</dfn></p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>valeur logique</dfn></p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>valeur manquante</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>valeur manquante d√©clar√©e</dfn></p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><dfn>valeur, √©tiquette</dfn></p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellis√©s</a></li>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><dfn>variable</dfn></p>
<ul>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
</ul>
<p><dfn>variable cat√©gorielle</dfn></p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellis√©s</a></li>
</ul>
<p><dfn>variable d‚Äôint√©r√™t</dfn></p>
<ul>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><dfn>variable explicative</dfn></p>
<ul>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><dfn>variable labellis√©e</dfn></p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><dfn>variable num√©rique</dfn></p>
<ul>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
</ul>
<p><dfn>variable qualitative</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><dfn>variable quantitative</dfn></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><dfn>variable, √©tiquette</dfn></p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellis√©s</a></li>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><dfn>variable, recodage</dfn></p>
<ul>
<li><a href="#recodage">Recodage</a></li>
</ul>
<p><dfn>variance</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<p><dfn>variance, test d‚Äô√©galit√©</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><dfn>vecteur</dfn></p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><dfn>vector</dfn></p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
</ul>
<p><dfn lang="en">viewer</dfn></p>
<ul>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
</ul>
<h2 id="index-des-concepts_W">
W
</h2>
<p><dfn>Ward, m√©thode</dfn></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><dfn>Wilcoxon, test</dfn></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
</div>

</article>
<article id="index-des-fonctions">

<div class="fluid-row" id="index-des-fonctions_header">


<h1 class="title">Index des fonctions</h1>

</div>


<nav>
<ul class="pagination pagination-sm">
<li>
<a href="#index-des-fonctions_%">%</a>
</li>
<li>
<a href="#index-des-fonctions_A">A</a>
</li>
<li>
<a href="#index-des-fonctions_B">B</a>
</li>
<li>
<a href="#index-des-fonctions_C">C</a>
</li>
<li>
<a href="#index-des-fonctions_D">D</a>
</li>
<li>
<a href="#index-des-fonctions_E">E</a>
</li>
<li>
<a href="#index-des-fonctions_F">F</a>
</li>
<li>
<a href="#index-des-fonctions_G">G</a>
</li>
<li>
<a href="#index-des-fonctions_H">H</a>
</li>
<li>
<a href="#index-des-fonctions_I">I</a>
</li>
<li>
<a href="#index-des-fonctions_J">J</a>
</li>
<li>
<a href="#index-des-fonctions_K">K</a>
</li>
<li>
<a href="#index-des-fonctions_L">L</a>
</li>
<li>
<a href="#index-des-fonctions_M">M</a>
</li>
<li>
<a href="#index-des-fonctions_N">N</a>
</li>
<li>
<a href="#index-des-fonctions_O">O</a>
</li>
<li>
<a href="#index-des-fonctions_P">P</a>
</li>
<li>
<a href="#index-des-fonctions_Q">Q</a>
</li>
<li>
<a href="#index-des-fonctions_R">R</a>
</li>
<li>
<a href="#index-des-fonctions_S">S</a>
</li>
<li>
<a href="#index-des-fonctions_T">T</a>
</li>
<li>
<a href="#index-des-fonctions_U">U</a>
</li>
<li>
<a href="#index-des-fonctions_V">V</a>
</li>
<li>
<a href="#index-des-fonctions_W">W</a>
</li>
<li>
<a href="#index-des-fonctions_X">X</a>
</li>
</ul>
<p/></nav>
<div id="index-des-fonctions_index_fonctions">
<h2 id="index-des-fonctions_%">
%
</h2>
<p><code data-pkg="base" data-rdoc="match">%in%</code> (base)</p>
<ul>
<li><a href="conditions-et-comparaisons.html">Conditions et comparaisons</a></li>
</ul>
<h2 id="index-des-fonctions_A">
A
</h2>
<p><code data-pkg="JLutils">A2Rplot</code> (JLutils)</p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><code data-pkg="graphics">abline</code> (graphics)</p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
</ul>
<p><code data-pkg="base">add.NA</code> (base)</p>
<ul>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><code data-pkg="base" data-rdoc="factor">addNA</code> (base)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellis√©s</a></li>
</ul>
<p><code data-pkg="questionr">addNAstr</code> (questionr)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellis√©s</a></li>
</ul>
<p><code data-pkg="ggplot2" data-rdoc="aes">aes</code> (ggplot2)</p>
<ul>
<li><a href="#graphiques-bivaries">Graphiques bivari√©s</a></li>
</ul>
<p><code data-pkg="eeptools">age_calc</code> (eeptools)</p>
<ul>
<li><a href="#calculer-un-age">Calculer un √¢ge</a></li>
</ul>
<p><code data-pkg="stats">aggregate</code> (stats)</p>
<ul>
<li><a href="#formules">Formules</a></li>
</ul>
<p><code data-pkg="cluster">agnes</code> (cluster)</p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><code data-pkg="survey" data-rdoc="anova.svyglm">AIC.svyglm</code> (survey)</p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<p><code data-pkg="effects" data-rdoc="effect">allEffects</code> (effects)</p>
<ul>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><code data-pkg="base">append</code> (base)</p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donn√©es</a></li>
</ul>
<p><code data-pkg="base" data-rdoc="character">as.character</code> (base)</p>
<ul>
<li><a href="#recodage">Recodage</a></li>
</ul>
<p><code data-pkg="cluster" data-rdoc="agnes.object">as.hclust</code> (cluster)</p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><code data-pkg="base">as.integer</code> (base)</p>
<ul>
<li><a href="#definir-un-plan-d-echantillonnage-complexe">D√©finir un plan d‚Äô√©chantillonnage complexe</a></li>
</ul>
<p><code data-pkg="base" data-rdoc="matrix">as.matrix</code> (base)</p>
<ul>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><code data-pkg="base" data-rdoc="numeric">as.numeric</code> (base)</p>
<ul>
<li><a href="#recodage">Recodage</a></li>
</ul>
<p><code data-pkg="haven" data-rdoc="labelled">as_factor</code> (haven)</p>
<ul>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<h2 id="index-des-fonctions_B">
B
</h2>
<p><code data-pkg="graphics">barplot</code> (graphics)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="JLutils">best.cutree</code> (JLutils)</p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><code data-pkg="ade4" data-rdoc="scatter">biplot</code> (ade4)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="ade4" data-rdoc="dudi.acm">boxplot</code> (ade4)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="graphics">boxplot</code> (graphics)</p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><code data-pkg="RColorBrewer" data-rdoc="RColorsBrewer">brewer.pal</code> (RColorBrewer)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="base">by</code> (base)</p>
<ul>
<li><a href="#sous-ensembles">Sous-ensembles</a></li>
</ul>
<h2 id="index-des-fonctions_C">
C
</h2>
<p><code data-pkg="base">c</code> (base)</p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><code data-pkg="FactoMineR">CA</code> (FactoMineR)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="base">cbind</code> (base)</p>
<ul>
<li><a href="#fusion-de-tables">Fusion de tables</a></li>
</ul>
<p><code data-pkg="questionr">chisq.residuals</code> (questionr)</p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><code data-pkg="stats">chisq.test</code> (stats)</p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<p><code data-pkg="base">class</code> (base)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellis√©s</a></li>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><code data-pkg="stats">cmdscale</code> (stats)</p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
</ul>
<p><code data-pkg="stats">coef</code> (stats)</p>
<ul>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><code data-pkg="survey" data-rdoc="svyglm">coef</code> (survey)</p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<p><code data-pkg="grDevices">colors</code> (grDevices)</p>
<ul>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><code data-pkg="dplyr" data-rdoc="bind">combine</code> (dplyr)</p>
<ul>
<li><a href="#fusion-de-tables">Fusion de tables</a></li>
</ul>
<p><code data-pkg="stats">complete.cases</code> (stats)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
</ul>
<p><code data-pkg="stats">confint</code> (stats)</p>
<ul>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><code data-pkg="survey" data-rdoc="surveysummary">confint</code> (survey)</p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<p><code data-pkg="graphics">contour</code> (graphics)</p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
</ul>
<p><code data-pkg="stats">cor</code> (stats)</p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
</ul>
<p><code data-pkg="MASS">corresp</code> (MASS)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="questionr">cprop</code> (questionr)</p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
</ul>
<p><code data-pkg="questionr">cramer.v</code> (questionr)</p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><code data-pkg="base">cut</code> (base)</p>
<ul>
<li><a href="#recodage">Recodage</a></li>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><code data-pkg="stats">cutree</code> (stats)</p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<h2 id="index-des-fonctions_D">
D
</h2>
<p><code data-pkg="cluster">daisy</code> (cluster)</p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><code data-pkg="utils">data</code> (utils)</p>
<ul>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
</ul>
<p><code data-pkg="base">data.frame</code> (base)</p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donn√©es</a></li>
</ul>
<p><code data-pkg="stats">density</code> (stats)</p>
<ul>
<li><a href="#graphiques-univaries">Graphiques univari√©s</a></li>
</ul>
<p><code data-pkg="questionr">describe</code> (questionr)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellis√©s</a></li>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donn√©es</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
</ul>
<p><code data-pkg="grDevices" data-rdoc="dev">dev.off</code> (grDevices)</p>
<ul>
<li><a href="#export-de-graphiques">Export de graphiques</a></li>
</ul>
<p><code data-pkg="grDevices" data-rdoc="dev2">dev.print</code> (grDevices)</p>
<ul>
<li><a href="#export-de-graphiques">Export de graphiques</a></li>
</ul>
<p><code data-pkg="base">dim</code> (base)</p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donn√©es</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
</ul>
<p><code data-pkg="FactoMineR">dimdesc</code> (FactoMineR)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="RColorBrewer" data-rdoc="RColorsBrewer">display.brewer.all</code> (RColorBrewer)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="TraMineR">disscenter</code> (TraMineR)</p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
</ul>
<p><code data-pkg="stats">dist</code> (stats)</p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><code data-pkg="ade4">dist.dudi</code> (ade4)</p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><code data-pkg="graphics">dotchart</code> (graphics)</p>
<ul>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><code data-pkg="base">dput</code> (base)</p>
<ul>
<li><a href="#recodage">Recodage</a></li>
</ul>
<p><code data-pkg="ade4">dudi.acm</code> (ade4)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><code data-pkg="ade4">dudi.coa</code> (ade4)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="ade4">dudi.mix</code> (ade4)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="ade4">dudi.pca</code> (ade4)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="lubridate" data-rdoc="Duration">Duration</code> (lubridate)</p>
<ul>
<li><a href="#calculer-un-age">Calculer un √¢ge</a></li>
</ul>
<h2 id="index-des-fonctions_E">
E
</h2>
<p><code data-pkg="utils">example</code> (utils)</p>
<ul>
<li><a href="#ou-trouver-de-l-aide">O√π trouver de l‚Äôaide¬†?</a></li>
</ul>
<p><code data-pkg="base" data-rdoc="log">exp</code> (base)</p>
<ul>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<h2 id="index-des-fonctions_F">
F
</h2>
<p><code data-pkg="ggplot2">facet_grid</code> (ggplot2)</p>
<ul>
<li><a href="#formules">Formules</a></li>
<li><a href="#graphiques-bivaries">Graphiques bivari√©s</a></li>
</ul>
<p><code data-pkg="ggplot2">facet_wrap</code> (ggplot2)</p>
<ul>
<li><a href="#formules">Formules</a></li>
<li><a href="#graphiques-bivaries">Graphiques bivari√©s</a></li>
</ul>
<p><code data-pkg="base">factor</code> (base)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellis√©s</a></li>
<li><a href="#recodage">Recodage</a></li>
</ul>
<p><code data-pkg="graphics">filled.contour</code> (graphics)</p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
</ul>
<p><code data-pkg="stats">fisher.test</code> (stats)</p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><code data-pkg="base">format</code> (base)</p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
</ul>
<p><code data-pkg="stats">formula</code> (stats)</p>
<ul>
<li><a href="#formules">Formules</a></li>
</ul>
<p><code data-pkg="questionr">freq</code> (questionr)</p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
<li><a href="#recodage">Recodage</a></li>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<h2 id="index-des-fonctions_G">
G
</h2>
<p><code data-pkg="ggplot2" data-rdoc="geom_point">geom_point</code> (ggplot2)</p>
<ul>
<li><a href="#graphiques-bivaries">Graphiques bivari√©s</a></li>
</ul>
<p><code data-pkg="ggplot2" data-rdoc="geom_smooth">geom_smooth</code> (ggplot2)</p>
<ul>
<li><a href="#graphiques-bivaries">Graphiques bivari√©s</a></li>
</ul>
<p><code data-pkg="ggplot2" data-rdoc="geom_vline">geom_vline</code> (ggplot2)</p>
<ul>
<li><a href="#graphiques-bivaries">Graphiques bivari√©s</a></li>
</ul>
<p><code data-pkg="raster">getValues</code> (raster)</p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><code data-pkg="base">getwd</code> (base)</p>
<ul>
<li><a href="#organiser-ses-fichiers">Organiser ses fichiers</a></li>
</ul>
<p><code data-pkg="ggplot2" data-rdoc="ggplot">ggplot</code> (ggplot2)</p>
<ul>
<li><a href="#graphiques-bivaries">Graphiques bivari√©s</a></li>
</ul>
<p><code data-pkg="ggplot2" data-rdoc="ggsave">ggsave</code> (ggplot2)</p>
<ul>
<li><a href="#graphiques-bivaries">Graphiques bivari√©s</a></li>
</ul>
<p><code data-pkg="dplyr">glimpse</code> (dplyr)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellis√©s</a></li>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donn√©es</a></li>
</ul>
<p><code data-pkg="stats">glm</code> (stats)</p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<h2 id="index-des-fonctions_H">
H
</h2>
<p><code data-pkg="fastcluster">hclust</code> (fastcluster)</p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><code data-pkg="stats">hclust</code> (stats)</p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><code data-pkg="FactoMineR">HCPC</code> (FactoMineR)</p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><code data-pkg="questionr">hdv2003</code> (questionr)</p>
<ul>
<li><a href="#formules">Formules</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
</ul>
<p><code data-pkg="utils">head</code> (utils)</p>
<ul>
<li><a href="conditions-et-comparaisons.html">Conditions et comparaisons</a></li>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donn√©es</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
</ul>
<p><code data-pkg="utils">help</code> (utils)</p>
<ul>
<li><a href="#ou-trouver-de-l-aide">O√π trouver de l‚Äôaide¬†?</a></li>
<li><a href="#premier-contact">Premier contact</a></li>
</ul>
<p><code data-pkg="utils">help.search</code> (utils)</p>
<ul>
<li><a href="#ou-trouver-de-l-aide">O√π trouver de l‚Äôaide¬†?</a></li>
</ul>
<p><code data-pkg="utils">help.start</code> (utils)</p>
<ul>
<li><a href="#ou-trouver-de-l-aide">O√π trouver de l‚Äôaide¬†?</a></li>
</ul>
<p><code data-pkg="graphics">hist</code> (graphics)</p>
<ul>
<li><a href="#graphiques-univaries">Graphiques univari√©s</a></li>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<h2 id="index-des-fonctions_I">
I
</h2>
<p><code data-pkg="questionr">icut</code> (questionr)</p>
<ul>
<li><a href="#recodage">Recodage</a></li>
</ul>
<p><code data-pkg="base">ifelse</code> (base)</p>
<ul>
<li><a href="#recodage">Recodage</a></li>
</ul>
<p><code data-pkg="graphics">image</code> (graphics)</p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
</ul>
<p><code data-pkg="ade4">inertia.dudi</code> (ade4)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="utils">install.packages</code> (utils)</p>
<ul>
<li><a href="#extensions">Extensions</a></li>
</ul>
<p><code data-pkg="devtools">install_github</code> (devtools)</p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
<li><a href="#extensions">Extensions</a></li>
<li><a href="#intervalles-de-confiance">Intervalles de confiance</a></li>
</ul>
<p><code data-pkg="lubridate" data-rdoc="Interval">Interval</code> (lubridate)</p>
<ul>
<li><a href="#calculer-un-age">Calculer un √¢ge</a></li>
</ul>
<p><code data-pkg="questionr">iorder</code> (questionr)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellis√©s</a></li>
</ul>
<p><code data-pkg="questionr">irec</code> (questionr)</p>
<ul>
<li><a href="#recodage">Recodage</a></li>
</ul>
<p><code data-pkg="base" data-rdoc="NA">is.na</code> (base)</p>
<ul>
<li><a href="#recodage">Recodage</a></li>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><code data-pkg="base" data-rdoc="numeric">is.numeric</code> (base)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellis√©s</a></li>
</ul>
<h2 id="index-des-fonctions_J">
J
</h2>
<p><code data-pkg="grDevices" data-rdoc="png">jpeg</code> (grDevices)</p>
<ul>
<li><a href="#export-de-graphiques">Export de graphiques</a></li>
</ul>
<h2 id="index-des-fonctions_K">
K
</h2>
<p><code data-pkg="MASS">kde2d</code> (MASS)</p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
</ul>
<h2 id="index-des-fonctions_L">
L
</h2>
<p><code data-pkg="haven">labelled</code> (haven)</p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><code data-pkg="labelled">labelled</code> (labelled)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellis√©s</a></li>
</ul>
<p><code data-pkg="base">length</code> (base)</p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donn√©es</a></li>
<li><a href="#premier-contact">Premier contact</a></li>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><code data-pkg="base" data-rdoc="Constants">letters</code> (base)</p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><code data-pkg="base" data-rdoc="Constants">LETTERS</code> (base)</p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><code data-pkg="base">levels</code> (base)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellis√©s</a></li>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
<li><a href="#tris">Tris</a></li>
</ul>
<p><code data-pkg="JLutils">lfactor</code> (JLutils)</p>
<ul>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><code data-pkg="base">library</code> (base)</p>
<ul>
<li><a href="#extensions">Extensions</a></li>
<li><a href="#organiser-ses-fichiers">Organiser ses fichiers</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
</ul>
<p><code data-pkg="base">list</code> (base)</p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donn√©es</a></li>
</ul>
<p><code data-pkg="stats">lm</code> (stats)</p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
</ul>
<p><code data-pkg="base">load</code> (base)</p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><code data-pkg="questionr">lookfor</code> (questionr)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellis√©s</a></li>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donn√©es</a></li>
</ul>
<p><code data-pkg="questionr" data-rdoc="rprop">lprop</code> (questionr)</p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
</ul>
<h2 id="index-des-fonctions_M">
M
</h2>
<p><code data-pkg="base" data-rdoc="Extremes">max</code> (base)</p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><code data-pkg="MASS">mca</code> (MASS)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="FactoMineR">MCA</code> (FactoMineR)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="base">mean</code> (base)</p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
<li><a href="#ou-trouver-de-l-aide">O√π trouver de l‚Äôaide¬†?</a></li>
<li><a href="#premier-contact">Premier contact</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
<li><a href="#sous-ensembles">Sous-ensembles</a></li>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><code data-pkg="labelled" data-rdoc="mean.labelled">mean</code> (labelled)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellis√©s</a></li>
</ul>
<p><code data-pkg="stats">median</code> (stats)</p>
<ul>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><code data-pkg="base">merge</code> (base)</p>
<ul>
<li><a href="#fusion-de-tables">Fusion de tables</a></li>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><code data-pkg="base" data-rdoc="Extremes">min</code> (base)</p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><code data-pkg="labelled">missing_to_na</code> (labelled)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellis√©s</a></li>
</ul>
<p><code data-pkg="labelled">missing_val</code> (labelled)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellis√©s</a></li>
</ul>
<p><code data-pkg="base" data-rdoc="Constants">month.abb</code> (base)</p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><code data-pkg="base" data-rdoc="Constants">month.name</code> (base)</p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><code data-pkg="vcd">mosaic</code> (vcd)</p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
</ul>
<p><code data-pkg="graphics">mosaicplot</code> (graphics)</p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
</ul>
<p><code data-pkg="nnet">multinom</code> (nnet)</p>
<ul>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<h2 id="index-des-fonctions_N">
N
</h2>
<p><code data-pkg="base">NA</code> (base)</p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><code data-pkg="base">names</code> (base)</p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donn√©es</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
<li><a href="#recodage">Recodage</a></li>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><code data-pkg="base" data-rdoc="nrow">ncol</code> (base)</p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donn√©es</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
</ul>
<p><code data-pkg="labelled">nolabel_to_na</code> (labelled)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellis√©s</a></li>
</ul>
<p><code data-pkg="base">nrow</code> (base)</p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donn√©es</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
</ul>
<p><code data-pkg="base">NULL</code> (base)</p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<h2 id="index-des-fonctions_O">
O
</h2>
<p><code data-pkg="questionr">odds.ratio</code> (questionr)</p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<p><code data-pkg="base">order</code> (base)</p>
<ul>
<li><a href="#tris">Tris</a></li>
</ul>
<h2 id="index-des-fonctions_P">
P
</h2>
<p><code data-pkg="graphics">par</code> (graphics)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><code data-pkg="FactoMineR">PCA</code> (FactoMineR)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="grDevices">pdf</code> (grDevices)</p>
<ul>
<li><a href="#export-de-graphiques">Export de graphiques</a></li>
</ul>
<p><code data-pkg="lubridate" data-rdoc="Period">Period</code> (lubridate)</p>
<ul>
<li><a href="#calculer-un-age">Calculer un √¢ge</a></li>
</ul>
<p><code data-pkg="base" data-rdoc="Constants">pi</code> (base)</p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><code data-pkg="graphics">pie</code> (graphics)</p>
<ul>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><code data-pkg="effects" data-rdoc="summary.effect">plot</code> (effects)</p>
<ul>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><code data-pkg="FactoMineR" data-rdoc="plot.MCA">plot</code> (FactoMineR)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><code data-pkg="graphics" data-rdoc="plot.default">plot</code> (graphics)</p>
<ul>
<li><a href="#graphiques-univaries">Graphiques univari√©s</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><code data-pkg="stats" data-rdoc="dendrogram">plot</code> (stats)</p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
<li><a href="#graphiques-univaries">Graphiques univari√©s</a></li>
<li><a href="#graphiques-univaries">Graphiques univari√©s</a></li>
</ul>
<p><code data-pkg="FactoMineR">plotellipses</code> (FactoMineR)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="grDevices">png</code> (grDevices)</p>
<ul>
<li><a href="#export-de-graphiques">Export de graphiques</a></li>
</ul>
<p><code data-pkg="grDevices">postscript</code> (grDevices)</p>
<ul>
<li><a href="#export-de-graphiques">Export de graphiques</a></li>
</ul>
<p><code data-pkg="stats" data-rdoc="predict.glm">predict</code> (stats)</p>
<ul>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><code data-pkg="survey" data-rdoc="svyglm">predict</code> (survey)</p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<p><code data-pkg="stats">princomp</code> (stats)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="questionr" data-rdoc="print.proptab">print</code> (questionr)</p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
</ul>
<p><code data-pkg="questionr">prop</code> (questionr)</p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
</ul>
<p><code data-pkg="JLutils">prop.ci</code> (JLutils)</p>
<ul>
<li><a href="#intervalles-de-confiance">Intervalles de confiance</a></li>
</ul>
<p><code data-pkg="JLutils">prop.ci.lower</code> (JLutils)</p>
<ul>
<li><a href="#intervalles-de-confiance">Intervalles de confiance</a></li>
</ul>
<p><code data-pkg="JLutils">prop.ci.upper</code> (JLutils)</p>
<ul>
<li><a href="#intervalles-de-confiance">Intervalles de confiance</a></li>
</ul>
<p><code data-pkg="base">prop.table</code> (base)</p>
<ul>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><code data-pkg="stats">prop.test</code> (stats)</p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="#intervalles-de-confiance">Intervalles de confiance</a></li>
</ul>
<h2 id="index-des-fonctions_Q">
Q
</h2>
<p><code data-pkg="ggplot2" data-rdoc="qplot">qplot</code> (ggplot2)</p>
<ul>
<li><a href="#graphiques-bivaries">Graphiques bivari√©s</a></li>
</ul>
<p><code data-pkg="questionr">quant.cut</code> (questionr)</p>
<ul>
<li><a href="#recodage">Recodage</a></li>
</ul>
<p><code data-pkg="stats">quantile</code> (stats)</p>
<ul>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<h2 id="index-des-fonctions_R">
R
</h2>
<p><code data-pkg="base">range</code> (base)</p>
<ul>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><code data-pkg="stats">range</code> (stats)</p>
<ul>
<li><a href="#formules">Formules</a></li>
</ul>
<p><code data-pkg="raster">raster</code> (raster)</p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><code data-pkg="base" data-rdoc="cbind">rbind</code> (base)</p>
<ul>
<li><a href="#fusion-de-tables">Fusion de tables</a></li>
</ul>
<p><code data-pkg="plyr">rbind.fill</code> (plyr)</p>
<ul>
<li><a href="#fusion-de-tables">Fusion de tables</a></li>
</ul>
<p><code data-pkg="utils" data-rdoc="read.csv">read.csv</code> (utils)</p>
<ul>
<li><a href="#graphiques-bivaries">Graphiques bivari√©s</a></li>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><code data-pkg="utils" data-rdoc="read.table">read.csv2</code> (utils)</p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><code data-pkg="foreign">read.dbf</code> (foreign)</p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><code data-pkg="utils" data-rdoc="read.table">read.delim</code> (utils)</p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><code data-pkg="utils" data-rdoc="read.table">read.delim2</code> (utils)</p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><code data-pkg="foreign">read.dta</code> (foreign)</p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><code data-pkg="foreign">read.spss</code> (foreign)</p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><code data-pkg="utils">read.table</code> (utils)</p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><code data-pkg="xlsx">read.xlsx</code> (xlsx)</p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><code data-pkg="xlsx" data-rdoc="read.xlsx">read.xlsx2</code> (xlsx)</p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><code data-pkg="foreign">read.xport</code> (foreign)</p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><code data-pkg="readr" data-rdoc="read_csv">read_csv</code> (readr)</p>
<ul>
<li><a href="#graphiques-bivaries">Graphiques bivari√©s</a></li>
</ul>
<p><code data-pkg="haven">read_dta</code> (haven)</p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><code data-pkg="readxl">read_excel</code> (readxl)</p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><code data-pkg="haven">read_sas</code> (haven)</p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><code data-pkg="haven">read_spss</code> (haven)</p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><code data-pkg="haven" data-rdoc="read_dta">read_stata</code> (haven)</p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><code data-pkg="maptools">readAsciiGrid</code> (maptools)</p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><code data-pkg="maptools">readShapeLines</code> (maptools)</p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><code data-pkg="maptools">readShapePoints</code> (maptools)</p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><code data-pkg="maptools">readShapePoly</code> (maptools)</p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><code data-pkg="maptools">readShapeSpatial</code> (maptools)</p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><code data-pkg="stats">rect.hclust</code> (stats)</p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><code data-pkg="stats">relevel</code> (stats)</p>
<ul>
<li><a href="#intervalles-de-confiance">Intervalles de confiance</a></li>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><code data-pkg="mosaic">relrisk</code> (mosaic)</p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><code data-pkg="utils">remove.packages</code> (utils)</p>
<ul>
<li><a href="#extensions">Extensions</a></li>
</ul>
<p><code data-pkg="questionr">rename.variable</code> (questionr)</p>
<ul>
<li><a href="#recodage">Recodage</a></li>
</ul>
<p><code data-pkg="base">rep</code> (base)</p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><code data-pkg="base" data-rdoc="library">require</code> (base)</p>
<ul>
<li><a href="#extensions">Extensions</a></li>
</ul>
<p><code data-pkg="base">row.names</code> (base)</p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donn√©es</a></li>
</ul>
<p><code data-pkg="questionr">rprop</code> (questionr)</p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
</ul>
<p><code data-pkg="graphics">rug</code> (graphics)</p>
<ul>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<h2 id="index-des-fonctions_S">
S
</h2>
<p><code data-pkg="ade4">s.arrow</code> (ade4)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="ade4">s.chull</code> (ade4)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="ade4">s.class</code> (ade4)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><code data-pkg="ade4">s.corcicle</code> (ade4)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="JLutils">s.freq</code> (JLutils)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="ade4">s.hist</code> (ade4)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="ade4">s.label</code> (ade4)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="ade4">s.value</code> (ade4)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="base">save</code> (base)</p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><code data-pkg="base" data-rdoc="save">save.image</code> (base)</p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><code data-pkg="ggplot2" data-rdoc="scale_brewer">scale</code> (ggplot2)</p>
<ul>
<li><a href="#graphiques-bivaries">Graphiques bivari√©s</a></li>
</ul>
<p><code data-pkg="ggplot2" data-rdoc="continuous_scale">scale_x_continuous</code> (ggplot2)</p>
<ul>
<li><a href="#graphiques-bivaries">Graphiques bivari√©s</a></li>
</ul>
<p><code data-pkg="ade4">scatter</code> (ade4)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="ade4" data-rdoc="score.acm">score</code> (ade4)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="ade4" data-rdoc="scatter">screeplot</code> (ade4)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="stats">sd</code> (stats)</p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><code data-pkg="JLutils">seq_heatmap</code> (JLutils)</p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
</ul>
<p><code data-pkg="TraMineR">seqdef</code> (TraMineR)</p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
</ul>
<p><code data-pkg="TraMineR">seqdist</code> (TraMineR)</p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><code data-pkg="TraMineR" data-rdoc="seqplot">seqdplot</code> (TraMineR)</p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
</ul>
<p><code data-pkg="TraMineR" data-rdoc="seqplot">seqfplot</code> (TraMineR)</p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
</ul>
<p><code data-pkg="TraMineR" data-rdoc="seqplot">seqHtplot</code> (TraMineR)</p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
</ul>
<p><code data-pkg="TraMineR" data-rdoc="seqplot">seqiplot</code> (TraMineR)</p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
</ul>
<p><code data-pkg="TraMineR" data-rdoc="seqplot">seqmsplot</code> (TraMineR)</p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
</ul>
<p><code data-pkg="TraMineR" data-rdoc="seqplot">seqmtplot</code> (TraMineR)</p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
</ul>
<p><code data-pkg="TraMineR">seqsubm</code> (TraMineR)</p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
</ul>
<p><code data-pkg="base" data-rdoc="getwd">setwd</code> (base)</p>
<ul>
<li><a href="#organiser-ses-fichiers">Organiser ses fichiers</a></li>
</ul>
<p><code data-pkg="stats">shapiro.test</code> (stats)</p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><code data-pkg="base">sort</code> (base)</p>
<ul>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
<li><a href="#tris">Tris</a></li>
</ul>
<p><code data-pkg="labelled">sort_val_labels</code> (labelled)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellis√©s</a></li>
</ul>
<p><code data-pkg="base">source</code> (base)</p>
<ul>
<li><a href="#organiser-ses-fichiers">Organiser ses fichiers</a></li>
</ul>
<p><code data-pkg="sp" data-rdoc="SpatialGridDataFrame">SpatialGridDataFrame</code> (sp)</p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><code data-pkg="stats">step</code> (stats)</p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><code data-pkg="utils">str</code> (utils)</p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donn√©es</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><code data-pkg="base">subset</code> (base)</p>
<ul>
<li><a href="#sous-ensembles">Sous-ensembles</a></li>
</ul>
<p><code data-pkg="survey" data-rdoc="subset.survey.design">subset</code> (survey)</p>
<ul>
<li><a href="#definir-un-plan-d-echantillonnage-complexe">D√©finir un plan d‚Äô√©chantillonnage complexe</a></li>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<p><code data-pkg="ade4" data-rdoc="dudi">summary</code> (ade4)</p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
</ul>
<p><code data-pkg="base">summary</code> (base)</p>
<ul>
<li><a href="conditions-et-comparaisons.html">Conditions et comparaisons</a></li>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donn√©es</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
<li><a href="#recodage">Recodage</a></li>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><code data-pkg="stats" data-rdoc="summary.glm">summary</code> (stats)</p>
<ul>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><code data-pkg="grDevices" data-rdoc="cairo">svg</code> (grDevices)</p>
<ul>
<li><a href="#export-de-graphiques">Export de graphiques</a></li>
</ul>
<p><code data-pkg="survey" data-rdoc="svyhist">svyboxplot</code> (survey)</p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<p><code data-pkg="survey">svyby</code> (survey)</p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<p><code data-pkg="survey" data-rdoc="svytable">svychisq</code> (survey)</p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<p><code data-pkg="survey">svyciprop</code> (survey)</p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<p><code data-pkg="survey">svydesign</code> (survey)</p>
<ul>
<li><a href="#definir-un-plan-d-echantillonnage-complexe">D√©finir un plan d‚Äô√©chantillonnage complexe</a></li>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<p><code data-pkg="survey">svyglm</code> (survey)</p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<p><code data-pkg="survey">svyhist</code> (survey)</p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<p><code data-pkg="survey" data-rdoc="surveysummary">svymean</code> (survey)</p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<p><code data-pkg="survey">svyplot</code> (survey)</p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<p><code data-pkg="survey">svyquantile</code> (survey)</p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<p><code data-pkg="survey">svyratio</code> (survey)</p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<p><code data-pkg="survey">svytable</code> (survey)</p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<p><code data-pkg="survey" data-rdoc="surveysummary">svytotal</code> (survey)</p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<p><code data-pkg="survey">svyttest</code> (survey)</p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<p><code data-pkg="survey" data-rdoc="surveysummary">svyvar</code> (survey)</p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<h2 id="index-des-fonctions_T">
T
</h2>
<p><code data-pkg="stats">t.test</code> (stats)</p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="#intervalles-de-confiance">Intervalles de confiance</a></li>
</ul>
<p><code data-pkg="base">table</code> (base)</p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="conditions-et-comparaisons.html">Conditions et comparaisons</a></li>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellis√©s</a></li>
<li><a href="#formules">Formules</a></li>
<li><a href="#intervalles-de-confiance">Intervalles de confiance</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
<li><a href="#recodage">Recodage</a></li>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><code data-pkg="utils" data-rdoc="head">tail</code> (utils)</p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donn√©es</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
</ul>
<p><code data-pkg="base">tapply</code> (base)</p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
<li><a href="#sous-ensembles">Sous-ensembles</a></li>
</ul>
<p><code data-pkg="dplyr">tbl_df</code> (dplyr)</p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><code data-pkg="grDevices" data-rdoc="png">tiff</code> (grDevices)</p>
<ul>
<li><a href="#export-de-graphiques">Export de graphiques</a></li>
</ul>
<p><code data-pkg="lubridate">time_length</code> (lubridate)</p>
<ul>
<li><a href="#calculer-un-age">Calculer un √¢ge</a></li>
</ul>
<p><code data-pkg="base">typeof</code> (base)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellis√©s</a></li>
</ul>
<h2 id="index-des-fonctions_U">
U
</h2>
<p><code data-pkg="base">unname</code> (base)</p>
<ul>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<p><code data-pkg="utils">update.packages</code> (utils)</p>
<ul>
<li><a href="#extensions">Extensions</a></li>
<li><a href="#installation-de-R-et-RStudio">Installation de R et RStudio</a></li>
</ul>
<h2 id="index-des-fonctions_V">
V
</h2>
<p><code data-pkg="labelled" data-rdoc="val_labels">val_label</code> (labelled)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellis√©s</a></li>
</ul>
<p><code data-pkg="labelled">val_labels</code> (labelled)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellis√©s</a></li>
</ul>
<p><code data-pkg="labelled">val_labels_to_na</code> (labelled)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellis√©s</a></li>
</ul>
<p><code data-pkg="base" data-rdoc="cor">var</code> (base)</p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<p><code data-pkg="stats" data-rdoc="cor">var</code> (stats)</p>
<ul>
<li><a href="#premier-contact">Premier contact</a></li>
</ul>
<p><code data-pkg="stats">var.test</code> (stats)</p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<p><code data-pkg="labelled">var_label</code> (labelled)</p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellis√©s</a></li>
</ul>
<p><code data-pkg="utils">View</code> (utils)</p>
<ul>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donn√©es</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
</ul>
<h2 id="index-des-fonctions_W">
W
</h2>
<p><code data-pkg="grDevices" data-rdoc="windows">win.metafile</code> (grDevices)</p>
<ul>
<li><a href="#export-de-graphiques">Export de graphiques</a></li>
</ul>
<p><code data-pkg="utils" data-rdoc="write.table">write.csv</code> (utils)</p>
<ul>
<li><a href="#export-de-donnees">Export de donn√©es</a></li>
</ul>
<p><code data-pkg="foreign">write.dbf</code> (foreign)</p>
<ul>
<li><a href="#export-de-donnees">Export de donn√©es</a></li>
</ul>
<p><code data-pkg="foreign">write.dta</code> (foreign)</p>
<ul>
<li><a href="#export-de-donnees">Export de donn√©es</a></li>
</ul>
<p><code data-pkg="foreign">write.foreign</code> (foreign)</p>
<ul>
<li><a href="#export-de-donnees">Export de donn√©es</a></li>
</ul>
<p><code data-pkg="utils">write.table</code> (utils)</p>
<ul>
<li><a href="#export-de-donnees">Export de donn√©es</a></li>
</ul>
<p><code data-pkg="xlsx">write.xlsx</code> (xlsx)</p>
<ul>
<li><a href="#export-de-donnees">Export de donn√©es</a></li>
</ul>
<p><code data-pkg="readr">write_csv</code> (readr)</p>
<ul>
<li><a href="#export-de-donnees">Export de donn√©es</a></li>
</ul>
<p><code data-pkg="haven">write_dta</code> (haven)</p>
<ul>
<li><a href="#export-de-donnees">Export de donn√©es</a></li>
</ul>
<p><code data-pkg="haven">write_sav</code> (haven)</p>
<ul>
<li><a href="#export-de-donnees">Export de donn√©es</a></li>
</ul>
<p><code data-pkg="maptools" data-rdoc="readAsciiGrid">writeAsciiGrid</code> (maptools)</p>
<ul>
<li><a href="#export-de-donnees">Export de donn√©es</a></li>
</ul>
<p><code data-pkg="maptools" data-rdoc="readShapeLines">writeLinesShape</code> (maptools)</p>
<ul>
<li><a href="#export-de-donnees">Export de donn√©es</a></li>
</ul>
<p><code data-pkg="maptools" data-rdoc="readShapePoints">writePointsShape</code> (maptools)</p>
<ul>
<li><a href="#export-de-donnees">Export de donn√©es</a></li>
</ul>
<p><code data-pkg="maptools" data-rdoc="readShapePoly">writePolyShape</code> (maptools)</p>
<ul>
<li><a href="#export-de-donnees">Export de donn√©es</a></li>
</ul>
<p><code data-pkg="questionr">wtd.mean</code> (questionr)</p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<p><code data-pkg="questionr">wtd.table</code> (questionr)</p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<p><code data-pkg="questionr" data-rdoc="wtd.mean">wtd.var</code> (questionr)</p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<h2 id="index-des-fonctions_X">
X
</h2>
<p><code data-pkg="stats">xtabs</code> (stats)</p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="#formules">Formules</a></li>
<li><a href="#recodage">Recodage</a></li>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
</ul>
</div>

</article>
<article id="index-des-extensions">

<div class="fluid-row" id="index-des-extensions_header">


<h1 class="title">Index des extensions</h1>

</div>


<nav>
<ul class="pagination pagination-sm">
<li>
<a href="#index-des-extensions_A">A</a>
</li>
<li>
<a href="#index-des-extensions_B">B</a>
</li>
<li>
<a href="#index-des-extensions_C">C</a>
</li>
<li>
<a href="#index-des-extensions_D">D</a>
</li>
<li>
<a href="#index-des-extensions_E">E</a>
</li>
<li>
<a href="#index-des-extensions_F">F</a>
</li>
<li>
<a href="#index-des-extensions_G">G</a>
</li>
<li>
<a href="#index-des-extensions_H">H</a>
</li>
<li>
<a href="#index-des-extensions_J">J</a>
</li>
<li>
<a href="#index-des-extensions_L">L</a>
</li>
<li>
<a href="#index-des-extensions_M">M</a>
</li>
<li>
<a href="#index-des-extensions_N">N</a>
</li>
<li>
<a href="#index-des-extensions_P">P</a>
</li>
<li>
<a href="#index-des-extensions_Q">Q</a>
</li>
<li>
<a href="#index-des-extensions_R">R</a>
</li>
<li>
<a href="#index-des-extensions_S">S</a>
</li>
<li>
<a href="#index-des-extensions_T">T</a>
</li>
<li>
<a href="#index-des-extensions_U">U</a>
</li>
<li>
<a href="#index-des-extensions_V">V</a>
</li>
<li>
<a href="#index-des-extensions_X">X</a>
</li>
</ul>
<p/></nav>
<div id="index-des-extensions_index_extensions">
<h2 id="index-des-extensions_A">
A
</h2>
<p><code class="pkg">ade4</code></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
<li><a href="#extensions">Extensions</a></li>
</ul>
<h2 id="index-des-extensions_B">
B
</h2>
<p><code class="pkg">base</code></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="conditions-et-comparaisons.html">Conditions et comparaisons</a></li>
<li><a href="#definir-un-plan-d-echantillonnage-complexe">D√©finir un plan d‚Äô√©chantillonnage complexe</a></li>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
<li><a href="#extensions">Extensions</a></li>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellis√©s</a></li>
<li><a href="#formules">Formules</a></li>
<li><a href="#fusion-de-tables">Fusion de tables</a></li>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
<li><a href="#intervalles-de-confiance">Intervalles de confiance</a></li>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donn√©es</a></li>
<li><a href="#organiser-ses-fichiers">Organiser ses fichiers</a></li>
<li><a href="#ou-trouver-de-l-aide">O√π trouver de l‚Äôaide¬†?</a></li>
<li><a href="#premier-contact">Premier contact</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
<li><a href="#recodage">Recodage</a></li>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
<li><a href="#sous-ensembles">Sous-ensembles</a></li>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
<li><a href="#tris">Tris</a></li>
<li><a href="#vecteurs-indexation-et-assignation">Vecteurs, indexation et assignation</a></li>
</ul>
<h2 id="index-des-extensions_C">
C
</h2>
<p><code class="pkg">cluster</code></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<h2 id="index-des-extensions_D">
D
</h2>
<p><code class="pkg">dendextend</code></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><code class="pkg">devtools</code></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
<li><a href="#calculer-un-age">Calculer un √¢ge</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
<li><a href="#extensions">Extensions</a></li>
<li><a href="#intervalles-de-confiance">Intervalles de confiance</a></li>
</ul>
<p><code class="pkg">dplyr</code></p>
<ul>
<li><a href="#extensions">Extensions</a></li>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellis√©s</a></li>
<li><a href="#formules">Formules</a></li>
<li><a href="#fusion-de-tables">Fusion de tables</a></li>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donn√©es</a></li>
<li><a href="scraping.html">Scraping</a></li>
</ul>
<h2 id="index-des-extensions_E">
E
</h2>
<p><code class="pkg">ecdf</code></p>
<ul>
<li><a href="#graphiques-univaries">Graphiques univari√©s</a></li>
</ul>
<p><code class="pkg">eeptools</code></p>
<ul>
<li><a href="#calculer-un-age">Calculer un √¢ge</a></li>
</ul>
<p><code class="pkg">effects</code></p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<h2 id="index-des-extensions_F">
F
</h2>
<p><code class="pkg">FactoMineR</code></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<p><code class="pkg">fastcluster</code></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><code class="pkg">foreign</code></p>
<ul>
<li><a href="#export-de-donnees">Export de donn√©es</a></li>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<h2 id="index-des-extensions_G">
G
</h2>
<p><code class="pkg">GGally</code></p>
<ul>
<li><a href="#graphiques-bivaries">Graphiques bivari√©s</a></li>
</ul>
<p><code class="pkg">ggdendro</code></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<p><code class="pkg">ggfortify</code></p>
<ul>
<li><a href="#graphiques-bivaries">Graphiques bivari√©s</a></li>
</ul>
<p><code class="pkg">ggmap</code></p>
<ul>
<li><a href="#graphiques-bivaries">Graphiques bivari√©s</a></li>
</ul>
<p><code class="pkg">ggplot2</code></p>
<ul>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
<li><a href="#extensions">Extensions</a></li>
<li><a href="#formules">Formules</a></li>
<li><a href="#graphiques-bivaries">Graphiques bivari√©s</a></li>
</ul>
<p><code class="pkg">ggthemes</code></p>
<ul>
<li><a href="#graphiques-bivaries">Graphiques bivari√©s</a></li>
</ul>
<p><code class="pkg">ggvis</code></p>
<ul>
<li><a href="#graphiques-bivaries">Graphiques bivari√©s</a></li>
</ul>
<p><code class="pkg">graphics</code></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="#graphiques-univaries">Graphiques univari√©s</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><code class="pkg">grDevices</code></p>
<ul>
<li><a href="#export-de-graphiques">Export de graphiques</a></li>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<h2 id="index-des-extensions_H">
H
</h2>
<p><code class="pkg">haven</code></p>
<ul>
<li><a href="#export-de-donnees">Export de donn√©es</a></li>
<li><a href="#extensions">Extensions</a></li>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellis√©s</a></li>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><code class="pkg">Hmisc</code></p>
<ul>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellis√©s</a></li>
</ul>
<h2 id="index-des-extensions_J">
J
</h2>
<p><code class="pkg">JLutils</code></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
<li><a href="#intervalles-de-confiance">Intervalles de confiance</a></li>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<h2 id="index-des-extensions_L">
L
</h2>
<p><code class="pkg">labelled</code></p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellis√©s</a></li>
</ul>
<p><code class="pkg">lattice</code></p>
<ul>
<li><a href="#formules">Formules</a></li>
<li><a href="#graphiques-bivaries">Graphiques bivari√©s</a></li>
</ul>
<p><code class="pkg">lubridate</code></p>
<ul>
<li><a href="#calculer-un-age">Calculer un √¢ge</a></li>
<li><a href="#extensions">Extensions</a></li>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
<li><a href="scraping.html">Scraping</a></li>
</ul>
<h2 id="index-des-extensions_M">
M
</h2>
<p><code class="pkg">maptools</code></p>
<ul>
<li><a href="#export-de-donnees">Export de donn√©es</a></li>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><code class="pkg">MASS</code></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
</ul>
<p><code class="pkg">memisc</code></p>
<ul>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellis√©s</a></li>
</ul>
<p><code class="pkg">mlogit</code></p>
<ul>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<p><code class="pkg">mosaic</code></p>
<ul>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
</ul>
<h2 id="index-des-extensions_N">
N
</h2>
<p><code class="pkg">nnet</code></p>
<ul>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
</ul>
<h2 id="index-des-extensions_P">
P
</h2>
<p><code class="pkg">packrat</code></p>
<ul>
<li><a href="#organiser-ses-fichiers">Organiser ses fichiers</a></li>
</ul>
<p><code class="pkg">plyr</code></p>
<ul>
<li><a href="#fusion-de-tables">Fusion de tables</a></li>
</ul>
<h2 id="index-des-extensions_Q">
Q
</h2>
<p><code class="pkg">questionr</code></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="conditions-et-comparaisons.html">Conditions et comparaisons</a></li>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
<li><a href="#facteurs-et-vecteurs-labellises">Facteurs et vecteurs labellis√©s</a></li>
<li><a href="#formules">Formules</a></li>
<li><a href="#fusion-de-tables">Fusion de tables</a></li>
<li><a href="#graphiques-univaries">Graphiques univari√©s</a></li>
<li><a href="#intervalles-de-confiance">Intervalles de confiance</a></li>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donn√©es</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
<li><a href="#recodage">Recodage</a></li>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
<li><a href="#sous-ensembles">Sous-ensembles</a></li>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
<li><a href="#tris">Tris</a></li>
</ul>
<h2 id="index-des-extensions_R">
R
</h2>
<p><code class="pkg">raster</code></p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><code class="pkg">RColorBrewer</code></p>
<ul>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
<li><a href="#graphiques-bivaries">Graphiques bivari√©s</a></li>
</ul>
<p><code class="pkg">readr</code></p>
<ul>
<li><a href="#export-de-donnees">Export de donn√©es</a></li>
<li><a href="#extensions">Extensions</a></li>
<li><a href="#formules">Formules</a></li>
<li><a href="#graphiques-bivaries">Graphiques bivari√©s</a></li>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
<li><a href="scraping.html">Scraping</a></li>
</ul>
<p><code class="pkg">readxl</code></p>
<ul>
<li><a href="#extensions">Extensions</a></li>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><code class="pkg">reshape2</code></p>
<ul>
<li><a href="#extensions">Extensions</a></li>
</ul>
<p><code class="pkg">rvest</code></p>
<ul>
<li><a href="scraping.html">Scraping</a></li>
</ul>
<h2 id="index-des-extensions_S">
S
</h2>
<p><code class="pkg">sp</code></p>
<ul>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
<p><code class="pkg">stats</code></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
<li><a href="#analyse-des-correspondances-multiples">Analyse des correspondances multiples (ACM)</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
<li><a href="#comparaisons-moyennes-et-proportions">Comparaisons (moyennes et proportions)</a></li>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
<li><a href="#formules">Formules</a></li>
<li><a href="#graphiques-univaries">Graphiques univari√©s</a></li>
<li><a href="#intervalles-de-confiance">Intervalles de confiance</a></li>
<li><a href="#premier-contact">Premier contact</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
<li><a href="#recodage">Recodage</a></li>
<li><a href="#regression-logistique">R√©gression logistique</a></li>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<p><code class="pkg">stringr</code></p>
<ul>
<li><a href="#extensions">Extensions</a></li>
<li><a href="scraping.html">Scraping</a></li>
</ul>
<p><code class="pkg">survey</code></p>
<ul>
<li><a href="#definir-un-plan-d-echantillonnage-complexe">D√©finir un plan d‚Äô√©chantillonnage complexe</a></li>
<li><a href="#donnees-ponderees">Donn√©es pond√©r√©es</a></li>
</ul>
<h2 id="index-des-extensions_T">
T
</h2>
<p><code class="pkg">tidyr</code></p>
<ul>
<li><a href="#extensions">Extensions</a></li>
</ul>
<p><code class="pkg">TraMineR</code></p>
<ul>
<li><a href="#analyse-de-sequences">Analyse de s√©quences</a></li>
<li><a href="#classification-ascendante-hierarchique">Classification ascendante hi√©rarchique (CAH)</a></li>
</ul>
<h2 id="index-des-extensions_U">
U
</h2>
<p><code class="pkg">utils</code></p>
<ul>
<li><a href="conditions-et-comparaisons.html">Conditions et comparaisons</a></li>
<li><a href="#export-de-donnees">Export de donn√©es</a></li>
<li><a href="#extensions">Extensions</a></li>
<li><a href="#graphiques-bivaries">Graphiques bivari√©s</a></li>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
<li><a href="#installation-de-R-et-RStudio">Installation de R et RStudio</a></li>
<li><a href="#listes-et-tableaux-de-donnes">Listes et Tableaux de donn√©es</a></li>
<li><a href="#ou-trouver-de-l-aide">O√π trouver de l‚Äôaide¬†?</a></li>
<li><a href="#premier-contact">Premier contact</a></li>
<li><a href="#premier-travail-avec-les-donnees">Premier travail avec des donn√©es</a></li>
<li><a href="#statistique-univariee">Statistique univari√©e</a></li>
</ul>
<h2 id="index-des-extensions_V">
V
</h2>
<p><code class="pkg">vcd</code></p>
<ul>
<li><a href="#statistique-bivariee">Statistique bivari√©e</a></li>
</ul>
<h2 id="index-des-extensions_X">
X
</h2>
<p><code class="pkg">xlsx</code></p>
<ul>
<li><a href="#export-de-donnees">Export de donn√©es</a></li>
<li><a href="#import-de-donnees">Import de donn√©es</a></li>
</ul>
</div>

</article>
</div>

<script language="javascript" type="text/javascript">
$(document).ready(function () {
  // add bootstrap table styles to pandoc tables
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');

    // Identifier les <pre> fermant
    $('pre').next("*:not(pre)").prev().addClass('last'); // Dernier <pre> de chaque groupe contigu de <pre>
    $('pre').parent().each(function (){
      $(this).children('pre').last().addClass('last');
    }); // Si <pre> est le dernier enfant de son parent

    // Ajout liens rdocumentation
    $("code[data-pkg]").each(function( index ) {
      pack = $(this).attr('data-pkg');
      if ($(this).attr('data-rdoc') !== undefined) {
        rdocumentation = $(this).attr('data-rdoc');
        page = ' (' + $(this).attr('data-pkg') + ')';
      } else {
        rdocumentation = $(this).text();
        page = '';
      }
      fonction = $(this).text();
      $(this).wrap('<a href="http://www.rdocumentation.org/packages/'+pack+'/functions/'+rdocumentation+'">');
    });

    $("code.pkg").each(function( index ) {
      $(this).wrap('<a href="http://www.rdocumentation.org/packages/'+$(this).text()+'">');
    });

    // Figures (numÈrotation intra chapitre + ajout id pour liste des figures)
    $("article").each(function(){
      chap = $(this).attr('id');
      $(this).find("figure").each(function(index){
        if ($(this).children("figcaption").length > 0)
          $(this).children("figcaption:first").prepend('<span class="figure-number">Figure '+(index+1)+'.</span> ');
        else
          $(this).append($("<figcaption>").append('<span class="figure-number">Figure '+(index+1)+'</span>'));
        if ($(this).attr('id') == undefined) $(this).attr('id', chap + '_fig_' + (index+1));
      });
    });

    // Footnotes (prince xml only)
    if (typeof Prince !== "undefined") {
      $(".footnotes li").each(function(){
        lien = $(this).find("a[href*='fnref']").attr('href');
        $(this).find("a[href*='fnref']").remove();
        $(lien).after('<div class="fn">' + $(this).html() + '</div>');
      });
      $(".footnoteRef").remove();
      $(".footnotes").remove();
    }

});

</script>

</body>
</html>
