<script>

// manage active state of menu based on current page
$(document).ready(function () {

    // active menu
    href = window.location.pathname
    href = href.substr(href.lastIndexOf('/') + 1)
    $('a[href="' + href + '"]').parent().addClass('active');

    // manage active menu header
    if (href.startsWith('pem_'))
      $('a[href="' + 'pem' + '"]').parent().addClass('active');
    else if (href.startsWith('analyses_'))
      $('a[href="' + 'analyses' + '"]').parent().addClass('active');
    else if (href.startsWith('astuces_'))
      $('a[href="' + 'astuces' + '"]').parent().addClass('active');

    // Identifier les <pre> fermant
    $('pre').next().not('pre').prev().addClass('last'); // Last <pre> of each group of <pre>
    $('pre').last().addClass('last'); // If the last one is not followed bay anything

    // Ajout liens rdocumentation
    $("code[data-package]").each(function( index ) {
      package = $(this).attr('data-package');
      if ($(this).attr('data-rdocumentation') !== undefined)
        rdocumentation = $(this).attr('data-rdocumentation');
      else
        rdocumentation = $(this).text();
      fonction = $(this).text();
      $(this).wrap('<a href="http://www.rdocumentation.org/packages/'+package+'/functions/'+rdocumentation+'">');
    });

    $("strong.package").each(function( index ) {
      $(this).wrap('<a href="http://www.rdocumentation.org/packages/'+$(this).text()+'">');
    });

    // Figures
    $("figure").each(function( index ) {
      if ($(this).children("figcaption").length > 0)
        $(this).children("figcaption:first").prepend('<span class="figure-number">Figure '+(index+1)+'.</span> ');
      else
        $(this).append($("<figcaption>").append('<span class="figure-number">Figure '+(index+1)+'</span>'));
    });

});

</script>
