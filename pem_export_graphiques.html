<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />



<title>Exporter des graphiques</title>

<script src="libs/jquery-1.11.0/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.1/css/flatly.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.1/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.1/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.1/shim/respond.min.js"></script>
<link rel="stylesheet" href="./include/analyse-R.css" />
<script type="text/javascript" src="./libs/zeroclipboard-2.2.0/ZeroClipboard.js"></script>
<link rel="stylesheet" href="./libs/colorbox-1.6.1/colorbox.css" />
<script type="text/javascript" src="./libs/colorbox-1.6.1/jquery.colorbox-min.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>



</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img { 
  max-width:100%; 
  height: auto; 
}
</style>
<div class="container-fluid main-container">

<nav>
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href=".">analyse-R</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li><a href="index.html">Accueil</a></li>
        <li class="dropdown">
          <a href="pem" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Prise en main <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="pem_presentation_installation.html">Présentation et Installation</a></li>
            <li><a href="pem_premier_contact.html">Premier contact</a></li>
            <li><a href="pem_premier_travail.html">Premier travail avec des données</a></li>
            <li><a href="pem_stat_univ.html">Statistique univariée</a></li>
            <li><a href="pem_organiser_fichiers.html">Organiser ses fichiers</a></li>
            <li><a href="pem_import_export.html">Import / Export de données</a></li>
            <li><a href="pem_manipulation.html">Manipulation de données</a></li>
            <li><a href="pem_export_graphiques.html">Exporter des graphiques</a></li>
            <li><a href="pem_ou_trouver_aide.html">Où trouver de l'aide ?</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a href="analyses" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Analyses <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="analyses_stat_biv.html">Statistique bivariée</a></li>
            <li><a href="analyses_reglog.html">Régression logistique</a></li>
            <li><a href="analyses_donnees_pond.html">Données pondérées</a></li>
            <li><a href="analyses_acm.html">Analyse des correspondances multiples (ACM)</a></li>
            <li><a href="analyses_cah.html">Classification ascendante hiérarchique (CAH)</a></li>
            <li><a href="analyses_seq.html">Analyse de séquences</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a href="avance" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Avancé <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li class="dropdown-header">Astuces</li>
            <li><a href="avance_age.html">Calculer un âge</a></li>
          </ul>
        </li>
        <li><a href="index_fonctions.html">Index des fonctions</a></li>
        <li><a href="analyse-R.pdf">PDF</a></li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
          <a href="participer" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Participer <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
              <li><a href="https://github.com/larmarange/analyse-R">analyse-R sur GitHub</a></li>
          </ul>
        </li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->
</nav>

<div class="row">

<div class="col-sm-9" role="main">
<article>

<div id="header">
<h1 class="title">Exporter des graphiques</h1>
</div>

<div id="TOC">
<ul>
<li><a href="#via-linterface-de-rstudio">Via l’interface de RStudio</a><ul>
<li><a href="#sauvegarder-le-fichier-en-tant-quimage">Sauvegarder le fichier en tant qu’image</a></li>
<li><a href="#sauvegarder-le-graphique-en-pdf">Sauvegarder le graphique en PDF</a></li>
<li><a href="#copier-le-graphique-dans-le-presse-papier">Copier le graphique dans le presse-papier</a></li>
</ul></li>
<li><a href="#export-avec-les-commandes-de-r">Export avec les commandes de R</a></li>
</ul>
</div>

<div id="via-linterface-de-rstudio" class="section level2">
<h2>Via l’interface de RStudio</h2>
<p>L’export de graphiques est très facile avec <strong>RStudio</strong>. Lorsque l’on créé un graphique, ce dernier est affiché sous l’onglet <em>Plots</em> dans le quadrant inférieur droit. Il suffit de cliquer sur <em>Export</em> pour avoir accès à trois options différentes :</p>
<ul>
<li><em>Save as image</em> pour sauvegarder le graphique en tant que fichier image ;</li>
<li><em>Save as PDF</em> pour sauvegarder le graphique dans un fichier <strong>PDF</strong> ;</li>
<li><em>Copy to Clipboard</em> pour copier le graphique dans le presse-papier (et pouvoir ainsi le coller ensuite dans un document <strong>Word</strong> par exemple).</li>
</ul>
<div id="sauvegarder-le-fichier-en-tant-quimage" class="section level3">
<h3>Sauvegarder le fichier en tant qu’image</h3>
<figure>
<img src="images/capture_RStudio_save_plot_as_image.png" alt="Sauvegarder un graphique en tant qu’image avec RStudio" />
<figcaption>
Sauvegarder un graphique en tant qu’image avec RStudio
</figcaption>
</figure>
<p>La boîte de dialogue qui s’ouvre permet différentes options d’export :</p>
<ul>
<li>le type de fichier désiré ;</li>
<li>le nom du fichier ;</li>
<li>le répertoire où le fichier doit être créé (par défaut, il s’agit du répertoire de travail) ;</li>
<li>la taille de l’image.</li>
</ul>
<p><strong>R</strong> peut exporter un graphique dans une grande variété de formats. Nous n’aborderons ici que les principaux. Les formats <strong>PNG</strong>, <strong>JPEG</strong> et <strong>TIFF</strong> sont des formats de type <em>bitmap</em> (on parle aussi d’<em>images matricieles</em><a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a>). L’image est stockée sous forme de points, sa qualité dépendant de sa résolution, c’est-à-dire du nombre total de points qui la composent. L’intérêt des images matricielles est d’être toujours interprétées de manière identique quelque soit l’outil utilisé. Par contre, elles ne sont pas adaptées lorsque l’on souhaite effectuer des retouches avec un logiciel de dessin.</p>
<p>Pour une utilisation sur un site web, on privilégiera une résolution d’image modérée (entre 400 et 800 pixels de largeur) et les formats <strong>PNG</strong> ou <strong>JPEG</strong>. Pour un document destiné à être imprimé, on priviligiera une résolution plus élevée, pour éviter un phénomène dit de pixellisation.</p>
<p>Les <em>images vectorielles</em><a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a> ont l’avantage de pouvoir être redimensionnées à volonté sans perte de qualité et produisent des fichiers en général de plus petite taille<a href="#fn3" class="footnoteRef" id="fnref3"><sup>3</sup></a>. Elles sont donc tout à fait adaptées pour l’impression. Si l’on souhaite importer l’image dans <strong>Word</strong>, on choisira le format <strong>Metafile</strong> (le seul compris par ce logiciel). Pour <strong>Libre Office</strong> ou <strong>Open Office</strong>, on choisira le format <strong>SVG</strong>.</p>
<p><strong>SVG</strong> (<em>scalable vector graphic</em><a href="#fn4" class="footnoteRef" id="fnref4"><sup>4</sup></a>) est un format libre permettant de décrire une image vectorielle. Les fichiers <strong>SVG</strong> peuvent directement être lus par la majorité des navigateurs récents (<strong>Firefox</strong>, <strong>Chrome</strong>, …). De plus, le logiciel libre de dessins <strong>Inkscape</strong><a href="#fn5" class="footnoteRef" id="fnref5"><sup>5</sup></a> permet d’éditer et de modifier des fichiers <strong>SVG</strong>. Ce format est donc tout à fait adapté pour les graphiques que l’on souhaite retoucher avant publication. Depuis <strong>Inkscape</strong>, il sera possible de faire un export <strong>PNG</strong> en haute résolution pour intégration dans un fichier <strong>Word</strong>.</p>
<p>On pourra modifier la taille de l’image avec les paramètres <em>Height</em> (hauteur) et <em>Width</em> (largeur). En cliquant sur <em>Update Preview</em> la prévisulation du rendu final sera mise à jour.</p>
</div>
<div id="sauvegarder-le-graphique-en-pdf" class="section level3">
<h3>Sauvegarder le graphique en PDF</h3>
<figure>
<img src="images/capture_RStudio_save_plot_as_pdf.png" alt="Sauvegarder un graphique en PDF avec RStudio" />
<figcaption>
Sauvegarder un graphique en PDF avec RStudio
</figcaption>
</figure>
<p>Les options de la boîte de dialogue permettent de modifier la taille du fichier <strong>PDF</strong> et, bien entendu, d’indiquer le nom et le répertoire du fichier à créer.</p>
<p>En cliquant sur <em>Preview</em>, <strong>RStudio</strong> générera un fichier temporaire afin de visualiser le rendu final.</p>
</div>
<div id="copier-le-graphique-dans-le-presse-papier" class="section level3">
<h3>Copier le graphique dans le presse-papier</h3>
<figure>
<img src="images/capture_RStudio_copy_plot_to_clipboard.png" alt="Copier un graphique dans le presse-papier avec RStudio" />
<figcaption>
Copier un graphique dans le presse-papier avec RStudio
</figcaption>
</figure>
<p>Il est possible de redimensionner le graphique. De plus, on précisera si l’on souhaite copier une version matricielle (<em>bitmap</em>) ou vectorielle (<em>metafile</em>) du graphique.</p>
</div>
</div>
<div id="export-avec-les-commandes-de-r" class="section level2">
<h2>Export avec les commandes de R</h2>
<p>On peut également exporter les graphiques dans des fichiers de différents formats directement avec des commandes <strong>R</strong>. Ceci a l’avantage de fonctionner sur toutes les plateformes et de faciliter la mise à jour du graphique exporté (on n’a qu’à relancer les commandes concernées pour que le fichier externe soit mis à jour).</p>
<p>La première possibilité est d’exporter le contenu d’une fenêtre déjà existante à l’aide de la fonction <code data-package="grDevices" data-rdocumentation="dev2">dev.print</code>. On doit fournir à celle-ci le format de l’export (option <code>device</code>) et le nom du fichier (option <code>file</code>).</p>
<p>Par exemple :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">boxplot</span>(<span class="kw">rnorm</span>(<span class="dv">100</span>))
<span class="kw">dev.print</span>(<span class="dt">device =</span> png, <span class="dt">file =</span> <span class="st">&quot;export.png&quot;</span>, <span class="dt">width =</span> <span class="dv">600</span>)</code></pre>
<p>Les formats de sortie possibles varient selon les plateformes, mais on retrouve partout les formats <em>bitmap</em> <code>png</code>, <code>jpeg</code>, <code>tiff</code> et les formats vectoriels <code>svg</code>, <code>postscript</code> ou <code>pdf</code>.</p>
<p>L’autre possibilité est de rediriger directement la sortie graphique dans un fichier, avant d’exécuter la commande générant la figure. On doit pour cela faire appel à l’une des commandes permettant cette redirection. Les plus courantes sont <code data-package="grDevices">png</code>, <code data-package="grDevices" data-rdocumentation="png">jpeg</code> et <code data-package="grDevices" data-rdocumentation="png">tiff</code> pour les formats <em>bitmap</em>, <code data-package="grDevices" data-rdocumentation="cairo">svg</code>, <code data-package="grDevices">pdf</code>, <code data-package="grDevices">postscript</code> et <code data-package="grDevices" data-rdocumentation="windows">win.metafile</code> pour les formats vectoriels.</p>
<p>Ces fonctions prennent différentes options permettant de personnaliser la sortie graphique. Les plus courantes sont <code>width</code> et <code>height</code> qui donnent la largeur et la hauteur de l’image générée (en pixels pour les images bitmap, en pouces pour les images vectorielles) et <code>pointsize</code> qui donne la taille de base des polices de caractère utilisées.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">png</span>(<span class="dt">file =</span> <span class="st">&quot;out.png&quot;</span>, <span class="dt">width =</span> <span class="dv">800</span>, <span class="dt">height =</span> <span class="dv">700</span>)
<span class="kw">plot</span>(<span class="kw">rnorm</span>(<span class="dv">100</span>))
<span class="kw">dev.off</span>()
<span class="kw">pdf</span>(<span class="dt">file =</span> <span class="st">&quot;out.pdf&quot;</span>, <span class="dt">width =</span> <span class="dv">9</span>, <span class="dt">height =</span> <span class="dv">9</span>, <span class="dt">pointsize =</span> <span class="dv">10</span>)
<span class="kw">plot</span>(<span class="kw">rnorm</span>(<span class="dv">150</span>))
<span class="kw">dev.off</span>()</code></pre>
<p>Il est nécessaire de faire un appel à la fonction <code data-package="grDevices" data-rdocumentation="dev">dev.off</code> après génération du graphique pour que le résultat soit bien écrit dans le fichier de sortie (dans le cas contraire on se retrouve avec un fichier vide).</p>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>Voir <a href="http://fr.wikipedia.org/wiki/Image_matricielle" class="uri">http://fr.wikipedia.org/wiki/Image_matricielle</a>.<a href="#fnref1">↩</a></p></li>
<li id="fn2"><p>Voir <a href="http://fr.wikipedia.org/wiki/Image_vectorielle" class="uri">http://fr.wikipedia.org/wiki/Image_vectorielle</a>.<a href="#fnref2">↩</a></p></li>
<li id="fn3"><p>Sauf dans le cas des graphiques complexes reposant sur des dégradés de couleurs, comme les cartes produites à partir de rasters. Auquel cas, il sera parfois préférable de privilégier un export dans un format <em>bitmap</em>.<a href="#fnref3">↩</a></p></li>
<li id="fn4"><p>Voir <a href="https://www.wikiwand.com/fr/Scalable_Vector_Graphics" class="uri">https://www.wikiwand.com/fr/Scalable_Vector_Graphics</a>.<a href="#fnref4">↩</a></p></li>
<li id="fn5"><p>téléchargeable gratuitement sur <a href="https://inkscape.org/fr/" class="uri">https://inkscape.org/fr/</a>.<a href="#fnref5">↩</a></p></li>
</ol>
</div>

</article>
</div>

<div class="col-sm-3" role="complementary">
<nav class="hidden-print hidden-xs" id="nav_sidebar">
</nav>
</div>

</div>

<script>
// manage active state of menu based on current page
$(document).ready(function () {

    // active menu
    href = window.location.pathname;
    href = href.substr(href.lastIndexOf('/') + 1);
    if (href=='') href = 'index.html';
    $('a[href="' + href + '"]').parent().addClass('active');

    // manage active menu header
    if (href.startsWith('pem_'))
      $('a[href="' + 'pem' + '"]').parent().addClass('active');
    else if (href.startsWith('analyses_'))
      $('a[href="' + 'analyses' + '"]').parent().addClass('active');
    else if (href.startsWith('avance_'))
      $('a[href="' + 'avance' + '"]').parent().addClass('active');

    // élargir la page d'accueil
    if (href=='index.html') $('.col-sm-9').attr('class','col-sm-12');

    // sidebar
    $("#nav_sidebar").append($("#TOC").html());
    $("#nav_sidebar ul").addClass("nav nav-stacked");
    $("#TOC").addClass("visible-xs-block");
    $('body').scrollspy({
      target: '#nav_sidebar',
      offset: 40
    });

    // Identifier les <pre> fermant
    $('pre').next("*:not(pre)").prev().addClass('last'); // Dernier <pre> de chaque groupe contigu de <pre>
    $('pre').parent().each(function (){
      $(this).children('pre').last().addClass('last');
    }); // Si <pre> est le dernier enfant de son parent

    // Ajout liens rdocumentation et tooltip
    $("code[data-package]").each(function( index ) {
      pack = $(this).attr('data-package');
      if ($(this).attr('data-rdocumentation') !== undefined) {
        rdocumentation = $(this).attr('data-rdocumentation');
        page = ' (' + $(this).attr('data-rdocumentation') + ')';
      } else {
        rdocumentation = $(this).text();
        page = '';
      }
      fonction = $(this).text();
      $(this).wrap('<a href="http://www.rdocumentation.org/packages/'+pack+'/functions/'+rdocumentation+'">');
      $(this).attr('data-toggle','tooltip');
      $(this).attr('data-placement','top');
      $(this).attr('title','package : ' + pack + page);
      $('[data-toggle="tooltip"]').tooltip();
    });

    $("strong.package").each(function( index ) {
      $(this).wrap('<a href="http://www.rdocumentation.org/packages/'+$(this).text()+'">');
    });

    // Figures
    $("figure").each(function( index ) {
      if ($(this).children("figcaption").length > 0)
        $(this).children("figcaption:first").prepend('<span class="figure-number">Figure '+(index+1)+'.</span> ');
      else
        $(this).append($("<figcaption>").append('<span class="figure-number">Figure '+(index+1)+'</span>'));
    });

    // Colorbox
    jQuery('div img').colorbox({
      maxWidth: '90%',
      maxHeight: '90%',
      rel: 'figures',
      current: "{current}/{total}",
      href: function(){
        return $(this).attr('src');
      },
      title: function(){
        return $(this).attr('alt');
      }
    });
    jQuery('div img').css('cursor', 'pointer');
    jQuery('figure img').colorbox({
      maxWidth: '90%',
      maxHeight: '90%',
      rel: 'figures',
      current: "{current}/{total}",
      href: function(){
        return $(this).attr('src');
      },
      title: function(){
        return $(this).parent().children("figcaption").text();
      }
    });
    jQuery('figure img').css('cursor', 'pointer');

    // ZeroClipboard
    $('pre.r').parent().each(function(){
      $(this).children('pre.r').first().before('<div class="zero-clipboard hidden-print hidden-xs"><button class="btn-clipboard">Copier</button></div>');
    }); // Il peut arriver que le pre ne soit pas précédé (cf. figures)
    $('*:not(pre):not(.zero-clipboard) + pre.r').before('<div class="zero-clipboard hidden-print hidden-xs"><button class="btn-clipboard">Copier</button></div>');
    $('pre.last').after(function() {
      if ($(this).hasClass("r")) res = $(this).text(); else res = "";
      $(this).prevUntil('*:not(pre)','pre.r').each(function() {
        res = $(this).text() + '\n' + res;
      });
      return '<div class="clipboard">' + res + '</div>';
    });
    $('.zero-clipboard').each(function(index){
      $(this).children('.btn-clipboard').attr('data-clipboard-target','clipboard_'+index);
      $(this).nextAll("div.clipboard").first().attr('id','clipboard_'+index);
    });
    var client = new ZeroClipboard( $(".btn-clipboard") );
    client.on( "ready", function( readyEvent ) {
      // alert( "ZeroClipboard SWF is ready!" );
      client.on( "aftercopy", function( event ) {
        // `this` === `client`
        // `event.target` === the element that was clicked
        //event.target.style.display = "none";
        $(event.target).parent().before('<div class="alert alert-success"><a href="#" class="close" data-dismiss="alert">&times;</a>Le code <strong>R</strong> de l’exemple a été copié dans le presse-papier.</div>');
      } );
    } );

});
</script>

<!-- disqus -->
<div class="row">
  <div id="disqus_thread" class="col-sm-9" role="complementary"></div>
</div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'analyse-r'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Veuillez activer JavaScript pour voir les <a href="http://disqus.com/?ref_noscript">les commentaires gérés avec Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">Les commentaires sont hébergés par <span class="logo-disqus">Disqus</span>.</a>

</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>


</body>
</html>
