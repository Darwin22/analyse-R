<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1">



<title>Import de données</title>

<script src="libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<meta name="robots" content="index, follow">
<link rel="stylesheet" href="./include/analyse-R.css" />
<script type="text/javascript" src="./libs/zeroclipboard-2.2.0/ZeroClipboard.js"></script>
<link rel="stylesheet" href="./libs/colorbox-1.6.1/colorbox.css" />
<script type="text/javascript" src="./libs/colorbox-1.6.1/jquery.colorbox-min.js"></script>
<!--- favicon --->
<link rel="apple-touch-icon" sizes="57x57" href="./images/favicon/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="./images/favicon/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="./images/favicon/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="./images/favicon/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="./images/favicon/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="./images/favicon/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="./images/favicon/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="./images/favicon/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="./images/favicon/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="./images/favicon/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="./images/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="./images/favicon/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="./images/favicon/favicon-16x16.png">
<link rel="manifest" href="./images/favicon/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="./images/favicon/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>



</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<div class="container-fluid main-container">

<!-- tabsets -->
<script src="libs/navigation-1.0/tabsets.js"></script>
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->





<nav>
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href=".">analyse-R</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
          <a href="manipuler" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Manipuler <span class="caret"></span></a>
          <ul class="dropdown-menu multi-column columns-3" role="menu" id="menu_manipuler">
            <div class="row">
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
  		            <li class="dropdown-header">Prise en main</li>
                  <li><a href="presentation-et-philosophie.html">Présentation et Philosophie</a></li>
                  <li><a href="installation-de-R-et-RStudio.html">Installation de R et RStudio</a></li>
                  <li><a href="premier-contact.html">Premier contact</a></li>
                  <li><a href="premier-travail-avec-les-donnees.html">Premier travail avec des données</a></li>
                  <li><a href="extensions.html">Extensions</a></li>
                  <li><a href="vecteurs-indexation-et-assignation.html">Vecteurs, indexation et assignation</a></li>
                  <li><a href="listes-et-tableaux-de-donnes.html">Listes et Tableaux de données</a></li>
                  <li><a href="facteurs-et-vecteurs-labellises.html">Facteurs et vecteurs labellisés</a></li>
                  <li><a href="organiser-ses-fichiers.html">Organiser ses fichiers</a></li>
                  <li><a href="import-de-donnees.html">Import de données</a></li>
                  <li><a href="recodage.html">Recodage</a></li>
                  <li><a href="ou-trouver-de-l-aide.html">Où trouver de l'aide ?</a></li>
  	            </ul>
              </div>
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
  		            <li class="dropdown-header">Manipulation de données</li>
                  <li class="dev"><a href="introduction-a-dplyr.html">Introduction à dplyr</a></li>
                  <li class="dev"><a href="introduction-a-data-table.html">Introduction à data.table</a></li>
                  <li class="dev"><a href="doublons.html">Doublons</a></li>
                  <li class="dev"><a href="tris.html">Tris</a></li>
                  <li class="dev"><a href="sous-ensembles.html">Sous-ensembles</a></li>
                  <li class="dev"><a href="fusion-de-tables.html">Fusion de tables</a></li>
                  <li class="dev"><a href="gestion-des-dates.html">Gestion des dates</a></li>
                  <li class="dev"><a href="aggregation.html">Aggrégation</a></li>
                  <li class="dev"><a href="fonctions-a-fenetre.html">Fonctions à fenêtre</a></li>
                  <li class="dev"><a href="restructuration-de-donnees.html">Restructuration de données</a></li>
                  <li class="dev"><a href="manipuler-du-texte.html">Manipuler du texte</a></li>
  	            </ul>
              </div>
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
                  <li class="dropdown-header">Exporter</li>
                  <li class="dev"><a href="export-de-donnees.html">Export de données</a></li>
                  <li><a href="export-de-graphiques.html">Export de graphiques</a></li>
                  <li class="dev"><a href="export-de-tableaux.html">Export de tableaux</a></li>
  	            </ul>
              </div>
            </div>
          </ul>
        </li>
        <li class="dropdown">
          <a href="analyser" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Analyser <span class="caret"></span></a>
          <ul class="dropdown-menu multi-column columns-3" role="menu" id="menu_analyser">
            <div class="row">
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
  		            <li class="dropdown-header">Statistiques introductives</li>
                  <li><a href="statistique-univariee.html">Statistique univariée</a></li>
                  <li class="dev"><a href="graphiques-univaries.html">Graphiques univariés</a></li>
                  <li><a href="statistique-bivariee.html">Statistique bivariée</a></li>
                  <li class="dev"><a href="graphiques-bivaries.html">Graphiques bivariés</a></li>
                  <li><a href="donnees-ponderees.html">Données pondérées</a></li>
                  <li class="dev"><a href="graphiques-de-donnees-ponderees.html">Graphiques de données pondérées</a></li>
  	            </ul>
              </div>
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
  		            <li class="dropdown-header">Statistiques intermédiaires</li>
  		            <li class="dev"><a href="intervalles-de-confiance.html">Intervalles de confiance</a></li>
                  <li class="dev"><a href="comparaisons-moyennes-et-proportions.html">Comparaisons (moyennes et proportions)</a></li>
                  <li><a href="definir-un-plan-d-echantillonnage-complexe.html">Définir un plan d'échantillonnage complexe</a></li>
                  <li class="dev"><a href="regression-lineaire.html">Régression linéaire</a></li>
                  <li><a href="regression-logistique.html">Régression logistique</a></li>
                  <li class="dev"><a href="analyse-en-composantes-principales.html">Analyse en composantes principales (ACP)</a></li>
                  <li><a href="analyse-des-correspondances-multiples.html">Analyse des correspondances multiples (ACM)</a></li>
                  <li><a href="classification-ascendante-hierarchique.html">Classification ascendante hiérarchique (CAH)</a></li>
  	            </ul>
              </div>
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
                  <li class="dropdown-header">Statistiques avancées</li>
                  <li class="dev"><a href="modeles-lineaires-a-effets-mixtes.html">Modèles linéaires à effets mixtes</a></li>
                  <li class="dev"><a href="modeles-gee.html">Modèles GEE</a></li>
                  <li class="dev"><a href="series-temporelles.html">Séries temporelles</a></li>
                  <li class="dev"><a href="modeles-a-temps-discret.html">Modèles à temps discret</a></li>
                  <li class="dev"><a href="analyse-de-survie.html">Analyse de survie</a></li>
                  <li><a href="analyse-de-sequences.html">Analyse de séquences</a></li>
                  <li class="dev"><a href="analyse-de-reseaux.html">Analyse de réseaux</a></li>
                  <li class="dev"><a href="analyse-spatiale.html">Analyse spatiale</a></li>
  	            </ul>
              </div>
            </div>
          </ul>
        </li>
        <li class="dropdown">
          <a href="approfondir" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Approfondir <span class="caret"></span></a>
          <ul class="dropdown-menu multi-column columns-3" role="menu" id="menu_approfondir">
            <div class="row">
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
  		            <li class="dropdown-header">Graphiques</li>
                  <li class="dev"><a href="ggplot2-la-grammaire-des-graphiques.html">ggplot2 : la grammaire des graphiques</a></li>
                  <li class="dev"><a href="etendre-ggplot2.html">Étendre ggplot2</a></li>
                  <li class="dev"><a href="lattice-graphiques-et-formules.html">lattice : graphiques et formules</a></li>
                  <li class="dev"><a href="diagrammes.html">Diagrammes</a></li>
                  <li class="dev"><a href="representer-des-flux.html">Représenter des flux</a></li>
                  <li class="dev"><a href="reseaux-dynamiques.html">Réseaux dynamiques</a></li>
                  <li class="dev"><a href="ggvis-les-graphiques-interactifs.html">ggvis : les graphiques interactifs</a></li>
                  <li class="dev"><a href="htmlwidgets-la-puissance-du-javascript.html">htmlwidgets : la puissance de javascript</a></li>
                  <li class="dev"><a href="cartes.html">Cartes</a></li>
  	            </ul>
              </div>
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
  		            <li class="dropdown-header">Programmation</li>
  		            <li class="dev"><a href="conditions-et-comparaisons.html">Conditions et comparaisons</a></li>
                  <li class="dev"><a href="formules.html">Formules</a></li>
                  <li class="dev"><a href="structures-conditionnelles.html">Structures conditionnelles</a></li>
                  <li class="dev"><a href="expressions-regulieres.html">Expressions régulières</a></li>
                  <li class="dev"><a href="ecrire-ses-propres-fonctions.html">Écrire ses propres fonctions</a></li>
                  <li class="dev"><a href="rmarkdown-les-rapports-automatises.html">R Markdown : les rapports automatisés</a></li>
                  <li class="dev"><a href="shiny-les-interfaces-interactives.html">Shiny : les interfaces interactives</a></li>
                  <li class="dev"><a href="git.html">Git</a></li>
                  <li class="dev"><a href="developper-un-package.html">Développer un package</a></li>
  	            </ul>
              </div>
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
                  <li class="dropdown-header">Divers</li>
                  <li><a href="calculer-un-age.html">Calculer un âge</a></li>
                  <li class="dev"><a href="prevR-cartes-de-prevalence.html">prevR : cartes de prévalence à partir des EDS</a></li>
  	            </ul>
              </div>
            </div>
          </ul>
        </li>
        <li class="dropdown">
          <a href="index" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Index <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu" id="menu_naviguer">
            <li><a href="index-des-concepts.html">Index des concepts</a></li>
            <li><a href="index-des-fonctions.html">Index des fonctions</a></li>
            <li><a href="index-des-extensions.html">Index des extensions</a></li>
          </ul>
        </li>
        <li><a href="analyse-R.pdf">PDF</a></li>
      </ul>
    <form id="rechercher" class="navbar-form navbar-right" role="search" style="padding-top: 5px;" method="get" action="https://tontonroger.org/">
      <div class="form-group">
        <input name="q" type="text" class="form-control input-sm" placeholder="Rechercher">
      </div>
      <button type="submit" class="btn btn-default btn-sm" name="Rechercher">
        <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
      </button>
    </form>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->
</nav>

<div class="row">

<a href="https://github.com/larmarange/analyse-R"><img style="position: absolute; top: 60px; right: 0; border: 0;" src="https://camo.githubusercontent.com/e7bbb0521b397edbd5fe43e7f760759336b5e05f/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677265656e5f3030373230302e706e67" alt="Contribuer sur GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png"></a>

<div class="col-sm-9" role="main">
<article>

<div class="fluid-row" id="header">


<h1 class="title">Import de données</h1>

</div>

<div id="TOC">
<ul>
<li><a href="#importer-des-fichiers-texte">Importer des fichiers texte</a><ul>
<li><a href="#structure-dun-fichier-texte">Structure d’un fichier texte</a></li>
<li><a href="#read_table">La fonction read.table</a></li>
<li><a href="#interface-graphique-avec-rstudio">Interface graphique avec RStudio</a></li>
</ul></li>
<li><a href="#importer-depuis-des-logiciels-de-statistique">Importer depuis des logiciels de statistique</a><ul>
<li><a href="#spss">SPSS</a></li>
<li><a href="#sas">SAS</a></li>
<li><a href="#stata">Stata</a></li>
<li><a href="#excel">Excel</a></li>
<li><a href="#dbase">dBase</a></li>
</ul></li>
<li><a href="#donnees-spatiales">Données spatiales</a><ul>
<li><a href="#shapefile">Shapefile</a></li>
<li><a href="#rasters">Rasters</a></li>
</ul></li>
<li><a href="#autres-sources">Autres sources</a></li>
<li><a href="#sauver-ses-donnees">Sauver ses données</a></li>
</ul>
</div>

<p><dfn data-index="données, exporter"></dfn><dfn data-index="exporter des données"></dfn></p>
<div class="important">
<p>Importer des données est souvent l’une des première opérations que l’on effectue lorsque l’on débute sous <strong>R</strong>, et ce n’est pas la moins compliquée. En cas de problème il ne faut donc pas hésiter à demander de l’aide par les différents moyens disponibles (voir le chapitre <a href="ou-trouver-de-l-aide.html">Où trouver de l’aide ?</a>) avant de se décourager.</p>
<p>N’hésitez donc pas à relire régulièrement ce chapitre en fonction de vos besoins.</p>
<p>Avant toute chose, il est impératif de bien organiser ses différents fichiers (voir le <a href="organiser-ses-fichiers.html">chapitre dédié</a>). Concernant les données sources que l’on utilisera pour ses analyses, je vous recommande de les placer dans un sous-répertoire dédié de votre projet.</p>
<p>Lorsque l’on importe des données, il est également impératif de vérifier que l’import s’est correctement déroulé (voir la section <a href="premier-travail-avec-les-donnees.html#inspecter">Inspecter les données</a> du chapitre <em>Premier travail avec les données</em>).</p>
</div>
<div id="importer-des-fichiers-texte" class="section level2">
<h2>Importer des fichiers texte</h2>
<p>Les <dfn data-index="fichier texte">fichiers texte</dfn><dfn data-index="texte, fichier"></dfn> constituent un des formats les plus largement supportés par la majorité des logiciels statistiques. Presque tous permettent d’exporter des données dans un format texte, y compris les tableurs comme <strong>Libre Office</strong>, <strong>Open Office</strong> ou <strong>Excel</strong>.</p>
<p>Cependant, il existe une grande variétés de format texte, qui peuvent prendre différents noms selon les outils, tels que <dfn data-index="texte tabulé, fichier">texte tabulé</dfn> ou <em>texte (séparateur : tabulation)</em>, <strong>CSV</strong> <dfn data-index="CSV, fichier"></dfn> (pour <em>comma-separated value</em>, sachant que suivant les logiciels le séparateur peut être une virgule ou un point-virgule).</p>
<div id="structure-dun-fichier-texte" class="section level3">
<h3>Structure d’un fichier texte</h3>
<p>Dès lors, avant d’importer un fichier texte dans <strong>R</strong>, il est indispensable de regarder comment ce dernier est structuré. Pour cela, il faut tout d’abord l’ouvrir avec un éditeur de texte pour voir comment les données se présentent.</p>
<p>Pour l’exemple, téléchargez le fichier <a href="http://larmarange.github.io/analyse-R/data/exemple_texte_tabule.txt" class="uri">http://larmarange.github.io/analyse-R/data/exemple_texte_tabule.txt</a> et copiez-le dans un sous-répertoire <code>data</code> de votre projet. Nous pouvons directement ouvrir ce fichier avec <strong>RStudio</strong>, soit via le menu <em>File &gt; Open file</em>, soit en cliquant sur ce fichier dans l’onglet <em>Files</em> du quadrant inférieur droit.</p>
<p>Le fichier apparaît dès lors dans un onglet dédié du quadrant supérieur gauche. Cependant, par défaut, on peut pas voir la différence entre un espace, une tabulation ou un retour à la ligne, c’est-à-dire entre les caractères qui sont invisibles à l’écran. Pour les afficher, il faut se rendre dans le menu <em>Tools &gt; Global options &gt; Code &gt; Display</em> et activer l’option <em>Show whitespaces characters</em>. Dès lors, les espaces sont indiqués par un petit point gris, les tabulations par une petite flèche et les retours à la ligne par une sorte de « tiret plié à droite vers le bas ».</p>
<figure>
<img src="images/capture_RStudio_visualisation_fichier_texte.png" alt="Visualisation d’un fichier texte sous RStudio" />
<figcaption>
Visualisation d’un fichier texte sous RStudio
</figcaption>
</figure>
<p>Il importe de prendre note des éléments suivants :</p>
<ul>
<li>La première ligne contient-elle le nom des variables ? Ici c’est le cas.</li>
<li>Quel est le caractère séparateur entre les différentes variables (encore appelé <dfn>séparateur de champs</dfn>) ? Ici, <strong>RStudio</strong> affiche une petite flèche. Il s’agit donc d’une tabulation. Dans le cadre d’un fichier <strong>CSV</strong>, il aurait pu s’agir d’une virgule ou d’un point-virgule.</li>
<li>Quel est le caractère utilisé pour indiquer les décimales (le <dfn>séparateur décimal</dfn>) ? Il s’agit en général d’un point (à l’anglo-saxonne) ou d’une virgule (à la française). Ici, c’est la virgule qui est utilisée.</li>
<li>Les valeurs textuelles sont-elles encadrées par des guillemets et, si oui, s’agit-il de guillements simple (<code>'</code>) ou de guillemets doubles (<code>&quot;</code>) ? Ici, il s’agit de guillemets simples.</li>
<li>Pour les variables textuelles, y a-t-il des <dfn data-index="valeur manquante">valeurs manquantes</dfn> <dfn data-index="manquante, valeur"></dfn>et si oui comment sont-elles indiquées ? Par exemple, le texte <code>NA</code> est parfois utilisé. Dans notre exemple, il s’agit de la chaîne de caractères vide (que l’on note <code>&quot;&quot;</code> sous <strong>R</strong>) qui est utilisée pour indiquer une valeur manquante.</li>
</ul>
</div>
<div id="read_table" class="section level3">
<h3>La fonction read.table</h3>
<p>La fonction de base permettant d’importer un fichier texte est la fonction <code data-pkg="utils">read.table</code>. Elle accepte de très nombreuses options. Pour toutes les afficher, on aura recours à <code>?read.table</code>. Les plus importantes sont :</p>
<table>
<thead>
<tr class="header">
<th align="left">Argument</th>
<th align="left">Détail</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code>header</code></td>
<td align="left"><code>TRUE</code> ou <code>FALSE</code> : indique si la première ligne du fichier contient le nom des variables</td>
</tr>
<tr class="even">
<td align="left"><code>sep</code></td>
<td align="left">le séparateur de champs : s’il s’agit d’une virgule on indiquera <code>&quot;,&quot;</code>, pour une tabulation on entrera <code>&quot;\t&quot;</code></td>
</tr>
<tr class="odd">
<td align="left"><code>quote</code></td>
<td align="left">les guillemets utilisés autour des variables textes (si c’est le cas) : on saisira <code>&quot;&quot;</code> si pas de guillemets, <code>&quot;'&quot;</code> pour des guillemets simples et <code>&quot;\&quot;&quot;</code> pour des guillemets doubles</td>
</tr>
<tr class="even">
<td align="left"><code>dec</code></td>
<td align="left">le séparateur décimal, usuellement <code>&quot;.&quot;</code> ou <code>&quot;,&quot;</code></td>
</tr>
<tr class="odd">
<td align="left"><code>na.strings</code></td>
<td align="left">les valeurs textuelles qui doivent être interprétées comme manquantes</td>
</tr>
<tr class="even">
<td align="left"><code>stringsAsFactors</code></td>
<td align="left"><code>TRUE</code> ou <code>FALSE</code> : les variables textuelles doivent-elles être converties en facteurs ?</td>
</tr>
</tbody>
</table>
<div class="note">
<p>Certains caractères sont parfois précédés d’une barre oblique inversée ou <em>antislash</em> (<code>\</code>). Cela correspond à des caractères spéciaux. En effet, <code>&quot;</code> est utilisé pour délimiter dans le code le début et la fin d’une chaîne de caractères. Comment indiquer à <strong>R</strong> le caractère <code>&quot;</code> proprement dit. Et bien avec <code>\&quot;</code>. De même, <code>\t</code> sera interprété comme une tabulation et non comme la lettre <code>t</code>.</p>
<p>Pour une liste complète des caractères spéciaux, voir <code>?Quotes</code>.</p>
</div>
<p>Pour en revenir à notre exemple, on l’importera donc ainsi :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="st">&quot;data/exemple_texte_tabule.txt&quot;</span>, <span class="dt">header =</span> <span class="ot">TRUE</span>, 
  <span class="dt">sep =</span> <span class="st">&quot;</span><span class="ch">\t</span><span class="st">&quot;</span>, <span class="dt">quote =</span> <span class="st">&quot;&#39;&quot;</span>, <span class="dt">dec =</span> <span class="st">&quot;,&quot;</span>, <span class="dt">na.strings =</span> <span class="st">&quot;&quot;</span>)
d</code></pre></div>
<pre><code>  Sexe Age Taille     Etudes
1    F  45   1.67   primaire
2    H  32   1.83       &lt;NA&gt;
3    H  24   1.72 supÃ©rieur
4    F  36   1.64 secondaire
5    F  23   1.54 supÃ©rieur
6    H  18   1.62   primaire
7    F  34   1.68 secondaire</code></pre>
<p>Aïe ! Que s’est-il passé ? Au lieu d’afficher <code>supérieur</code>, <strong>R</strong> affiche <code>supÃ©rieur</code>. C’est un problème classique d’<dfn>encodage</dfn> quand il y a des accents dans nos données. En effet, il y a de nombreuses manières différentes en informatique de coder les différents caractères<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a>. La première chose à faire est donc de vérifier la documentation associée à votre source de données. Il est possible que soit précisé l’encodage des caractères.</p>
<p>Si ce n’est pas le cas, il est fort probable que vos données aient été encodées soit en <strong>latin1</strong> (langues européennes occidentales), soit en <strong>UTF-8</strong> (unicode). On pourra donc essayer ces deux encodages et regarder le résultat obtenu. L’encodage peut être précisé avec l’argument <code>encoding</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="st">&quot;data/exemple_texte_tabule.txt&quot;</span>, <span class="dt">header =</span> <span class="ot">TRUE</span>, 
  <span class="dt">sep =</span> <span class="st">&quot;</span><span class="ch">\t</span><span class="st">&quot;</span>, <span class="dt">quote =</span> <span class="st">&quot;&#39;&quot;</span>, <span class="dt">dec =</span> <span class="st">&quot;,&quot;</span>, <span class="dt">na.strings =</span> <span class="st">&quot;&quot;</span>, 
  <span class="dt">encoding =</span> <span class="st">&quot;latin1&quot;</span>)
d</code></pre></div>
<pre><code>  Sexe Age Taille     Etudes
1    F  45   1.67   primaire
2    H  32   1.83       &lt;NA&gt;
3    H  24   1.72 supÃ©rieur
4    F  36   1.64 secondaire
5    F  23   1.54 supÃ©rieur
6    H  18   1.62   primaire
7    F  34   1.68 secondaire</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">d &lt;-<span class="st"> </span><span class="kw">read.table</span>(<span class="st">&quot;data/exemple_texte_tabule.txt&quot;</span>, <span class="dt">header =</span> <span class="ot">TRUE</span>, 
  <span class="dt">sep =</span> <span class="st">&quot;</span><span class="ch">\t</span><span class="st">&quot;</span>, <span class="dt">quote =</span> <span class="st">&quot;&#39;&quot;</span>, <span class="dt">dec =</span> <span class="st">&quot;,&quot;</span>, <span class="dt">na.strings =</span> <span class="st">&quot;&quot;</span>, 
  <span class="dt">encoding =</span> <span class="st">&quot;UTF-8&quot;</span>)
d</code></pre></div>
<pre><code>  Sexe Age Taille     Etudes
1    F  45   1.67   primaire
2    H  32   1.83       &lt;NA&gt;
3    H  24   1.72  supérieur
4    F  36   1.64 secondaire
5    F  23   1.54  supérieur
6    H  18   1.62   primaire
7    F  34   1.68 secondaire</code></pre>
<p>Notre fichier était encodé en <strong>UTF-8</strong>. Problème résolu !</p>
<p><strong>R</strong> propose quelques fonctions qui sont des raccourcis de <code data-pkg="utils">read.table</code> correspondant aux situations les plus courantes :</p>
<table>
<thead>
<tr class="header">
<th align="left">Fonction</th>
<th align="center">Séparateur de champs</th>
<th align="center">Séparateur de décimale</th>
<th align="center">Guillemets</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left"><code data-pkg="utils" data-rdoc="read.table">read.csv</code></td>
<td align="center">virgule</td>
<td align="center">point</td>
<td align="center">doubles</td>
</tr>
<tr class="even">
<td align="left"><code data-pkg="utils" data-rdoc="read.table">read.csv2</code></td>
<td align="center">point-virgule</td>
<td align="center">point</td>
<td align="center">doubles</td>
</tr>
<tr class="odd">
<td align="left"><code data-pkg="utils" data-rdoc="read.table">read.delim</code></td>
<td align="center">tabulation</td>
<td align="center">point</td>
<td align="center">doubles</td>
</tr>
<tr class="even">
<td align="left"><code data-pkg="utils" data-rdoc="read.table">read.delim2</code></td>
<td align="center">tabulation</td>
<td align="center">virgule</td>
<td align="center">doubles</td>
</tr>
</tbody>
</table>
<div class="note">
<p>Une extension dédiée à l’import de fichiers texte est en cours de dévelopemment : <code class="pkg">readr</code>. Elle permet notamment de spécifier les colonnes correspondant des <dfn data-index="date, variable">variables date</dfn> afin qu’elles soient converties dans un format approprié à l’import.</p>
</div>
</div>
<div id="interface-graphique-avec-rstudio" class="section level3">
<h3>Interface graphique avec RStudio</h3>
<p><strong>RStudio</strong> fournit une interface graphique pour faciliter l’import d’un fichier texte. Pour cela, il suffit d’aller dans le menu <em>Tools &gt; Import Dataset</em> et de choisir l’option <em>From Text File</em> si le fichier est présent sur votre disque dur ou <em>From Web URL</em> si le fichier source est disponible sur Internet.</p>
<figure>
<img src="images/capture_RStudio_import_dataset.png" alt="Importer un fichier texte avec RStudio" />
<figcaption>
Importer un fichier texte avec RStudio
</figcaption>
</figure>
<p>L’interface de <strong>RStudio</strong> vous présente sous <em>Input File</em> les données telles qu’elles sont stockées dans le fichier. Dans la colonne de gauche, vous pouvez specifier le nom de l’objet à créer et différentes options d’import. En temps réel, vous pouvez prévisualiser le résulat sous <em>Data Frame</em>.</p>
<p>Une fois que vous avez cliqué sur <em>Import</em>, le code nécessaire à l’import sera automatiquement copié dans la console et <strong>RStudio</strong> ouvrira le visualiseur de données afin que vous puissiez contrôler le résultat obtenu.</p>
</div>
</div>
<div id="importer-depuis-des-logiciels-de-statistique" class="section level2">
<h2>Importer depuis des logiciels de statistique</h2>
<p>Plusieurs extensions existent pour importer des fichiers de données issus d’autres logiciels de statistiques. En premier lieu, il y a <code class="pkg">foreign</code>, installée par défaut avec <strong>R</strong> et décrite en détails dans le manuel <cite>R Data Import/Export</cite> disponible sur <a href="http://cran.r-project.org/manuals.html" class="uri">http://cran.r-project.org/manuals.html</a>. Un des soucis majeurs de cette extension réside dans la manière dont elle traite les <dfn data-index="métadonnée">métadonnées</dfn> utilisées en particulier dans les fichiers <strong>SAS</strong>, <strong>SPSS</strong> et <strong>Stata</strong>, à savoir les <dfn data-index="étiquette de variable">étiquettes de variable</dfn><dfn data-index="variable, étiquette"></dfn>, les <dfn data-index="étiquette de valeur">étiquettes de valeur</dfn><dfn data-index="valeur, étiquette"></dfn> et les <dfn data-index="valeur manquante déclarée">valeurs manquantes déclarées</dfn><dfn data-index="manquante, valeur"></dfn>. En effet, chaque fonction va importer ces métadonnées sous la forme d’<dfn data-index="attribut">attributs</dfn> dont le nom diffère d’une fonction à l’autre. Par ailleurs, selon les options retenues, les <dfn data-index="variable labellisée">variables labellisées</dfn><dfn data-index="labellisée, variable"></dfn> seront parfois transformées ou non en <dfn data-index="facteur">facteurs</dfn>. Enfin, <code class="pkg">foreign</code> ne sait pas toujours importer les différents types de variables représentant des dates et des heures.</p>
<p>L’extension <code class="pkg">haven</code> (qui fait partie du <q lang="en">Hadleyverse</q>) tente de remédier à plusieurs des limitations rencontrées avec <code class="pkg">foreign</code> :</p>
<ul>
<li>le format des métadonnées importé est uniforme, quel que soit le type de fichier source (<strong>SAS</strong>, <strong>SPSS</strong> ou <strong>Stata</strong>) ;</li>
<li>les variables labellisées ne sont pas transformées en facteurs, mais héritent d’une nouvelle classe <code data-pkg="haven">labelled</code>, la valeur initiale restant inchangée ;</li>
<li>les différents formats de date sont convertis dans des classes <strong>R</strong> appropriées, utilisables en particulier avec <code class="pkg">lubridate</code> ;</li>
<li><code class="pkg">haven</code> peut lire les fichiers <strong>SAS natifs</strong> (extension <code>.sas7bdat</code>) ce que ne peut pas faire <code class="pkg">foreign</code> ;</li>
<li><code class="pkg">haven</code> peut lire les fichiers <strong>Stata</strong> 13 et 14, alors que <code class="pkg">foreign</code> ne sait lire ces fichiers que jusqu’à la version 12 ;</li>
<li>les tableaux de données produits ont directement la classe <code data-pkg="dplyr">tbl_df</code> ce qui permets d’utiliser directement les fonctionnalités de l’extension <code class="pkg">dplyr</code>.</li>
</ul>
<p>Cependant, <code class="pkg">haven</code> est encore une extension récente. Plusieurs bugs ont été identifiés dans la version 0.2.0 disponible sur <strong>CRAN</strong> (en particulier concernant l’importation des dates). Il est donc préférable d’utiliser la version de développement disponible sur <strong>GitHub</strong> (qui gère correctement les dates).</p>
<p>Pour cela, vous pouvez utiliser le code ci-dessous :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">if (!<span class="kw">require</span>(devtools)) <span class="kw">install.packages</span>(<span class="st">&quot;devtools&quot;</span>)
devtools::<span class="kw">install_github</span>(<span class="st">&quot;hadley\haven&quot;</span>)</code></pre></div>
<div id="spss" class="section level3">
<h3>SPSS</h3>
<p>Les fichiers générés par <strong>SPSS</strong><dfn data-index="SPSS, fichier"></dfn> sont de deux types : les fichiers <strong>SPSS natifs</strong> natifs (extension <code>.sav</code>) et les fichiers au format <strong>SPSS export</strong> (extension <code>.por</code>).</p>
<p>Dans les deux cas, on aura recours à la fonction <code data-pkg="haven">read_spss</code> :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(haven)
donnees &lt;-<span class="st"> </span><span class="kw">read_spss</span>(<span class="st">&quot;data/fichier.sav&quot;</span>)</code></pre></div>
<div class="note">
<p>Si vous préférez utiliser l’extension <code class="pkg">foreign</code>, la fonction correspondante est <code data-kg="foreign">read.spss</code>. On indiquera à la fonction de renvoyer un tableau de données avec l’argument <code>to.data.frame = TRUE</code>.</p>
<p>Par défaut, les variables numériques pour lesquelles des <dfn data-inndex="étiquette de valeur">étiquettes de valeurs</dfn><dfn data-index="valeur, étiquette"></dfn> ont été définies sont transformées en variables de type <dfn>facteur</dfn>, les étiquettes définies dans <strong>SPSS</strong> étant utilisées comme <em>labels</em> du facteur. De même, si des <dfn data-index="valeur manquante">valeurs manquantes</dfn> ont été définies dans <strong>SPSS</strong>, ces dernières seront toutes transformées en <code>NA</code> (<strong>R</strong> ne permettant pas de gérer plusieurs types de valeurs manquantes). Ce comportement peut être modifié avec <code>use.value.labels</code> et <code>use.missings</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(foreign)
donnees &lt;-<span class="st"> </span><span class="kw">read.spss</span>(<span class="st">&quot;data/fichier.sav&quot;</span>, <span class="dt">to.data.frame =</span> <span class="ot">TRUE</span>, 
  <span class="dt">use.value.labels =</span> <span class="ot">FALSE</span>, <span class="dt">use.missings =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p>Il est important de noter que <code data-pkg="foreign">read.spss</code> de l’extension <code class="pkg">foreign</code> ne sait pas importer les dates. Ces dernières sont donc automatiquement transformées en valeurs numériques.</p>
<p><strong>SPSS</strong> stocke les dates sous la forme du nombre de secondes depuis le début du calendrier grégorien, à savoir le 14 octobre 1582. Dès lors, si l’on des dates dans un fichier <strong>SPSS</strong> et que ces dernières ont été converties en valeurs numériques, on pourra essayer la commande suivante :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">donnees$date &lt;-<span class="st"> </span><span class="kw">as.POSIXlt</span>(donnees$date, <span class="dt">origin =</span> <span class="st">&quot;1582-10-14&quot;</span>)</code></pre></div>
</div>
</div>
<div id="sas" class="section level3">
<h3>SAS</h3>
<p>Les <dfn data-index="SAS, fichier">fichiers <strong>SAS</strong></dfn> se présentent en général sous deux format : format <strong>SAS export</strong> (extension <code>.xport</code> ou <code>.xpt</code>) ou format <strong>SAS natif</strong> (extension <code>.sas7bdat</code>).</p>
<p>Les fichiers <strong>SAS natifs</strong> peuvent être importées directement avec <code data-pkg="haven">read_sas</code> de l’extension <code class="pkg">haven</code> :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(haven)
donnees &lt;-<span class="st"> </span><span class="kw">read_sas</span>(<span class="st">&quot;data/fichier.sas7bdat&quot;</span>)</code></pre></div>
<p>Au besoin, on pourra préciser en deuxième argument le nom d’un fichier <strong>SAS catalogue</strong> (extension <code>.sas7bcat</code>) contenant les métadonnées du fichier de données.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(haven)
donnees &lt;-<span class="st"> </span><span class="kw">read_sas</span>(<span class="st">&quot;data/fichier.sas7bdat&quot;</span>, <span class="st">&quot;data/fichier.sas7bcat&quot;</span>)</code></pre></div>
<p>Les fichiers au format <strong>SAS export</strong> peuvent être importés via la fonction <code data-pkg="foreign">read.xport</code> de l’extension <code class="pkg">foreign</code>. Celle-ci s’utilise très simplement, en lui passant le nom du fichier en argument :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(foreign)
donnees &lt;-<span class="st"> </span><span class="kw">read.xport</span>(<span class="st">&quot;data/fichier.xpt&quot;</span>)</code></pre></div>
</div>
<div id="stata" class="section level3">
<h3>Stata</h3>
<p>Pour les <dfn data-index="Stata, fichier">fichiers <strong>Stata</strong></dfn> (extension <code>.dta</code>), on aura recours aux fonctions <code data-pkg="haven">read_dta</code> et <code data-pkg="haven" data-rdoc="read_dta">read_stata</code> de l’extension <code class="pkg">haven</code>. Ces deux fonctions sont identiques.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(haven)
donnees &lt;-<span class="st"> </span><span class="kw">read_dta</span>(<span class="st">&quot;data/fichier.dta&quot;</span>)</code></pre></div>
<div class="note">
<p>Si l’on préfère utiliser l’extension <code class="pkg">foreign</code>, on aura recours à la fonction <code data-pkg="foreign">read.dta</code>.</p>
<p>L’option <code>convert.factors</code> indique si les variables labellisées doit être converties automatiquement en facteurs. Pour un résultat similaire à celui de <code class="pkg">haven</code>, on choisira donc :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(foreign)
donnees &lt;-<span class="st"> </span><span class="kw">read.dta</span>(, <span class="dt">convert.factors =</span> <span class="ot">FALSE</span>)</code></pre></div>
<p>L’option <code>convert.dates</code> permet de convertir les dates du format <strong>Stata</strong> dans un format de dates géré par <strong>R</strong>. Cependant, cela ne marche pas toujours. Dans ces cas là, l’opération suivante peut fonctionner. Sans garantie néanmoins, il est toujours vivement conseillé de vérifier le résultat obtenu !</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">donnees$date &lt;-<span class="st"> </span><span class="kw">as.Date</span>(donnees$Date, <span class="dt">origin =</span> <span class="st">&quot;1960-01-01&quot;</span>)</code></pre></div>
</div>
</div>
<div id="excel" class="section level3">
<h3>Excel</h3>
<p>Une première approche pour importer des données <strong>Excel</strong> dans <strong>R</strong> consiste à les exporter depuis <strong>Excel</strong> dans un fichier texte (texte tabulé ou <strong>CSV</strong>) puis de suivre la procédure d’importation d’un fichier texte.</p>
<p>Une feuille <strong>Excel</strong> peut également être importée directement avec l’extension <code class="pkg">readxl</code> qui appartient à la même famille que <code class="pkg">haven</code> et <code class="pkg">readr</code>.</p>
<p>La fonction <code data-pkg="readxl">read_excel</code> permet d’importer à la fois des fichiers <code>.xls</code> (<strong>Excel</strong> 2003 et précédents) et <code>.xlsx</code> (<strong>Excel</strong> 2007 et suivants).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(readxl)
donnees &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="st">&quot;data/fichier.xlsx&quot;</span>)</code></pre></div>
<p>Une seule feuille de calculs peut être importée à la fois. On pourra préciser la feuille désirée avec <code>sheet</code> en indiquant soit le nom de la feuille, soit sa position (première, seconde, …).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">donnees &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="st">&quot;data/fichier.xlsx&quot;</span>, <span class="dt">sheet =</span> <span class="dv">3</span>)
donnees &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="st">&quot;data/fichier.xlsx&quot;</span>, <span class="dt">sheet =</span> <span class="st">&quot;mes_donnees&quot;</span>)</code></pre></div>
<p>On pourra préciser avec <code>col_names</code> si la première ligne contient le nom des variables.</p>
<p>Par défaut, <code data-pkg="readxl">read_excel</code> va essayer de deviner le type (numérique, textuelle, date) de chaque colonne. Au besoin, on pourra indiquer le type souhaité de chaque colonne avec <code>col_types</code>.</p>
<div class="note">
<p>Une alternative est l’extension <code class="pkg">xlsx</code> qui propose deux fonctions différentes pour importer des fichiers <strong>Excel</strong> : <code data-pkg="xlsx">read.xlsx</code> et <code data-pkg="xlsx" data-rdoc="read.xlsx">read.xlsx2</code>. La finalité est la même mais leur fonctionnement interne est différent. En cas de difficultés d’import, on pourra tester l’autre pour voir si le résultat est différent. Il est impératif de spécifier la position de la feuille de calculs que l’on souhaite importer.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(xlsx)
donnees &lt;-<span class="st"> </span><span class="kw">read.xlsx</span>(<span class="st">&quot;data/fichier.xlsx&quot;</span>, <span class="dv">1</span>)</code></pre></div>
</div>
</div>
<div id="dbase" class="section level3">
<h3>dBase</h3>
<p>L’Insee diffuse ses fichiers depuis son site Web au format <strong>dBase</strong> (extension <code>.dbf</code>). Ceux-ci sont directement lisibles dans <strong>R</strong> avec la fonction <code data-pkg="foreign">read.dbf</code> de l’extension <code class="pkg">foreign</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(foreign)
donnees &lt;-<span class="st"> </span><span class="kw">read.dbf</span>(<span class="st">&quot;data/fichier.dbf&quot;</span>)</code></pre></div>
<p>La principale limitation des <dfn data-index="dBase, fichier">fichiers <strong>dBase</strong></dfn> est de ne pas gérer plus de 256 colonnes. Les tables des enquêtes de l’Insee sont donc parfois découpées en plusieurs fichiers <code>.dbf</code> qu’il convient de fusionner avec la fonction <code data-pkg="base">merge</code>. L’utilisation de cette fonction est détaillée dans le chapitre sur la <a href="pem_manipulation.html#fusion_tables">manipulation de données</a>.</p>
</div>
</div>
<div id="donnees-spatiales" class="section level2">
<h2>Données spatiales</h2>
<div id="shapefile" class="section level3">
<h3>Shapefile</h3>
<p>Les <dfn date-index="shapefile, fichier">fichiers <strong>Shapefile</strong></dfn> sont couramment utilisés pour échanger des données géoréférencées. La majorité des logiciels de <strong>SIG</strong> (systèmes d’informations géographiques) sont en capacité d’importer et d’exporter des données dans ce format.</p>
<p>Un <strong>shapefile</strong> contient toute l’information liée à la géométrie des objets décrits, qui peuvent être :</p>
<ul>
<li>des points</li>
<li>des lignes</li>
<li>des polygones</li>
</ul>
<p>Son extension est classiquement <code>.shp</code> et il est toujours accompagné de deux autres fichiers de même nom et d’extensions :</p>
<ul>
<li>un fichier <code>.dbf</code>, qui contient les données attributaires relatives aux objets contenus dans le <strong>shapefile</strong></li>
<li>un fichier <code>.shx</code>, qui stocke l’index de la géométrie</li>
</ul>
<p>D’autres fichiers peuvent être également fournis :</p>
<ul>
<li><code>.sbn</code> et <code>.sbx</code> - index spatial des formes.</li>
<li><code>.fbn</code> et <code>.fbx</code> - index spatial des formes pour les shapefile en lecture seule</li>
<li><code>.ain</code> et <code>.aih</code> - index des attributs des champs actifs dans une table ou dans une table d’attributs du thème</li>
<li><code>.prj</code> - information sur le système de coordonnées</li>
<li><code>.shp.xml</code> - métadonnées du shapefile.</li>
<li><code>.atx</code> - fichier d’index des attributs pour le fichier <code>.dbf</code></li>
<li><code>.qix</code></li>
</ul>
<p>En premier lieu, il importe que tous les fichiers qui compose un même <strong>shapefile</strong> soit situés dans le même répertoire et aient le même nom (seule l’extension étant différente).</p>
<p>L’extension <code class="pkg">maptools</code> fournit les fonctions permettant d’importer un <strong>shapefile</strong> dans <strong>R</strong>. Le résultat obtenu utilisera l’une des différentes classes spatiales fournies par l’extension <code class="pkg">sp</code>.</p>
<p>La fonction générique d’import est <code data-pkg="maptools">readShapeSpatial</code> :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(maptools)
donnees_spatiales &lt;-<span class="st"> </span><span class="kw">readShapeSpatial</span>(<span class="st">&quot;data/fichier.shp&quot;</span>)</code></pre></div>
<p>Si l’on connait déjà le type de données du <strong>shapefile</strong> (points, lignes ou polygones), on pourra utiliser directement <code data-pkg="maptools">readShapePoints</code>, <code data-pkg="maptools">readShapeLines</code> ou <code data-pkg="maptools">readShapePoly</code>.</p>
</div>
<div id="rasters" class="section level3">
<h3>Rasters</h3>
<p>Il existe de multiples formats pour stocker des données matricielles spatiales. L’un des plus communs est le format <strong>ASCII grid</strong> aussi connu sous le nom de <strong>Arc/Info ASCII grid</strong> ou <strong>ESRI grid</strong>. L’extension de ce format n’est pas toujours uniforme. On trouve parfois <code>.asc</code> ou encore <code>.ag</code> voir même <code>.txt</code>.</p>
<p>Pour importer ce type de fichier, on pourra avoir recours à la fonction <code data-pkg="maptools">readAsciiGrid</code> de l’extension <code class="pkg">maptools</code>. Le résultat sera, par défaut, au format <code data-pkg="sp" data-rdoc="SpatialGridDataFrame-class">SpatialGridDataFrame</code> de l’extension <code class="pkg">sp</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(maptools)
donnees_spatiales &lt;-<span class="st"> </span><span class="kw">readAsciiGrid</span>(<span class="st">&quot;data/fichier.asc&quot;</span>)</code></pre></div>
<p>L’extension <code class="pkg">raster</code> permet d’effectuer de multiples manipulations sur les données du type <dfn data-index="raster, fichier">raster</dfn>. Elle est en capacité d’importer des données depuis différents formats (plus précisément les formats pris en charge par la librairie <strong>GDAL</strong>).</p>
<p>De plus, les fichiers raster pouvant être particulièrement volumineux (jusqu’à plusieurs Go de données), l’extension <code class="pkg">raster</code> est capable de travailler sur un fichier raster sans avoir à le charger intégralement en mémoire.</p>
<p>Pour plus d’informations, voir les fonctions <code data-pkg="raster">raster</code> et <code data-pkg="raster">getValues</code>.</p>
</div>
</div>
<div id="autres-sources" class="section level2">
<h2>Autres sources</h2>
<p><strong>R</strong> offre de très nombreuses autres possibilités pour accéder aux données. Il est ainsi possible d’importer des données depuis d’autres applications qui n’ont pas été évoquées (<strong>Epi Info</strong>, <strong>S-Plus</strong>, etc.), de se connecter à un système de base de données relationelle type <strong>MySQL</strong>, de lire des données via <strong>ODBC</strong> ou des connexions réseau, etc.</p>
<p>Pour plus d’informations on consultera le manuel <em>R Data Import/Export</em> :<br /> <a href="http://cran.r-project.org/manuals.html" class="uri">http://cran.r-project.org/manuals.html</a>.</p>
</div>
<div id="sauver-ses-donnees" class="section level2">
<h2>Sauver ses données</h2>
<p><strong>R</strong> dispose également de son propre format pour sauvegarder et échanger des données. On peut sauver n’importe quel objet créé avec <strong>R</strong> et il est possible de sauver plusieurs objets dans un même fichier. L’usage est d’utiliser l’extension <code>.RData</code> pour les fichiers de données <strong>R</strong>. La fonction à utiliser s’appelle tout simplement <code data-pkg="base">save</code>.</p>
<p>Par exemple, si l’on souhaite sauvegarder son tableau de données <code>d</code> ainsi que les objets <code>tailles</code> et <code>poids</code> dans un fichier <code>export.RData</code> :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">save</span>(d, tailles, poids, <span class="dt">file =</span> <span class="st">&quot;export.RData&quot;</span>)</code></pre></div>
<p>À tout moment, il sera toujours possible de recharger ces données en mémoire à l’aide de la fonction <code data-pkg="base">load</code> :</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">load</span>(<span class="st">&quot;export.RData&quot;</span>)</code></pre></div>
<div class="important">
<p>Si entre temps vous aviez modifié votre tableau <code>d</code>, vos modifications seront perdues. En effet, si lors du chargement de données, un objet du même nom existe en mémoire, ce dernier sera remplacé par l’objet importé.</p>
</div>
<p>La fonction <code data-pkg="base" data-rdoc="save">save.image</code> est un raccourci pour sauvergarder tous les objets de la session de travail dans le fichier <code>.RData</code> (un fichier un peu étrange car il n’a pas de nom mais juste une extension). Lors de la fermeture de <strong>RStudio</strong>, il vous sera demandé si vous souhaitez enregistrer votre session. Si vous répondez <em>Oui</em>, c’est cette fonction <code data-pkg="base" data-rdoc="save">save.image</code> qui sera appliquée.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">save.image</span>()</code></pre></div>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>Pour plus de détails, ne pas hésiter à aller lire la page <strong>Wikipedia</strong> <a href="http://fr.wikipedia.org/wiki/Codage_des_caract%C3%A8res">Codage des caractères</a>. Historiquement, les premiers systèmes d’encodage de caractères ne permettaient pas de coder les lettres non accentués, ce qui convient très bien en anglais, mais pose tout un tas de problèmes pour les autres langues. Dès lors, de nombreux systèmes ont été développés, plus ou moins différents pour chaque langue. Depuis les années 1990, un projet appelé <em>Unicode</em> vise à définir une norme universelle permettant de rendre compte de l’ensemble des langues humaines. Le format <strong>UTF-8</strong> issu du projet <em>Unicode</em> est aujourd’hui le format le plus employé sur Internet.<a href="#fnref1">↩</a></p></li>
</ol>
</div>

</article>
</div>

<div class="col-sm-3" role="complementary">
<nav class="hidden-print hidden-xs" id="nav_sidebar">
</nav>
</div>

</div>

<script>
// manage active state of menu based on current page
$(document).ready(function () {

    // active menu
    href = window.location.pathname;
    href = href.substr(href.lastIndexOf('/') + 1);
    if (href=='') href = 'index.html';
    $('a[href="' + href + '"]').parent().addClass('active');
    $('a[href="' + href + '"]').parent().parents('li').addClass('active');

    // élargir la page d'accueil
    if (href=='index.html') $('.col-sm-9').attr('class','col-sm-12');

    // rechercher
    $("#rechercher").submit(function(event) {
      $('input[name="q"]').val($('input[name="q"]').val() + ' site:larmarange.github.io/analyse-R');
    });

    // sidebar
    $("#nav_sidebar").append($("#TOC").html());
    $("#nav_sidebar ul").addClass("nav nav-stacked");
    $("#TOC").addClass("visible-xs-block");
    $('body').scrollspy({
      target: '#nav_sidebar',
      offset: 40
    });

    // Identifier les <pre> fermant
    $('pre').next("*:not(pre)").prev().addClass('last'); // Dernier <pre> de chaque groupe contigu de <pre>
    $('pre').parent().each(function (){
      $(this).children('pre').last().addClass('last');
    }); // Si <pre> est le dernier enfant de son parent

    // Ajout liens rdocumentation et tooltip
    $("code[data-pkg]").each(function( index ) {
      pkg = $(this).attr('data-pkg');
      if ($(this).attr('data-rdoc') !== undefined) {
        rdocumentation = $(this).attr('data-rdoc');
      } else {
        rdocumentation = $(this).text();
      }
      fonction = $(this).text();
      $(this).wrap('<a href="http://www.rdocumentation.org/packages/'+pkg+'/functions/'+rdocumentation+'">');
      $(this).attr('data-toggle','tooltip');
      $(this).attr('data-placement','top');
      $(this).attr('title','package : ' + pkg);
      $('[data-toggle="tooltip"]').tooltip();
    });

    $("code.pkg").each(function( index ) {
      $(this).wrap('<a href="http://www.rdocumentation.org/packages/'+$(this).text()+'">');
    });

    // Figures
    $("figure").each(function( index ) {
      if ($(this).children("figcaption").length > 0)
        $(this).children("figcaption:first").prepend('<span class="figure-number">Figure '+(index+1)+'.</span> ');
      else
        $(this).append($("<figcaption>").append('<span class="figure-number">Figure '+(index+1)+'</span>'));
    });

    // Colorbox
    jQuery('article div img').colorbox({
      maxWidth: '90%',
      maxHeight: '90%',
      rel: 'figures',
      current: "",
      href: function(){
        return $(this).attr('src');
      },
      title: function(){
        return $(this).attr('alt');
      }
    });
    jQuery('article div img').css('cursor', 'pointer');
    jQuery('figure img').colorbox({
      maxWidth: '90%',
      maxHeight: '90%',
      rel: 'figures',
      current: "",
      href: function(){
        return $(this).attr('src');
      },
      title: function(){
        return $(this).parent().children("figcaption").text();
      }
    });
    jQuery('figure img').css('cursor', 'pointer');

    // ZeroClipboard
    $('pre.r').parent().each(function(){
      $(this).children('pre.r').first().before('<div class="zero-clipboard hidden-print hidden-xs"><button class="btn-clipboard">Copier</button></div>');
    }); // Il peut arriver que le pre ne soit pas précédé (cf. figures)
    $('*:not(pre):not(.zero-clipboard) + pre.r').before('<div class="zero-clipboard hidden-print hidden-xs"><button class="btn-clipboard">Copier</button></div>');
    $('pre.last').after(function() {
      if ($(this).hasClass("r")) res = $(this).text(); else res = "";
      $(this).prevUntil('*:not(pre)','pre.r').each(function() {
        res = $(this).text() + '\n' + res;
      });
      return '<div class="clipboard">' + res + '</div>';
    });
    $('.zero-clipboard').each(function(index){
      $(this).children('.btn-clipboard').attr('data-clipboard-target','clipboard_'+index);
      $(this).nextAll("div.clipboard").first().attr('id','clipboard_'+index);
    });
    var client = new ZeroClipboard( $(".btn-clipboard") );
    client.on( "ready", function( readyEvent ) {
      // alert( "ZeroClipboard SWF is ready!" );
      client.on( "aftercopy", function( event ) {
        // `this` === `client`
        // `event.target` === the element that was clicked
        //event.target.style.display = "none";
        $(event.target).parent().before('<div class="alert alert-success"><a href="#" class="close" data-dismiss="alert">&times;</a>Le code <strong>R</strong> de l’exemple a été copié dans le presse-papier.</div>');
      } );
    } );

});
</script>

<!-- disqus -->
<div class="row">
  <div id="disqus_thread" class="col-sm-9" role="complementary"></div>
</div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'analyse-r'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Veuillez activer JavaScript pour voir les <a href="http://disqus.com/?ref_noscript">les commentaires gérés avec Disqus.</a></noscript>
    <!--<a href="http://disqus.com" class="dsq-brlink">Les commentaires sont hébergés par <span class="logo-disqus">Disqus</span>.</a>-->

<footer>
  <div class="row">
    <div class="col-lg-12">
      <p>Contenus sous licence <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/fr/" rel="nofollow">Creative Commons Attribution - Pas d’utilisation commerciale - Partage dans les mêmes conditions</a>.<br />
      Propulsé par <a href="http://www.r-project.org/" rel="nofollow">R</a>, </a><a href="http://www.rstudio.com/" rel="nofollow">RStudio</a>, <a href="http://rmarkdown.rstudio.com/" rel="nofollow">R Markdown</a>, <a href="http://yihui.name/knitr/" rel="nofollow">knitr</a>, <a href="http://pandoc.org/" rel="nofollow">pandoc</a> et <a href="http://www.princexml.com/" rel="nofollow">Prince XML</a>. Hébergé par <a href="https://github.com/" rel="nofollow">GitHub</a>.</p>
    </div>
  </div>
</footer>



</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>


</body>
</html>
