<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />



<title>Recodage</title>

<script src="libs/jquery-1.11.0/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.1/css/flatly.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.1/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.1/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.1/shim/respond.min.js"></script>
<meta name="robots" content="index, follow">
<link rel="stylesheet" href="./include/analyse-R.css" />
<script type="text/javascript" src="./libs/zeroclipboard-2.2.0/ZeroClipboard.js"></script>
<link rel="stylesheet" href="./libs/colorbox-1.6.1/colorbox.css" />
<script type="text/javascript" src="./libs/colorbox-1.6.1/jquery.colorbox-min.js"></script>
<!--- favicon --->
<link rel="apple-touch-icon" sizes="57x57" href="./images/favicon/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="./images/favicon/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="./images/favicon/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="./images/favicon/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="./images/favicon/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="./images/favicon/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="./images/favicon/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="./images/favicon/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="./images/favicon/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="./images/favicon/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="./images/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="./images/favicon/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="./images/favicon/favicon-16x16.png">
<link rel="manifest" href="./images/favicon/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="./images/favicon/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>



</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img { 
  max-width:100%; 
  height: auto; 
}
</style>
<div class="container-fluid main-container">

<nav>
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href=".">analyse-R</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
          <a href="manipuler" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Manipuler <span class="caret"></span></a>
          <ul class="dropdown-menu multi-column columns-3" role="menu" id="menu_manipuler">
            <div class="row">
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
  		            <li class="dropdown-header">Prise en main</li>
                  <li><a href="manipuler_pem_presentation.html">Présentation et Philosophie</a></li>
                  <li><a href="manipuler_pem_installation.html">Installation de R et RStudio</a></li>
                  <li><a href="manipuler_pem_extensions.html">Extensions</a></li>
                  <li><a href="manipuler_pem_contact.html">Premier contact</a></li>
                  <li><a href="manipuler_pem_travail.html">Premier travail avec des données</a></li>
                  <li><a href="manipuler_pem_organiser.html">Organiser ses fichiers</a></li>
                  <li><a href="manipuler_pem_import.html">Import de données</a></li>
                  <li><a href="manipuler_pem_variables.html">Variables</a></li>
                  <li class="dev"><a href="manipuler_pem_indexation.html">Indexation</a></li>
                  <li class="dev"><a href="manipuler_pem_recodage.html">Recodage</a></li>
                  <li><a href="manipuler_pem_aide.html">Où trouver de l'aide ?</a></li>
  	            </ul>
              </div>
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
  		            <li class="dropdown-header">Manipulation de données</li>
                  <li class="dev"><a href="manipuler_inter_dplyr.html">Introduction à dplyr</a></li>
                  <li class="dev"><a href="manipuler_inter_data_table.html">Introduction à data.table</a></li>
                  <li class="dev"><a href="manipuler_inter_doublons.html">Doublons</a></li>
                  <li class="dev"><a href="manipuler_inter_tris.html">Tris</a></li>
                  <li class="dev"><a href="manipuler_inter_sous_ensembles.html">Sous-ensembles</a></li>
                  <li class="dev"><a href="manipuler_inter_fusion.html">Fusion de tables</a></li>
                  <li class="dev"><a href="manipuler_inter_dates.html">Gestion des dates</a></li>
                  <li class="dev"><a href="manipuler_avance_aggregation.html">Aggrégation</a></li>
                  <li class="dev"><a href="manipuler_avance_fenetre.html">Fonctions à fenêtre</a></li>
                  <li class="dev"><a href="manipuler_avance_restructuration.html">Restructuration de données</a></li>
  	            </ul>
              </div>
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
                  <li class="dropdown-header">Exporter</li>
                  <li class="dev"><a href="manipuler_export_donnees.html">Export de données</a></li>
                  <li><a href="manipuler_export_graph.html">Export de graphiques</a></li>
                  <li class="dev"><a href="manipuler_export_tableaux.html">Export de tableaux</a></li>
  	            </ul>
              </div>
            </div>
          </ul>
        </li>
        <li class="dropdown">
          <a href="analyser" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Analyser <span class="caret"></span></a>
          <ul class="dropdown-menu multi-column columns-3" role="menu" id="menu_analyser">
            <div class="row">
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
  		            <li class="dropdown-header">Statistiques introductives</li>
                  <li><a href="analyser_intro_stat_univ.html">Statistique univariée</a></li>
                  <li class="dev"><a href="analyser_intro_graph_univ.html">Graphiques univariés</a></li>
                  <li><a href="analyser_intro_stat_biv.html">Statistique bivariée</a></li>
                  <li class="dev"><a href="analyser_intro_graph_biv.html">Graphiques bivariés</a></li>
                  <li><a href="analyser_intro_donnees_pond.html">Données pondérées</a></li>
                  <li class="dev"><a href="analyser_intro_graph_donnees_pond.html">Graphiques de données pondérées</a></li>
  	            </ul>
              </div>
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
  		            <li class="dropdown-header">Statistiques intermédiaires</li>
  		            <li class="dev"><a href="analyser_inter_int_conf.html">Intervalles de confiance</a></li>
                  <li class="dev"><a href="analyser_inter_comp.html">Comparaisons (moyennes et proportions)</a></li>
                  <li><a href="analyser_inter_echant_compl.html">Définir un plan d'échantillonnage complexe</a></li>
                  <li class="dev"><a href="analyser_inter_reg_lin.html">Régression linéaire</a></li>
                  <li><a href="analyser_inter_reg_log.html">Régression logistique</a></li>
                  <li class="dev"><a href="analyser_inter_acp.html">Analyse en composantes principales (ACP)</a></li>
                  <li><a href="analyser_inter_acm.html">Analyse des correspondances multiples (ACM)</a></li>
                  <li><a href="analyser_inter_cah.html">Classification ascendante hiérarchique (CAH)</a></li>
  	            </ul>
              </div>
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
                  <li class="dropdown-header">Statistiques avancées</li>
                  <li class="dev"><a href="analyser_avance_effets_mixtes.html">Modèles linéaires à effets mixtes</a></li>
                  <li class="dev"><a href="analyser_avance_gee.html">Modèles GEE</a></li>
                  <li class="dev"><a href="analyser_avance_series_temp.html">Séries temporelles</a></li>
                  <li class="dev"><a href="analyser_avance_temps_discret.html">Modèles à temps discret</a></li>
                  <li class="dev"><a href="analyser_avance_survie.html">Analyse de survie</a></li>
                  <li><a href="analyser_avance_seq.html">Analyse de séquences</a></li>
                  <li class="dev"><a href="analyser_avance_reseaux.html">Analyse de réseaux</a></li>
                  <li class="dev"><a href="analyser_avance_spatial.html">Analyse spatiale</a></li>
  	            </ul>
              </div>
            </div>
          </ul>
        </li>
        <li class="dropdown">
          <a href="approfondir" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Approfondir <span class="caret"></span></a>
          <ul class="dropdown-menu multi-column columns-3" role="menu" id="menu_approfondir">
            <div class="row">
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
  		            <li class="dropdown-header">Graphiques</li>
                  <li class="dev"><a href="approfondir_graph_ggplot2.html">ggplot2 : la grammaire des graphiques</a></li>
                  <li class="dev"><a href="approfondir_graph_etendre_ggplot2.html">Étendre ggplot2</a></li>
                  <li class="dev"><a href="approfondir_graph_lattice.html">lattice : graphiques et formules</a></li>
                  <li class="dev"><a href="approfondir_graph_diagrammes.html">Diagrammes</a></li>
                  <li class="dev"><a href="approfondir_graph_flux.html">Représenter des flux</a></li>
                  <li class="dev"><a href="approfondir_graph_reseaux_dyn.html">Réseaux dynamiques</a></li>
                  <li class="dev"><a href="approfondir_graph_ggvis.html">ggvis : les graphiques interactifs</a></li>
                  <li class="dev"><a href="approfondir_graph_htmlwidgets.html">htmlwidgets : la puissance de javascript</a></li>
                  <li class="dev"><a href="approfondir_graph_cartes.html">Cartes</a></li>
  	            </ul>
              </div>
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
  		            <li class="dropdown-header">Programmation</li>
                  <li class="dev"><a href="approfondir_code_formules.html">Formules</a></li>
                  <li class="dev"><a href="approfondir_code_struct_cond.html">Structures conditionnelles</a></li>
                  <li class="dev"><a href="approfondir_code_regexp.html">Expressions régulières</a></li>
                  <li class="dev"><a href="approfondir_code_fonctions.html">Écrire ses propres fonctions</a></li>
                  <li class="dev"><a href="approfondir_code_rmarkdown.html">R Markdown : les rapports automatisés</a></li>
                  <li class="dev"><a href="approfondir_code_shiny.html">Shiny : les interfaces interactives</a></li>
                  <li class="dev"><a href="approfondir_code_git.html">Git</a></li>
                  <li class="dev"><a href="approfondir_code_package.html">Développer un package</a></li>
  	            </ul>
              </div>
              <div class="col-sm-4">
  	            <ul class="multi-column-dropdown">
                  <li class="dropdown-header">Divers</li>
                  <li><a href="approfondir_divers_age.html">Calculer un âge</a></li>
                  <li class="dev"><a href="approfondir_divers_prevR.html">prevR : cartes de prévalence à partir des EDS</a></li>
  	            </ul>
              </div>
            </div>
          </ul>
        </li>
        <li class="dropdown">
          <a href="index" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Index <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu" id="menu_naviguer">
            <li><a href="index_concepts.html">Index des concepts</a></li>
            <li><a href="index_fonctions.html">Index des fonctions</a></li>
            <li><a href="index_extensions.html">Index des extensions</a></li>
          </ul>
        </li>
        <li><a href="analyse-R.pdf">PDF</a></li>
      </ul>
    <form id="rechercher" class="navbar-form navbar-right" role="search" style="padding-top: 5px;" method="get" action="https://duckduckgo.com/">
      <div class="form-group">
        <input name="q" type="text" class="form-control input-sm" placeholder="Rechercher">
      </div>
      <button type="submit" class="btn btn-default btn-sm" name="Rechercher">
        <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
      </button>
    </form>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->
</nav>

<div class="row">

<a href="https://github.com/larmarange/analyse-R"><img style="position: absolute; top: 60px; right: 0; border: 0;" src="https://camo.githubusercontent.com/e7bbb0521b397edbd5fe43e7f760759336b5e05f/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677265656e5f3030373230302e706e67" alt="Contribuer sur GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png"></a>

<div class="col-sm-9" role="main">
<article>

<div id="header">
<h1 class="title">Recodage</h1>
</div>

<div id="TOC">
<ul>
<li><a href="#convertir-une-variable">Convertir une variable</a></li>
<li><a href="#decouper_en_classes">Découper une variable numérique en classes</a></li>
<li><a href="#regrouper_modalites">Regrouper les modalités d’une variable</a></li>
<li><a href="#variables-calculees">Variables calculées</a></li>
<li><a href="#combiner-plusieurs-variables">Combiner plusieurs variables</a></li>
<li><a href="#variables-scores">Variables scores</a></li>
<li><a href="#verification-des-recodages">Vérification des recodages</a></li>
</ul>
</div>

<div class="important">
Ce chapitre est en cours d’écriture.
</div>
<div class="note">
La version originale de ce chapitre a été écrite par Julien Barnier dans le cadre du support de cours <a href="https://github.com/juba/intro-r">Introduction à R</a>.
</div>
<p>Le <dfn>recodage de variables</dfn><dfn data-index="variable, recodage"></dfn> est une opération extrêmement fréquente lors du traitement d’enquête. Celui-ci utilise soit l’une des formes d’indexation décrites précédemment, soit des fonctions <em>ad hoc</em> de <strong>R</strong>.</p>
<p>On passe ici en revue différents types de recodage parmi les plus courants. Les exemples s’appuient, comme précédemment, sur l’extrait de l’enquête <em>Histoire de vie</em> :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">data</span>(hdv2003)
d &lt;-<span class="st"> </span>hdv2003</code></pre>
<div id="convertir-une-variable" class="section level2">
<h2>Convertir une variable</h2>
<p>Il peut arriver qu’on veuille transformer une variable d’un type dans un autre.</p>
<p>Par exemple, on peut considérer que la variable numérique <em>freres.soeurs</em> est une « fausse » variable numérique et qu’une représentation sous forme de facteur serait plus adéquate. Dans ce cas il suffit de faire appel à la fonction <code data-pkg="base">factor</code> :</p>
<pre class="sourceCode r"><code class="sourceCode r">d$fs.fac &lt;-<span class="st"> </span><span class="kw">factor</span>(d$freres.soeurs)
<span class="kw">levels</span>(d$fs.fac)</code></pre>
<pre><code> [1] &quot;0&quot;  &quot;1&quot;  &quot;2&quot;  &quot;3&quot;  &quot;4&quot;  &quot;5&quot;  &quot;6&quot;  &quot;7&quot;  &quot;8&quot; 
[10] &quot;9&quot;  &quot;10&quot; &quot;11&quot; &quot;12&quot; &quot;13&quot; &quot;14&quot; &quot;15&quot; &quot;16&quot; &quot;18&quot;
[19] &quot;22&quot;</code></pre>
<p>La conversion d’une variable caractères en facteur se fait de la même manière.</p>
<p>La conversion d’un facteur ou d’une variable numérique en variable caractères peut se faire à l’aide de la fonction <code data-pkg="base" data-rdoc="character">as.character</code> :</p>
<pre class="sourceCode r"><code class="sourceCode r">d$fs.char &lt;-<span class="st"> </span><span class="kw">as.character</span>(d$freres.soeurs)
d$qualif.char &lt;-<span class="st"> </span><span class="kw">as.character</span>(d$qualif)</code></pre>
<p>La conversion d’un facteur en caractères est fréquemment utilisé lors des recodages du fait qu’il est impossible d’ajouter de nouvelles modalités à un facteur de cette manière. Par exemple, la première des commandes suivantes génère un message d’avertissement, tandis que les deux autres fonctionnent :</p>
<pre class="sourceCode r"><code class="sourceCode r">d.temp &lt;-<span class="st"> </span>d
d.temp$qualif[d.temp$qualif ==<span class="st"> &quot;Ouvrier specialise&quot;</span>] &lt;-<span class="st"> &quot;Ouvrier&quot;</span></code></pre>
<pre><code>Warning in `[&lt;-.factor`(`*tmp*`, d.temp$qualif ==
&quot;Ouvrier specialise&quot;, : invalid factor level, NA
generated</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">d$qualif.char &lt;-<span class="st"> </span><span class="kw">as.character</span>(d$qualif)
d$qualif.char[d$qualif.char ==<span class="st"> &quot;Ouvrier specialise&quot;</span>] &lt;-<span class="st"> &quot;Ouvrier&quot;</span></code></pre>
<p>Dans le premier cas, le message d’avertissement indique que toutes les modalités « Ouvrier specialise » de notre variable <em>qualif</em> ont été remplacées par des valeurs manquantes <code>NA</code>.</p>
<p>Enfin, une variable de type caractères dont les valeurs seraient des nombres peut être convertie en variable numérique avec la fonction <code data-pkg="base" data-rdoc="numeric">as.numeric</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r">v &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;1&quot;</span>, <span class="st">&quot;3.1415&quot;</span>, <span class="st">&quot;4&quot;</span>, <span class="st">&quot;5.6&quot;</span>, <span class="st">&quot;1&quot;</span>, <span class="st">&quot;4&quot;</span>)
v</code></pre>
<pre><code>[1] &quot;1&quot;      &quot;3.1415&quot; &quot;4&quot;      &quot;5.6&quot;    &quot;1&quot;     
[6] &quot;4&quot;     </code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as.numeric</span>(v)</code></pre>
<pre><code>[1] 1.0000 3.1415 4.0000 5.6000 1.0000 4.0000</code></pre>
<div class="important">
<p>Lorsque l’on convertit un facteur avec <code data-pkg="base" data-rdoc="numeric">as.numeric</code>, on obtient le numéro de chaque facteur (première modalité, seconde modalité, etc.). Si la valeur numérique qui nous intéresse est en fait contenu dans le nom des modalités, il faut connvertir au préalable notre facteur en variable textuelle.</p>
<pre class="sourceCode r"><code class="sourceCode r">vf &lt;-<span class="st"> </span><span class="kw">factor</span>(v)
vf</code></pre>
<pre><code>[1] 1      3.1415 4      5.6    1      4     
Levels: 1 3.1415 4 5.6</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as.numeric</span>(vf)</code></pre>
<pre><code>[1] 1 2 3 4 1 3</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">as.numeric</span>(<span class="kw">as.character</span>(vf))</code></pre>
<pre><code>[1] 1.0000 3.1415 4.0000 5.6000 1.0000 4.0000</code></pre>
</div>
</div>
<div id="decouper_en_classes" class="section level2">
<h2>Découper une variable numérique en classes</h2>
<p>Le premier type de recodage consiste à découper une variable de type numérique en un certain nombre de classes. On utilise pour cela la fonction <code data-pkg="base">cut</code>.</p>
<p>Celle-ci prend, outre la variable à découper, un certain nombre d’arguments :</p>
<ul>
<li><code>breaks</code> indique soit le nombre de classes souhaité, soit, si on lui fournit un vecteur, les limites des classes ;</li>
<li><code>labels</code> permet de modifier les noms de modalités attribués aux classes ;</li>
<li><code>include.lowest</code> et <code>right</code> influent sur la manière dont les valeurs situées à la frontière des classes seront inclues ou exclues ;</li>
<li><code>dig.lab</code> indique le nombre de chiffres après la virgule à conserver dans les noms de modalités.</li>
</ul>
<p>Prenons tout de suite un exemple et tentons de découper notre variable <em>age</em> en cinq classes et de placer le résultat dans une nouvelle variable nommée <em>age5cl</em> :</p>
<pre class="sourceCode r"><code class="sourceCode r">d$age5cl &lt;-<span class="st"> </span><span class="kw">cut</span>(d$age, <span class="dv">5</span>)
<span class="kw">table</span>(d$age5cl)</code></pre>
<pre><code>
(17.9,33.8] (33.8,49.6] (49.6,65.4] (65.4,81.2] 
        454         628         556         319 
(81.2,97.1] 
         43 </code></pre>
<p>Par défaut <strong>R</strong> nous a bien créé cinq classes d’amplitudes égales. La première classe va de 16,9 à 32,2 ans (en fait de 17 à 32), etc.</p>
<p>Les frontières de classe seraient plus présentables si elles utilisaient des nombres ronds. On va donc spécifier manuellement le découpage souhaité, par tranches de 20 ans :</p>
<pre class="sourceCode r"><code class="sourceCode r">d$age20 &lt;-<span class="st"> </span><span class="kw">cut</span>(d$age, <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">20</span>, <span class="dv">40</span>, <span class="dv">60</span>, <span class="dv">80</span>, <span class="dv">100</span>))
<span class="kw">table</span>(d$age20)</code></pre>
<pre><code>
  (0,20]  (20,40]  (40,60]  (60,80] (80,100] 
      72      660      780      436       52 </code></pre>
<p>On aurait pu tenir compte des âges extrêmes pour la première et la dernière valeur :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">range</span>(d$age)</code></pre>
<pre><code>[1] 18 97</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">d$age20 &lt;-<span class="st"> </span><span class="kw">cut</span>(d$age, <span class="kw">c</span>(<span class="dv">18</span>, <span class="dv">20</span>, <span class="dv">40</span>, <span class="dv">60</span>, <span class="dv">80</span>, <span class="dv">97</span>))
<span class="kw">table</span>(d$age20)</code></pre>
<pre><code>
(18,20] (20,40] (40,60] (60,80] (80,97] 
     55     660     780     436      52 </code></pre>
<p>Les symboles dans les noms attribués aux classes ont leur importance : <code>(</code> signifie que la frontière de la classe est exclue, tandis que <code>[</code> signifie qu’elle est incluse. Ainsi, <code>(20,40]</code> signifie « strictement supérieur à 20 et inférieur ou égal à 40 ».</p>
<p>On remarque que du coup, dans notre exemple précédent, la valeur minimale, 18, est exclue de notre première classe, et qu’une observation est donc absente de ce découpage. Pour résoudre ce problème on peut soit faire commencer la première classe à 17, soit utiliser l’option <code>include.lowest=TRUE</code> :</p>
<pre class="sourceCode r"><code class="sourceCode r">d$age20 &lt;-<span class="st"> </span><span class="kw">cut</span>(d$age, <span class="kw">c</span>(<span class="dv">17</span>, <span class="dv">20</span>, <span class="dv">40</span>, <span class="dv">60</span>, <span class="dv">80</span>, <span class="dv">97</span>))
<span class="kw">table</span>(d$age20)</code></pre>
<pre><code>
(17,20] (20,40] (40,60] (60,80] (80,97] 
     72     660     780     436      52 </code></pre>
<pre class="sourceCode r"><code class="sourceCode r">d$age20 &lt;-<span class="st"> </span><span class="kw">cut</span>(d$age, <span class="kw">c</span>(<span class="dv">18</span>, <span class="dv">20</span>, <span class="dv">40</span>, <span class="dv">60</span>, <span class="dv">80</span>, <span class="dv">97</span>), <span class="dt">include.lowest =</span> <span class="ot">TRUE</span>)
<span class="kw">table</span>(d$age20)</code></pre>
<pre><code>
[18,20] (20,40] (40,60] (60,80] (80,97] 
     72     660     780     436      52 </code></pre>
<p>On peut également modifier le sens des intervalles avec l’option <code>right=FALSE</code>, et indiquer manuellement les noms des modalités avec <code>labels</code> :</p>
<pre class="sourceCode r"><code class="sourceCode r">d$age20 &lt;-<span class="st"> </span><span class="kw">cut</span>(d$age, <span class="kw">c</span>(<span class="dv">18</span>, <span class="dv">20</span>, <span class="dv">40</span>, <span class="dv">60</span>, <span class="dv">80</span>, <span class="dv">97</span>), <span class="dt">right =</span> <span class="ot">FALSE</span>, 
  <span class="dt">include.lowest =</span> <span class="ot">TRUE</span>)
<span class="kw">table</span>(d$age20)</code></pre>
<pre><code>
[18,20) [20,40) [40,60) [60,80) [80,97] 
     48     643     793     454      62 </code></pre>
<pre class="sourceCode r"><code class="sourceCode r">d$age20 &lt;-<span class="st"> </span><span class="kw">cut</span>(d$age, <span class="kw">c</span>(<span class="dv">18</span>, <span class="dv">20</span>, <span class="dv">40</span>, <span class="dv">60</span>, <span class="dv">80</span>, <span class="dv">97</span>), <span class="dt">include.lowest =</span> <span class="ot">TRUE</span>, 
  <span class="dt">labels =</span> <span class="kw">c</span>(<span class="st">&quot;&lt;20ans&quot;</span>, <span class="st">&quot;21-40 ans&quot;</span>, <span class="st">&quot;41-60ans&quot;</span>, <span class="st">&quot;61-80ans&quot;</span>, 
    <span class="st">&quot;&gt;80ans&quot;</span>))
<span class="kw">table</span>(d$age20)</code></pre>
<pre><code>
   &lt;20ans 21-40 ans  41-60ans  61-80ans    &gt;80ans 
       72       660       780       436        52 </code></pre>
<div class="note">
<p>L’extension <code class="pkg">questionr</code> propose une interface interactive à la fonction <code data-pkg="base">cut</code>, nommée <code data-pkg="questionr">icut</code>. Elle s’utilise de la manière suivante :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">icut</span>(d, age)</code></pre>
<p><strong>RStudio</strong> devrait ouvrir une fenêtre semblable à l’image ci-dessous.</p>
<p><img src="images/capture_icut.png" alt="Capture d’écran d’icut" /></p>
<p>Vous pouvez alors indiquer les limites de vos classes ainsi que quelques options complémentaires. Ces limites sont représentées graphiquement sur l’histogramme de la variable d’origine.</p>
<p>L’onglet <em>Vérification</em> affiche un tri à plat et un graphique en barres de la nouvelle variable. Une fois le résultat satisfaisant, vous pouvez récupérer le code généré pour l’inclure dans votre script.</p>
<p>L’extension <code class="pkg">questionr</code> propose aussi une fonction <code data-pkg="questionr">quant.cut</code> permettant de découper une variable numérique en un nombre de classes donné ayant des efffectifs semblables. Il suffit de lui passer le nombre de classes en argument :</p>
<pre class="sourceCode r"><code class="sourceCode r">d$age6cl &lt;-<span class="st"> </span><span class="kw">quant.cut</span>(d$age, <span class="dv">6</span>)
<span class="kw">table</span>(d$age6cl)</code></pre>
<pre><code>
    [18,30)     [30,39)     [39,48) [48,55.667) 
        302         337         350         344 
[55.667,66)     [66,97] 
        305         362 </code></pre>
<code data-pkg="questionr">quant.cut</code> admet les mêmes autres options que <code data-pkg="base">cut</code> (<code>include.lowest</code>, <code>right</code>, <code>labels</code>… ).
</div>
</div>
<div id="regrouper_modalites" class="section level2">
<h2>Regrouper les modalités d’une variable</h2>
<p>Pour regrouper les modalités d’une variable qualitative (d’un facteur le plus souvent), on peut utiliser directement l’indexation.</p>
<p>Ainsi, si on veut recoder la variable <em>qualif</em> dans une variable <em>qualif.reg</em> plus « compacte », on peut utiliser :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(d$qualif)</code></pre>
<pre><code>
      Ouvrier specialise         Ouvrier qualifie 
                     203                      292 
              Technicien Profession intermediaire 
                      86                      160 
                   Cadre                  Employe 
                     260                      594 
                   Autre 
                      58 </code></pre>
<pre class="sourceCode r"><code class="sourceCode r">d$qualif.reg[d$qualif ==<span class="st"> &quot;Ouvrier specialise&quot;</span>] &lt;-<span class="st"> &quot;Ouvrier&quot;</span>
d$qualif.reg[d$qualif ==<span class="st"> &quot;Ouvrier qualifie&quot;</span>] &lt;-<span class="st"> &quot;Ouvrier&quot;</span>
d$qualif.reg[d$qualif ==<span class="st"> &quot;Employe&quot;</span>] &lt;-<span class="st"> &quot;Employe&quot;</span>
d$qualif.reg[d$qualif ==<span class="st"> &quot;Profession intermediaire&quot;</span>] &lt;-<span class="st"> &quot;Intermediaire&quot;</span>
d$qualif.reg[d$qualif ==<span class="st"> &quot;Technicien&quot;</span>] &lt;-<span class="st"> &quot;Intermediaire&quot;</span>
d$qualif.reg[d$qualif ==<span class="st"> &quot;Cadre&quot;</span>] &lt;-<span class="st"> &quot;Cadre&quot;</span>
d$qualif.reg[d$qualif ==<span class="st"> &quot;Autre&quot;</span>] &lt;-<span class="st"> &quot;Autre&quot;</span>
<span class="kw">table</span>(d$qualif.reg)</code></pre>
<pre><code>
        Autre         Cadre       Employe 
           58           260           594 
Intermediaire       Ouvrier 
          246           495 </code></pre>
<p>On aurait pu représenter ce recodage de manière plus compacte, notamment en commençant par copier le contenu de <em>qualif</em> dans <em>qualif.reg</em>, ce qui permet de ne pas s’occuper de ce qui ne change pas.</p>
<p>Il est cependant nécessaire de ne pas copier <em>qualif</em> sous forme de facteur, sinon on ne pourrait ajouter de nouvelles modalités. On copie donc la version caractères de <em>qualif</em> grâce à la fonction <code data-pkg="base" data-rdoc="character">as.character</code> :</p>
<pre class="sourceCode r"><code class="sourceCode r">d$qualif.reg &lt;-<span class="st"> </span><span class="kw">as.character</span>(d$qualif)
d$qualif.reg[d$qualif ==<span class="st"> &quot;Ouvrier specialise&quot;</span>] &lt;-<span class="st"> &quot;Ouvrier&quot;</span>
d$qualif.reg[d$qualif ==<span class="st"> &quot;Ouvrier qualifie&quot;</span>] &lt;-<span class="st"> &quot;Ouvrier&quot;</span>
d$qualif.reg[d$qualif ==<span class="st"> &quot;Profession intermediaire&quot;</span>] &lt;-<span class="st"> &quot;Intermediaire&quot;</span>
d$qualif.reg[d$qualif ==<span class="st"> &quot;Technicien&quot;</span>] &lt;-<span class="st"> &quot;Intermediaire&quot;</span>
<span class="kw">table</span>(d$qualif.reg)</code></pre>
<pre><code>
        Autre         Cadre       Employe 
           58           260           594 
Intermediaire       Ouvrier 
          246           495 </code></pre>
<p>On peut faire une version encore plus compacte en utilisant l’opérateur logique <em>ou</em> (<code>|</code>) :</p>
<pre class="sourceCode r"><code class="sourceCode r">d$qualif.reg &lt;-<span class="st"> </span><span class="kw">as.character</span>(d$qualif)
d$qualif.reg[d$qualif ==<span class="st"> &quot;Ouvrier specialise&quot;</span> |<span class="st"> </span>d$qualif ==<span class="st"> </span>
<span class="st">  &quot;Ouvrier qualifie&quot;</span>] &lt;-<span class="st"> &quot;Ouvrier&quot;</span>
d$qualif.reg[d$qualif ==<span class="st"> &quot;Profession intermediaire&quot;</span> |<span class="st"> </span>
<span class="st">  </span>d$qualif ==<span class="st"> &quot;Technicien&quot;</span>] &lt;-<span class="st"> &quot;Intermediaire&quot;</span>
<span class="kw">table</span>(d$qualif.reg)</code></pre>
<pre><code>
        Autre         Cadre       Employe 
           58           260           594 
Intermediaire       Ouvrier 
          246           495 </code></pre>
<p>Enfin, pour terminer ce petit tour d’horizon, on peut également remplacer l’opérateur <code>|</code> par <code>%in%</code>, qui peut parfois être plus lisible :</p>
<pre class="sourceCode r"><code class="sourceCode r">d$qualif.reg &lt;-<span class="st"> </span><span class="kw">as.character</span>(d$qualif)
d$qualif.reg[d$qualif %in%<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Ouvrier specialise&quot;</span>, 
  <span class="st">&quot;Ouvrier qualifie&quot;</span>)] &lt;-<span class="st"> &quot;Ouvrier&quot;</span>
d$qualif.reg[d$qualif %in%<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Profession intermediaire&quot;</span>, 
  <span class="st">&quot;Technicien&quot;</span>)] &lt;-<span class="st"> &quot;Intermediaire&quot;</span>
<span class="kw">table</span>(d$qualif.reg)</code></pre>
<pre><code>
        Autre         Cadre       Employe 
           58           260           594 
Intermediaire       Ouvrier 
          246           495 </code></pre>
<p>Dans tous les cas le résultat obtenu est une variable de type caractère. On pourra la convertir en facteur par un simple :</p>
<pre class="sourceCode r"><code class="sourceCode r">d$qualif.reg &lt;-<span class="st"> </span><span class="kw">factor</span>(d$qualif.reg)</code></pre>
<p>Si on souhaite recoder les valeurs manquantes, il suffit de faire appel à la fonction <code data-pkg="base" data-rdoc="NA">is.na</code> :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(d$trav.satisf)</code></pre>
<pre><code>
  Satisfaction Insatisfaction      Equilibre 
           480            117            451 </code></pre>
<pre class="sourceCode r"><code class="sourceCode r">d$trav.satisf.reg &lt;-<span class="st"> </span><span class="kw">as.character</span>(d$trav.satisf)
d$trav.satisf.reg[<span class="kw">is.na</span>(d$trav.satisf)] &lt;-<span class="st"> &quot;Manquant&quot;</span>
<span class="kw">table</span>(d$trav.satisf.reg)</code></pre>
<pre><code>
     Equilibre Insatisfaction       Manquant 
           451            117            952 
  Satisfaction 
           480 </code></pre>
<div class="note">
<p><code class="pkg">questionr</code> propose une interface interactive pour le recodage d’une variable qualitative (renommage et regroupement de modalités). Cette fonction, nommée <code data-pkg="questionr">irec</code>, s’utilise de la manière suivante :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">irec</span>(d, qualif)</code></pre>
<p><strong>RStudio</strong> va alors ouvrir une fenêtre semblable à l’image ci-dessous :</p>
<p><img src="images/capture_irec.png" alt="Capture de irec" /></p>
<p>Vous pouvez alors sélectionner différentes options, et pour chaque ancienne modalité, indiquer la nouvelle valeur correspondante. Pour regrouper des modalités, il suffit de leur assigner des nouvelles valeurs identiques. Dans tous les cas n’hésitez pas à expérimenter, l’interface se contente de générer du code <strong>R</strong> à copier/coller dans votre script mais ne l’exécute pas, et ne modifie donc jamais vos données !</p>
L’onglet <em>Vérification</em> affiche un tri croisé de l’ancienne et de la nouvelle variable pour vérifier que le recodage est correct. Une fois le résultat satisfaisant, vous pouvez récupérer le code généré dans l’onglet <em>Code</em> pour l’inclure dans votre script.
</div>
</div>
<div id="variables-calculees" class="section level2">
<h2>Variables calculées</h2>
<p>La création d’une variable numérique à partir de calculs sur une ou plusieurs autres variables numériques se fait très simplement.</p>
<p>Supposons que l’on souhaite calculer une variable indiquant l’écart entre le nombre d’heures passées à regarder la télévision et la moyenne globale de cette variable. On pourrait alors faire :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">range</span>(d$heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre>
<pre><code>[1]  0 12</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(d$heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre>
<pre><code>[1] 2.246566</code></pre>
<pre class="sourceCode r"><code class="sourceCode r">d$ecart.heures.tv &lt;-<span class="st"> </span>d$heures.tv -<span class="st"> </span><span class="kw">mean</span>(d$heures.tv, 
  <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)
<span class="kw">range</span>(d$ecart.heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre>
<pre><code>[1] -2.246566  9.753434</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(d$ecart.heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre>
<pre><code>[1] 4.714578e-17</code></pre>
<p>Autre exemple tiré du jeu de données <code>rp99</code> : si on souhaite calculer le pourcentage d’actifs dans chaque commune, on peut diviser la population active <em>pop.act</em> par la population totale <em>pop.tot</em>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(<span class="st">&quot;rp99&quot;</span>)
rp99$part.actifs &lt;-<span class="st"> </span>rp99$pop.act/rp99$pop.tot *<span class="st"> </span><span class="dv">100</span></code></pre>
</div>
<div id="combiner-plusieurs-variables" class="section level2">
<h2>Combiner plusieurs variables</h2>
<p>La combinaison de plusieurs variables se fait à l’aide des techniques d’indexation déjà décrites précédemment. Le plus compliqué est d’arriver à formuler des conditions parfois complexes de manière rigoureuse.</p>
<p>On peut ainsi vouloir combiner plusieurs variables qualitatives en une seule :</p>
<pre class="sourceCode r"><code class="sourceCode r">d$act.manuelles &lt;-<span class="st"> </span><span class="ot">NA</span>
d$act.manuelles[d$cuisine ==<span class="st"> &quot;Oui&quot;</span> &amp;<span class="st"> </span>d$bricol ==<span class="st"> &quot;Oui&quot;</span>] &lt;-<span class="st"> &quot;Cuisine et Bricolage&quot;</span>
d$act.manuelles[d$cuisine ==<span class="st"> &quot;Oui&quot;</span> &amp;<span class="st"> </span>d$bricol ==<span class="st"> &quot;Non&quot;</span>] &lt;-<span class="st"> &quot;Cuisine seulement&quot;</span>
d$act.manuelles[d$cuisine ==<span class="st"> &quot;Non&quot;</span> &amp;<span class="st"> </span>d$bricol ==<span class="st"> &quot;Oui&quot;</span>] &lt;-<span class="st"> &quot;Bricolage seulement&quot;</span>
d$act.manuelles[d$cuisine ==<span class="st"> &quot;Non&quot;</span> &amp;<span class="st"> </span>d$bricol ==<span class="st"> &quot;Non&quot;</span>] &lt;-<span class="st"> &quot;Ni cuisine ni bricolage&quot;</span>
<span class="kw">table</span>(d$act.manuelles)</code></pre>
<pre><code>
    Bricolage seulement    Cuisine et Bricolage 
                    437                     416 
      Cuisine seulement Ni cuisine ni bricolage 
                    465                     682 </code></pre>
<p>On peut également combiner variables qualitatives et variables quantitatives :</p>
<pre class="sourceCode r"><code class="sourceCode r">d$age.sexe &lt;-<span class="st"> </span><span class="ot">NA</span>
d$age.sexe[d$sexe ==<span class="st"> &quot;Homme&quot;</span> &amp;<span class="st"> </span>d$age &lt;<span class="st"> </span><span class="dv">40</span>] &lt;-<span class="st"> &quot;Homme moins de 40 ans&quot;</span>
d$age.sexe[d$sexe ==<span class="st"> &quot;Homme&quot;</span> &amp;<span class="st"> </span>d$age &gt;=<span class="st"> </span><span class="dv">40</span>] &lt;-<span class="st"> &quot;Homme plus de 40 ans&quot;</span>
d$age.sexe[d$sexe ==<span class="st"> &quot;Femme&quot;</span> &amp;<span class="st"> </span>d$age &lt;<span class="st"> </span><span class="dv">40</span>] &lt;-<span class="st"> &quot;Femme moins de 40 ans&quot;</span>
d$age.sexe[d$sexe ==<span class="st"> &quot;Femme&quot;</span> &amp;<span class="st"> </span>d$age &gt;=<span class="st"> </span><span class="dv">40</span>] &lt;-<span class="st"> &quot;Femme plus de 40 ans&quot;</span>
<span class="kw">table</span>(d$age.sexe)</code></pre>
<pre><code>
Femme moins de 40 ans  Femme plus de 40 ans 
                  376                   725 
Homme moins de 40 ans  Homme plus de 40 ans 
                  315                   584 </code></pre>
<p>Les combinaisons de variables un peu complexes nécessitent parfois un petit travail de réflexion. En particulier, l’ordre des commandes de recodage a parfois une influence dans le résultat final.</p>
</div>
<div id="variables-scores" class="section level2">
<h2>Variables scores</h2>
<p>Une variable score est une variable calculée en additionnant des poids accordés aux modalités d’une série de variables qualitatives.</p>
<p>Pour prendre un exemple tout à fait arbitraire, imaginons que nous souhaitons calculer un score d’activités extérieures. Dans ce score on considère que le fait d’aller au cinéma « pèse » 10, celui de pêcher ou chasser vaut 30 et celui de faire du sport vaut 20. On pourrait alors calculer notre score de la manière suivante :</p>
<pre class="sourceCode r"><code class="sourceCode r">d$score.ext &lt;-<span class="st"> </span><span class="dv">0</span>
d$score.ext[d$cinema ==<span class="st"> &quot;Oui&quot;</span>] &lt;-<span class="st"> </span>d$score.ext[d$cinema ==<span class="st"> </span>
<span class="st">  &quot;Oui&quot;</span>] +<span class="st"> </span><span class="dv">10</span>
d$score.ext[d$peche.chasse ==<span class="st"> &quot;Oui&quot;</span>] &lt;-<span class="st"> </span>d$score.ext[d$peche.chasse ==<span class="st"> </span>
<span class="st">  &quot;Oui&quot;</span>] +<span class="st"> </span><span class="dv">30</span>
d$score.ext[d$sport ==<span class="st"> &quot;Oui&quot;</span>] &lt;-<span class="st"> </span>d$score.ext[d$sport ==<span class="st"> </span>
<span class="st">  &quot;Oui&quot;</span>] +<span class="st"> </span><span class="dv">20</span>
<span class="kw">table</span>(d$score.ext)</code></pre>
<pre><code>
  0  10  20  30  40  50  60 
800 342 229 509  31  41  48 </code></pre>
<p>Cette notation étant un peu lourde, on peut l’alléger un peu en utilisant la fonction <code data-pkg="base">ifelse</code>. Celle-ci prend en argument une condition et deux valeurs. Si la condition est vraie elle retourne la première valeur, sinon elle retourne la seconde.</p>
<pre class="sourceCode r"><code class="sourceCode r">d$score.ext &lt;-<span class="st"> </span><span class="dv">0</span>
d$score.ext &lt;-<span class="st"> </span><span class="kw">ifelse</span>(d$cinema ==<span class="st"> &quot;Oui&quot;</span>, <span class="dv">10</span>, <span class="dv">0</span>) +<span class="st"> </span><span class="kw">ifelse</span>(d$peche.chasse ==<span class="st"> </span>
<span class="st">  &quot;Oui&quot;</span>, <span class="dv">30</span>, <span class="dv">0</span>) +<span class="st"> </span><span class="kw">ifelse</span>(d$sport ==<span class="st"> &quot;Oui&quot;</span>, <span class="dv">20</span>, <span class="dv">0</span>)
<span class="kw">table</span>(d$score.ext)</code></pre>
<pre><code>
  0  10  20  30  40  50  60 
800 342 229 509  31  41  48 </code></pre>
</div>
<div id="verification-des-recodages" class="section level2">
<h2>Vérification des recodages</h2>
<p>Il est très important de vérifier, notamment après les recodages les plus complexes, qu’on a bien obtenu le résultat escompté. Les deux points les plus sensibles étant les valeurs manquantes et les erreurs dans les conditions.</p>
<p>Pour vérifier tout cela, le plus simple est sans doute de faire des tableaux croisés entre la variable recodée et celles ayant servi au recodage, à l’aide des fonctions <code data-pkg="base">table</code> ou <code data-pkg="stats">xtabs</code>, et de vérifier le nombre de valeurs manquantes dans la variable recodée avec <code data-pkg="base">summary</code>, <code data-pkg="questionr">freq</code> ou <code data-pkg="base">table</code>.</p>
<p>Par exemple :</p>
<pre class="sourceCode r"><code class="sourceCode r">d$act.manuelles &lt;-<span class="st"> </span><span class="ot">NA</span>
d$act.manuelles[d$cuisine ==<span class="st"> &quot;Oui&quot;</span> &amp;<span class="st"> </span>d$bricol ==<span class="st"> &quot;Oui&quot;</span>] &lt;-<span class="st"> &quot;Cuisine et Bricolage&quot;</span>
d$act.manuelles[d$cuisine ==<span class="st"> &quot;Oui&quot;</span> &amp;<span class="st"> </span>d$bricol ==<span class="st"> &quot;Non&quot;</span>] &lt;-<span class="st"> &quot;Cuisine seulement&quot;</span>
d$act.manuelles[d$cuisine ==<span class="st"> &quot;Non&quot;</span> &amp;<span class="st"> </span>d$bricol ==<span class="st"> &quot;Oui&quot;</span>] &lt;-<span class="st"> &quot;Bricolage seulement&quot;</span>
d$act.manuelles[d$cuisine ==<span class="st"> &quot;Non&quot;</span> &amp;<span class="st"> </span>d$bricol ==<span class="st"> &quot;Non&quot;</span>] &lt;-<span class="st"> &quot;Ni cuisine ni bricolage&quot;</span>
<span class="kw">table</span>(d$act.manuelles, d$cuisine)</code></pre>
<pre><code>                         
                          Non Oui
  Bricolage seulement     437   0
  Cuisine et Bricolage      0 416
  Cuisine seulement         0 465
  Ni cuisine ni bricolage 682   0</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(d$act.manuelles, d$bricol)</code></pre>
<pre><code>                         
                          Non Oui
  Bricolage seulement       0 437
  Cuisine et Bricolage      0 416
  Cuisine seulement       465   0
  Ni cuisine ni bricolage 682   0</code></pre>
</div>

</article>
</div>

<div class="col-sm-3" role="complementary">
<nav class="hidden-print hidden-xs" id="nav_sidebar">
</nav>
</div>

</div>

<script>
// manage active state of menu based on current page
$(document).ready(function () {

    // active menu
    href = window.location.pathname;
    href = href.substr(href.lastIndexOf('/') + 1);
    if (href=='') href = 'index.html';
    $('a[href="' + href + '"]').parent().addClass('active');

    // manage active menu header
    if (href.startsWith('manipuler_'))
      $('a[href="' + 'manipuler' + '"]').parent().addClass('active');
    else if (href.startsWith('analyser_'))
      $('a[href="' + 'analyser' + '"]').parent().addClass('active');
    else if (href.startsWith('approfondir_'))
      $('a[href="' + 'approfondir' + '"]').parent().addClass('active');
    else if (href.startsWith('index_'))
      $('a[href="' + 'index' + '"]').parent().addClass('active');

    // élargir la page d'accueil
    if (href=='index.html') $('.col-sm-9').attr('class','col-sm-12');

    // rechercher
    $("#rechercher").submit(function(event) {
      $('input[name="q"]').val($('input[name="q"]').val() + ' site:larmarange.github.io/analyse-R');
    });

    // sidebar
    $("#nav_sidebar").append($("#TOC").html());
    $("#nav_sidebar ul").addClass("nav nav-stacked");
    $("#TOC").addClass("visible-xs-block");
    $('body').scrollspy({
      target: '#nav_sidebar',
      offset: 40
    });

    // Identifier les <pre> fermant
    $('pre').next("*:not(pre)").prev().addClass('last'); // Dernier <pre> de chaque groupe contigu de <pre>
    $('pre').parent().each(function (){
      $(this).children('pre').last().addClass('last');
    }); // Si <pre> est le dernier enfant de son parent

    // Ajout liens rdocumentation et tooltip
    $("code[data-pkg]").each(function( index ) {
      pkg = $(this).attr('data-pkg');
      if ($(this).attr('data-rdoc') !== undefined) {
        rdocumentation = $(this).attr('data-rdoc');
      } else {
        rdocumentation = $(this).text();
      }
      fonction = $(this).text();
      $(this).wrap('<a href="http://www.rdocumentation.org/packages/'+pkg+'/functions/'+rdocumentation+'">');
      $(this).attr('data-toggle','tooltip');
      $(this).attr('data-placement','top');
      $(this).attr('title','package : ' + pkg);
      $('[data-toggle="tooltip"]').tooltip();
    });

    $("code.pkg").each(function( index ) {
      $(this).wrap('<a href="http://www.rdocumentation.org/packages/'+$(this).text()+'">');
    });

    // Figures
    $("figure").each(function( index ) {
      if ($(this).children("figcaption").length > 0)
        $(this).children("figcaption:first").prepend('<span class="figure-number">Figure '+(index+1)+'.</span> ');
      else
        $(this).append($("<figcaption>").append('<span class="figure-number">Figure '+(index+1)+'</span>'));
    });

    // Colorbox
    jQuery('article div img').colorbox({
      maxWidth: '90%',
      maxHeight: '90%',
      rel: 'figures',
      current: "",
      href: function(){
        return $(this).attr('src');
      },
      title: function(){
        return $(this).attr('alt');
      }
    });
    jQuery('article div img').css('cursor', 'pointer');
    jQuery('figure img').colorbox({
      maxWidth: '90%',
      maxHeight: '90%',
      rel: 'figures',
      current: "",
      href: function(){
        return $(this).attr('src');
      },
      title: function(){
        return $(this).parent().children("figcaption").text();
      }
    });
    jQuery('figure img').css('cursor', 'pointer');

    // ZeroClipboard
    $('pre.r').parent().each(function(){
      $(this).children('pre.r').first().before('<div class="zero-clipboard hidden-print hidden-xs"><button class="btn-clipboard">Copier</button></div>');
    }); // Il peut arriver que le pre ne soit pas précédé (cf. figures)
    $('*:not(pre):not(.zero-clipboard) + pre.r').before('<div class="zero-clipboard hidden-print hidden-xs"><button class="btn-clipboard">Copier</button></div>');
    $('pre.last').after(function() {
      if ($(this).hasClass("r")) res = $(this).text(); else res = "";
      $(this).prevUntil('*:not(pre)','pre.r').each(function() {
        res = $(this).text() + '\n' + res;
      });
      return '<div class="clipboard">' + res + '</div>';
    });
    $('.zero-clipboard').each(function(index){
      $(this).children('.btn-clipboard').attr('data-clipboard-target','clipboard_'+index);
      $(this).nextAll("div.clipboard").first().attr('id','clipboard_'+index);
    });
    var client = new ZeroClipboard( $(".btn-clipboard") );
    client.on( "ready", function( readyEvent ) {
      // alert( "ZeroClipboard SWF is ready!" );
      client.on( "aftercopy", function( event ) {
        // `this` === `client`
        // `event.target` === the element that was clicked
        //event.target.style.display = "none";
        $(event.target).parent().before('<div class="alert alert-success"><a href="#" class="close" data-dismiss="alert">&times;</a>Le code <strong>R</strong> de l’exemple a été copié dans le presse-papier.</div>');
      } );
    } );

});
</script>

<!-- disqus -->
<div class="row">
  <div id="disqus_thread" class="col-sm-9" role="complementary"></div>
</div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'analyse-r'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Veuillez activer JavaScript pour voir les <a href="http://disqus.com/?ref_noscript">les commentaires gérés avec Disqus.</a></noscript>
    <!--<a href="http://disqus.com" class="dsq-brlink">Les commentaires sont hébergés par <span class="logo-disqus">Disqus</span>.</a>-->

<footer>
  <div class="row">
    <div class="col-lg-12">
      <p>Contenus sous licence <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/fr/" rel="nofollow">Creative Commons Attribution - Pas d’utilisation commerciale - Partage dans les mêmes conditions</a>.<br />
      Propulsé par <a href="http://www.r-project.org/" rel="nofollow">R</a>, </a><a href="http://www.rstudio.com/" rel="nofollow">RStudio</a>, <a href="http://rmarkdown.rstudio.com/" rel="nofollow">R Markdown</a>, <a href="http://yihui.name/knitr/" rel="nofollow">knitr</a>, <a href="http://pandoc.org/" rel="nofollow">pandoc</a> et <a href="http://www.princexml.com/" rel="nofollow">Prince XML</a>. Hébergé par <a href="https://github.com/" rel="nofollow">GitHub</a>.</p>
    </div>
  </div>
</footer>

</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>


</body>
</html>
