<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />



<title>Premier travail avec des données et statistique univariée</title>

<script src="libs/jquery-1.11.0/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.1/css/flatly.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.1/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.1/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.1/shim/respond.min.js"></script>
<link rel="stylesheet" href="./include/analyse-R.css" />
<script type="text/javascript" src="./libs/zeroclipboard-2.2.0/ZeroClipboard.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>



</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img { 
  max-width:100%; 
  height: auto; 
}
</style>
<div class="container-fluid main-container">

<nav>
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href=".">analyse-R</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li><a href="index.html">Accueil</a></li>
        <li class="dropdown">
          <a href="pem" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Prise en main <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="pem_presentation_installation.html">Présentation et Installation</a></li>
            <li><a href="pem_premier_contact.html">Premier contact</a></li>
            <li><a href="pem_premier_travail.html">Premier travail avec des données et statistique univariée</a></li>
            <li><a href="pem_import_export.html">Import / Export de données</a></li>
            <li><a href="pem_manipulation.html">Manipulation de données</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a href="analyses" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Analyses <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="analyses_stat_biv.html">Statistique bivariée</a></li>
            <li><a href="analyses_reglog.html">Régression logistique</a></li>
            <li><a href="analyses_donnees_pond.html">Données pondérées</a></li>
            <li><a href="analyses_acm.html">Analyse des correspondances multiples (ACM)</a></li>
            <li><a href="analyses_cah.html">Classification ascendante hiérarchique (CAH)</a></li>
            <li><a href="analyses_seq.html">Analyse de séquences</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a href="avance" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Avancé <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li class="dropdown-header">Astuces</li>
            <li><a href="avance_age.html">Calculer un âge</a></li>
          </ul>
        </li>
        <li><a href="index_fonctions.html">Index des fonctions</a></li>
        <li><a href="analyse-R.pdf">PDF</a></li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
          <a href="participer" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Participer <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
              <li><a href="https://github.com/larmarange/analyse-R">analyse-R sur GitHub</a></li>
          </ul>
        </li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->
</nav>

<div class="row">

<div class="col-sm-9" role="main">
<article>

<div id="header">
<h1 class="title">Premier travail avec des données et statistique univariée</h1>
</div>

<div id="TOC">
<ul>
<li><a href="#regrouper-les-commandes-dans-des-scripts">Regrouper les commandes dans des scripts</a></li>
<li><a href="#ajouter-des-commentaires">Ajouter des commentaires</a></li>
<li><a href="#tableaux-de-donnees">Tableaux de données</a></li>
<li><a href="#inspecter-les-donnees">Inspecter les données</a><ul>
<li><a href="#structure-du-tableau">Structure du tableau</a></li>
<li><a href="#inspection-visuelle">Inspection visuelle</a></li>
<li><a href="#acceder-aux-variables">Accéder aux variables</a></li>
</ul></li>
<li><a href="#stat_univ">Analyser une variable (statistique univariée)</a><ul>
<li><a href="#variable-quantitative">Variable quantitative</a></li>
<li><a href="#variable-qualitative">Variable qualitative</a></li>
</ul></li>
</ul>
</div>

<div class="note">
Ce chapitre est inspiré de la section <em>Premier travail avec les données</em> du support de cours <a href="https://github.com/juba/intro-r">Introduction à R</a> réalisé par Julien Barnier.
</div>
<div id="regrouper-les-commandes-dans-des-scripts" class="section level2">
<h2>Regrouper les commandes dans des scripts</h2>
<p>Jusqu’à maintenant nous avons utilisé uniquement la console pour communiquer avec <strong>R</strong> via l’invite de commandes. Le principal problème de ce mode d’interaction est qu’une fois qu’une commande est tapée, elle est pour ainsi dire « perdue », c’est-à-dire qu’on doit la saisir à nouveau si on veut l’exécuter une seconde fois. L’utilisation de la console est donc restreinte aux petites commandes « jetables », le plus souvent utilisées comme test.</p>
<p>La plupart du temps, les commandes seront stockées dans un fichier à part, que l’on pourra facilement ouvrir, éditer et exécuter en tout ou partie si besoin. On appelle en général ce type de fichier un <em>script</em>.</p>
<p>Pour comprendre comment cela fonctionne, dans <strong>RStudio</strong> cliquez sur l’icône en haut à gauche représentant un fichier avec un signe + vert, puis choisissez <em>R script</em>.</p>
<figure>
<img src="images/capture_RStudio_new_R_script.png" alt="Créer un nouveau script R dans RStudio" />
<figcaption>
Créer un nouveau script R dans RStudio
</figcaption>
</figure>
<p>Un nouvel onglet apparaît dans le quadrant supérieur gauche.</p>
<figure>
<img src="images/capture_RStudio_onglet_R_script.png" alt="Onglet d’un script R dans RStudio" />
<figcaption>
Onglet d’un script R dans RStudio
</figcaption>
</figure>
<p>Nous pouvons désormais y saisir des commandes. Par exemple, tapez sur la première ligne la commande suivante : <code>2 + 2</code>. Ensuite, cliquez sur l’icône <em>Run</em> (en haut à droite de l’onglet du script) ou bien pressez simulatément les touches <kbd>CTRL</kbd> et <kbd>Entrée</kbd><a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a>.</p>
<p>Les lignes suivantes ont dû faire leur apparition dans la console :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="dv">2</span> +<span class="st"> </span><span class="dv">2</span></code></pre>
<pre><code>[1] 4</code></pre>
<p>Voici donc comment soumettre rapidement à <strong>R</strong> les commandes saisies dans votre fichier. Vous pouvez désormais l’enregistrer, l’ouvrir plus tard, et en exécuter tout ou partie. À noter que vous avez plusieurs possibilités pour soumettre des commandes à <strong>R</strong> :</p>
<ul>
<li>vous pouvez exécuter la ligne sur laquelle se trouve votre curseur en cliquant sur <em>Run</em> ou en pressant simulatément les touches <kbd>CTRL</kbd> et <kbd>Entrée</kbd> ;</li>
<li>vous pouvez sélectionner plusieurs lignes contenant des commandes et les exécuter toutes en une seule fois exactement de la même manière ;</li>
<li>vous pouvez exécuter d’un coup l’intégralité de votre fichier en cliquant sur l’icône <em>Source</em>.</li>
</ul>
<p>La plupart du travail sous <strong>R</strong> consistera donc à éditer un ou plusieurs fichiers de commandes et à envoyer régulièrement les commandes saisies à <strong>R</strong> en utilisant les raccourcis clavier <em>ad hoc</em>.</p>
<p>Pour plus d’information sur l’utilisation des scripts <strong>R</strong> dans <strong>RStudio</strong>, voir (en anglais) : <a href="http://www.rstudio.com/ide/docs/using/source" class="uri">http://www.rstudio.com/ide/docs/using/source</a>.</p>
<div class="note">
Quand vous enregistrez un script sous <strong>RStudio</strong>, il est possible qu’il vous demande de choisir un type d’encodage des caractères (<em>Choose Encoding</em>). Si tel est le cas, utilisez de préférence <strong>UTF-8</strong>.
</div>
</div>
<div id="ajouter-des-commentaires" class="section level2">
<h2>Ajouter des commentaires</h2>
<p>Un commentaire est une ligne ou une portion de ligne qui sera ignorée par <strong>R</strong>. Ceci signifie qu’on peut y écrire ce qu’on veut et qu’on va les utiliser pour ajouter tout un tas de commentaires à notre code permettant de décrire les différentes étapes du travail, les choses à se rappeler, les questions en suspens, etc.</p>
<p>Un commentaire sous <strong>R</strong> commence par un ou plusieurs symboles <code>#</code> (qui s’obtient avec les touches <kbd>Alt Gr</kbd> et <kbd>3</kbd> sur les claviers de type PC). Tout ce qui suit ce symbole jusqu’à la fin de la ligne est considéré comme un commentaire. On peut créer une ligne entière de commentaire en la faisant débuter par <code>##</code>. Par exemple :</p>
<pre class="sourceCode r"><code class="sourceCode r">## Tableau croisé de la CSP par le nombre de livres
## lus Attention au nombre de non réponses !</code></pre>
<p>On peut aussi créer des commentaires pour une ligne en cours :</p>
<pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="dv">2</span>  <span class="co"># On met 2 dans x, parce qu&#39;il le vaut bien</span></code></pre>
<div class="important">
Dans tous les cas, il est très important de documenter ses fichiers <strong>R</strong> au fur et à mesure, faute de quoi on risque de ne plus y comprendre grand chose si on les reprend ne serait-ce que quelques semaines plus tard.
</div>
<p>Avec <strong>RStudio</strong>, vous pouvez également utiliser les commentaires pour créer des sections au sein de votre script et naviguer plus rapidement. Il suffit de faire suivre une ligne de commentaires d’au moins 4 signes moins (<code>----</code>). Par exemple, si vous saisissez ceci dans votre script :</p>
<pre class="sourceCode r"><code class="sourceCode r">## Créer les objets ----

x &lt;-<span class="st"> </span><span class="dv">2</span>
y &lt;-<span class="st"> </span><span class="dv">5</span>

## Calculs ----

x +<span class="st"> </span>y</code></pre>
<p>Vous verrez apparaître en bas à gauche de la fenêtre du script un symbole dièse orange. Si vous cliquez dessus, un menu de navigation s’affichera vous permettant de vous déplacez rapidement au sein de votre script. Pour plus d’information, voir la documentation de <strong>RStudio</strong> (en anglais) : <a href="http://www.rstudio.com/ide/docs/using/code_folding" class="uri">http://www.rstudio.com/ide/docs/using/code_folding</a>.</p>
<figure>
<img src="images/capture_RStudio_navigation_script.png" alt="Navigation rapide dans les scripts sous RStudio" />
<figcaption>
Navigation rapide dans les scripts sous RStudio
</figcaption>
</figure>
<p>Note : on remarquera au passage que le titre de l’onglet est affiché en rouge et suivi d’une astérisque (<code>*</code>), nous indiquant ainsi qu’il y a des modifications non enregistrées dans notre fichier.</p>
</div>
<div id="tableaux-de-donnees" class="section level2">
<h2>Tableaux de données</h2>
<p>Dans cette partie nous allons utiliser un jeu de données inclus dans l’extension <strong class="package">questionr</strong>. L’installation d’extension est décrite dans le chapitre <a href="pem_presentation_installation.html#installer_extensions">Présentation et Installation</a>.</p>
<p>Le jeu de données en question est un extrait de l’enquête <em>Histoire de vie</em> réalisée par l’INSEE en 2003. Il contient 2000 individus et 20 variables. Pour pouvoir utiliser ces données, il faut d’abord charger l’extension <strong class="package">questionr</strong> (après l’avoir installée, bien entendu). Le chargement d’une extension en mémoire se fait à l’aide de la fonction <code data-package="base">library</code>. Sous <strong>RStudio</strong>, vous pouvez également charger une extension en allant dans l’onglet <em>Packages</em> du quadrant inférieur droit qui liste l’ensemble des packages disponibles et en cliquant la case à cocher située à gauche du nom du package désiré.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)</code></pre>
<p>Puis nous allons indiquer à <strong>R</strong> que nous souhaitons accéder au jeu de données <code data-package="questionr">hdv2003</code> à l’aide de la fonction <code data-package="utils">data</code> :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(hdv2003)</code></pre>
<p>Bien. Et maintenant, elles sont où mes données ? Et bien elles se trouvent dans un objet nommé <code>hdv2003</code> désormais chargé en mémoire et accessible directement. D’ailleurs, cet objet est maintenant visible dans l’onglet <em>Environment</em> du quadrant supérieur droit.</p>
<p>Essayons de taper son nom à l’invite de commande :</p>
<pre class="sourceCode r"><code class="sourceCode r">hdv2003</code></pre>
<p>Le résultat (non reproduit ici) ne ressemble pas forcément à grand-chose… Il faut se rappeler que par défaut, lorsqu’on lui fournit seulement un nom d’objet, <strong>R</strong> essaye de l’afficher de la manière la meilleure (ou la moins pire) possible. La réponse à la commande <code>hdv2003</code> n’est donc rien moins que l’affichage des données brutes contenues dans cet objet.</p>
<p>Ce qui signifie donc que l’intégralité de notre jeu de données est inclus dans l’objet nommé <code>hdv2003</code> ! En effet, dans <strong>R</strong>, un objet peut très bien contenir un simple nombre, un vecteur ou bien le résultat d’une enquête tout entier. Dans ce cas, les objets sont appelés des <em>data frames</em>, ou tableaux de données. Ils peuvent être manipulés comme tout autre objet. Par exemple :</p>
<pre class="sourceCode r"><code class="sourceCode r">d &lt;-<span class="st"> </span>hdv2003</code></pre>
<p>va entraîner la copie de l’ensemble de nos données dans un nouvel objet nommé <code>d</code>, ce qui peut paraître parfaitement inutile mais a en fait l’avantage de fournir un objet avec un nom beaucoup plus court, ce qui diminuera la quantité de texte à saisir par la suite.</p>
<p><strong>Résumons</strong></p>
<p>Comme nous avons désormais décidé de saisir nos commandes dans un script et non plus directement dans la console, les premières lignes de notre fichier de travail sur les données de l’enquête <em>Histoire de vie</em> pourraient donc ressembler à ceci :</p>
<pre class="sourceCode r"><code class="sourceCode r">## Chargement des extensions nécessaires ----
<span class="kw">library</span>(questionr)
## Jeu de données hdv2003 ----
<span class="kw">data</span>(hdv2003)
d &lt;-<span class="st"> </span>hdv2003</code></pre>
</div>
<div id="inspecter-les-donnees" class="section level2">
<h2>Inspecter les données</h2>
<div id="structure-du-tableau" class="section level3">
<h3>Structure du tableau</h3>
<p>Avant de travailler sur les données, nous allons essayer de voir à quoi elles ressemblent. Dans notre cas il s’agit de se familiariser avec la stucture du fichier. Lors de l’import de données depuis un autre logiciel, il s’agira souvent de vérifier que l’importation s’est bien déroulée.</p>
<p>Un tableau de données est organisé en lignes et en colonnes, les lignes correspondant aux observations et les colonnes aux variables. Les fonctions <code data-package="base">nrow</code>, <code data-package="base" data-rdocumentation="nrow">ncol</code> et <code data-package="base">dim</code> donnent respectivement le nombre de lignes, le nombre de colonnes et les dimensions de notre tableau. Nous pouvons donc d’ores et déjà vérifier que nous avons bien 2000 lignes et 20 colonnes :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">nrow</span>(d)</code></pre>
<pre><code>[1] 2000</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ncol</span>(d)</code></pre>
<pre><code>[1] 20</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(d)</code></pre>
<pre><code>[1] 2000   20</code></pre>
<p>La fonction <code data-package="base">names</code> donne les noms des colonnes de notre tableau, c’est-à-dire les noms des variables :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(d)</code></pre>
<pre><code> [1] &quot;id&quot;            &quot;age&quot;          
 [3] &quot;sexe&quot;          &quot;nivetud&quot;      
 [5] &quot;poids&quot;         &quot;occup&quot;        
 [7] &quot;qualif&quot;        &quot;freres.soeurs&quot;
 [9] &quot;clso&quot;          &quot;relig&quot;        
[11] &quot;trav.imp&quot;      &quot;trav.satisf&quot;  
[13] &quot;hard.rock&quot;     &quot;lecture.bd&quot;   
[15] &quot;peche.chasse&quot;  &quot;cuisine&quot;      
[17] &quot;bricol&quot;        &quot;cinema&quot;       
[19] &quot;sport&quot;         &quot;heures.tv&quot;    </code></pre>
<p>La fonction <code data-package="utils">str</code> est plus complète. Elle liste les différentes variables, indique leur type et donne le cas échéant des informations supplémentaires ainsi qu’un échantillon des premières valeurs prises par cette variable :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(d)</code></pre>
<pre><code>&#39;data.frame&#39;:   2000 obs. of  20 variables:
 $ id           : int  1 2 3 4 5 6 7 8 9 10 ...
 $ age          : int  28 23 59 34 71 35 60 47 20 28 ...
 $ sexe         : Factor w/ 2 levels &quot;Homme&quot;,&quot;Femme&quot;: 2 2 1 1 2 2 2 1 2 1 ...
 $ nivetud      : Factor w/ 8 levels &quot;N&#39;a jamais fait d&#39;etudes&quot;,..: 8 NA 3 8 3 6 3 6 NA 7 ...
 $ poids        : num  2634 9738 3994 5732 4329 ...
 $ occup        : Factor w/ 7 levels &quot;Exerce une profession&quot;,..: 1 3 1 1 4 1 6 1 3 1 ...
 $ qualif       : Factor w/ 7 levels &quot;Ouvrier specialise&quot;,..: 6 NA 3 3 6 6 2 2 NA 7 ...
 $ freres.soeurs: int  8 2 2 1 0 5 1 5 4 2 ...
 $ clso         : Factor w/ 3 levels &quot;Oui&quot;,&quot;Non&quot;,&quot;Ne sait pas&quot;: 1 1 2 2 1 2 1 2 1 2 ...
 $ relig        : Factor w/ 6 levels &quot;Pratiquant regulier&quot;,..: 4 4 4 3 1 4 3 4 3 2 ...
 $ trav.imp     : Factor w/ 4 levels &quot;Le plus important&quot;,..: 4 NA 2 3 NA 1 NA 4 NA 3 ...
 $ trav.satisf  : Factor w/ 3 levels &quot;Satisfaction&quot;,..: 2 NA 3 1 NA 3 NA 2 NA 1 ...
 $ hard.rock    : Factor w/ 2 levels &quot;Non&quot;,&quot;Oui&quot;: 1 1 1 1 1 1 1 1 1 1 ...
 $ lecture.bd   : Factor w/ 2 levels &quot;Non&quot;,&quot;Oui&quot;: 1 1 1 1 1 1 1 1 1 1 ...
 $ peche.chasse : Factor w/ 2 levels &quot;Non&quot;,&quot;Oui&quot;: 1 1 1 1 1 1 2 2 1 1 ...
 $ cuisine      : Factor w/ 2 levels &quot;Non&quot;,&quot;Oui&quot;: 2 1 1 2 1 1 2 2 1 1 ...
 $ bricol       : Factor w/ 2 levels &quot;Non&quot;,&quot;Oui&quot;: 1 1 1 2 1 1 1 2 1 1 ...
 $ cinema       : Factor w/ 2 levels &quot;Non&quot;,&quot;Oui&quot;: 1 2 1 2 1 2 1 1 2 2 ...
 $ sport        : Factor w/ 2 levels &quot;Non&quot;,&quot;Oui&quot;: 1 2 2 2 1 2 1 1 1 2 ...
 $ heures.tv    : num  0 1 0 2 3 2 2.9 1 2 2 ...</code></pre>
<p>La première ligne nous informe qu’il s’agit bien d’un tableau de données avec 2000 observations et 20 variables. Vient ensuite la liste des variables. La première se nomme <em>id</em> et est de type nombre entier (<em>int</em>). La seconde se nomme <em>age</em> et est de type numérique. La troisième se nomme <em>sexe</em>, il s’agit d’un facteur (<em>factor</em>).</p>
<p>Un facteur et une variable pouvant prendre un nombre limité de modalités (<em>levels</em>). Ici notre variable a deux modalités possibles : « Homme » et « Femme ». Ce type de variable est décrit plus en détail dans le chapitre sur la <a href="pem_manipulation.html#variables">manipulation de données</a>.</p>
<div class="important">
La fonction <code data-package="utils">str</code> est essentielle à connaître et peut s’appliquer à n’importe quel type d’objet. C’est un excellent moyen de connaître la structure d’un objet.
</div>
</div>
<div id="inspection-visuelle" class="section level3">
<h3>Inspection visuelle</h3>
<p>La particularité de <strong>R</strong> par rapport à d’autres logiciels comme <strong>Modalisa</strong> ou <strong>SPSS</strong> est de ne pas proposer, par défaut, de vue des données sous forme de tableau. Ceci peut parfois être un peu déstabilisant dans les premiers temps d’utilisation, même si on perd vite l’habitude et qu’on finit par se rendre compte que « voir » les données n’est pas forcément un gage de productivité ou de rigueur dans le traitement.</p>
<p>Néanmoins, <strong>R</strong> propose une interface permettant de visualiser le contenu d’un tableau de données à l’aide de la fonction <code data-package="utils">View</code> :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">View</span>(d)</code></pre>
<p>Sous <strong>RStudio</strong>, on peut aussi afficher la visionneusee (<em>viewer</em>) en cliquant sur la petite icône en forme de tableau située à droite de la ligne d’un tableau de données dans l’onglet <em>Environment</em> du quadrant supérieur droit (cf. figure ci-après).</p>
<figure>
<img src="images/capture_RStudio_icone_viewer.png" alt="Icône pour afficher une vue du contenu d’un tableau" />
<figcaption>
Icône pour afficher une vue du contenu d’un tableau
</figcaption>
</figure>
<p>Dans tous les cas, <strong>RStudio</strong> lancera le <em>viewer</em> dans un onglet dédié dans le quadrant supérieur gauche. Le visualiseur de <strong>RStudio</strong> est plus avancé que celui-de base fournit par <strong>R</strong>. Il est possible de trier les données selon une variable en cliquant sur le nom de cette dernière. Il y a également un champs de recherche et un bouton <em>Filter</em> donnant accès à des options de filtrage avancées.</p>
<figure>
<img src="images/capture_RStudio_data_viewer.png" alt="La visionneuse de données de RStudio" />
<figcaption>
La visionneuse de données de RStudio
</figcaption>
</figure>
</div>
<div id="acceder-aux-variables" class="section level3">
<h3>Accéder aux variables</h3>
<p><code>d</code> représente donc l’ensemble de notre tableau de données. Nous avons vu que si l’on saisit simplement <code>d</code> à l’invite de commandes, on obtient un affichage du tableau en question. Mais comment accéder aux variables, c’est à dire aux colonnes de notre tableau ?</p>
<p>La réponse est simple : on utilise le nom de l’objet, suivi de l’opérateur <code data-package="base" data-rdocumentation="Extract">$</code>, suivi du nom de la variable, comme ceci :</p>
<pre class="sourceCode r"><code class="sourceCode r">d$sexe</code></pre>
<p>Au regard du résultat (non reproduit ici), on constate alors que <strong>R</strong> a bien accédé au contenu de notre variable <em>sexe</em> du tableau <code>d</code> et a affiché son contenu, c’est-à-dire l’ensemble des valeurs prises par la variable.</p>
<p>Les fonctions <code data-package="utils">head</code> et <code data-package="utils" data-rdocumentation="head">tail</code> permettent d’afficher seulement les premières (respectivement les dernières) valeurs prises par la variable. On peut leur passer en argument le nombre d’éléments à afficher :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(d$sport)</code></pre>
<pre><code>[1] Non Oui Oui Oui Non Oui
Levels: Non Oui</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tail</span>(d$age, <span class="dv">10</span>)</code></pre>
<pre><code> [1] 52 42 50 41 46 45 46 24 24 66</code></pre>
<p>À noter que ces fonctions marchent aussi pour afficher les lignes du tableau <code>d</code> :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(d, <span class="dv">2</span>)</code></pre>
<pre><code>  id age  sexe
1  1  28 Femme
2  2  23 Femme
                                               nivetud
1 Enseignement superieur y compris technique superieur
2                                                 &lt;NA&gt;
     poids                 occup  qualif
1 2634.398 Exerce une profession Employe
2 9738.396       Etudiant, eleve    &lt;NA&gt;
  freres.soeurs clso                       relig
1             8  Oui Ni croyance ni appartenance
2             2  Oui Ni croyance ni appartenance
       trav.imp    trav.satisf hard.rock
1 Peu important Insatisfaction       Non
2          &lt;NA&gt;           &lt;NA&gt;       Non
  lecture.bd peche.chasse cuisine bricol cinema
1        Non          Non     Oui    Non    Non
2        Non          Non     Non    Non    Oui
  sport heures.tv
1   Non         0
2   Oui         1</code></pre>
</div>
</div>
<div id="stat_univ" class="section level2">
<h2>Analyser une variable (statistique univariée)</h2>
<div id="variable-quantitative" class="section level3">
<h3>Variable quantitative</h3>
<div id="principaux-indicateurs" class="section level4">
<h4>Principaux indicateurs</h4>
<p>Comme la fonction <code data-package="utils">str</code> nous l’a indiqué, notre tableau <code>d</code> contient plusieurs valeurs numériques, dont la variable <em>heures.tv</em> qui représente le nombre moyen passé par les enquêtés à regarder la télévision quotidiennement. On peut essayer de déterminer quelques caractéristiques de cette variable, en utilisant les fonctions <code data-package="base">mean</code>, <code data-package="stats">sd</code>, <code data-package="base" data-rdocumentation="Extremes">min</code>, <code data-package="base" data-rdocumentation="Extremes">max</code> et <code data-package="base">range</code> :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(d$heures.tv)</code></pre>
<pre><code>[1] NA</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">mean</span>(d$heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre>
<pre><code>[1] 2.246566</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sd</span>(d$heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre>
<pre><code>[1] 1.775853</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">min</span>(d$heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre>
<pre><code>[1] 0</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">max</span>(d$heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre>
<pre><code>[1] 12</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">range</span>(d$heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre>
<pre><code>[1]  0 12</code></pre>
<p>On peut lui ajouter la fonction <code data-package="stats">median</code> qui donne la valeur médiane, <code data-package="stats">quantile</code> qui calcule plus généralement tout type de quantiles, et le très utile <code data-package="base">summary</code> qui donne toutes ces informations ou presque en une seule fois, avec en prime le nombre de valeurs manquantes (<code>NA</code>) :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">median</span>(d$heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre>
<pre><code>[1] 2</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">quantile</span>(d$heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</code></pre>
<pre><code>  0%  25%  50%  75% 100% 
   0    1    2    3   12 </code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(d$heures.tv)</code></pre>
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
  0.000   1.000   2.000   2.247   3.000  12.000 
   NA&#39;s 
      5 </code></pre>
<p>La fonction <code data-package="base">summary</code> est une fonction générique qui peut être utilisée sur tout type d’objet, y compris un tableau de données. Essayez donc <code>summary(d)</code>.</p>
</div>
<div id="histogramme" class="section level4">
<h4>Histogramme</h4>
<p>Tout cela est bien pratique, mais pour pouvoir observer la distribution des valeurs d’une variable quantitative, il n’y a quand même rien de mieux qu’un bon graphique.</p>
<p>On peut commencer par un histogramme de la répartition des valeurs. Celui-ci peut être généré très facilement avec la fonction <code data-package="graphics">hist</code> :</p>
<figure>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hist</span>(d$heures.tv, <span class="dt">main =</span> <span class="st">&quot;Nombre d&#39;heures passées devant la télé par jour&quot;</span>, 
  <span class="dt">xlab =</span> <span class="st">&quot;Heures&quot;</span>, <span class="dt">ylab =</span> <span class="st">&quot;Effectif&quot;</span>)</code></pre>
<img src="pem_premier_travail_files/figure-html/unnamed-chunk-19-1.png" title="" alt="" width="1050" />
<figcaption>
Exemple d’histogramme
</figcaption>
</figure>
<p>Sous <strong>RStudio</strong>, les graphiques s’affichent dans l’onglet <em>Plots</em> du quadrant inférieur droit. Il est possible d’afficher une version plus grande de votre graphique en cliquant sur <em>Zoom</em>.</p>
<p>Ici, les options <code>main</code>, <code>xlab</code> et <code>ylab</code> permettent de personnaliser le titre du graphique, ainsi que les étiquettes des axes. De nombreuses autres options existent pour personnaliser l’histogramme, parmi celles-ci on notera :</p>
<ul>
<li><code>probability</code> si elle vaut <code>TRUE</code>, l’histogramme indique la proportion des classes de valeurs au lieu des effectifs.</li>
<li><code>breaks</code> permet de contrôler les classes de valeurs. On peut lui passer un chiffre, qui indiquera alors le nombre de classes, un vecteur, qui indique alors les limites des différentes classes, ou encore une chaîne de caractère ou une fonction indiquant comment les classes doivent être calculées.</li>
<li><code>col</code> la couleur de l’histogramme<a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a>.</li>
</ul>
<p>Voir la page d’aide de la fonction <code data-package="graphics">hist</code> pour plus de détails sur les différentes options. Les deux figures ci-après sont deux autres exemples d’histogramme.</p>
<figure>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hist</span>(d$heures.tv, <span class="dt">main =</span> <span class="st">&quot;Heures de télé en 7 classes&quot;</span>, 
  <span class="dt">breaks =</span> <span class="dv">7</span>, <span class="dt">xlab =</span> <span class="st">&quot;Heures&quot;</span>, <span class="dt">ylab =</span> <span class="st">&quot;Proportion&quot;</span>, 
  <span class="dt">probability =</span> <span class="ot">TRUE</span>, <span class="dt">col =</span> <span class="st">&quot;orange&quot;</span>)</code></pre>
<img src="pem_premier_travail_files/figure-html/unnamed-chunk-20-1.png" title="" alt="" width="1050" />
<figcaption>
Un autre exemple d’histogramme
</figcaption>
</figure>
<figure>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">hist</span>(d$heures.tv, <span class="dt">main =</span> <span class="st">&quot;Heures de télé avec classes spécifiées&quot;</span>, 
  <span class="dt">breaks =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">9</span>, <span class="dv">12</span>), <span class="dt">xlab =</span> <span class="st">&quot;Heures&quot;</span>, <span class="dt">ylab =</span> <span class="st">&quot;Proportion&quot;</span>, 
  <span class="dt">col =</span> <span class="st">&quot;red&quot;</span>)</code></pre>
<img src="pem_premier_travail_files/figure-html/unnamed-chunk-21-1.png" title="" alt="" width="1050" />
<figcaption>
Encore un autre exemple d’histogramme
</figcaption>
</figure>
</div>
<div id="boites-a-moustaches" class="section level4">
<h4>Boîtes à moustaches</h4>
<p>Les boîtes à moustaches, ou <em>boxplot</em> en anglais, sont une autre représentation graphique de la répartition des valeurs d’une variable quantitative. Elles sont particulièrement utiles pour comparer les distributions de plusieurs variables ou d’une même variable entre différents groupes, mais peuvent aussi être utilisées pour représenter la dispersion d’une unique variable. La fonction qui produit ces graphiques est la fonction <code data-package="graphics">boxplot</code>.</p>
<figure>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">boxplot</span>(d$heures.tv, <span class="dt">main =</span> <span class="st">&quot;Nombre d&#39;heures passées devant la télé par jour&quot;</span>, 
  <span class="dt">ylab =</span> <span class="st">&quot;Heures&quot;</span>)</code></pre>
<img src="pem_premier_travail_files/figure-html/unnamed-chunk-22-1.png" title="" alt="" width="1050" />
<figcaption>
Exemple de boîte à moustaches
</figcaption>
</figure>
<p>Comment interpréter ce graphique ? On le comprendra mieux à partir de la figure ci-après<a href="#fn3" class="footnoteRef" id="fnref3"><sup>3</sup></a>.</p>
<figure>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">boxplot</span>(d$heures.tv, <span class="dt">col =</span> <span class="kw">grey</span>(<span class="fl">0.8</span>), <span class="dt">main =</span> <span class="st">&quot;Nombre d&#39;heures passées devant la télé par jour&quot;</span>, 
  <span class="dt">ylab =</span> <span class="st">&quot;Heures&quot;</span>)
<span class="kw">abline</span>(<span class="dt">h =</span> <span class="kw">median</span>(d$heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), <span class="dt">col =</span> <span class="st">&quot;navy&quot;</span>, 
  <span class="dt">lty =</span> <span class="dv">2</span>)
<span class="kw">text</span>(<span class="fl">1.35</span>, <span class="kw">median</span>(d$heures.tv, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>) +<span class="st"> </span><span class="fl">0.15</span>, 
  <span class="st">&quot;Médiane&quot;</span>, <span class="dt">col =</span> <span class="st">&quot;navy&quot;</span>)
Q1 &lt;-<span class="st"> </span><span class="kw">quantile</span>(d$heures.tv, <span class="dt">probs =</span> <span class="fl">0.25</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)
<span class="kw">abline</span>(<span class="dt">h =</span> Q1, <span class="dt">col =</span> <span class="st">&quot;darkred&quot;</span>)
<span class="kw">text</span>(<span class="fl">1.35</span>, Q1 +<span class="st"> </span><span class="fl">0.15</span>, <span class="st">&quot;Q1 : premier quartile&quot;</span>, <span class="dt">col =</span> <span class="st">&quot;darkred&quot;</span>, 
  <span class="dt">lty =</span> <span class="dv">2</span>)
Q3 &lt;-<span class="st"> </span><span class="kw">quantile</span>(d$heures.tv, <span class="dt">probs =</span> <span class="fl">0.75</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)
<span class="kw">abline</span>(<span class="dt">h =</span> Q3, <span class="dt">col =</span> <span class="st">&quot;darkred&quot;</span>)
<span class="kw">text</span>(<span class="fl">1.35</span>, Q3 +<span class="st"> </span><span class="fl">0.15</span>, <span class="st">&quot;Q3 : troisième quartile&quot;</span>, <span class="dt">col =</span> <span class="st">&quot;darkred&quot;</span>, 
  <span class="dt">lty =</span> <span class="dv">2</span>)
<span class="kw">arrows</span>(<span class="dt">x0 =</span> <span class="fl">0.7</span>, <span class="dt">y0 =</span> <span class="kw">quantile</span>(d$heures.tv, <span class="dt">probs =</span> <span class="fl">0.75</span>, 
  <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), <span class="dt">x1 =</span> <span class="fl">0.7</span>, <span class="dt">y1 =</span> <span class="kw">quantile</span>(d$heures.tv, 
  <span class="dt">probs =</span> <span class="fl">0.25</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>), <span class="dt">length =</span> <span class="fl">0.1</span>, <span class="dt">code =</span> <span class="dv">3</span>)
<span class="kw">text</span>(<span class="fl">0.7</span>, Q1 +<span class="st"> </span>(Q3 -<span class="st"> </span>Q1)/<span class="dv">2</span> +<span class="st"> </span><span class="fl">0.15</span>, <span class="st">&quot;h&quot;</span>, <span class="dt">pos =</span> <span class="dv">2</span>)
<span class="kw">mtext</span>(<span class="st">&quot;L&#39;écart inter-quartile h contient 50 % des individus&quot;</span>, 
  <span class="dt">side =</span> <span class="dv">1</span>)
<span class="kw">abline</span>(<span class="dt">h =</span> Q1 -<span class="st"> </span><span class="fl">1.5</span> *<span class="st"> </span>(Q3 -<span class="st"> </span>Q1), <span class="dt">col =</span> <span class="st">&quot;darkgreen&quot;</span>)
<span class="kw">text</span>(<span class="fl">1.35</span>, Q1 -<span class="st"> </span><span class="fl">1.5</span> *<span class="st"> </span>(Q3 -<span class="st"> </span>Q1) +<span class="st"> </span><span class="fl">0.15</span>, <span class="st">&quot;Q1 -1.5 h&quot;</span>, 
  <span class="dt">col =</span> <span class="st">&quot;darkgreen&quot;</span>, <span class="dt">lty =</span> <span class="dv">2</span>)
<span class="kw">abline</span>(<span class="dt">h =</span> Q3 +<span class="st"> </span><span class="fl">1.5</span> *<span class="st"> </span>(Q3 -<span class="st"> </span>Q1), <span class="dt">col =</span> <span class="st">&quot;darkgreen&quot;</span>)
<span class="kw">text</span>(<span class="fl">1.35</span>, Q3 +<span class="st"> </span><span class="fl">1.5</span> *<span class="st"> </span>(Q3 -<span class="st"> </span>Q1) +<span class="st"> </span><span class="fl">0.15</span>, <span class="st">&quot;Q3 +1.5 h&quot;</span>, 
  <span class="dt">col =</span> <span class="st">&quot;darkgreen&quot;</span>, <span class="dt">lty =</span> <span class="dv">2</span>)</code></pre>
<img src="pem_premier_travail_files/figure-html/unnamed-chunk-23-1.png" title="" alt="" width="1050" />
<figcaption>
Interprétation d’une boîte à moustaches
</figcaption>
</figure>
<p>Le carré au centre du graphique est délimité par les premiers et troisième quartiles, avec la médiane représentée par une ligne plus sombre au milieu. Les « fourchettes » s’étendant de part et d’autres vont soit jusqu’à la valeur minimale ou maximale, soit jusqu’à une valeur approximativement égale au quartile le plus proche plus 1,5 fois l’écart inter-quartile. Les points se situant en-dehors de cette fourchette sont représentés par des petits ronds et sont généralement considérés comme des valeurs extrêmes, potentiellement aberrantes.</p>
<p>On peut ajouter la représentation des valeurs sur le graphique pour en faciliter la lecture avec des petits traits dessinés sur l’axe vertical (fonction <code data-package="graphics">rug</code>) :</p>
<figure>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">boxplot</span>(d$heures.tv, <span class="dt">main =</span> <span class="st">&quot;Nombre d&#39;heures passées devant la télé par</span><span class="ch">\n</span><span class="st">jour&quot;</span>, 
  <span class="dt">ylab =</span> <span class="st">&quot;Heures&quot;</span>)
<span class="kw">rug</span>(d$heures.tv, <span class="dt">side =</span> <span class="dv">2</span>)</code></pre>
<img src="pem_premier_travail_files/figure-html/unnamed-chunk-24-1.png" title="" alt="" width="1050" />
<figcaption>
Boîte à moustaches avec représentation des valeurs
</figcaption>
</figure>
</div>
<div id="intervalle-de-confiance" class="section level4">
<h4>Intervalle de confiance</h4>
<p>L’intervalle de confiance d’une moyenne peut être calculé avec la fonction <code data-package="stats">t.test</code> (fonction qui permet également de réaliser un test <em>t</em> de Student comme nous le verrons dans le chapitre dédié à la <a href="analyses_stat_biv.html#comp_moyennes">statistique bivariée</a>) :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">t.test</span>(d$heures.tv)</code></pre>
<pre><code>
    One Sample t-test

data:  d$heures.tv
t = 56.505, df = 1994, p-value &lt; 2.2e-16
alternative hypothesis: true mean is not equal to 0
95 percent confidence interval:
 2.168593 2.324540
sample estimates:
mean of x 
 2.246566 </code></pre>
<p>Le niveau de confiance peut être précisé via l’argument <code>conf.level</code> :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">t.test</span>(d$heures.tv, <span class="dt">conf.level =</span> <span class="fl">0.9</span>)</code></pre>
<pre><code>
    One Sample t-test

data:  d$heures.tv
t = 56.505, df = 1994, p-value &lt; 2.2e-16
alternative hypothesis: true mean is not equal to 0
90 percent confidence interval:
 2.181138 2.311995
sample estimates:
mean of x 
 2.246566 </code></pre>
<p>Le nombre d’heures moyennes à regarder la télévision parmi les enquêtés s’avère être de 2,2 heures, avec un intervalle de confiance à 95 % de [2,17 - 2,33] et un intervalle de confiance à 90 % de [2,18 - 2,31].</p>
</div>
</div>
<div id="variable-qualitative" class="section level3">
<h3>Variable qualitative</h3>
<div id="tris-a-plat" class="section level4">
<h4>Tris à plat</h4>
<p>La fonction la plus utilisée pour le traitement et l’analyse des variables qualitatives (variable prenant ses valeurs dans un ensemble de modalités) est sans aucun doute la fonction <code data-package="base">table</code>, qui donne les effectifs de chaque modalité de la variable.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(d$sexe)</code></pre>
<pre><code>
Homme Femme 
  899  1101 </code></pre>
<p>La tableau précédent nous indique que parmi nos enquêtés on trouve 899 hommes et 1101 femmes.</p>
<p>Quand le nombre de modalités est élevé, on peut ordonner le tri à plat selon les effectifs à l’aide de la fonction <code data-package="base">sort</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(d$occup)</code></pre>
<pre><code>
Exerce une profession               Chomeur 
                 1049                   134 
      Etudiant, eleve              Retraite 
                   94                   392 
  Retire des affaires              Au foyer 
                   77                   171 
        Autre inactif 
                   83 </code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sort</span>(<span class="kw">table</span>(d$occup))</code></pre>
<pre><code>
  Retire des affaires         Autre inactif 
                   77                    83 
      Etudiant, eleve               Chomeur 
                   94                   134 
             Au foyer              Retraite 
                  171                   392 
Exerce une profession 
                 1049 </code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sort</span>(<span class="kw">table</span>(d$occup), <span class="dt">decreasing =</span> <span class="ot">TRUE</span>)</code></pre>
<pre><code>
Exerce une profession              Retraite 
                 1049                   392 
             Au foyer               Chomeur 
                  171                   134 
      Etudiant, eleve         Autre inactif 
                   94                    83 
  Retire des affaires 
                   77 </code></pre>
<p>À noter que la fonction <code data-package="base">table</code> exclut par défaut les non-réponses du tableau résultat. L’argument <code>useNA</code> de cette fonction permet de modifier ce comportement :</p>
<ul>
<li>avec <code>useNA=&quot;no&quot;</code> (valeur par défaut), les valeurs manquantes ne sont jamais incluses dans le tri à plat ;</li>
<li>avec <code>useNA=&quot;ifany&quot;</code>, une colonne <code>NA</code> est ajoutée si des valeurs manquantes sont présentes dans les données ;</li>
<li>avec <code>useNA=&quot;always&quot;</code>, une colonne <code>NA</code> est toujours ajoutée, même s’il n’y a pas de valeurs manquantes dans les données.</li>
</ul>
<p>On peut donc utiliser :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">table</span>(d$trav.satisf, <span class="dt">useNA =</span> <span class="st">&quot;ifany&quot;</span>)</code></pre>
<pre><code>
  Satisfaction Insatisfaction      Equilibre 
           480            117            451 
          &lt;NA&gt; 
           952 </code></pre>
<p>L’utilisation de <code data-package="base">summary</code> permet également l’affichage du tri à plat et du nombre de non-réponses :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">summary</span>(d$trav.satisf)</code></pre>
<pre><code>  Satisfaction Insatisfaction      Equilibre 
           480            117            451 
          NA&#39;s 
           952 </code></pre>
<p>Pour obtenir un tableau avec la répartition en pourcentages, on peut utiliser la fonction <code data-package="questionr">freq</code> de l’extension <strong class="package">questionr</strong><a href="#fn4" class="footnoteRef" id="fnref4"><sup>4</sup></a>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">freq</span>(d$qualif)</code></pre>
<pre><code>                           n    % val%
Ouvrier specialise       203 10.2 12.3
Ouvrier qualifie         292 14.6 17.7
Technicien                86  4.3  5.2
Profession intermediaire 160  8.0  9.7
Cadre                    260 13.0 15.7
Employe                  594 29.7 35.9
Autre                     58  2.9  3.5
NA                       347 17.3   NA</code></pre>
<p>La colonne <code>n</code> donne les effectifs bruts, la colonne <code>%</code> la répartition en pourcentages et <code>val%</code> la répartition en pourcentages, données manquantes exclues. La fonction accepte plusieurs paramètres permettant d’afficher les totaux, les pourcentages cumulés, de trier selon les effectifs ou de contrôler l’affichage. Par exemple :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">freq</span>(d$qualif, <span class="dt">cum =</span> <span class="ot">TRUE</span>, <span class="dt">total =</span> <span class="ot">TRUE</span>, <span class="dt">sort =</span> <span class="st">&quot;inc&quot;</span>, 
  <span class="dt">digits =</span> <span class="dv">2</span>, <span class="dt">exclude =</span> <span class="ot">NA</span>)</code></pre>
<pre><code>                            n      %   %cum
Autre                      58   3.51   3.51
Technicien                 86   5.20   8.71
Profession intermediaire  160   9.68  18.39
Ouvrier specialise        203  12.28  30.67
Cadre                     260  15.73  46.40
Ouvrier qualifie          292  17.66  64.07
Employe                   594  35.93 100.00
Total                    1653 100.00 100.00</code></pre>
<p>La colonne <code>%cum</code> indique ici le pourcentage cumulé, ce qui est ici une très mauvaise idée puisque pour ce type de variable cela n’a aucun sens. Les lignes du tableau résultat ont été triés par effectifs croissants, les totaux ont été ajoutés, les non-réponses exclues et les pourcentages arrondis à deux décimales.</p>
<p>Pour plus d’informations sur la fonction <code data-package="questionr">freq</code>, consultez sa page d’aide en ligne avec <code>?freq</code> ou <code>help(&quot;freq&quot;)</code>.</p>
</div>
<div id="representation-graphique" class="section level4">
<h4>Représentation graphique</h4>
<p>Pour représenter la répartition des effectifs parmi les modalités d’une variable qualitative, on a souvent tendance à utiliser des diagrammes en secteurs (camemberts). Ceci est possible sous <strong>R</strong> avec la fonction <code data-package="graphics">pie</code>, mais la page d’aide de la dite fonction nous le déconseille assez vivement : les diagrammes en secteur sont en effet une mauvaise manière de présenter ce type d’information, car l’oeil humain préfère comparer des longueurs plutôt que des surfaces<a href="#fn5" class="footnoteRef" id="fnref5"><sup>5</sup></a>.</p>
<p>On privilégiera donc d’autres formes de représentations, à savoir les diagrammes en bâtons et les <em>diagrammes de Cleveland</em>.</p>
<p>Les diagrammes en bâtons sont utilisés automatiquement par <strong>R</strong> lorsqu’on applique la fonction générique <code data-package="graphics" data-rdocumentation="plot.table">plot</code> à un tri à plat obtenu avec <code data-package="base">table</code>. On privilégiera cependant ce type de représentations pour les variables de type numérique comportant un nombre fini de valeurs. Le nombre de frères, soeurs, demi-frères et demi-soeurs est un bon exemple :</p>
<figure>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(<span class="kw">table</span>(d$freres.soeurs), <span class="dt">main =</span> <span class="st">&quot;Nombre de frères, soeurs, demi-frères et demi-soeurs&quot;</span>, 
  <span class="dt">ylab =</span> <span class="st">&quot;Effectif&quot;</span>)</code></pre>
<img src="pem_premier_travail_files/figure-html/unnamed-chunk-33-1.png" title="" alt="" width="1050" />
<figcaption>
Exemple de diagramme en bâtons
</figcaption>
</figure>
<p>Pour les autres types de variables qualitatives, on privilégiera les <em>diagrammes de Cleveland</em>, obtenus avec la fonction <code data-package="graphics">dotchart</code>. On doit appliquer cette fonction au tri à plat de la variable, obtenu avec <code data-package="base">table</code><a href="#fn6" class="footnoteRef" id="fnref6"><sup>6</sup></a> :</p>
<figure>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dotchart</span>(<span class="kw">t</span>(<span class="kw">table</span>(d$clso)), <span class="dt">main =</span> <span class="st">&quot;Sentiment d&#39;appartenance à une classe sociale&quot;</span>, 
  <span class="dt">pch =</span> <span class="dv">19</span>)</code></pre>
<img src="pem_premier_travail_files/figure-html/unnamed-chunk-34-1.png" title="" alt="" width="1050" />
<figcaption>
Exemple de diagramme de Cleveland
</figcaption>
</figure>
<p>Quand la variable comprend un grand nombre de modalités, il est préférable d’ordonner le tri à plat obtenu à l’aide de la fonction <code data-package="base">sort</code> :</p>
<figure>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dotchart</span>(<span class="kw">sort</span>(<span class="kw">table</span>(d$qualif)), <span class="dt">main =</span> <span class="st">&quot;Niveau de qualification&quot;</span>)</code></pre>
<img src="pem_premier_travail_files/figure-html/unnamed-chunk-35-1.png" title="" alt="" width="1050" />
<figcaption>
Exemple de diagramme de Cleveland ordonné
</figcaption>
</figure>
<div class="astuce">
<p>L’agument <code>pch</code>, qui est utilisé par la plupart des graphiques de type points, permet de spécifier le symbole à utiliser. Il peut prendre soit un nombre entier compris entre 0 et 25, soit un charactère textuel (voir ci-dessous).</p>
<img src="pem_premier_travail_files/figure-html/unnamed-chunk-36-1.png" title="" alt="" width="1050" />
</div>
</div>
<div id="intervalle-de-confiance-1" class="section level4">
<h4>Intervalle de confiance</h4>
<p>La fonction <code data-package="stats">prop.test</code> permet de calculer l’intervalle de confiance d’une proportion. Une première possibilité consiste à lui transmettre une table à une dimension et deux entrées. Par exemple, si l’on s’intéresse à la proportion de personnes ayant pratiqué une activité physique au cours des douze derniers mois :</p>
<p>freq(d<span class="math"><em>s</em><em>p</em><em>o</em><em>r</em><em>t</em>)<em>p</em><em>r</em><em>o</em><em>p</em>.<em>t</em><em>e</em><em>s</em><em>t</em>(<em>t</em><em>a</em><em>b</em><em>l</em><em>e</em>(<em>d</em></span>sport))</p>
<p>On remarquera que la fonction a calculé l’intervalle de confiance correspondant à la première entrée du tableau, autrement dit celui de la proportion d’enquêtés n’ayant pas pratiqué une activité sportive. Or, nous sommes intéressé par la proportion complémentaire, à savoir celle d’enquêtés ayant pratiqué une activité sportive. On peut dès lors modifier l’ordre de la table en indiquant notre modalité d’intérêt avec la fonction <code data-package="stats">relevel</code> ou bien indiquer à <code data-package="stats">prop.test</code> d’abord le nombre de succès puis l’effectif total :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">prop.test</span>(<span class="kw">table</span>(<span class="kw">relevel</span>(d$sport, <span class="st">&quot;Oui&quot;</span>)))</code></pre>
<pre><code>
    1-sample proportions test with continuity
    correction

data:  table(relevel(d$sport, &quot;Oui&quot;)), null probability 0.5
X-squared = 152.9, df = 1, p-value &lt; 2.2e-16
alternative hypothesis: true p is not equal to 0.5
95 percent confidence interval:
 0.3404821 0.3830553
sample estimates:
     p 
0.3615 </code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">prop.test</span>(<span class="kw">sum</span>(d$sport ==<span class="st"> &quot;Oui&quot;</span>), <span class="kw">length</span>(d$sport))</code></pre>
<pre><code>
    1-sample proportions test with continuity
    correction

data:  sum(d$sport == &quot;Oui&quot;) out of length(d$sport), null probability 0.5
X-squared = 152.9, df = 1, p-value &lt; 2.2e-16
alternative hypothesis: true p is not equal to 0.5
95 percent confidence interval:
 0.3404821 0.3830553
sample estimates:
     p 
0.3615 </code></pre>
<p>Enfin, le niveau de confiance peut être modifié via l’argument <code>conf.level</code> :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">prop.test</span>(<span class="kw">table</span>(<span class="kw">relevel</span>(d$sport, <span class="st">&quot;Oui&quot;</span>)), <span class="dt">conf.level =</span> <span class="fl">0.9</span>)</code></pre>
<pre><code>
    1-sample proportions test with continuity
    correction

data:  table(relevel(d$sport, &quot;Oui&quot;)), null probability 0.5
X-squared = 152.9, df = 1, p-value &lt; 2.2e-16
alternative hypothesis: true p is not equal to 0.5
90 percent confidence interval:
 0.3437806 0.3795989
sample estimates:
     p 
0.3615 </code></pre>
<div class="info">
Il existe de nombreuses manières de calculer un intervalle de confiance pour une proportion. En l’occurence, l’intervalle calculé par <code data-package="base">prop.test</code> correspond dans le cas présent à un intervalle bilatéral selon la méthode des scores de Wilson avec correction de continuité. Pour plus d’information, on pourra lire <a href="http://joseph.larmarange.net/?Intervalle-de-confiance-bilateral" class="uri">http://joseph.larmarange.net/?Intervalle-de-confiance-bilateral</a>.
</div>
</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>Sous <strong>Mac OS X</strong>, on utilise les touches <kbd>Pomme</kbd> et <kbd>Entrée</kbd>.<a href="#fnref1">↩</a></p></li>
<li id="fn2"><p>Il existe un grand nombre de couleurs prédéfinies dans <strong>R</strong>. On peut récupérer leur liste en utilisant la fonction <code data-package="grDevices">colors</code> en tapant simplement <code>colors()</code> dans la console, ou en consultant le document suivant : <a href="http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf" class="uri">http://www.stat.columbia.edu/~tzheng/files/Rcolor.pdf</a>.<a href="#fnref2">↩</a></p></li>
<li id="fn3"><p>Le code ayant servi à générer cette figure est une copie quasi conforme de celui présenté dans l’excellent document de Jean Lobry sur les graphiques de base avec <strong>R</strong>, téléchargeable sur le site du Pôle bioinformatique lyonnais : <a href="http://pbil.univ-lyon1.fr/R/pdf/lang04.pdf" class="uri">http://pbil.univ-lyon1.fr/R/pdf/lang04.pdf</a>.<a href="#fnref3">↩</a></p></li>
<li id="fn4"><p>En l’absence de l’extension <strong class="package">questionr</strong>, on pourra se rabattre sur la fonction <code data-package="base">prop.table</code> avec la commande suivante : <code>prop.table(table(d$qualif))</code>.<a href="#fnref4">↩</a></p></li>
<li id="fn5"><p>On trouvera des exemples illustrant cette idée dans le document de Jean Lobry cité précédemment.<a href="#fnref5">↩</a></p></li>
<li id="fn6"><p>Pour des raisons liées au fonctionnement interne de la fonction <code data-package="graphics">dotchart</code>, on doit l’appliquer à la transposition du tri à plat obtenu, d’où l’appel à la fonction <code data-package="base">t</code>.<a href="#fnref6">↩</a></p></li>
</ol>
</div>

</article>
</div>

<div class="col-sm-3" role="complementary">
<nav class="hidden-print hidden-xs" id="nav_sidebar">
</nav>
</div>

</div>

<script>
// manage active state of menu based on current page
$(document).ready(function () {

    // active menu
    href = window.location.pathname;
    href = href.substr(href.lastIndexOf('/') + 1);
    if (href=='') href = 'index.html';
    $('a[href="' + href + '"]').parent().addClass('active');

    // manage active menu header
    if (href.startsWith('pem_'))
      $('a[href="' + 'pem' + '"]').parent().addClass('active');
    else if (href.startsWith('analyses_'))
      $('a[href="' + 'analyses' + '"]').parent().addClass('active');
    else if (href.startsWith('avance_'))
      $('a[href="' + 'avance' + '"]').parent().addClass('active');

    // élargir la page d'accueil
    if (href=='index.html') $('.col-sm-9').attr('class','col-sm-12');

    // sidebar
    $("#nav_sidebar").append($("#TOC").html());
    $("#nav_sidebar ul").addClass("nav nav-stacked");
    $("#TOC").addClass("visible-xs-block");
    $('body').scrollspy({
      target: '#nav_sidebar',
      offset: 40
    });

    // Identifier les <pre> fermant
    $('pre').next("*:not(pre)").prev().addClass('last'); // Dernier <pre> de chaque groupe contigu de <pre>
    $('pre').parent().each(function (){
      $(this).children('pre').last().addClass('last');
    }); // Si <pre> est le dernier enfant de son parent

    // Ajout liens rdocumentation et tooltip
    $("code[data-package]").each(function( index ) {
      pack = $(this).attr('data-package');
      if ($(this).attr('data-rdocumentation') !== undefined) {
        rdocumentation = $(this).attr('data-rdocumentation');
        page = ' (' + $(this).attr('data-rdocumentation') + ')';
      } else {
        rdocumentation = $(this).text();
        page = '';
      }
      fonction = $(this).text();
      $(this).wrap('<a href="http://www.rdocumentation.org/packages/'+pack+'/functions/'+rdocumentation+'">');
      $(this).attr('data-toggle','tooltip');
      $(this).attr('data-placement','top');
      $(this).attr('title','package : ' + pack + page);
      $('[data-toggle="tooltip"]').tooltip();
    });

    $("strong.package").each(function( index ) {
      $(this).wrap('<a href="http://www.rdocumentation.org/packages/'+$(this).text()+'">');
    });

    // Figures
    $("figure").each(function( index ) {
      if ($(this).children("figcaption").length > 0)
        $(this).children("figcaption:first").prepend('<span class="figure-number">Figure '+(index+1)+'.</span> ');
      else
        $(this).append($("<figcaption>").append('<span class="figure-number">Figure '+(index+1)+'</span>'));
    });

    // ZeroClipboard
    $('pre.r').parent().each(function(){
      $(this).children('pre.r').first().before('<div class="zero-clipboard hidden-print hidden-xs"><button class="btn-clipboard">Copier</button></div>');
    }); // Il peut arriver que le pre ne soit pas précédé (cf. figures)
    $('*:not(pre):not(.zero-clipboard) + pre.r').before('<div class="zero-clipboard hidden-print hidden-xs"><button class="btn-clipboard">Copier</button></div>');
    $('pre.last').after(function() {
      if ($(this).hasClass("r")) res = $(this).text(); else res = "";
      $(this).prevUntil('*:not(pre)','pre.r').each(function() {
        res = $(this).text() + '\n' + res;
      });
      return '<div class="clipboard">' + res + '</div>';
    });
    $('.zero-clipboard').each(function(index){
      $(this).children('.btn-clipboard').attr('data-clipboard-target','clipboard_'+index);
      $(this).nextAll("div.clipboard").first().attr('id','clipboard_'+index);
    });
    var client = new ZeroClipboard( $(".btn-clipboard") );
    client.on( "ready", function( readyEvent ) {
      // alert( "ZeroClipboard SWF is ready!" );
      client.on( "aftercopy", function( event ) {
        // `this` === `client`
        // `event.target` === the element that was clicked
        //event.target.style.display = "none";
        $(event.target).parent().before('<div class="alert alert-success"><a href="#" class="close" data-dismiss="alert">&times;</a>Le code <strong>R</strong> de l’exemple a été copié dans le presse-papier.</div>');
      } );
    } );

});
</script>

<!-- disqus -->
<div class="row">
  <div id="disqus_thread" class="col-sm-9" role="complementary"></div>
</div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'analyse-r'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Veuillez activer JavaScript pour voir les <a href="http://disqus.com/?ref_noscript">les commentaires gérés avec Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">Les commentaires sont hébergés par <span class="logo-disqus">Disqus</span>.</a>

</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>


</body>
</html>
