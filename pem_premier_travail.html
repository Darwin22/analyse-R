<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />



<title>Premier travail avec des données</title>

<script src="libs/jquery-1.11.0/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.1/css/flatly.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.1/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.1/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.1/shim/respond.min.js"></script>
<link rel="stylesheet" href="./include/analyse-R.css" />
<script type="text/javascript" src="./libs/zeroclipboard-2.2.0/ZeroClipboard.js"></script>
<link rel="stylesheet" href="./libs/colorbox-1.6.1/colorbox.css" />
<script type="text/javascript" src="./libs/colorbox-1.6.1/jquery.colorbox-min.js"></script>
<!--- favicon --->
<link rel="apple-touch-icon" sizes="57x57" href="./images/favicon/apple-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="./images/favicon/apple-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="./images/favicon/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="./images/favicon/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="./images/favicon/apple-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="./images/favicon/apple-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="./images/favicon/apple-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="./images/favicon/apple-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="./images/favicon/apple-icon-180x180.png">
<link rel="icon" type="image/png" sizes="192x192"  href="./images/favicon/android-icon-192x192.png">
<link rel="icon" type="image/png" sizes="32x32" href="./images/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="96x96" href="./images/favicon/favicon-96x96.png">
<link rel="icon" type="image/png" sizes="16x16" href="./images/favicon/favicon-16x16.png">
<link rel="manifest" href="./images/favicon/manifest.json">
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="msapplication-TileImage" content="./images/favicon/ms-icon-144x144.png">
<meta name="theme-color" content="#ffffff">


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; }
code > span.dt { color: #902000; }
code > span.dv { color: #40a070; }
code > span.bn { color: #40a070; }
code > span.fl { color: #40a070; }
code > span.ch { color: #4070a0; }
code > span.st { color: #4070a0; }
code > span.co { color: #60a0b0; font-style: italic; }
code > span.ot { color: #007020; }
code > span.al { color: #ff0000; font-weight: bold; }
code > span.fu { color: #06287e; }
code > span.er { color: #ff0000; font-weight: bold; }
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>



</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img { 
  max-width:100%; 
  height: auto; 
}
</style>
<div class="container-fluid main-container">

<nav>
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href=".">analyse-R</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li><a href="index.html">Accueil</a></li>
        <li class="dropdown">
          <a href="pem" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Prise en main <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="pem_presentation_installation.html">Présentation et Installation</a></li>
            <li><a href="pem_premier_contact.html">Premier contact</a></li>
            <li><a href="pem_premier_travail.html">Premier travail avec des données</a></li>
            <li><a href="pem_organiser_fichiers.html">Organiser ses fichiers</a></li>
            <li><a href="pem_import_export.html">Import / Export de données</a></li>
            <li><a href="pem_manipulation.html">Manipulation de données</a></li>
            <li><a href="pem_export_graphiques.html">Exporter des graphiques</a></li>
            <li><a href="pem_ou_trouver_aide.html">Où trouver de l'aide ?</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a href="analyses" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Analyses <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li class="dropdown-header">Statistiques introductives</li>
            <li><a href="analyses_stat_univ.html">Statistique univariée</a></li>
            <li><a href="analyses_stat_biv.html">Statistique bivariée</a></li>
            <li><a href="analyses_graph_biv.html">Graphiques bivariés avec ggplot2</a></li>
            <li><a href="analyses_donnees_pond.html">Données pondérées</a></li>
            <li class="divider"></li>
            <li class="dropdown-header">Statistiques intermédiaires</li>
            <li><a href="analyses_reglog.html">Régression logistique</a></li>
            <li><a href="analyses_acm.html">Analyse des correspondances multiples (ACM)</a></li>
            <li><a href="analyses_cah.html">Classification ascendante hiérarchique (CAH)</a></li>
            <li class="divider"></li>
            <li class="dropdown-header">Statistiques avancées</li>
            <li><a href="analyses_seq.html">Analyse de séquences</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a href="extra" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Extra <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li class="dropdown-header">Astuces</li>
            <li><a href="extra_age.html">Calculer un âge</a></li>
          </ul>
        </li>
        <li class="dropdown">
          <a href="index" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Index <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
            <li><a href="index_concepts.html">Index des concepts</a></li>
            <li><a href="index_fonctions.html">Index des fonctions</a></li>
            <li><a href="index_extensions.html">Index des extensions</a></li>
          </ul>
        </li>
        <li><a href="analyse-R.pdf">PDF</a></li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
          <a href="participer" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Participer <span class="caret"></span></a>
          <ul class="dropdown-menu" role="menu">
              <li><a href="https://github.com/larmarange/analyse-R">analyse-R sur GitHub</a></li>
          </ul>
        </li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->
</nav>

<div class="row">

<div class="col-sm-9" role="main">
<article>

<div id="header">
<h1 class="title">Premier travail avec des données</h1>
</div>

<div id="TOC">
<ul>
<li><a href="#regrouper-les-commandes-dans-des-scripts">Regrouper les commandes dans des scripts</a></li>
<li><a href="#ajouter-des-commentaires">Ajouter des commentaires</a></li>
<li><a href="#tableaux-de-donnees">Tableaux de données</a></li>
<li><a href="#inspecter">Inspecter les données</a><ul>
<li><a href="#inspection-visuelle">Inspection visuelle</a></li>
<li><a href="#structure-du-tableau">Structure du tableau</a></li>
<li><a href="#la-fonction-str">La fonction str</a></li>
<li><a href="#la-fonction-describe">La fonction describe</a></li>
<li><a href="#acceder-aux-variables">Accéder aux variables</a></li>
</ul></li>
</ul>
</div>

<div class="note">
Ce chapitre est inspiré de la section <em>Premier travail avec les données</em> du support de cours <a href="https://github.com/juba/intro-r">Introduction à R</a> réalisé par Julien Barnier.
</div>
<div id="regrouper-les-commandes-dans-des-scripts" class="section level2">
<h2>Regrouper les commandes dans des scripts</h2>
<p>Jusqu’à maintenant nous avons utilisé uniquement la console pour communiquer avec <strong>R</strong> via l’invite de commandes. Le principal problème de ce mode d’interaction est qu’une fois qu’une commande est tapée, elle est pour ainsi dire « perdue », c’est-à-dire qu’on doit la saisir à nouveau si on veut l’exécuter une seconde fois. L’utilisation de la console est donc restreinte aux petites commandes « jetables », le plus souvent utilisées comme test.</p>
<p>La plupart du temps, les commandes seront stockées dans un fichier à part, que l’on pourra facilement ouvrir, éditer et exécuter en tout ou partie si besoin. On appelle en général ce type de fichier un <dfn>script</dfn><dfn data-index="fichier de commandes"></dfn>.</p>
<p>Pour comprendre comment cela fonctionne, dans <strong>RStudio</strong> cliquez sur l’icône en haut à gauche représentant un fichier avec un signe plus vert, puis choisissez <em>R script</em>.</p>
<figure>
<img src="images/capture_RStudio_new_R_script.png" alt="Créer un nouveau script R dans RStudio" />
<figcaption>
Créer un nouveau script R dans RStudio
</figcaption>
</figure>
<p>Un nouvel onglet apparaît dans le quadrant supérieur gauche.</p>
<figure>
<img src="images/capture_RStudio_onglet_R_script.png" alt="Onglet d’un script R dans RStudio" />
<figcaption>
Onglet d’un script R dans RStudio
</figcaption>
</figure>
<p>Nous pouvons désormais y saisir des commandes. Par exemple, tapez sur la première ligne la commande suivante : <code>2 + 2</code>. Ensuite, cliquez sur l’icône <em>Run</em> (en haut à droite de l’onglet du script) ou bien pressez simulatément les touches <kbd>CTRL</kbd> et <kbd>Entrée</kbd><a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a>.</p>
<p>Les lignes suivantes ont dû faire leur apparition dans la console :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="dv">2</span> +<span class="st"> </span><span class="dv">2</span></code></pre>
<pre><code>[1] 4</code></pre>
<p>Voici donc comment soumettre rapidement à <strong>R</strong> les commandes saisies dans votre fichier. Vous pouvez désormais l’enregistrer, l’ouvrir plus tard, et en exécuter tout ou partie. À noter que vous avez plusieurs possibilités pour soumettre des commandes à <strong>R</strong> :</p>
<ul>
<li>vous pouvez exécuter la ligne sur laquelle se trouve votre curseur en cliquant sur <em>Run</em> ou en pressant simulatément les touches <kbd>CTRL</kbd> et <kbd>Entrée</kbd> ;</li>
<li>vous pouvez sélectionner plusieurs lignes contenant des commandes et les exécuter toutes en une seule fois exactement de la même manière ;</li>
<li>vous pouvez exécuter d’un coup l’intégralité de votre fichier en cliquant sur l’icône <em>Source</em>.</li>
</ul>
<p>La plupart du travail sous <strong>R</strong> consistera donc à éditer un ou plusieurs fichiers de commandes et à envoyer régulièrement les commandes saisies à <strong>R</strong> en utilisant les raccourcis clavier <em>ad hoc</em>.</p>
<p>Pour plus d’information sur l’utilisation des scripts <strong>R</strong> dans <strong>RStudio</strong>, voir (en anglais) : <a href="https://support.rstudio.com/hc/en-us/articles/200484448-Editing-and-Executing-Code" class="uri">https://support.rstudio.com/hc/en-us/articles/200484448-Editing-and-Executing-Code</a>.</p>
<div class="note">
Quand vous enregistrez un script sous <strong>RStudio</strong>, il est possible qu’il vous demande de choisir un type d’encodage des caractères (<em>Choose Encoding</em>). Si tel est le cas, utilisez de préférence <strong>UTF-8</strong>.
</div>
</div>
<div id="ajouter-des-commentaires" class="section level2">
<h2>Ajouter des commentaires</h2>
<p>Un <dfn>commentaire</dfn> est une ligne ou une portion de ligne qui sera ignorée par <strong>R</strong>. Ceci signifie qu’on peut y écrire ce qu’on veut et qu’on va les utiliser pour ajouter tout un tas de commentaires à notre code permettant de décrire les différentes étapes du travail, les choses à se rappeler, les questions en suspens, etc.</p>
<p>Un commentaire sous <strong>R</strong> commence par un ou plusieurs symboles <code>#</code> (qui s’obtient avec les touches <kbd>Alt Gr</kbd> et <kbd>3</kbd> sur les claviers de type PC). Tout ce qui suit ce symbole jusqu’à la fin de la ligne est considéré comme un commentaire. On peut créer une ligne entière de commentaire en la faisant débuter par <code>##</code>. Par exemple :</p>
<pre class="sourceCode r"><code class="sourceCode r">## Tableau croisé de la CSP par le nombre de livres
## lus.  Attention au nombre de non réponses !</code></pre>
<p>On peut aussi créer des commentaires pour une ligne en cours :</p>
<pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span><span class="dv">2</span>  <span class="co"># On met 2 dans x, parce qu&#39;il le vaut bien</span></code></pre>
<div class="important">
Dans tous les cas, il est très important de documenter ses fichiers <strong>R</strong> au fur et à mesure, faute de quoi on risque de ne plus y comprendre grand chose si on les reprend ne serait-ce que quelques semaines plus tard.
</div>
<p>Avec <strong>RStudio</strong>, vous pouvez également utiliser les commentaires pour créer des <dfn data-index="section">sections</dfn> au sein de votre script et naviguer plus rapidement. Il suffit de faire suivre une ligne de commentaires d’au moins 4 signes moins (<code>----</code>). Par exemple, si vous saisissez ceci dans votre script :</p>
<pre class="sourceCode r"><code class="sourceCode r">## Créer les objets ----

x &lt;-<span class="st"> </span><span class="dv">2</span>
y &lt;-<span class="st"> </span><span class="dv">5</span>

## Calculs ----

x +<span class="st"> </span>y</code></pre>
<p>Vous verrez apparaître en bas à gauche de la fenêtre du script un symbole dièse orange. Si vous cliquez dessus, un menu de navigation s’affichera vous permettant de vous déplacez rapidement au sein de votre script. Pour plus d’information, voir la documentation de <strong>RStudio</strong> (en anglais) : <a href="https://support.rstudio.com/hc/en-us/articles/200484568-Code-Folding-and-Sections" class="uri">https://support.rstudio.com/hc/en-us/articles/200484568-Code-Folding-and-Sections</a>.</p>
<figure>
<img src="images/capture_RStudio_navigation_script.png" alt="Navigation rapide dans les scripts sous RStudio" />
<figcaption>
Navigation rapide dans les scripts sous RStudio
</figcaption>
</figure>
<p>Note : on remarquera au passage que le titre de l’onglet est affiché en rouge et suivi d’une astérisque (<code>*</code>), nous indiquant ainsi qu’il y a des modifications non enregistrées dans notre fichier.</p>
</div>
<div id="tableaux-de-donnees" class="section level2">
<h2>Tableaux de données</h2>
<p>Dans cette partie nous allons utiliser un jeu de données comprenant les résultats d’une enquête du type EDS (Enquête Démographie et de Santé). Il est composé de trois <dfn data-index="tableau de donnée">tableaux de données</dfn> :</p>
<ul>
<li>une table <code>ménages</code> comportant quelques données sur les ménages sélectionnés pour l’enquête ;</li>
<li>une table <code>femmes</code> comportant les données du questionnaire administré à toutes les femmes adultes (15-49 ans) habitant dans les ménages sélectionnés ;</li>
<li>et une table <code>enfants</code> comportant des informations sur l’ensemble des naissances vivantes des femmes enquêtées.</li>
</ul>
<p>Pour charger ces données en mémoire, on utilisera la commande suivante :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">load</span>(<span class="kw">url</span>(<span class="st">&quot;http://larmarange.github.io/analyse-R/data/enquete_menages.Rdata&quot;</span>))</code></pre>
<p>Bien. Et maintenant, elles sont où mes données ? Et bien elles se trouvent dans trois objets nommés <code>menages</code>, <code>femmes</code> et <code>enfants</code>, désormais chargé en mémoire et accessible directement. D’ailleurs, ces objets sont maintenant visibles dans l’onglet <em>Environment</em> du quadrant supérieur droit.</p>
<p>Intéressons nous plus spécifiquement à l’objet <code>femmes</code>. Essayons de taper son nom à l’invite de commande :</p>
<pre class="sourceCode r"><code class="sourceCode r">femmes</code></pre>
<p>Le résultat (non reproduit ici) ne ressemble pas forcément à grand-chose… Il faut se rappeler que par défaut, lorsqu’on lui fournit seulement un nom d’objet, <strong>R</strong> essaye de l’afficher de la manière la meilleure (ou la moins pire) possible. La réponse à la commande <code>femmes</code> n’est donc rien moins que l’affichage des données brutes contenues dans cet objet.</p>
<p>Ce qui signifie donc que l’intégralité du questionnaire femmes est inclus dans l’objet nommé <code>femmes</code> ! En effet, dans <strong>R</strong>, un objet peut très bien contenir un simple nombre, un vecteur ou bien le résultat d’une enquête tout entière. Dans ce cas, les objets sont appelés des <dfn data-index="data frame" lang="en">data frames</dfn>, ou <dfn data-index="tableau de donnée">tableaux de données</dfn>. Ce type d’objet ressemble aux fichiers de données que l’on a l’habitude de manipuler avec <strong>SPSS</strong>, <strong>Stat</strong>, <strong>SAS</strong> ou encore <strong>Excel</strong>. Ils sont organisés en lignes et en colonnes, chaque colonne correspondant à une <dfn>variable</dfn> et chaque ligne à une <dfn>observation</dfn>.</p>
<p>Les tableaux de données peuvent être manipulés comme tout autre objet. Par exemple :</p>
<pre class="sourceCode r"><code class="sourceCode r">d &lt;-<span class="st"> </span>femmes</code></pre>
<p>va entraîner la copie de l’ensemble de nos données dans un nouvel objet nommé <code>d</code>, ce qui peut paraître parfaitement inutile mais a en fait l’avantage de fournir un objet avec un nom beaucoup plus court, ce qui diminuera la quantité de texte à saisir par la suite.</p>
</div>
<div id="inspecter" class="section level2">
<h2>Inspecter les données</h2>
<div id="inspection-visuelle" class="section level3">
<h3>Inspection visuelle</h3>
<p>La particularité de <strong>R</strong> par rapport à d’autres logiciels comme <strong>Modalisa</strong> ou <strong>SPSS</strong> est de ne pas proposer, par défaut, de vue des données sous forme de tableau. Ceci peut parfois être un peu déstabilisant dans les premiers temps d’utilisation, même si l’on perd vite l’habitude et qu’on finit par se rendre compte que « voir » les données n’est pas forcément un gage de productivité ou de rigueur dans le traitement.</p>
<p>Néanmoins, <strong>R</strong> propose une interface permettant de visualiser le contenu d’un tableau de données à l’aide de la fonction <code data-pkg="utils">View</code> :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">View</span>(d)</code></pre>
<p>Sous <strong>RStudio</strong>, on peut aussi afficher la <dfn>visionneusee</dfn> (<dfn lang="en">viewer</dfn>) en cliquant sur la petite icône en forme de tableau située à droite de la ligne d’un tableau de données dans l’onglet <em>Environment</em> du quadrant supérieur droit (cf. figure ci-après).</p>
<figure>
<img src="images/capture_RStudio_icone_viewer.png" alt="Icône pour afficher une vue du contenu d’un tableau" />
<figcaption>
Icône pour afficher une vue du contenu d’un tableau
</figcaption>
</figure>
<p>Dans tous les cas, <strong>RStudio</strong> lancera le <em>viewer</em> dans un onglet dédié dans le quadrant supérieur gauche. Le visualiseur de <strong>RStudio</strong> est plus avancé que celui-de base fournit par <strong>R</strong>. Il est possible de trier les données selon une variable en cliquant sur le nom de cette dernière. Il y a également un champs de recherche et un bouton <em>Filter</em> donnant accès à des options de filtrage avancées.</p>
<figure>
<img src="images/capture_RStudio_data_viewer.png" alt="La visionneuse de données de RStudio" />
<figcaption>
La visionneuse de données de RStudio
</figcaption>
</figure>
</div>
<div id="structure-du-tableau" class="section level3">
<h3>Structure du tableau</h3>
<p>Avant de travailler sur les données, nous allons essayer de comprendre comment elles sont structurées. Lors de l’import de données depuis un autre logiciel (que nous aborderons dans un autre <a href="pem_import_export.html">chapitre</a>), il s’agira souvent de vérifier que l’importation s’est bien déroulée.</p>
<p>Nous avons déjà vu qu’un tableau de données est organisé en lignes et en colonnes, les lignes correspondant aux <dfn data-index="observation">observations</dfn> et les colonnes aux <dfn data-index="variable">variables</dfn>. Les fonctions <code data-pkg="base">nrow</code>, <code data-pkg="base" data-rdoc="nrow">ncol</code> et <code data-pkg="base">dim</code> donnent respectivement le nombre de lignes, le nombre de colonnes et les dimensions de notre tableau. Nous pouvons donc d’ores et déjà vérifier que nous avons bien 2000 lignes et 17 colonnes :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">nrow</span>(d)</code></pre>
<pre><code>[1] 2000</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">ncol</span>(d)</code></pre>
<pre><code>[1] 17</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(d)</code></pre>
<pre><code>[1] 2000   17</code></pre>
<p>La fonction <code data-pkg="base">names</code> donne les noms des colonnes de notre tableau, c’est-à-dire les noms des variables :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">names</span>(d)</code></pre>
<pre><code> [1] &quot;id_femme&quot;       &quot;id_menage&quot;     
 [3] &quot;poids&quot;          &quot;date_entretien&quot;
 [5] &quot;date_naissance&quot; &quot;age&quot;           
 [7] &quot;milieu&quot;         &quot;region&quot;        
 [9] &quot;educ&quot;           &quot;travail&quot;       
[11] &quot;matri&quot;          &quot;religion&quot;      
[13] &quot;journal&quot;        &quot;radio&quot;         
[15] &quot;tv&quot;             &quot;nb_enf_ideal&quot;  
[17] &quot;test&quot;          </code></pre>
<p>Lorsque les données ont été importées depuis <strong>SPSS</strong>, <strong>Stata</strong> ou <strong>SAS</strong>, ont pu également être importées des <dfn data-index="métadonnée">métadonnées</dfn> à propos de nos variables, telles que des <dfn data-index="étiquette de variable">étiquettes de variable</dfn><dfn data-index="variable, étiquette"></dfn>, c’est-à-dire un nom long décrivant la variable. Notre tableau de données <code>femmes</code> contient justement de telles informations. Si vous vous souvenez bien, ces étiquettes étaient même affichées dans le <em>viewer</em> de <strong>RStudio</strong><a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a>.</p>
<p>Pour afficher les étiquettes de variables, on pourra utiliser la fonction <code data-pkg="questionr">lookfor</code> de l’extension <code class="pkg">questionr</code>. Les <dfn data-index="extension">extensions</dfn>, ou <dfn data-index="package" lang="en">packages</dfn> en anglais, permettent d’étendre <strong>R</strong> en lui ajoutant de nombreuses fonctionnalités. Pour accéder aux fonctions d’une extension, deux étapes sont nécessaires :</p>
<ol style="list-style-type: decimal">
<li>Tout d’abord l’extension doit avoir été installée sur votre ordinateur. Pour le vérifier, vous pouvez regarder si l’extension qui vous intéresse est listée dans l’onglet <em>Packages</em> dans le quadrant inférieur droit. Si ce n’est pas le cas, cliquez sur le bouton <em>Install</em> de l’onglet <em>Packages</em>. Pour plus de détails, vous pouvez vous référer au chapitre <a href="pem_presentation_installation.html#installer_extensions">Présentation et Installation</a>.</li>
<li>Si l’extension désirée est bien installée, il est encore nécessaire de la charger en mémoire pour avoir accès aux fonctions qu’elle propose. Pour cela, on aura recours à la fonction <code data-pkg="base">library</code>.</li>
</ol>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)</code></pre>
<div class="important">
<p>Il est nécessaire de charger en mémoire les extensions requises au début de chaque session de travail. Dès lors, plutôt que d’éparpiller les appels à <code data-pkg="base">library</code> dans vos scripts, de les regrouper au début de ces derniers.</p>
<p>On pourra noter qu’il n’est pas nécessaire d’entourer le nom d’une extension avec des guillemets lors d’un appel à <code data-pkg="base">library</code>. Les deux syntaxes suivantes sont donc équivalentes.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(questionr)
<span class="kw">library</span>(<span class="st">&quot;questionr&quot;</span>)</code></pre>
</div>
<p>Maintenant que l’extension <code class="pkg">questionr</code> est chargée en mémoire, nous pouvons appeler la fonction <code data-pkg="questionr">lookfor</code> :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">lookfor</span>(d)</code></pre>
<pre><code>         variable
1        id_femme
2       id_menage
3           poids
4  date_entretien
5  date_naissance
6             age
7          milieu
8          region
9            educ
10        travail
11          matri
12       religion
13        journal
14          radio
15             tv
16   nb_enf_ideal
17           test
                                                            label
1                                       Identifiant de l&#39;enquêtée
2                                           Identifiant du ménage
3                                               Poids statistique
4                              Date de passation du questionnaire
5                                               Date de naissance
6  Âge révolu (en années) à la date de passation du questionnaire
7                                             Milieu de résidence
8                                             Région de résidence
9                                              Niveau d&#39;éducation
10                                                  A un emploi ?
11                                             Statut matrimonial
12                                                       Religion
13                                                Lit la presse ?
14                                              Ecoute la radio ?
15                                        Regarde la télévision ?
16                                         Nombre idéal d&#39;enfants
17                      A déjà fait un test de dépistage du VIH ?</code></pre>
<p>Lorsque l’on a un gros tableau de données avec de nombreuses variables, il peut être difficile de retrouver la ou les variables d’intérêt. Il est possible d’indiquer à <code data-pkg="questionr">lookfor</code> un mot-clé pour limiter la recherche. Par exemple :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">lookfor</span>(d, <span class="st">&quot;date&quot;</span>)</code></pre>
<pre><code>        variable
4 date_entretien
5 date_naissance
6            age
                                                           label
4                             Date de passation du questionnaire
5                                              Date de naissance
6 Âge révolu (en années) à la date de passation du questionnaire</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">lookfor</span>(d, <span class="st">&quot;re&quot;</span>)</code></pre>
<pre><code>         variable
4  date_entretien
6             age
8          region
12       religion
13        journal
15             tv
16   nb_enf_ideal
                                                            label
4                              Date de passation du questionnaire
6  Âge révolu (en années) à la date de passation du questionnaire
8                                             Région de résidence
12                                                       Religion
13                                                Lit la presse ?
15                                        Regarde la télévision ?
16                                         Nombre idéal d&#39;enfants</code></pre>
<p>Il est à noter que si la recherche n’est pas sensible à la casse (i.e. aux majuscules et aux minuscules), elle est sensible aux accents.</p>
<p>Tous les tableaux de données ne contiennent pas forcément des métadonnées telles que les étiquettes de variables. C’est le cas par exemple du tableau <code>iris</code>. <code>iris</code> est un tableau de données directement accessibles dans <strong>R</strong> et souvent utilisé pour les exemples de la documentation. Il contient les dimensions des sépales et des pétales de plusieurs espères d’iris<a href="#fn3" class="footnoteRef" id="fnref3"><sup>3</sup></a>. Ce tableau de données ne contient pas de métadonnées. Dans le cas là, la fonction <code data-pkg="questionr">lookfor</code>ne renverra que les noms des variables :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">lookfor</span>(iris)</code></pre>
<pre><code>      variable
1 Sepal.Length
2  Sepal.Width
3 Petal.Length
4  Petal.Width
5      Species</code></pre>
</div>
<div id="la-fonction-str" class="section level3">
<h3>La fonction str</h3>
<p>La fonction <code data-pkg="utils">str</code> est plus complète. Elle liste les différentes variables, indique leur type et donne le cas échéant des informations supplémentaires ainsi qu’un échantillon des premières valeurs prises par cette variable :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(iris)</code></pre>
<pre><code>&#39;data.frame&#39;:   150 obs. of  5 variables:
 $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
 $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
 $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
 $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
 $ Species     : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
<p>La première ligne nous informe qu’il s’agit bien d’un tableau de données avec 150 observations et 5 variables. Vient ensuite la liste des variables. Les quatre premières sont de type <dfn data-index="numérique, variable">numérique</dfn><dfn data-index="variable numérique"></dfn><dfn data-index="numeric" lang="en"></dfn>. La cinquième se nomme <var>Species</var> et il s’agit d’un <dfn>facteur</dfn> (<dfn lang="en">factor</dfn>).</p>
<p>Un facteur est une variable pouvant prendre un nombre limité de <dfn data-index="modalité, facteur">modalités</dfn> (<dfn data-index="level, factor" lang="en">levels</dfn>). Ici notre variable a trois modalités possibles : « setosa », « versicolor » et « virginica ». Ce type de variable sera décrit plus en détail dans le chapitre sur la <a href="pem_manipulation.html#variables">manipulation de données</a>.</p>
<p>Appliquons maintenant la fonction <code data-pkg="utils">str</code> à notre objet <code>d</code>.</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(d)</code></pre>
<pre><code>Classes &#39;tbl_df&#39;, &#39;tbl&#39; and &#39;data.frame&#39;:   2000 obs. of  17 variables:
 $ id_femme      : atomic  391 1643 85 881 1981 1072 1978 1607 738 1656 ...
  ..- attr(*, &quot;label&quot;)= chr &quot;Identifiant de l&#39;enquêtée&quot;
 $ id_menage     : atomic  381 1515 85 844 1797 1015 1794 1486 711 1525 ...
  ..- attr(*, &quot;label&quot;)= chr &quot;Identifiant du ménage&quot;
 $ poids         : atomic  1.8 1.8 1.8 1.8 1.8 ...
  ..- attr(*, &quot;label&quot;)= chr &quot;Poids statistique&quot;
 $ date_entretien: Date, format:  ...
 $ date_naissance: Date, format:  ...
 $ age           : atomic  15 30 33 43 25 18 45 23 49 31 ...
  ..- attr(*, &quot;label&quot;)= chr &quot;Âge révolu (en années) à la date de passation du questionnaire&quot;
 $ milieu        :Class &#39;labelled&#39;  atomic [1:2000] 2 2 2 2 2 2 2 2 2 2 ...
  .. ..- attr(*, &quot;label&quot;)= chr &quot;Milieu de résidence&quot;
  .. ..- attr(*, &quot;labels&quot;)= Named num [1:2] 1 2
  .. .. ..- attr(*, &quot;names&quot;)= chr [1:2] &quot;urbain&quot; &quot;rural&quot;
  .. ..- attr(*, &quot;is_na&quot;)= logi [1:2] FALSE FALSE
 $ region        :Class &#39;labelled&#39;  atomic [1:2000] 4 4 4 4 4 3 3 3 3 3 ...
  .. ..- attr(*, &quot;labels&quot;)= Named num [1:4] 1 2 3 4
  .. .. ..- attr(*, &quot;names&quot;)= chr [1:4] &quot;Nord&quot; &quot;Est&quot; &quot;Sud&quot; &quot;Ouest&quot;
  .. ..- attr(*, &quot;is_na&quot;)= logi [1:4] FALSE FALSE FALSE FALSE
  .. ..- attr(*, &quot;label&quot;)= chr &quot;Région de résidence&quot;
 $ educ          :Class &#39;labelled&#39;  atomic [1:2000] 0 0 0 0 1 0 0 0 0 0 ...
  .. ..- attr(*, &quot;label&quot;)= chr &quot;Niveau d&#39;éducation&quot;
  .. ..- attr(*, &quot;labels&quot;)= Named num [1:4] 0 1 2 3
  .. .. ..- attr(*, &quot;names&quot;)= chr [1:4] &quot;aucun&quot; &quot;primaire&quot; &quot;secondaire&quot; &quot;supérieur&quot;
  .. ..- attr(*, &quot;is_na&quot;)= logi [1:4] FALSE FALSE FALSE FALSE
 $ travail       :Class &#39;labelled&#39;  atomic [1:2000] 1 1 0 1 1 0 1 0 1 1 ...
  .. ..- attr(*, &quot;label&quot;)= chr &quot;A un emploi ?&quot;
  .. ..- attr(*, &quot;labels&quot;)= Named num [1:2] 0 1
  .. .. ..- attr(*, &quot;names&quot;)= chr [1:2] &quot;non&quot; &quot;oui&quot;
  .. ..- attr(*, &quot;is_na&quot;)= logi [1:2] FALSE FALSE
 $ matri         :Class &#39;labelled&#39;  atomic [1:2000] 0 2 2 2 1 0 1 1 2 5 ...
  .. ..- attr(*, &quot;label&quot;)= chr &quot;Statut matrimonial&quot;
  .. ..- attr(*, &quot;labels&quot;)= Named num [1:6] 0 1 2 3 4 5
  .. .. ..- attr(*, &quot;names&quot;)= chr [1:6] &quot;célibataire&quot; &quot;mariée&quot; &quot;en concubinage&quot; &quot;veuve&quot; ...
  .. ..- attr(*, &quot;is_na&quot;)= logi [1:6] FALSE FALSE FALSE FALSE FALSE FALSE
 $ religion      :Class &#39;labelled&#39;  atomic [1:2000] 1 3 2 3 2 2 3 1 3 3 ...
  .. ..- attr(*, &quot;labels&quot;)= Named num [1:5] 1 2 3 4 5
  .. .. ..- attr(*, &quot;names&quot;)= chr [1:5] &quot;musulmane&quot; &quot;chrétienne&quot; &quot;protestante&quot; &quot;sans religion&quot; ...
  .. ..- attr(*, &quot;is_na&quot;)= logi [1:5] FALSE FALSE FALSE FALSE FALSE
  .. ..- attr(*, &quot;label&quot;)= chr &quot;Religion&quot;
 $ journal       :Class &#39;labelled&#39;  atomic [1:2000] 0 0 0 0 0 0 0 0 0 0 ...
  .. ..- attr(*, &quot;labels&quot;)= Named num [1:2] 0 1
  .. .. ..- attr(*, &quot;names&quot;)= chr [1:2] &quot;non&quot; &quot;oui&quot;
  .. ..- attr(*, &quot;is_na&quot;)= logi [1:2] FALSE FALSE
  .. ..- attr(*, &quot;label&quot;)= chr &quot;Lit la presse ?&quot;
 $ radio         :Class &#39;labelled&#39;  atomic [1:2000] 0 1 1 0 0 1 1 0 0 0 ...
  .. ..- attr(*, &quot;labels&quot;)= Named num [1:2] 0 1
  .. .. ..- attr(*, &quot;names&quot;)= chr [1:2] &quot;non&quot; &quot;oui&quot;
  .. ..- attr(*, &quot;is_na&quot;)= logi [1:2] FALSE FALSE
  .. ..- attr(*, &quot;label&quot;)= chr &quot;Ecoute la radio ?&quot;
 $ tv            :Class &#39;labelled&#39;  atomic [1:2000] 0 0 0 0 0 1 0 0 0 0 ...
  .. ..- attr(*, &quot;labels&quot;)= Named num [1:2] 0 1
  .. .. ..- attr(*, &quot;names&quot;)= chr [1:2] &quot;non&quot; &quot;oui&quot;
  .. ..- attr(*, &quot;is_na&quot;)= logi [1:2] FALSE FALSE
  .. ..- attr(*, &quot;label&quot;)= chr &quot;Regarde la télévision ?&quot;
 $ nb_enf_ideal  :Class &#39;labelled&#39;  atomic [1:2000] 4 4 4 4 4 5 10 5 4 5 ...
  .. ..- attr(*, &quot;label&quot;)= chr &quot;Nombre idéal d&#39;enfants&quot;
  .. ..- attr(*, &quot;labels&quot;)= Named num 96
  .. .. ..- attr(*, &quot;names&quot;)= chr &quot;Ne sait pas&quot;
  .. ..- attr(*, &quot;is_na&quot;)= logi FALSE
 $ test          :Class &#39;labelled&#39;  atomic [1:2000] 0 9 0 0 1 0 0 0 0 1 ...
  .. ..- attr(*, &quot;label&quot;)= chr &quot;A déjà fait un test de dépistage du VIH ?&quot;
  .. ..- attr(*, &quot;labels&quot;)= Named num [1:2] 0 1
  .. .. ..- attr(*, &quot;names&quot;)= chr [1:2] &quot;non&quot; &quot;oui&quot;
  .. ..- attr(*, &quot;is_na&quot;)= logi [1:2] FALSE FALSE
 - attr(*, &quot;.internal.selfref&quot;)=&lt;externalptr&gt; </code></pre>
<p>Le résultat est à première vue un peu plus compliqué. C’est dû au fait que nos données ont été importées depuis <strong>SPSS</strong> avec <code class="pkg">haven</code> et contiennent dès lors des méta-données, telles que des étiquettes de variables et des étiquettes de valeurs.</p>
<p>Que peut-on lire ?</p>
<ul>
<li>Tout d’abord notre objet a trois <dfn data-index="classe, objet">classes</dfn>. Il s’agit bien d’un tableau de données (<code>data.frame</code>) mais il a été « étendu » avec les classes <code>tbl_df</code> et <code>tbl</code>. À ce stade, cela nous importe peu. Disons juste que cela nous donnera accès à des fonctionnalités supplémentaires lorsqu’on nous aborderons l’extension <code class="pkg">dplyr</code> dans le chapitre sur la <a href="pem_manipulation.html">manipulation de données</a>.</li>
<li>Notre tableau de données contient 2000 observations et 17 variables.</li>
<li>Les trois premières variables s’appellent respectivement <var>id_femme</var>, <var>id_menage</var> et <var>poids</var>. Il est facile de les identifier car leur nom est précédé du symbole <code>$</code>. Nous avons également un aperçu des premières valeurs prises par ces variables, nous indiquant qu’elles sont de type numérique.</li>
<li>Les lignes commençant par <code>..- attr</code> correspondent à des <dfn data-index="attribut, objet">attributs</dfn>, c’est-à-dire à des méta-données sur ces variables, en l’occurence les étiquettes de variable.</li>
<li>La quatrième et la cinquième variable (respectivement <var>date_entretien</var> et <var>date_naissance</var>) de type <code>Date</code>.</li>
<li>etc.</li>
</ul>
<div class="important">
La fonction <code data-pkg="utils">str</code> est essentielle à connaître et peut s’appliquer à n’importe quel type d’objet. C’est un excellent moyen de connaître en détail la <dfn>structure d’un objet</dfn>. Cependant, les résultats peuvent être parfois trop détaillés et on lui priviligiera dans certains cas la fonction <code data-pkg="questionr">describe</code>, cependant moins générique puisque ne s’appliquant qu’à des tableaux de données et à des vecteurs, tandis que <code data-pkg="utils">str</code> peut s’appliquer à absolument <strong>tout</strong> objet, y compris des fonctions.
</div>
</div>
<div id="la-fonction-describe" class="section level3">
<h3>La fonction describe</h3>
<p>Cette section sera développée ultérieurement, suite aux discussions sur <a href="https://github.com/juba/questionr/issues/53" class="uri">https://github.com/juba/questionr/issues/53</a>.</p>
</div>
<div id="acceder-aux-variables" class="section level3">
<h3>Accéder aux variables</h3>
<p><code>d</code> représente donc l’ensemble de notre tableau de données. Nous avons vu que si l’on saisit simplement <code>d</code> à l’invite de commandes, on obtient un affichage du tableau en question. Mais comment accéder aux variables, c’est à dire aux colonnes de notre tableau ?</p>
<p>La réponse est simple : on utilise le nom de l’objet, suivi de l’opérateur <code data-pkg="base" data-rdoc="Extract">$</code>, suivi du nom de la variable, comme ceci :</p>
<pre class="sourceCode r"><code class="sourceCode r">d$age</code></pre>
<p>Au regard du résultat (non reproduit ici), on constate alors que <strong>R</strong> a bien accédé au contenu de notre variable <em>sexe</em> du tableau <code>d</code> et a affiché son contenu, c’est-à-dire l’ensemble des valeurs prises par la variable.</p>
<p>Les fonctions <code data-pkg="utils">head</code> et <code data-pkg="utils" data-rdoc="head">tail</code> permettent d’afficher seulement les premières (respectivement les dernières) valeurs prises par la variable. On peut leur passer en argument le nombre d’éléments à afficher :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(d$date_naissance)</code></pre>
<pre><code>[1] &quot;1997-03-07&quot; &quot;1982-01-06&quot; &quot;1979-01-01&quot;
[4] &quot;1968-03-29&quot; &quot;1986-05-25&quot; &quot;1993-07-03&quot;</code></pre>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">tail</span>(d$age, <span class="dv">10</span>)</code></pre>
<pre><code> [1] 38 47 23 25 15 19 45 23 47 21</code></pre>
<p>À noter que ces fonctions marchent aussi pour afficher les lignes du tableau <code>d</code> :</p>
<pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(d, <span class="dv">2</span>)</code></pre>
<pre><code>  id_femme id_menage   poids date_entretien
1      391       381 1.80315     2012-05-05
2     1643      1515 1.80315     2012-01-23
  date_naissance age milieu region educ travail
1     1997-03-07  15      2      4    0       1
2     1982-01-06  30      2      4    0       1
  matri religion journal radio tv nb_enf_ideal
1     0        1       0     0  0            4
2     2        3       0     1  0            4
  test
1    0
2    9</code></pre>
</div>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>Sous <strong>Mac OS X</strong>, on utilise les touches <kbd>Pomme</kbd> et <kbd>Entrée</kbd>.<a href="#fnref1">↩</a></p></li>
<li id="fn2"><p>Il faut noter que la manière dont les méta-données sont stockées sous <strong>R</strong> dépend de l’extension utilisée pour les importer. Le <em>viewer</em> de <strong>RStudio</strong> ne reconnait les étiquettes de variables que si les données ont été importées avec l’extension <code class="pkg">haven</code>. Nous y reviendrons dans le cadre du chapitre sur l’<a href="pem_import_export.html">importation de données</a>.<a href="#fnref2">↩</a></p></li>
<li id="fn3"><p>Pour plus d’information, tapez la commande <code>?iris</code>.<a href="#fnref3">↩</a></p></li>
</ol>
</div>

</article>
</div>

<div class="col-sm-3" role="complementary">
<nav class="hidden-print hidden-xs" id="nav_sidebar">
</nav>
</div>

</div>

<script>
// manage active state of menu based on current page
$(document).ready(function () {

    // active menu
    href = window.location.pathname;
    href = href.substr(href.lastIndexOf('/') + 1);
    if (href=='') href = 'index.html';
    $('a[href="' + href + '"]').parent().addClass('active');

    // manage active menu header
    if (href.startsWith('pem_'))
      $('a[href="' + 'pem' + '"]').parent().addClass('active');
    else if (href.startsWith('analyses_'))
      $('a[href="' + 'analyses' + '"]').parent().addClass('active');
    else if (href.startsWith('extra_'))
      $('a[href="' + 'extra' + '"]').parent().addClass('active');
    else if (href.startsWith('index_'))
      $('a[href="' + 'index' + '"]').parent().addClass('active');

    // élargir la page d'accueil
    if (href=='index.html') $('.col-sm-9').attr('class','col-sm-12');

    // sidebar
    $("#nav_sidebar").append($("#TOC").html());
    $("#nav_sidebar ul").addClass("nav nav-stacked");
    $("#TOC").addClass("visible-xs-block");
    $('body').scrollspy({
      target: '#nav_sidebar',
      offset: 40
    });

    // Identifier les <pre> fermant
    $('pre').next("*:not(pre)").prev().addClass('last'); // Dernier <pre> de chaque groupe contigu de <pre>
    $('pre').parent().each(function (){
      $(this).children('pre').last().addClass('last');
    }); // Si <pre> est le dernier enfant de son parent

    // Ajout liens rdocumentation et tooltip
    $("code[data-pkg]").each(function( index ) {
      pkg = $(this).attr('data-pkg');
      if ($(this).attr('data-rdoc') !== undefined) {
        rdocumentation = $(this).attr('data-rdoc');
      } else {
        rdocumentation = $(this).text();
      }
      fonction = $(this).text();
      $(this).wrap('<a href="http://www.rdocumentation.org/packages/'+pkg+'/functions/'+rdocumentation+'">');
      $(this).attr('data-toggle','tooltip');
      $(this).attr('data-placement','top');
      $(this).attr('title','package : ' + pkg);
      $('[data-toggle="tooltip"]').tooltip();
    });

    $("code.pkg").each(function( index ) {
      $(this).wrap('<a href="http://www.rdocumentation.org/packages/'+$(this).text()+'">');
    });

    // Figures
    $("figure").each(function( index ) {
      if ($(this).children("figcaption").length > 0)
        $(this).children("figcaption:first").prepend('<span class="figure-number">Figure '+(index+1)+'.</span> ');
      else
        $(this).append($("<figcaption>").append('<span class="figure-number">Figure '+(index+1)+'</span>'));
    });

    // Colorbox
    jQuery('div img').colorbox({
      maxWidth: '90%',
      maxHeight: '90%',
      rel: 'figures',
      current: "",
      href: function(){
        return $(this).attr('src');
      },
      title: function(){
        return $(this).attr('alt');
      }
    });
    jQuery('div img').css('cursor', 'pointer');
    jQuery('figure img').colorbox({
      maxWidth: '90%',
      maxHeight: '90%',
      rel: 'figures',
      current: "",
      href: function(){
        return $(this).attr('src');
      },
      title: function(){
        return $(this).parent().children("figcaption").text();
      }
    });
    jQuery('figure img').css('cursor', 'pointer');

    // ZeroClipboard
    $('pre.r').parent().each(function(){
      $(this).children('pre.r').first().before('<div class="zero-clipboard hidden-print hidden-xs"><button class="btn-clipboard">Copier</button></div>');
    }); // Il peut arriver que le pre ne soit pas précédé (cf. figures)
    $('*:not(pre):not(.zero-clipboard) + pre.r').before('<div class="zero-clipboard hidden-print hidden-xs"><button class="btn-clipboard">Copier</button></div>');
    $('pre.last').after(function() {
      if ($(this).hasClass("r")) res = $(this).text(); else res = "";
      $(this).prevUntil('*:not(pre)','pre.r').each(function() {
        res = $(this).text() + '\n' + res;
      });
      return '<div class="clipboard">' + res + '</div>';
    });
    $('.zero-clipboard').each(function(index){
      $(this).children('.btn-clipboard').attr('data-clipboard-target','clipboard_'+index);
      $(this).nextAll("div.clipboard").first().attr('id','clipboard_'+index);
    });
    var client = new ZeroClipboard( $(".btn-clipboard") );
    client.on( "ready", function( readyEvent ) {
      // alert( "ZeroClipboard SWF is ready!" );
      client.on( "aftercopy", function( event ) {
        // `this` === `client`
        // `event.target` === the element that was clicked
        //event.target.style.display = "none";
        $(event.target).parent().before('<div class="alert alert-success"><a href="#" class="close" data-dismiss="alert">&times;</a>Le code <strong>R</strong> de l’exemple a été copié dans le presse-papier.</div>');
      } );
    } );

});
</script>

<!-- disqus -->
<div class="row">
  <div id="disqus_thread" class="col-sm-9" role="complementary"></div>
</div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'analyse-r'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Veuillez activer JavaScript pour voir les <a href="http://disqus.com/?ref_noscript">les commentaires gérés avec Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">Les commentaires sont hébergés par <span class="logo-disqus">Disqus</span>.</a>

</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>


</body>
</html>
